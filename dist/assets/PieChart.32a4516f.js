import{_ as v,r as o,o as _,h as i,i as l,av as f,ak as m,al as y,k as h,q as w,a1 as g}from"./index.d8fece53.js";import{i as b}from"./index.743c4e9d.js";const z={class:"energy-pie-container"},C={key:0,class:"loading"},k={__name:"PieChart",setup(x){const c=[{name:"A\u680B\u7528\u7535",value:12e3,type:"electricity"},{name:"A\u680B\u7528\u6C34",value:500,type:"water"},{name:"B\u680B\u7528\u7535",value:9800,type:"electricity"},{name:"B\u680B\u7528\u6C34",value:450,type:"water"},{name:"C\u680B\u7528\u7535",value:7500,type:"electricity"},{name:"C\u680B\u7528\u6C34",value:380,type:"water"}],a=o(null),n=o(!0),r=o([...c]);let t=null;const u=e=>({title:{left:"center",textStyle:{color:"#333",fontSize:18}},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{bottom:20,left:"center",data:e.map(s=>s.name)},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4"],series:[{name:"\u80FD\u8017\u5206\u5E03",type:"pie",radius:["40%","70%"],center:["50%","45%"],avoidLabelOverlap:!0,label:{show:!0,formatter:`{b|{b}}
{c|{c}}`,rich:{b:{fontSize:12,lineHeight:20},c:{color:"#999",fontSize:10}}},data:e}]}),d=async()=>{try{const e=await w.get("/api/energy-consumption");r.value=e.data}catch(e){console.warn("\u4F7F\u7528\u9ED8\u8BA4\u6570\u636E:",e),r.value=[...c]}finally{n.value=!1}},p=()=>{if(!a.value)return;t=b(a.value),t.setOption(u(r.value));const e=()=>t.resize();window.addEventListener("resize",e),g(()=>{window.removeEventListener("resize",e),t.dispose()})};return _(async()=>{await d(),p()}),(e,s)=>(i(),l("div",z,[n.value?(i(),l("div",C,"\u6570\u636E\u52A0\u8F7D\u4E2D...")):f("",!0),m(h("div",{ref_key:"chart",ref:a,class:"chart"},null,512),[[y,!n.value]])]))}},D=v(k,[["__scopeId","data-v-a23af977"]]);export{D as default};

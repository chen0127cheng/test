import{_ as D,d as u,q as p,h as i,i as d,k as a,t as n,F as c,z as v,A as B,m as g,n as C,B as y,C as b,p as h}from"./index.d8fece53.js";const f={components:{TrendChart:u(()=>h(()=>import("./TrendChart.fa2a98fb.js"),["assets/TrendChart.fa2a98fb.js","assets/index.d8fece53.js","assets/index.ad01da36.css","assets/index.743c4e9d.js","assets/TrendChart.fa9b5239.css"])),"b-trend-chart":u(()=>h(()=>import("./B-TrendChart.2d191f77.js"),["assets/B-TrendChart.2d191f77.js","assets/index.d8fece53.js","assets/index.ad01da36.css","assets/index.743c4e9d.js","assets/B-TrendChart.113cb213.css"])),"c-trend-chart":u(()=>h(()=>import("./C-TrendChart.3492ba12.js"),["assets/C-TrendChart.3492ba12.js","assets/index.d8fece53.js","assets/index.ad01da36.css","assets/index.743c4e9d.js","assets/C-TrendChart.aa3ea670.css"])),PieChart:u(()=>h(()=>import("./PieChart.32a4516f.js"),["assets/PieChart.32a4516f.js","assets/index.d8fece53.js","assets/index.ad01da36.css","assets/index.743c4e9d.js","assets/PieChart.e2861deb.css"]))},data(){return{currentTime:"",activeBuilding:"A",buildings:[{id:"A",name:"A\u680B\u6559\u5B66\u697C"},{id:"B",name:"B\u680B\u6559\u5B66\u697C"},{id:"C",name:"C\u680B\u6559\u5B66\u697C"}],energyRanking:[{name:"A\u680B",value:3456.7,change:-1.3},{name:"B\u680B",value:2345.6,change:-23.3},{name:"C\u680B",value:1890.4,change:12.5}],deviceStatus:[{name:"\u7A7A\u8C03\u7CFB\u7EDF",rate:95},{name:"\u7167\u660E\u7CFB\u7EDF",rate:88},{name:"\u4F9B\u6C34\u7CFB\u7EDF",rate:92},{name:"\u7535\u68AF\u7CFB\u7EDF",rate:98}],realtimeUsage:[{name:"A\u680B",value:4.8,percent:75},{name:"B\u680B",value:3.2,percent:50},{name:"C\u680B",value:2.4,percent:38}],trendData:[],energyDistribution:[],apiDataCache:{}}},computed:{currentChartComponent(){return{A:"trend-chart",B:"b-trend-chart",C:"c-trend-chart"}[this.activeBuilding]},PieChartComponent(){return"PieChart"}},mounted(){this.updateTime(),setInterval(this.updateTime,1e3),this.fetchData()},methods:{updateTime(){const s=new Date;this.currentTime=s.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"long"})},switchBuilding(s){this.activeBuilding=s,this.fetchBuildingData(s)},async fetchData(){try{const s=this.apiDataCache["/api/trend"],t=this.apiDataCache["/api/distribution"];let l,o;s?l={data:s}:(l=await p.get("/api/trend"),this.apiDataCache["/api/trend"]=l.data),t?o={data:t}:(o=await p.get("/api/distribution"),this.apiDataCache["/api/distribution"]=o.data),this.trendData=l.data,this.energyDistribution=o.data}catch(s){console.error("\u6570\u636E\u83B7\u53D6\u5931\u8D25:",s)}},async fetchBuildingData(s){try{if(!this.apiDataCache[`/api/buildings/${s}`]){const l=await p.get(`/api/buildings/${s}`);this.apiDataCache[`/api/buildings/${s}`]=l.data}}catch(t){console.error("\u697C\u680B\u6570\u636E\u83B7\u53D6\u5931\u8D25:",t)}}}},k={class:"dashboard-container"},A={class:"header-bar"},T={class:"header-info"},w={class:"time"},E={class:"main-content"},P={class:"left-panel"},R={class:"building-selector"},L=["onClick"],S={class:"ranking"},V={class:"center-panel"},x={class:"chart-card"},z={class:"chart-card"},O={class:"right-panel"},I={class:"status-card"},N={class:"status-grid"},U={class:"progress"},F={class:"label"},M={class:"value"},q={class:"monitor-card"},j={class:"monitor-bars"},G={class:"building"},H={class:"bar-container"},J={class:"value"},K={class:"monitor-card"},Q={class:"monitor-bars"},W={class:"building"},X={class:"bar-container"},Y={class:"value"},Z={class:"footer"},$={class:"update-time"};function aa(s,t,l,o,r,_){return i(),d("div",k,[a("div",A,[t[1]||(t[1]=a("h1",null,"\u8282\u80FD\u51CF\u6392\u53EF\u89C6\u5316\u7535\u5B50\u770B\u677F",-1)),a("div",T,[t[0]||(t[0]=a("span",{class:"weather"},"\u5F53\u524D\u6E29\u5EA6\uFF1A22\u2103",-1)),a("span",w,n(r.currentTime),1)])]),a("div",E,[a("div",P,[a("div",R,[(i(!0),d(c,null,v(r.buildings,e=>(i(),d("button",{key:e.id,class:y({active:r.activeBuilding===e.id}),onClick:m=>_.switchBuilding(e.id)},n(e.name),11,L))),128))]),t[4]||(t[4]=B('<div class="basic-stats" data-v-aa77b322><div class="stat-item" data-v-aa77b322><h3 data-v-aa77b322>\u603B\u5EFA\u7B51\u9762\u79EF</h3><div class="stat-value" data-v-aa77b322>113,020 m\xB2</div><div class="sub-stats" data-v-aa77b322><span data-v-aa77b322>A\u680B\uFF1A45,670</span><span data-v-aa77b322>B\u680B\uFF1A38,900</span><span data-v-aa77b322>C\u680B\uFF1A28,450</span></div></div><div class="stat-item" data-v-aa77b322><h3 data-v-aa77b322>\u4EBA\u5747\u80FD\u8017\u6307\u6807</h3><div class="indicator-grid" data-v-aa77b322><div class="indicator-item" data-v-aa77b322><label data-v-aa77b322>\u7528\u7535</label><div class="value" data-v-aa77b322>2896.2 m\xB3</div></div><div class="indicator-item" data-v-aa77b322><label data-v-aa77b322>\u7528\u6C34</label><div class="value" data-v-aa77b322>14.69 \u4E07\u5428</div></div><div class="indicator-item" data-v-aa77b322><label data-v-aa77b322>\u80FD\u8017\u7387</label><div class="value" data-v-aa77b322>56.56%</div></div></div></div></div>',1)),a("div",S,[t[3]||(t[3]=a("h3",null,"\u6559\u5B66\u697C\u80FD\u8017\u6392\u540D",-1)),a("table",null,[t[2]||(t[2]=a("thead",null,[a("tr",null,[a("th",null,"\u6392\u540D"),a("th",null,"\u6559\u5B66\u697C"),a("th",null,"\u80FD\u8017\u6307\u6570"),a("th",null,"\u540C\u6BD4\u53D8\u5316")])],-1)),a("tbody",null,[(i(!0),d(c,null,v(r.energyRanking,(e,m)=>(i(),d("tr",{key:m},[a("td",null,n(m+1),1),a("td",null,n(e.name),1),a("td",null,n(e.value),1),a("td",{class:y(e.change>=0?"positive":"negative")},n(e.change)+"% ",3)]))),128))])])])]),a("div",V,[a("div",x,[t[5]||(t[5]=a("h3",null,"\u672C\u5468\u80FD\u8017\u8D8B\u52BF",-1)),(i(),g(C(_.currentChartComponent),{"chart-data":r.trendData},null,8,["chart-data"]))]),a("div",z,[t[6]||(t[6]=a("h3",null,"\u672C\u5468\u80FD\u8017\u7C7B\u578B\u5206\u5E03",-1)),(i(),g(C(_.PieChartComponent),{data:r.energyDistribution},null,8,["data"]))])]),a("div",O,[a("div",I,[t[7]||(t[7]=a("h3",null,"\u8BBE\u5907\u5728\u7EBF\u7387",-1)),a("div",N,[(i(!0),d(c,null,v(r.deviceStatus,e=>(i(),d("div",{key:e.name,class:"status-item"},[a("div",U,[a("div",{class:"progress-bar",style:b({width:e.rate+"%"})},null,4)]),a("div",F,n(e.name),1),a("div",M,n(e.rate)+"%",1)]))),128))])]),a("div",q,[t[8]||(t[8]=a("h3",null,"\u5B9E\u65F6\u7528\u7535\u76D1\u63A7",-1)),a("div",j,[(i(!0),d(c,null,v(r.realtimeUsage,e=>(i(),d("div",{key:e.name,class:"bar-item"},[a("div",G,n(e.name),1),a("div",H,[a("div",{class:"bar",style:b({width:e.percent+"%"})},null,4)]),a("div",J,n(e.value)+"\u4E07m\xB3/h",1)]))),128))])]),a("div",K,[t[9]||(t[9]=a("h3",null,"\u5B9E\u65F6\u7528\u6C34\u76D1\u63A7",-1)),a("div",Q,[(i(!0),d(c,null,v(r.realtimeUsage,e=>(i(),d("div",{key:e.name,class:"bar-item"},[a("div",W,n(e.name),1),a("div",X,[a("div",{class:"bar",style:b({width:e.percent+"%"})},null,4)]),a("div",Y,n(e.value)+"\u4E07\u5428/h",1)]))),128))])])])]),a("div",Z,[t[10]||(t[10]=a("div",{class:"data-source"},"\u6570\u636E\u6765\u6E90\uFF1A\u6821\u56ED\u80FD\u6E90\u7BA1\u7406\u7CFB\u7EDF",-1)),a("div",$,"\u6700\u540E\u66F4\u65B0\uFF1A"+n(r.currentTime),1)])])}const ea=D(f,[["render",aa],["__scopeId","data-v-aa77b322"]]);export{ea as default};

import{_,r as i,o as h,h as c,i as d,av as v,ak as m,al as x,k as g,q as b,a1 as w}from"./index.d8fece53.js";import{i as k,L as u}from"./index.743c4e9d.js";const S={class:"energy-trend-container"},B={key:0,class:"loading"},L={__name:"B-TrendChart",setup(z){const l={dates:["\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D","\u5468\u65E5"],electricity:[950,1100,1250,1420,1350,1180,1050],water:[65,72,85,92,88,78,68]},r=i(null),o=i(!0),n=i({...l});let t=null;const f=e=>({title:{text:"B\u6559\u5B66\u697C\u672C\u5468\u80FD\u8017\u8D8B\u52BF",left:"center",textStyle:{color:"#fff",fontSize:18}},tooltip:{trigger:"axis",formatter:function(s){return s[0].name+"<br/>"+s.map(a=>`<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${a.color};"></span>
            ${a.seriesName}: ${a.value}${a.seriesId==="electricity"?"kWh":"\u5428"}`).join("<br/>")}},legend:{top:30,data:["\u7528\u7535\u91CF","\u7528\u6C34\u91CF"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.dates},yAxis:[{type:"value",name:"\u7528\u7535\u91CF (kWh)",axisLine:{lineStyle:{color:"#9a60b4"}}},{type:"value",name:"\u7528\u6C34\u91CF (\u5428)",axisLine:{lineStyle:{color:"#fc8452"}}}],series:[{name:"\u7528\u7535\u91CF",type:"line",smooth:!0,data:e.electricity,yAxisIndex:0,itemStyle:{color:"#9a60b4"},areaStyle:{color:new u(0,0,0,1,[{offset:0,color:"#9a60b433"},{offset:1,color:"#9a60b410"}])}},{name:"\u7528\u6C34\u91CF",type:"line",smooth:!0,data:e.water,yAxisIndex:1,itemStyle:{color:"#fc8452"},areaStyle:{color:new u(0,0,0,1,[{offset:0,color:"#fc845233"},{offset:1,color:"#fc845210"}])}}]}),y=async()=>{try{const e=await b.get("/api/energy-trend/b-building");n.value=e.data}catch(e){console.warn("\u4F7F\u7528\u9ED8\u8BA4\u6570\u636E:",e),n.value={...l}}finally{o.value=!1}},p=()=>{if(!r.value)return;t=k(r.value),t.setOption(f(n.value));const e=()=>t.resize();window.addEventListener("resize",e),w(()=>{window.removeEventListener("resize",e),t.dispose()})};return h(async()=>{await y(),p()}),(e,s)=>(c(),d("div",S,[o.value?(c(),d("div",B,"\u6570\u636E\u52A0\u8F7D\u4E2D...")):v("",!0),m(g("div",{ref_key:"chart",ref:r,class:"chart"},null,512),[[x,!o.value]])]))}},A=_(L,[["__scopeId","data-v-0a554522"]]);export{A as default};

import{_ as f,r as l,o as m,a1 as p,h as d,i as u,av as h,ak as g,al as w,k as y,q as b}from"./index.d8fece53.js";import{i as D}from"./index.743c4e9d.js";const k={class:"chart-container"},x={key:0,class:"loading"},B={__name:"D-Pie",setup(z){const s=[{value:20,name:"A\u6559\u7528\u6C34"},{value:20,name:"A\u6559\u7528\u7535"},{value:20,name:"B\u6559\u7528\u6C34"},{value:20,name:"B\u6559\u7528\u7535"},{value:10,name:"C\u6559\u7528\u6C34"},{value:10,name:"C\u6559\u7528\u7535"}],o=l(null),r=l(!0),t=l([...s]);let e=null;const n={color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#c23531","#2f4554","#61a0a8","#c4ccd3"],title:{text:"\u7528\u80FD\u7ED3\u6784",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:10,left:"center",data:s.map(a=>a.name)},series:[{name:"\u7528\u80FD\u7ED3\u6784",radius:"65%",type:"pie",avoidLabelOverlap:!1,center:["50%","50%"],selectedMode:"single",data:t.value}]},v=async()=>{try{const a=await b.get("/api/energy-structure");t.value=a.data,n.legend.data=t.value.map(c=>c.name)}catch(a){console.warn("\u4F7F\u7528\u9ED8\u8BA4\u6570\u636E:",a),t.value=[...s],n.legend.data=s.map(c=>c.name)}finally{r.value=!1}},_=()=>{!o.value||(e=D(o.value),e.setOption({...n,series:[{...n.series[0],data:t.value}]}),window.addEventListener("resize",i))},i=()=>{e==null||e.resize()};return m(async()=>{await v(),_()}),p(()=>{e&&(window.removeEventListener("resize",i),e.dispose())}),(a,c)=>(d(),u("div",k,[r.value?(d(),u("div",x,"\u6570\u636E\u52A0\u8F7D\u4E2D...")):h("",!0),g(y("div",{ref_key:"chartRef",ref:o,class:"chart"},null,512),[[w,!r.value]])]))}},L=f(B,[["__scopeId","data-v-76f8ca36"]]);export{L as default};

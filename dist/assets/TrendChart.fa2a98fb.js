import{_,r as c,o as h,h as l,i as d,av as v,ak as m,al as x,k as g,q as w,a1 as k}from"./index.d8fece53.js";import{i as b,L as u}from"./index.743c4e9d.js";const S={class:"energy-trend-container"},L={key:0,class:"loading"},z={__name:"TrendChart",setup(A){const i={dates:["\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D","\u5468\u65E5"],electricity:[1200,1350,1420,1580,1460,1320,1250],water:[80,85,92,105,98,88,82]},r=c(null),o=c(!0),n=c({...i});let t=null;const f=e=>({title:{text:"A\u6559\u5B66\u697C\u672C\u5468\u80FD\u8017\u8D8B\u52BF",left:"center",textStyle:{color:"#fff",fontSize:18}},tooltip:{trigger:"axis",formatter:function(s){return s[0].name+"<br/>"+s.map(a=>`<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${a.color};"></span>
            ${a.seriesName}: ${a.value}${a.seriesId==="electricity"?"kWh":"\u5428"}`).join("<br/>")}},legend:{top:30,data:["\u7528\u7535\u91CF","\u7528\u6C34\u91CF"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.dates},yAxis:[{type:"value",name:"\u7528\u7535\u91CF (kWh)",axisLine:{lineStyle:{color:"#5470c6"}}},{type:"value",name:"\u7528\u6C34\u91CF (\u5428)",axisLine:{lineStyle:{color:"#91cc75"}}}],series:[{name:"\u7528\u7535\u91CF",type:"line",smooth:!0,data:e.electricity,yAxisIndex:0,itemStyle:{color:"#5470c6"},areaStyle:{color:new u(0,0,0,1,[{offset:0,color:"#5470c633"},{offset:1,color:"#5470c610"}])}},{name:"\u7528\u6C34\u91CF",type:"line",smooth:!0,data:e.water,yAxisIndex:1,itemStyle:{color:"#91cc75"},areaStyle:{color:new u(0,0,0,1,[{offset:0,color:"#91cc7533"},{offset:1,color:"#91cc7510"}])}}]}),y=async()=>{try{const e=await w.get("/api/energy-trend/a-building");n.value=e.data}catch(e){console.warn("\u4F7F\u7528\u9ED8\u8BA4\u6570\u636E:",e),n.value={...i}}finally{o.value=!1}},p=()=>{if(!r.value)return;t=b(r.value),t.setOption(f(n.value));const e=()=>t.resize();window.addEventListener("resize",e),k(()=>{window.removeEventListener("resize",e),t.dispose()})};return h(async()=>{await y(),p()}),(e,s)=>(l(),d("div",S,[o.value?(l(),d("div",L,"\u6570\u636E\u52A0\u8F7D\u4E2D...")):v("",!0),m(g("div",{ref_key:"chart",ref:r,class:"chart"},null,512),[[x,!o.value]])]))}},B=_(z,[["__scopeId","data-v-58df5868"]]);export{B as default};

import{D as lJ,G as OD,H as xq,S as XL,I as PT,M as iJ,J as cJ,K as Eq,L as dY,N as BG,O as uJ,P as fY,Q as ou,R as mY,T as dJ,U as fJ,V as mJ,W as Ha,X as JL,Y as Wh,Z as gJ,$ as $G,o as _c,a0 as Ow,a1 as $w,a2 as AD,a3 as gY,a4 as bt,l as ae,a5 as z0,r as nt,a6 as HT,a7 as zo,a8 as hJ,a9 as $T,aa as _o,ab as PG,ac as pJ,ad as QL,ae as Xl,af as za,ag as oo,ah as Ea,ai as Xm,aj as CG,h as rt,m as zn,w as zt,ak as ei,k as Rn,B as ct,C as Xs,al as Jm,am as PD,an as hr,i as sn,j as qt,F as Tc,ao as xs,ap as Ql,aq as RD,ar as Ss,as as V0,a as Pw,at as hY,au as Bo,n as Lu,av as An,aw as DD,ax as jh,ay as e6,az as kq,aA as H0,aB as pY,aC as G1,aD as MD,aE as t6,aF as ND,aG as ID,aH as il,aI as Aw,aJ as NT,aK as BD,aL as i6,aM as n6,aN as Hu,t as Es,aO as Nw,aP as FD,aQ as mG,aR as So,aS as Rw,aT as vJ,e as ia,aU as bJ,aV as c6,aW as o6,aX as yJ,aY as Tq,aZ as vY,a_ as s6,a$ as r6,b0 as bY,b1 as Dw,b2 as _q,b3 as CJ,b4 as wJ,b5 as SJ,s as IT,b6 as Jl,b7 as NG,b8 as yY,b9 as u6,ba as xJ,bb as CY,bc as EJ,bd as kJ,z as Zh,be as TJ,bf as _J,bg as OJ,bh as kD,bi as gG,bj as wY,bk as AJ,bl as SY,bm as xY,bn as RJ,bo as qr,bp as IG,bq as wi,br as DJ,bs as MJ,bt as Oq,bu as BJ,bv as $J,bw as EY,bx as kY,by as Mw,bz as PJ,bA as NJ,bB as TY,bC as _Y,bD as IJ,bE as FJ,bF as LJ,bG as OY,bH as HJ,bI as zJ,bJ as VJ,bK as UJ,bL as WJ,bM as ZJ,bN as Aq,bO as AY,bP as RY,bQ as jJ,bR as GJ,_ as KJ,bS as qJ,bT as YJ,bU as XJ,bV as JJ,bW as QJ,bX as eQ,bY as tQ,bZ as nQ}from"./index.d8fece53.js";import{i as DY,a as oQ,U as Rq,g as Dq,b as Mq,c as Bq,S as jL,d as sQ,k as MY,e as rQ,f as BY,h as Fu,u as d6,j as $Y,l as wG,m as aQ,n as lQ,C as PY,E as f6,o as FG,p as iQ,q as cQ}from"./el-form-item.5b0f7bf2.js";import{E as uQ,t as dQ}from"./el-tag.56aa3ef8.js";var fQ=/\s/;function mQ(g){for(var C=g.length;C--&&fQ.test(g.charAt(C)););return C}var gQ=/^\s+/;function hQ(g){return g&&g.slice(0,mQ(g)+1).replace(gQ,"")}var $q=0/0,pQ=/^[-+]0x[0-9a-f]+$/i,vQ=/^0b[01]+$/i,bQ=/^0o[0-7]+$/i,yQ=parseInt;function Pq(g){if(typeof g=="number")return g;if(lJ(g))return $q;if(OD(g)){var C=typeof g.valueOf=="function"?g.valueOf():g;g=OD(C)?C+"":C}if(typeof g!="string")return g===0?g:+g;g=hQ(g);var _=vQ.test(g);return _||bQ.test(g)?yQ(g.slice(2),_?2:8):pQ.test(g)?$q:+g}function NY(g){return g}function CQ(g,C,_){switch(_.length){case 0:return g.call(C);case 1:return g.call(C,_[0]);case 2:return g.call(C,_[0],_[1]);case 3:return g.call(C,_[0],_[1],_[2])}return g.apply(C,_)}var wQ=800,SQ=16,xQ=Date.now;function EQ(g){var C=0,_=0;return function(){var R=xQ(),V=SQ-(R-_);if(_=R,V>0){if(++C>=wQ)return arguments[0]}else C=0;return g.apply(void 0,arguments)}}function kQ(g){return function(){return g}}var TQ=xq?function(g,C){return xq(g,"toString",{configurable:!0,enumerable:!1,value:kQ(C),writable:!0})}:NY;const _Q=TQ;var OQ=EQ(_Q);const AQ=OQ;var Nq=Math.max;function RQ(g,C,_){return C=Nq(C===void 0?g.length-1:C,0),function(){for(var R=arguments,V=-1,L=Nq(R.length-C,0),W=Array(L);++V<L;)W[V]=R[C+V];V=-1;for(var U=Array(C+1);++V<C;)U[V]=R[V];return U[C]=_(W),CQ(g,this,U)}}var Iq=XL?XL.isConcatSpreadable:void 0;function DQ(g){return PT(g)||DY(g)||!!(Iq&&g&&g[Iq])}function LG(g,C,_,R,V){var L=-1,W=g.length;for(_||(_=DQ),V||(V=[]);++L<W;){var U=g[L];C>0&&_(U)?C>1?LG(U,C-1,_,R,V):oQ(V,U):R||(V[V.length]=U)}return V}function MQ(g){var C=g==null?0:g.length;return C?LG(g,1):[]}function BQ(g){return AQ(RQ(g,void 0,MQ),g+"")}var $Q="__lodash_hash_undefined__";function PQ(g){return this.__data__.set(g,$Q),this}function NQ(g){return this.__data__.has(g)}function a6(g){var C=-1,_=g==null?0:g.length;for(this.__data__=new iJ;++C<_;)this.add(g[C])}a6.prototype.add=a6.prototype.push=PQ;a6.prototype.has=NQ;function IQ(g,C){for(var _=-1,R=g==null?0:g.length;++_<R;)if(C(g[_],_,g))return!0;return!1}function FQ(g,C){return g.has(C)}var LQ=1,HQ=2;function IY(g,C,_,R,V,L){var W=_&LQ,U=g.length,j=C.length;if(U!=j&&!(W&&j>U))return!1;var Y=L.get(g),le=L.get(C);if(Y&&le)return Y==C&&le==g;var ce=-1,ne=!0,fe=_&HQ?new a6:void 0;for(L.set(g,C),L.set(C,g);++ce<U;){var te=g[ce],ve=C[ce];if(R)var ie=W?R(ve,te,ce,C,g,L):R(te,ve,ce,g,C,L);if(ie!==void 0){if(ie)continue;ne=!1;break}if(fe){if(!IQ(C,function(pe,Ce){if(!FQ(fe,Ce)&&(te===pe||V(te,pe,_,R,L)))return fe.push(Ce)})){ne=!1;break}}else if(!(te===ve||V(te,ve,_,R,L))){ne=!1;break}}return L.delete(g),L.delete(C),ne}function zQ(g){var C=-1,_=Array(g.size);return g.forEach(function(R,V){_[++C]=[V,R]}),_}function VQ(g){var C=-1,_=Array(g.size);return g.forEach(function(R){_[++C]=R}),_}var UQ=1,WQ=2,ZQ="[object Boolean]",jQ="[object Date]",GQ="[object Error]",KQ="[object Map]",qQ="[object Number]",YQ="[object RegExp]",XQ="[object Set]",JQ="[object String]",QQ="[object Symbol]",eee="[object ArrayBuffer]",tee="[object DataView]",Fq=XL?XL.prototype:void 0,hG=Fq?Fq.valueOf:void 0;function nee(g,C,_,R,V,L,W){switch(_){case tee:if(g.byteLength!=C.byteLength||g.byteOffset!=C.byteOffset)return!1;g=g.buffer,C=C.buffer;case eee:return!(g.byteLength!=C.byteLength||!L(new Rq(g),new Rq(C)));case ZQ:case jQ:case qQ:return cJ(+g,+C);case GQ:return g.name==C.name&&g.message==C.message;case YQ:case JQ:return g==C+"";case KQ:var U=zQ;case XQ:var j=R&UQ;if(U||(U=VQ),g.size!=C.size&&!j)return!1;var Y=W.get(g);if(Y)return Y==C;R|=WQ,W.set(g,C);var le=IY(U(g),U(C),R,V,L,W);return W.delete(g),le;case QQ:if(hG)return hG.call(g)==hG.call(C)}return!1}var oee=1,see=Object.prototype,ree=see.hasOwnProperty;function aee(g,C,_,R,V,L){var W=_&oee,U=Dq(g),j=U.length,Y=Dq(C),le=Y.length;if(j!=le&&!W)return!1;for(var ce=j;ce--;){var ne=U[ce];if(!(W?ne in C:ree.call(C,ne)))return!1}var fe=L.get(g),te=L.get(C);if(fe&&te)return fe==C&&te==g;var ve=!0;L.set(g,C),L.set(C,g);for(var ie=W;++ce<j;){ne=U[ce];var pe=g[ne],Ce=C[ne];if(R)var P=W?R(Ce,pe,ne,C,g,L):R(pe,Ce,ne,g,C,L);if(!(P===void 0?pe===Ce||V(pe,Ce,_,R,L):P)){ve=!1;break}ie||(ie=ne=="constructor")}if(ve&&!ie){var he=g.constructor,Ye=C.constructor;he!=Ye&&"constructor"in g&&"constructor"in C&&!(typeof he=="function"&&he instanceof he&&typeof Ye=="function"&&Ye instanceof Ye)&&(ve=!1)}return L.delete(g),L.delete(C),ve}var lee=1,Lq="[object Arguments]",Hq="[object Array]",UL="[object Object]",iee=Object.prototype,zq=iee.hasOwnProperty;function cee(g,C,_,R,V,L){var W=PT(g),U=PT(C),j=W?Hq:Mq(g),Y=U?Hq:Mq(C);j=j==Lq?UL:j,Y=Y==Lq?UL:Y;var le=j==UL,ce=Y==UL,ne=j==Y;if(ne&&Bq(g)){if(!Bq(C))return!1;W=!0,le=!1}if(ne&&!le)return L||(L=new jL),W||sQ(g)?IY(g,C,_,R,V,L):nee(g,C,j,_,R,V,L);if(!(_&lee)){var fe=le&&zq.call(g,"__wrapped__"),te=ce&&zq.call(C,"__wrapped__");if(fe||te){var ve=fe?g.value():g,ie=te?C.value():C;return L||(L=new jL),V(ve,ie,_,R,L)}}return ne?(L||(L=new jL),aee(g,C,_,R,V,L)):!1}function m6(g,C,_,R,V){return g===C?!0:g==null||C==null||!Eq(g)&&!Eq(C)?g!==g&&C!==C:cee(g,C,_,R,m6,V)}var uee=1,dee=2;function fee(g,C,_,R){var V=_.length,L=V,W=!R;if(g==null)return!L;for(g=Object(g);V--;){var U=_[V];if(W&&U[2]?U[1]!==g[U[0]]:!(U[0]in g))return!1}for(;++V<L;){U=_[V];var j=U[0],Y=g[j],le=U[1];if(W&&U[2]){if(Y===void 0&&!(j in g))return!1}else{var ce=new jL;if(R)var ne=R(Y,le,j,g,C,ce);if(!(ne===void 0?m6(le,Y,uee|dee,R,ce):ne))return!1}}return!0}function FY(g){return g===g&&!OD(g)}function mee(g){for(var C=MY(g),_=C.length;_--;){var R=C[_],V=g[R];C[_]=[R,V,FY(V)]}return C}function LY(g,C){return function(_){return _==null?!1:_[g]===C&&(C!==void 0||g in Object(_))}}function gee(g){var C=mee(g);return C.length==1&&C[0][2]?LY(C[0][0],C[0][1]):function(_){return _===g||fee(_,g,C)}}function hee(g,C){return g!=null&&C in Object(g)}function pee(g,C,_){C=dY(C,g);for(var R=-1,V=C.length,L=!1;++R<V;){var W=BG(C[R]);if(!(L=g!=null&&_(g,W)))break;g=g[W]}return L||++R!=V?L:(V=g==null?0:g.length,!!V&&rQ(V)&&uJ(W,V)&&(PT(g)||DY(g)))}function HY(g,C){return g!=null&&pee(g,C,hee)}var vee=1,bee=2;function yee(g,C){return fY(g)&&FY(C)?LY(BG(g),C):function(_){var R=ou(_,g);return R===void 0&&R===C?HY(_,g):m6(C,R,vee|bee)}}function Cee(g){return function(C){return C==null?void 0:C[g]}}function wee(g){return function(C){return mY(C,g)}}function See(g){return fY(g)?Cee(BG(g)):wee(g)}function xee(g){return typeof g=="function"?g:g==null?NY:typeof g=="object"?PT(g)?yee(g[0],g[1]):gee(g):See(g)}function Eee(g){return function(C,_,R){for(var V=-1,L=Object(C),W=R(C),U=W.length;U--;){var j=W[g?U:++V];if(_(L[j],j,L)===!1)break}return C}}var kee=Eee();const Tee=kee;function _ee(g,C){return g&&Tee(g,C,MY)}function Oee(g,C){return function(_,R){if(_==null)return _;if(!BY(_))return g(_,R);for(var V=_.length,L=C?V:-1,W=Object(_);(C?L--:++L<V)&&R(W[L],L,W)!==!1;);return _}}var Aee=Oee(_ee);const Ree=Aee;var Dee=function(){return dJ.Date.now()};const pG=Dee;var Mee="Expected a function",Bee=Math.max,$ee=Math.min;function Bw(g,C,_){var R,V,L,W,U,j,Y=0,le=!1,ce=!1,ne=!0;if(typeof g!="function")throw new TypeError(Mee);C=Pq(C)||0,OD(_)&&(le=!!_.leading,ce="maxWait"in _,L=ce?Bee(Pq(_.maxWait)||0,C):L,ne="trailing"in _?!!_.trailing:ne);function fe(Me){var K=R,Ie=V;return R=V=void 0,Y=Me,W=g.apply(Ie,K),W}function te(Me){return Y=Me,U=setTimeout(pe,C),le?fe(Me):W}function ve(Me){var K=Me-j,Ie=Me-Y,pt=C-K;return ce?$ee(pt,L-Ie):pt}function ie(Me){var K=Me-j,Ie=Me-Y;return j===void 0||K>=C||K<0||ce&&Ie>=L}function pe(){var Me=pG();if(ie(Me))return Ce(Me);U=setTimeout(pe,ve(Me))}function Ce(Me){return U=void 0,ne&&R?fe(Me):(R=V=void 0,W)}function P(){U!==void 0&&clearTimeout(U),Y=0,R=j=V=U=void 0}function he(){return U===void 0?W:Ce(pG())}function Ye(){var Me=pG(),K=ie(Me);if(R=arguments,V=this,j=Me,K){if(U===void 0)return te(j);if(ce)return clearTimeout(U),U=setTimeout(pe,C),fe(j)}return U===void 0&&(U=setTimeout(pe,C)),W}return Ye.cancel=P,Ye.flush=he,Ye}function Pee(g,C){var _=-1,R=BY(g)?Array(g.length):[];return Ree(g,function(V,L,W){R[++_]=C(V,L,W)}),R}function Nee(g,C){var _=PT(g)?fJ:Pee;return _(g,xee(C))}function Iee(g,C){return LG(Nee(g,C),1)}function l6(g,C){return m6(g,C)}function Fee(g,C,_){for(var R=-1,V=C.length,L={};++R<V;){var W=C[R],U=mY(g,W);_(U,W)&&mJ(L,dY(W,g),U)}return L}function Lee(g,C){return Fee(g,C,function(_,R){return HY(g,R)})}var Hee=BQ(function(g,C){return g==null?{}:Lee(g,C)});const zee=Hee;var Vee="Expected a function";function vG(g,C,_){var R=!0,V=!0;if(typeof g!="function")throw new TypeError(Vee);return OD(_)&&(R="leading"in _?!!_.leading:R,V="trailing"in _?!!_.trailing:V),Bw(g,C,{leading:R,maxWait:C,trailing:V})}const Uee=(g,C)=>{if(!Ha||!g||!C)return!1;const _=g.getBoundingClientRect();let R;return C instanceof Element?R=C.getBoundingClientRect():R={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},_.top<R.bottom&&_.bottom>R.top&&_.right>R.left&&_.left<R.right},Wee=(g="")=>g.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Zee=(g,C)=>{if(!Ha)return!1;const _={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(C)],R=JL(g,_);return["scroll","auto","overlay"].some(V=>R.includes(V))},jee=(g,C)=>{if(!Ha)return;let _=g;for(;_;){if([window,document,document.documentElement].includes(_))return window;if(Zee(_,C))return _;_=_.parentNode}return _};let WL;const Gee=g=>{var C;if(!Ha)return 0;if(WL!==void 0)return WL;const _=document.createElement("div");_.className=`${g}-scrollbar__wrap`,_.style.visibility="hidden",_.style.width="100px",_.style.position="absolute",_.style.top="-9999px",document.body.appendChild(_);const R=_.offsetWidth;_.style.overflow="scroll";const V=document.createElement("div");V.style.width="100%",_.appendChild(V);const L=V.offsetWidth;return(C=_.parentNode)==null||C.removeChild(_),WL=R-L,WL};function Kee(g,C){if(!Ha)return;if(!C){g.scrollTop=0;return}const _=[];let R=C.offsetParent;for(;R!==null&&g!==R&&g.contains(R);)_.push(R),R=R.offsetParent;const V=C.offsetTop+_.reduce((j,Y)=>j+Y.offsetTop,0),L=V+C.offsetHeight,W=g.scrollTop,U=W+g.clientHeight;V<W?g.scrollTop=V:L>U&&(g.scrollTop=L-g.clientHeight)}const qee=(...g)=>C=>{g.forEach(_=>{Wh(_)?_(C):_.value=C})},Yee=g=>gJ[g||"default"],zY=g=>["",...$G].includes(g),Xee=()=>Ha&&/firefox/i.test(window.navigator.userAgent),zT=Symbol("checkboxGroupContextKey"),VY=Symbol("dialogInjectionKey"),UY=Symbol("elPaginationKey"),WY=Symbol("scrollbarContextKey"),ZY=Symbol("uploadContextKey"),jY=(g,C,_)=>{let R={offsetX:0,offsetY:0};const V=U=>{const j=U.clientX,Y=U.clientY,{offsetX:le,offsetY:ce}=R,ne=g.value.getBoundingClientRect(),fe=ne.left,te=ne.top,ve=ne.width,ie=ne.height,pe=document.documentElement.clientWidth,Ce=document.documentElement.clientHeight,P=-fe+le,he=-te+ce,Ye=pe-fe-ve+le,Me=Ce-te-ie+ce,K=pt=>{const ft=Math.min(Math.max(le+pt.clientX-j,P),Ye),Oe=Math.min(Math.max(ce+pt.clientY-Y,he),Me);R={offsetX:ft,offsetY:Oe},g.value.style.transform=`translate(${AD(ft)}, ${AD(Oe)})`},Ie=()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",Ie)};document.addEventListener("mousemove",K),document.addEventListener("mouseup",Ie)},L=()=>{C.value&&g.value&&C.value.addEventListener("mousedown",V)},W=()=>{C.value&&g.value&&C.value.removeEventListener("mousedown",V)};_c(()=>{Ow(()=>{_.value?L():W()})}),$w(()=>{W()})},Jee=g=>({focus:()=>{var C,_;(_=(C=g.value)==null?void 0:C.focus)==null||_.call(C)}});var Qee={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const ete=g=>(C,_)=>tte(C,_,ae(g)),tte=(g,C,_)=>ou(_,g,g).replace(/\{(\w+)\}/g,(R,V)=>{var L;return`${(L=C==null?void 0:C[V])!=null?L:`{${V}}`}`}),nte=g=>{const C=bt(()=>ae(g).name),_=z0(g)?g:nt(g);return{lang:C,locale:_,t:ete(g)}},zu=()=>{const g=gY("locale");return nte(bt(()=>g.value||Qee))},GY=g=>{z0(g)||HT("[useLockscreen]","You need to pass a ref param to this function");const C=zo("popup"),_=hJ(()=>C.bm("parent","hidden"));if(!Ha||$T(document.body,_.value))return;let R=0,V=!1,L="0";const W=()=>{setTimeout(()=>{QL(document.body,_.value),V&&(document.body.style.width=L)},200)};_o(g,U=>{if(!U){W();return}V=!$T(document.body,_.value),V&&(L=document.body.style.width),R=Gee(C.namespace.value);const j=document.documentElement.clientHeight<document.body.scrollHeight,Y=JL(document.body,"overflowY");R>0&&(j||Y==="scroll")&&V&&(document.body.style.width=`calc(100% - ${R}px)`),PG(document.body,_.value)}),pJ(()=>W())},ote=(g,C)=>{let _;_o(()=>g.value,R=>{var V,L;R?(_=document.activeElement,z0(C)&&((L=(V=C.value).focus)==null||L.call(V))):_.focus()})},HG=g=>{if(!g)return{onClick:Xl,onMousedown:Xl,onMouseup:Xl};let C=!1,_=!1;return{onClick:W=>{C&&_&&g(W),C=_=!1},onMousedown:W=>{C=W.target===W.currentTarget},onMouseup:W=>{_=W.target===W.currentTarget}}},BT=4,ste={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},rte=({move:g,size:C,bar:_})=>({[_.size]:C,transform:`translate${_.axis}(${g}%)`}),ate=za({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),lte="Thumb",ite=oo({__name:"thumb",props:ate,setup(g){const C=g,_=Ea(WY),R=zo("scrollbar");_||HT(lte,"can not inject scrollbar context");const V=nt(),L=nt(),W=nt({}),U=nt(!1);let j=!1,Y=!1,le=Ha?document.onselectstart:null;const ce=bt(()=>ste[C.vertical?"vertical":"horizontal"]),ne=bt(()=>rte({size:C.size,move:C.move,bar:ce.value})),fe=bt(()=>V.value[ce.value.offset]**2/_.wrapElement[ce.value.scrollSize]/C.ratio/L.value[ce.value.offset]),te=Me=>{var K;if(Me.stopPropagation(),Me.ctrlKey||[1,2].includes(Me.button))return;(K=window.getSelection())==null||K.removeAllRanges(),ie(Me);const Ie=Me.currentTarget;!Ie||(W.value[ce.value.axis]=Ie[ce.value.offset]-(Me[ce.value.client]-Ie.getBoundingClientRect()[ce.value.direction]))},ve=Me=>{if(!L.value||!V.value||!_.wrapElement)return;const K=Math.abs(Me.target.getBoundingClientRect()[ce.value.direction]-Me[ce.value.client]),Ie=L.value[ce.value.offset]/2,pt=(K-Ie)*100*fe.value/V.value[ce.value.offset];_.wrapElement[ce.value.scroll]=pt*_.wrapElement[ce.value.scrollSize]/100},ie=Me=>{Me.stopImmediatePropagation(),j=!0,document.addEventListener("mousemove",pe),document.addEventListener("mouseup",Ce),le=document.onselectstart,document.onselectstart=()=>!1},pe=Me=>{if(!V.value||!L.value||j===!1)return;const K=W.value[ce.value.axis];if(!K)return;const Ie=(V.value.getBoundingClientRect()[ce.value.direction]-Me[ce.value.client])*-1,pt=L.value[ce.value.offset]-K,ft=(Ie-pt)*100*fe.value/V.value[ce.value.offset];_.wrapElement[ce.value.scroll]=ft*_.wrapElement[ce.value.scrollSize]/100},Ce=()=>{j=!1,W.value[ce.value.axis]=0,document.removeEventListener("mousemove",pe),document.removeEventListener("mouseup",Ce),Ye(),Y&&(U.value=!1)},P=()=>{Y=!1,U.value=!!C.size},he=()=>{Y=!0,U.value=j};$w(()=>{Ye(),document.removeEventListener("mouseup",Ce)});const Ye=()=>{document.onselectstart!==le&&(document.onselectstart=le)};return Xm(CG(_,"scrollbarElement"),"mousemove",P),Xm(CG(_,"scrollbarElement"),"mouseleave",he),(Me,K)=>(rt(),zn(PD,{name:ae(R).b("fade"),persisted:""},{default:zt(()=>[ei(Rn("div",{ref_key:"instance",ref:V,class:ct([ae(R).e("bar"),ae(R).is(ae(ce).key)]),onMousedown:ve},[Rn("div",{ref_key:"thumb",ref:L,class:ct(ae(R).e("thumb")),style:Xs(ae(ne)),onMousedown:te},null,38)],34),[[Jm,Me.always||U.value]])]),_:1},8,["name"]))}});var Vq=hr(ite,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const cte=za({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),ute=oo({__name:"bar",props:cte,setup(g,{expose:C}){const _=g,R=nt(0),V=nt(0);return C({handleScroll:W=>{if(W){const U=W.offsetHeight-BT,j=W.offsetWidth-BT;V.value=W.scrollTop*100/U*_.ratioY,R.value=W.scrollLeft*100/j*_.ratioX}}}),(W,U)=>(rt(),sn(Tc,null,[qt(Vq,{move:R.value,ratio:W.ratioX,size:W.width,always:W.always},null,8,["move","ratio","size","always"]),qt(Vq,{move:V.value,ratio:W.ratioY,size:W.height,vertical:"",always:W.always},null,8,["move","ratio","size","always"])],64))}});var dte=hr(ute,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const fte=za({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:xs([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),mte={scroll:({scrollTop:g,scrollLeft:C})=>[g,C].every(Ql)},gte="ElScrollbar",hte=oo({name:gte}),pte=oo({...hte,props:fte,emits:mte,setup(g,{expose:C,emit:_}){const R=g,V=zo("scrollbar");let L,W;const U=nt(),j=nt(),Y=nt(),le=nt("0"),ce=nt("0"),ne=nt(),fe=nt(1),te=nt(1),ve=bt(()=>{const K={};return R.height&&(K.height=AD(R.height)),R.maxHeight&&(K.maxHeight=AD(R.maxHeight)),[R.wrapStyle,K]}),ie=bt(()=>[R.wrapClass,V.e("wrap"),{[V.em("wrap","hidden-default")]:!R.native}]),pe=bt(()=>[V.e("view"),R.viewClass]),Ce=()=>{var K;j.value&&((K=ne.value)==null||K.handleScroll(j.value),_("scroll",{scrollTop:j.value.scrollTop,scrollLeft:j.value.scrollLeft}))};function P(K,Ie){DD(K)?j.value.scrollTo(K):Ql(K)&&Ql(Ie)&&j.value.scrollTo(K,Ie)}const he=K=>{!Ql(K)||(j.value.scrollTop=K)},Ye=K=>{!Ql(K)||(j.value.scrollLeft=K)},Me=()=>{if(!j.value)return;const K=j.value.offsetHeight-BT,Ie=j.value.offsetWidth-BT,pt=K**2/j.value.scrollHeight,ft=Ie**2/j.value.scrollWidth,Oe=Math.max(pt,R.minSize),re=Math.max(ft,R.minSize);fe.value=pt/(K-pt)/(Oe/(K-Oe)),te.value=ft/(Ie-ft)/(re/(Ie-re)),ce.value=Oe+BT<K?`${Oe}px`:"",le.value=re+BT<Ie?`${re}px`:""};return _o(()=>R.noresize,K=>{K?(L==null||L(),W==null||W()):({stop:L}=RD(Y,Me),W=Xm("resize",Me))},{immediate:!0}),_o(()=>[R.maxHeight,R.height],()=>{R.native||Ss(()=>{var K;Me(),j.value&&((K=ne.value)==null||K.handleScroll(j.value))})}),V0(WY,Pw({scrollbarElement:U,wrapElement:j})),_c(()=>{R.native||Ss(()=>{Me()})}),hY(()=>Me()),C({wrapRef:j,update:Me,scrollTo:P,setScrollTop:he,setScrollLeft:Ye,handleScroll:Ce}),(K,Ie)=>(rt(),sn("div",{ref_key:"scrollbarRef",ref:U,class:ct(ae(V).b())},[Rn("div",{ref_key:"wrapRef",ref:j,class:ct(ae(ie)),style:Xs(ae(ve)),onScroll:Ce},[(rt(),zn(Lu(K.tag),{ref_key:"resizeRef",ref:Y,class:ct(ae(pe)),style:Xs(K.viewStyle)},{default:zt(()=>[Bo(K.$slots,"default")]),_:3},8,["class","style"]))],38),K.native?An("v-if",!0):(rt(),zn(dte,{key:0,ref_key:"barRef",ref:ne,height:ce.value,width:le.value,always:K.always,"ratio-x":te.value,"ratio-y":fe.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var vte=hr(pte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const zG=jh(vte),F0=new Map;let Uq;Ha&&(document.addEventListener("mousedown",g=>Uq=g),document.addEventListener("mouseup",g=>{for(const C of F0.values())for(const{documentHandler:_}of C)_(g,Uq)}));function Wq(g,C){let _=[];return Array.isArray(C.arg)?_=C.arg:e6(C.arg)&&_.push(C.arg),function(R,V){const L=C.instance.popperRef,W=R.target,U=V==null?void 0:V.target,j=!C||!C.instance,Y=!W||!U,le=g.contains(W)||g.contains(U),ce=g===W,ne=_.length&&_.some(te=>te==null?void 0:te.contains(W))||_.length&&_.includes(U),fe=L&&(L.contains(W)||L.contains(U));j||Y||le||ce||ne||fe||C.value(R,V)}}const KY={beforeMount(g,C){F0.has(g)||F0.set(g,[]),F0.get(g).push({documentHandler:Wq(g,C),bindingFn:C.value})},updated(g,C){F0.has(g)||F0.set(g,[]);const _=F0.get(g),R=_.findIndex(L=>L.bindingFn===C.oldValue),V={documentHandler:Wq(g,C),bindingFn:C.value};R>=0?_.splice(R,1,V):_.push(V)},unmounted(g){F0.delete(g)}},SG="_trap-focus-children",Tw=[],Zq=g=>{if(Tw.length===0)return;const C=Tw[Tw.length-1][SG];if(C.length>0&&g.code===H0.tab){if(C.length===1){g.preventDefault(),document.activeElement!==C[0]&&C[0].focus();return}const _=g.shiftKey,R=g.target===C[0],V=g.target===C[C.length-1];R&&_&&(g.preventDefault(),C[C.length-1].focus()),V&&!_&&(g.preventDefault(),C[0].focus())}},bte={beforeMount(g){g[SG]=kq(g),Tw.push(g),Tw.length<=1&&document.addEventListener("keydown",Zq)},updated(g){Ss(()=>{g[SG]=kq(g)})},unmounted(){Tw.shift(),Tw.length===0&&document.removeEventListener("keydown",Zq)}};var jq=!1,kw,xG,EG,GL,KL,qY,qL,kG,TG,_G,YY,OG,AG,XY,JY;function Iu(){if(!jq){jq=!0;var g=navigator.userAgent,C=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(g),_=/(Mac OS X)|(Windows)|(Linux)/.exec(g);if(OG=/\b(iPhone|iP[ao]d)/.exec(g),AG=/\b(iP[ao]d)/.exec(g),_G=/Android/i.exec(g),XY=/FBAN\/\w+;/i.exec(g),JY=/Mobile/i.exec(g),YY=!!/Win64/.exec(g),C){kw=C[1]?parseFloat(C[1]):C[5]?parseFloat(C[5]):NaN,kw&&document&&document.documentMode&&(kw=document.documentMode);var R=/(?:Trident\/(\d+.\d+))/.exec(g);qY=R?parseFloat(R[1])+4:kw,xG=C[2]?parseFloat(C[2]):NaN,EG=C[3]?parseFloat(C[3]):NaN,GL=C[4]?parseFloat(C[4]):NaN,GL?(C=/(?:Chrome\/(\d+\.\d+))/.exec(g),KL=C&&C[1]?parseFloat(C[1]):NaN):KL=NaN}else kw=xG=EG=KL=GL=NaN;if(_){if(_[1]){var V=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(g);qL=V?parseFloat(V[1].replace("_",".")):!0}else qL=!1;kG=!!_[2],TG=!!_[3]}else qL=kG=TG=!1}}var RG={ie:function(){return Iu()||kw},ieCompatibilityMode:function(){return Iu()||qY>kw},ie64:function(){return RG.ie()&&YY},firefox:function(){return Iu()||xG},opera:function(){return Iu()||EG},webkit:function(){return Iu()||GL},safari:function(){return RG.webkit()},chrome:function(){return Iu()||KL},windows:function(){return Iu()||kG},osx:function(){return Iu()||qL},linux:function(){return Iu()||TG},iphone:function(){return Iu()||OG},mobile:function(){return Iu()||OG||AG||_G||JY},nativeApp:function(){return Iu()||XY},android:function(){return Iu()||_G},ipad:function(){return Iu()||AG}},yte=RG,ZL=!!(typeof window<"u"&&window.document&&window.document.createElement),Cte={canUseDOM:ZL,canUseWorkers:typeof Worker<"u",canUseEventListeners:ZL&&!!(window.addEventListener||window.attachEvent),canUseViewport:ZL&&!!window.screen,isInWorker:!ZL},QY=Cte,eX;QY.canUseDOM&&(eX=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function wte(g,C){if(!QY.canUseDOM||C&&!("addEventListener"in document))return!1;var _="on"+g,R=_ in document;if(!R){var V=document.createElement("div");V.setAttribute(_,"return;"),R=typeof V[_]=="function"}return!R&&eX&&g==="wheel"&&(R=document.implementation.hasFeature("Events.wheel","3.0")),R}var Ste=wte,Gq=10,Kq=40,qq=800;function tX(g){var C=0,_=0,R=0,V=0;return"detail"in g&&(_=g.detail),"wheelDelta"in g&&(_=-g.wheelDelta/120),"wheelDeltaY"in g&&(_=-g.wheelDeltaY/120),"wheelDeltaX"in g&&(C=-g.wheelDeltaX/120),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(C=_,_=0),R=C*Gq,V=_*Gq,"deltaY"in g&&(V=g.deltaY),"deltaX"in g&&(R=g.deltaX),(R||V)&&g.deltaMode&&(g.deltaMode==1?(R*=Kq,V*=Kq):(R*=qq,V*=qq)),R&&!C&&(C=R<1?-1:1),V&&!_&&(_=V<1?-1:1),{spinX:C,spinY:_,pixelX:R,pixelY:V}}tX.getEventType=function(){return yte.firefox()?"DOMMouseScroll":Ste("wheel")?"wheel":"mousewheel"};var xte=tX;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const Ete=function(g,C){if(g&&g.addEventListener){const _=function(R){const V=xte(R);C&&Reflect.apply(C,this,[R,V])};g.addEventListener("wheel",_,{passive:!0})}},kte={beforeMount(g,C){Ete(g,C.value)}},nX={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:pY,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},oX={[Fu]:g=>G1(g)||Ql(g)||MD(g),change:g=>G1(g)||Ql(g)||MD(g)},Tte=({model:g,isChecked:C})=>{const _=Ea(zT,void 0),R=bt(()=>{var L,W;const U=(L=_==null?void 0:_.max)==null?void 0:L.value,j=(W=_==null?void 0:_.min)==null?void 0:W.value;return!t6(U)&&g.value.length>=U&&!C.value||!t6(j)&&g.value.length<=j&&C.value});return{isDisabled:ND(bt(()=>(_==null?void 0:_.disabled.value)||R.value)),isLimitDisabled:R}},_te=(g,{model:C,isLimitExceeded:_,hasOwnLabel:R,isDisabled:V,isLabeledByFormItem:L})=>{const W=Ea(zT,void 0),{formItem:U}=d6(),{emit:j}=il();function Y(te){var ve,ie;return te===g.trueLabel||te===!0?(ve=g.trueLabel)!=null?ve:!0:(ie=g.falseLabel)!=null?ie:!1}function le(te,ve){j("change",Y(te),ve)}function ce(te){if(_.value)return;const ve=te.target;j("change",Y(ve.checked),te)}async function ne(te){_.value||!R.value&&!V.value&&L.value&&(te.composedPath().some(pe=>pe.tagName==="LABEL")||(C.value=Y([!1,g.falseLabel].includes(C.value)),await Ss(),le(C.value,te)))}const fe=bt(()=>(W==null?void 0:W.validateEvent)||g.validateEvent);return _o(()=>g.modelValue,()=>{fe.value&&(U==null||U.validate("change").catch(te=>ID()))}),{handleChange:ce,onClickRoot:ne}},Ote=g=>{const C=nt(!1),{emit:_}=il(),R=Ea(zT,void 0),V=bt(()=>t6(R)===!1),L=nt(!1);return{model:bt({get(){var U,j;return V.value?(U=R==null?void 0:R.modelValue)==null?void 0:U.value:(j=g.modelValue)!=null?j:C.value},set(U){var j,Y;V.value&&Aw(U)?(L.value=((j=R==null?void 0:R.max)==null?void 0:j.value)!==void 0&&U.length>(R==null?void 0:R.max.value),L.value===!1&&((Y=R==null?void 0:R.changeEvent)==null||Y.call(R,U))):(_(Fu,U),C.value=U)}}),isGroup:V,isLimitExceeded:L}},Ate=(g,C,{model:_})=>{const R=Ea(zT,void 0),V=nt(!1),L=bt(()=>{const Y=_.value;return MD(Y)?Y:Aw(Y)?DD(g.label)?Y.map(NT).some(le=>l6(le,g.label)):Y.map(NT).includes(g.label):Y!=null?Y===g.trueLabel:!!Y}),W=BD(bt(()=>{var Y;return(Y=R==null?void 0:R.size)==null?void 0:Y.value}),{prop:!0}),U=BD(bt(()=>{var Y;return(Y=R==null?void 0:R.size)==null?void 0:Y.value})),j=bt(()=>!!(C.default||g.label));return{checkboxButtonSize:W,isChecked:L,isFocused:V,checkboxSize:U,hasOwnLabel:j}},Rte=(g,{model:C})=>{function _(){Aw(C.value)&&!C.value.includes(g.label)?C.value.push(g.label):C.value=g.trueLabel||!0}g.checked&&_()},sX=(g,C)=>{const{formItem:_}=d6(),{model:R,isGroup:V,isLimitExceeded:L}=Ote(g),{isFocused:W,isChecked:U,checkboxButtonSize:j,checkboxSize:Y,hasOwnLabel:le}=Ate(g,C,{model:R}),{isDisabled:ce}=Tte({model:R,isChecked:U}),{inputId:ne,isLabeledByFormItem:fe}=$Y(g,{formItemContext:_,disableIdGeneration:le,disableIdManagement:V}),{handleChange:te,onClickRoot:ve}=_te(g,{model:R,isLimitExceeded:L,hasOwnLabel:le,isDisabled:ce,isLabeledByFormItem:fe});return Rte(g,{model:R}),{inputId:ne,isLabeledByFormItem:fe,isChecked:U,isDisabled:ce,isFocused:W,checkboxButtonSize:j,checkboxSize:Y,hasOwnLabel:le,model:R,handleChange:te,onClickRoot:ve}},Dte=["tabindex","role","aria-checked"],Mte=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],Bte=["id","aria-hidden","disabled","value","name","tabindex"],$te=oo({name:"ElCheckbox"}),Pte=oo({...$te,props:nX,emits:oX,setup(g){const C=g,_=i6(),{inputId:R,isLabeledByFormItem:V,isChecked:L,isDisabled:W,isFocused:U,checkboxSize:j,hasOwnLabel:Y,model:le,handleChange:ce,onClickRoot:ne}=sX(C,_),fe=zo("checkbox"),te=bt(()=>[fe.b(),fe.m(j.value),fe.is("disabled",W.value),fe.is("bordered",C.border),fe.is("checked",L.value)]),ve=bt(()=>[fe.e("input"),fe.is("disabled",W.value),fe.is("checked",L.value),fe.is("indeterminate",C.indeterminate),fe.is("focus",U.value)]);return(ie,pe)=>(rt(),zn(Lu(!ae(Y)&&ae(V)?"span":"label"),{class:ct(ae(te)),"aria-controls":ie.indeterminate?ie.controls:null,onClick:ae(ne)},{default:zt(()=>[Rn("span",{class:ct(ae(ve)),tabindex:ie.indeterminate?0:void 0,role:ie.indeterminate?"checkbox":void 0,"aria-checked":ie.indeterminate?"mixed":void 0},[ie.trueLabel||ie.falseLabel?ei((rt(),sn("input",{key:0,id:ae(R),"onUpdate:modelValue":pe[0]||(pe[0]=Ce=>z0(le)?le.value=Ce:null),class:ct(ae(fe).e("original")),type:"checkbox","aria-hidden":ie.indeterminate?"true":"false",name:ie.name,tabindex:ie.tabindex,disabled:ae(W),"true-value":ie.trueLabel,"false-value":ie.falseLabel,onChange:pe[1]||(pe[1]=(...Ce)=>ae(ce)&&ae(ce)(...Ce)),onFocus:pe[2]||(pe[2]=Ce=>U.value=!0),onBlur:pe[3]||(pe[3]=Ce=>U.value=!1)},null,42,Mte)),[[n6,ae(le)]]):ei((rt(),sn("input",{key:1,id:ae(R),"onUpdate:modelValue":pe[4]||(pe[4]=Ce=>z0(le)?le.value=Ce:null),class:ct(ae(fe).e("original")),type:"checkbox","aria-hidden":ie.indeterminate?"true":"false",disabled:ae(W),value:ie.label,name:ie.name,tabindex:ie.tabindex,onChange:pe[5]||(pe[5]=(...Ce)=>ae(ce)&&ae(ce)(...Ce)),onFocus:pe[6]||(pe[6]=Ce=>U.value=!0),onBlur:pe[7]||(pe[7]=Ce=>U.value=!1)},null,42,Bte)),[[n6,ae(le)]]),Rn("span",{class:ct(ae(fe).e("inner"))},null,2)],10,Dte),ae(Y)?(rt(),sn("span",{key:0,class:ct(ae(fe).e("label"))},[Bo(ie.$slots,"default"),ie.$slots.default?An("v-if",!0):(rt(),sn(Tc,{key:0},[Hu(Es(ie.label),1)],64))],2)):An("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Nte=hr(Pte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const Ite=["name","tabindex","disabled","true-value","false-value"],Fte=["name","tabindex","disabled","value"],Lte=oo({name:"ElCheckboxButton"}),Hte=oo({...Lte,props:nX,emits:oX,setup(g){const C=g,_=i6(),{isFocused:R,isChecked:V,isDisabled:L,checkboxButtonSize:W,model:U,handleChange:j}=sX(C,_),Y=Ea(zT,void 0),le=zo("checkbox"),ce=bt(()=>{var fe,te,ve,ie;const pe=(te=(fe=Y==null?void 0:Y.fill)==null?void 0:fe.value)!=null?te:"";return{backgroundColor:pe,borderColor:pe,color:(ie=(ve=Y==null?void 0:Y.textColor)==null?void 0:ve.value)!=null?ie:"",boxShadow:pe?`-1px 0 0 0 ${pe}`:void 0}}),ne=bt(()=>[le.b("button"),le.bm("button",W.value),le.is("disabled",L.value),le.is("checked",V.value),le.is("focus",R.value)]);return(fe,te)=>(rt(),sn("label",{class:ct(ae(ne))},[fe.trueLabel||fe.falseLabel?ei((rt(),sn("input",{key:0,"onUpdate:modelValue":te[0]||(te[0]=ve=>z0(U)?U.value=ve:null),class:ct(ae(le).be("button","original")),type:"checkbox",name:fe.name,tabindex:fe.tabindex,disabled:ae(L),"true-value":fe.trueLabel,"false-value":fe.falseLabel,onChange:te[1]||(te[1]=(...ve)=>ae(j)&&ae(j)(...ve)),onFocus:te[2]||(te[2]=ve=>R.value=!0),onBlur:te[3]||(te[3]=ve=>R.value=!1)},null,42,Ite)),[[n6,ae(U)]]):ei((rt(),sn("input",{key:1,"onUpdate:modelValue":te[4]||(te[4]=ve=>z0(U)?U.value=ve:null),class:ct(ae(le).be("button","original")),type:"checkbox",name:fe.name,tabindex:fe.tabindex,disabled:ae(L),value:fe.label,onChange:te[5]||(te[5]=(...ve)=>ae(j)&&ae(j)(...ve)),onFocus:te[6]||(te[6]=ve=>R.value=!0),onBlur:te[7]||(te[7]=ve=>R.value=!1)},null,42,Fte)),[[n6,ae(U)]]),fe.$slots.default||fe.label?(rt(),sn("span",{key:2,class:ct(ae(le).be("button","inner")),style:Xs(ae(V)?ae(ce):void 0)},[Bo(fe.$slots,"default",{},()=>[Hu(Es(fe.label),1)])],6)):An("v-if",!0)],2))}});var rX=hr(Hte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const zte=za({modelValue:{type:xs(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:pY,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),Vte={[Fu]:g=>Aw(g),change:g=>Aw(g)},Ute=oo({name:"ElCheckboxGroup"}),Wte=oo({...Ute,props:zte,emits:Vte,setup(g,{emit:C}){const _=g,R=zo("checkbox"),{formItem:V}=d6(),{inputId:L,isLabeledByFormItem:W}=$Y(_,{formItemContext:V}),U=async Y=>{C(Fu,Y),await Ss(),C("change",Y)},j=bt({get(){return _.modelValue},set(Y){U(Y)}});return V0(zT,{...zee(Nw(_),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:j,changeEvent:U}),_o(()=>_.modelValue,()=>{_.validateEvent&&(V==null||V.validate("change").catch(Y=>ID()))}),(Y,le)=>{var ce;return rt(),zn(Lu(Y.tag),{id:ae(L),class:ct(ae(R).b("group")),role:"group","aria-label":ae(W)?void 0:Y.label||"checkbox-group","aria-labelledby":ae(W)?(ce=ae(V))==null?void 0:ce.labelId:void 0},{default:zt(()=>[Bo(Y.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var aX=hr(Wte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const FT=jh(Nte,{CheckboxButton:rX,CheckboxGroup:aX});FD(rX);FD(aX);const Zte=za({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:xs([String,Array,Object])},zIndex:{type:xs([String,Number])}}),jte={click:g=>g instanceof MouseEvent};var Gte=oo({name:"ElOverlay",props:Zte,emits:jte,setup(g,{slots:C,emit:_}){const R=zo("overlay"),V=j=>{_("click",j)},{onClick:L,onMousedown:W,onMouseup:U}=HG(g.customMaskEvent?void 0:V);return()=>g.mask?qt("div",{class:[R.b(),g.overlayClass],style:{zIndex:g.zIndex},onClick:L,onMousedown:W,onMouseup:U},[Bo(C,"default")],mG.STYLE|mG.CLASS|mG.PROPS,["onClick","onMouseup","onMousedown"]):So("div",{class:g.overlayClass,style:{zIndex:g.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Bo(C,"default")])}});const lX=Gte,iX=za({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Rw},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Kte={close:()=>!0},qte=["aria-label"],Yte=["id"],Xte=oo({name:"ElDialogContent"}),Jte=oo({...Xte,props:iX,emits:Kte,setup(g){const C=g,{t:_}=zu(),{Close:R}=bJ,{dialogRef:V,headerRef:L,bodyId:W,ns:U,style:j}=Ea(VY),{focusTrapRef:Y}=Ea(vJ),le=qee(Y,V),ce=bt(()=>C.draggable);return jY(V,L,ce),(ne,fe)=>(rt(),sn("div",{ref:ae(le),class:ct([ae(U).b(),ae(U).is("fullscreen",ne.fullscreen),ae(U).is("draggable",ae(ce)),ae(U).is("align-center",ne.alignCenter),{[ae(U).m("center")]:ne.center},ne.customClass]),style:Xs(ae(j)),tabindex:"-1"},[Rn("header",{ref_key:"headerRef",ref:L,class:ct(ae(U).e("header"))},[Bo(ne.$slots,"header",{},()=>[Rn("span",{role:"heading",class:ct(ae(U).e("title"))},Es(ne.title),3)]),ne.showClose?(rt(),sn("button",{key:0,"aria-label":ae(_)("el.dialog.close"),class:ct(ae(U).e("headerbtn")),type:"button",onClick:fe[0]||(fe[0]=te=>ne.$emit("close"))},[qt(ae(ia),{class:ct(ae(U).e("close"))},{default:zt(()=>[(rt(),zn(Lu(ne.closeIcon||ae(R))))]),_:1},8,["class"])],10,qte)):An("v-if",!0)],2),Rn("div",{id:ae(W),class:ct(ae(U).e("body"))},[Bo(ne.$slots,"default")],10,Yte),ne.$slots.footer?(rt(),sn("footer",{key:0,class:ct(ae(U).e("footer"))},[Bo(ne.$slots,"footer")],2)):An("v-if",!0)],6))}});var Qte=hr(Jte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ene=za({...iX,appendToBody:{type:Boolean,default:!1},beforeClose:{type:xs(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),tne={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Fu]:g=>MD(g),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},nne=(g,C)=>{const R=il().emit,{nextZIndex:V}=c6();let L="";const W=o6(),U=o6(),j=nt(!1),Y=nt(!1),le=nt(!1),ce=nt(g.zIndex||V());let ne,fe;const te=gY("namespace",yJ),ve=bt(()=>{const Je={},ot=`--${te.value}-dialog`;return g.fullscreen||(g.top&&(Je[`${ot}-margin-top`]=g.top),g.width&&(Je[`${ot}-width`]=AD(g.width))),Je}),ie=bt(()=>g.alignCenter?{display:"flex"}:{});function pe(){R("opened")}function Ce(){R("closed"),R(Fu,!1),g.destroyOnClose&&(le.value=!1)}function P(){R("close")}function he(){fe==null||fe(),ne==null||ne(),g.openDelay&&g.openDelay>0?{stop:ne}=Tq(()=>Ie(),g.openDelay):Ie()}function Ye(){ne==null||ne(),fe==null||fe(),g.closeDelay&&g.closeDelay>0?{stop:fe}=Tq(()=>pt(),g.closeDelay):pt()}function Me(){function Je(ot){ot||(Y.value=!0,j.value=!1)}g.beforeClose?g.beforeClose(Je):Ye()}function K(){g.closeOnClickModal&&Me()}function Ie(){!Ha||(j.value=!0)}function pt(){j.value=!1}function ft(){R("openAutoFocus")}function Oe(){R("closeAutoFocus")}function re(Je){var ot;((ot=Je.detail)==null?void 0:ot.focusReason)==="pointer"&&Je.preventDefault()}g.lockScroll&&GY(j);function Nt(){g.closeOnPressEscape&&Me()}return _o(()=>g.modelValue,Je=>{Je?(Y.value=!1,he(),le.value=!0,ce.value=g.zIndex?ce.value++:V(),Ss(()=>{R("open"),C.value&&(C.value.scrollTop=0)})):j.value&&Ye()}),_o(()=>g.fullscreen,Je=>{!C.value||(Je?(L=C.value.style.transform,C.value.style.transform=""):C.value.style.transform=L)}),_c(()=>{g.modelValue&&(j.value=!0,le.value=!0,he())}),{afterEnter:pe,afterLeave:Ce,beforeLeave:P,handleClose:Me,onModalClick:K,close:Ye,doClose:pt,onOpenAutoFocus:ft,onCloseAutoFocus:Oe,onCloseRequested:Nt,onFocusoutPrevented:re,titleId:W,bodyId:U,closed:Y,style:ve,overlayDialogStyle:ie,rendered:le,visible:j,zIndex:ce}},one=["aria-label","aria-labelledby","aria-describedby"],sne=oo({name:"ElDialog",inheritAttrs:!1}),rne=oo({...sne,props:ene,emits:tne,setup(g,{expose:C}){const _=g,R=i6();wG({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},bt(()=>!!R.title)),wG({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},bt(()=>!!_.customClass));const V=zo("dialog"),L=nt(),W=nt(),U=nt(),{visible:j,titleId:Y,bodyId:le,style:ce,overlayDialogStyle:ne,rendered:fe,zIndex:te,afterEnter:ve,afterLeave:ie,beforeLeave:pe,handleClose:Ce,onModalClick:P,onOpenAutoFocus:he,onCloseAutoFocus:Ye,onCloseRequested:Me,onFocusoutPrevented:K}=nne(_,L);V0(VY,{dialogRef:L,headerRef:W,bodyId:le,ns:V,rendered:fe,style:ce});const Ie=HG(P),pt=bt(()=>_.draggable&&!_.fullscreen);return C({visible:j,dialogContentRef:U}),(ft,Oe)=>(rt(),zn(bY,{to:"body",disabled:!ft.appendToBody},[qt(PD,{name:"dialog-fade",onAfterEnter:ae(ve),onAfterLeave:ae(ie),onBeforeLeave:ae(pe),persisted:""},{default:zt(()=>[ei(qt(ae(lX),{"custom-mask-event":"",mask:ft.modal,"overlay-class":ft.modalClass,"z-index":ae(te)},{default:zt(()=>[Rn("div",{role:"dialog","aria-modal":"true","aria-label":ft.title||void 0,"aria-labelledby":ft.title?void 0:ae(Y),"aria-describedby":ae(le),class:ct(`${ae(V).namespace.value}-overlay-dialog`),style:Xs(ae(ne)),onClick:Oe[0]||(Oe[0]=(...re)=>ae(Ie).onClick&&ae(Ie).onClick(...re)),onMousedown:Oe[1]||(Oe[1]=(...re)=>ae(Ie).onMousedown&&ae(Ie).onMousedown(...re)),onMouseup:Oe[2]||(Oe[2]=(...re)=>ae(Ie).onMouseup&&ae(Ie).onMouseup(...re))},[qt(ae(vY),{loop:"",trapped:ae(j),"focus-start-el":"container",onFocusAfterTrapped:ae(he),onFocusAfterReleased:ae(Ye),onFocusoutPrevented:ae(K),onReleaseRequested:ae(Me)},{default:zt(()=>[ae(fe)?(rt(),zn(Qte,s6({key:0,ref_key:"dialogContentRef",ref:U},ft.$attrs,{"custom-class":ft.customClass,center:ft.center,"align-center":ft.alignCenter,"close-icon":ft.closeIcon,draggable:ae(pt),fullscreen:ft.fullscreen,"show-close":ft.showClose,title:ft.title,onClose:ae(Ce)}),r6({header:zt(()=>[ft.$slots.title?Bo(ft.$slots,"title",{key:1}):Bo(ft.$slots,"header",{key:0,close:ae(Ce),titleId:ae(Y),titleClass:ae(V).e("title")})]),default:zt(()=>[Bo(ft.$slots,"default")]),_:2},[ft.$slots.footer?{name:"footer",fn:zt(()=>[Bo(ft.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):An("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,one)]),_:3},8,["mask","overlay-class","z-index"]),[[Jm,ae(j)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ane=hr(rne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const cX=jh(ane),lne=za({urlList:{type:xs(Array),default:()=>Dw([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),ine={close:()=>!0,switch:g=>Ql(g)},cne=["src"],une=oo({name:"ElImageViewer"}),dne=oo({...une,props:lne,emits:ine,setup(g,{expose:C,emit:_}){const R=g,V={CONTAIN:{name:"contain",icon:_q(CJ)},ORIGINAL:{name:"original",icon:_q(wJ)}},L=Xee()?"DOMMouseScroll":"mousewheel",{t:W}=zu(),U=zo("image-viewer"),{nextZIndex:j}=c6(),Y=nt(),le=nt([]),ce=SJ(),ne=nt(!0),fe=nt(R.initialIndex),te=IT(V.CONTAIN),ve=nt({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),ie=bt(()=>{const{urlList:we}=R;return we.length<=1}),pe=bt(()=>fe.value===0),Ce=bt(()=>fe.value===R.urlList.length-1),P=bt(()=>R.urlList[fe.value]),he=bt(()=>{const{scale:we,deg:Qe,offsetX:it,offsetY:Fe,enableTransition:_n}=ve.value;let Kn=it/we,Pn=Fe/we;switch(Qe%360){case 90:case-270:[Kn,Pn]=[Pn,-Kn];break;case 180:case-180:[Kn,Pn]=[-Kn,-Pn];break;case 270:case-90:[Kn,Pn]=[-Pn,Kn];break}const Jn={transform:`scale(${we}) rotate(${Qe}deg) translate(${Kn}px, ${Pn}px)`,transition:_n?"transform .3s":""};return te.value.name===V.CONTAIN.name&&(Jn.maxWidth=Jn.maxHeight="100%"),Jn}),Ye=bt(()=>Ql(R.zIndex)?R.zIndex:j());function Me(){Ie(),_("close")}function K(){const we=vG(it=>{switch(it.code){case H0.esc:R.closeOnPressEscape&&Me();break;case H0.space:Nt();break;case H0.left:ot();break;case H0.up:Ut("zoomIn");break;case H0.right:O();break;case H0.down:Ut("zoomOut");break}}),Qe=vG(it=>{(it.wheelDelta?it.wheelDelta:-it.detail)>0?Ut("zoomIn",{zoomRate:R.zoomRate,enableTransition:!1}):Ut("zoomOut",{zoomRate:R.zoomRate,enableTransition:!1})});ce.run(()=>{Xm(document,"keydown",we),Xm(document,L,Qe)})}function Ie(){ce.stop()}function pt(){ne.value=!1}function ft(we){ne.value=!1,we.target.alt=W("el.image.error")}function Oe(we){if(ne.value||we.button!==0||!Y.value)return;ve.value.enableTransition=!1;const{offsetX:Qe,offsetY:it}=ve.value,Fe=we.pageX,_n=we.pageY,Kn=vG(Jn=>{ve.value={...ve.value,offsetX:Qe+Jn.pageX-Fe,offsetY:it+Jn.pageY-_n}}),Pn=Xm(document,"mousemove",Kn);Xm(document,"mouseup",()=>{Pn()}),we.preventDefault()}function re(){ve.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Nt(){if(ne.value)return;const we=TJ(V),Qe=Object.values(V),it=te.value.name,_n=(Qe.findIndex(Kn=>Kn.name===it)+1)%we.length;te.value=V[we[_n]],re()}function Je(we){const Qe=R.urlList.length;fe.value=(we+Qe)%Qe}function ot(){pe.value&&!R.infinite||Je(fe.value-1)}function O(){Ce.value&&!R.infinite||Je(fe.value+1)}function Ut(we,Qe={}){if(ne.value)return;const{zoomRate:it,rotateDeg:Fe,enableTransition:_n}={zoomRate:R.zoomRate,rotateDeg:90,enableTransition:!0,...Qe};switch(we){case"zoomOut":ve.value.scale>.2&&(ve.value.scale=Number.parseFloat((ve.value.scale/it).toFixed(3)));break;case"zoomIn":ve.value.scale<7&&(ve.value.scale=Number.parseFloat((ve.value.scale*it).toFixed(3)));break;case"clockwise":ve.value.deg+=Fe;break;case"anticlockwise":ve.value.deg-=Fe;break}ve.value.enableTransition=_n}return _o(P,()=>{Ss(()=>{const we=le.value[0];we!=null&&we.complete||(ne.value=!0)})}),_o(fe,we=>{re(),_("switch",we)}),_c(()=>{var we,Qe;K(),(Qe=(we=Y.value)==null?void 0:we.focus)==null||Qe.call(we)}),C({setActiveItem:Je}),(we,Qe)=>(rt(),zn(bY,{to:"body",disabled:!we.teleported},[qt(PD,{name:"viewer-fade",appear:""},{default:zt(()=>[Rn("div",{ref_key:"wrapper",ref:Y,tabindex:-1,class:ct(ae(U).e("wrapper")),style:Xs({zIndex:ae(Ye)})},[Rn("div",{class:ct(ae(U).e("mask")),onClick:Qe[0]||(Qe[0]=Jl(it=>we.hideOnClickModal&&Me(),["self"]))},null,2),An(" CLOSE "),Rn("span",{class:ct([ae(U).e("btn"),ae(U).e("close")]),onClick:Me},[qt(ae(ia),null,{default:zt(()=>[qt(ae(NG))]),_:1})],2),An(" ARROW "),ae(ie)?An("v-if",!0):(rt(),sn(Tc,{key:0},[Rn("span",{class:ct([ae(U).e("btn"),ae(U).e("prev"),ae(U).is("disabled",!we.infinite&&ae(pe))]),onClick:ot},[qt(ae(ia),null,{default:zt(()=>[qt(ae(yY))]),_:1})],2),Rn("span",{class:ct([ae(U).e("btn"),ae(U).e("next"),ae(U).is("disabled",!we.infinite&&ae(Ce))]),onClick:O},[qt(ae(ia),null,{default:zt(()=>[qt(ae(u6))]),_:1})],2)],64)),An(" ACTIONS "),Rn("div",{class:ct([ae(U).e("btn"),ae(U).e("actions")])},[Rn("div",{class:ct(ae(U).e("actions__inner"))},[qt(ae(ia),{onClick:Qe[1]||(Qe[1]=it=>Ut("zoomOut"))},{default:zt(()=>[qt(ae(xJ))]),_:1}),qt(ae(ia),{onClick:Qe[2]||(Qe[2]=it=>Ut("zoomIn"))},{default:zt(()=>[qt(ae(CY))]),_:1}),Rn("i",{class:ct(ae(U).e("actions__divider"))},null,2),qt(ae(ia),{onClick:Nt},{default:zt(()=>[(rt(),zn(Lu(ae(te).icon)))]),_:1}),Rn("i",{class:ct(ae(U).e("actions__divider"))},null,2),qt(ae(ia),{onClick:Qe[3]||(Qe[3]=it=>Ut("anticlockwise"))},{default:zt(()=>[qt(ae(EJ))]),_:1}),qt(ae(ia),{onClick:Qe[4]||(Qe[4]=it=>Ut("clockwise"))},{default:zt(()=>[qt(ae(kJ))]),_:1})],2)],2),An(" CANVAS "),Rn("div",{class:ct(ae(U).e("canvas"))},[(rt(!0),sn(Tc,null,Zh(we.urlList,(it,Fe)=>ei((rt(),sn("img",{ref_for:!0,ref:_n=>le.value[Fe]=_n,key:it,src:it,style:Xs(ae(he)),class:ct(ae(U).e("img")),onLoad:pt,onError:ft,onMousedown:Oe},null,46,cne)),[[Jm,Fe===fe.value]])),128))],2),Bo(we.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var fne=hr(dne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const mne=jh(fne),gne=za({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:xs([String,Object])},previewSrcList:{type:xs(Array),default:()=>Dw([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),hne={load:g=>g instanceof Event,error:g=>g instanceof Event,switch:g=>Ql(g),close:()=>!0,show:()=>!0},pne=["src","loading"],vne={key:0},bne=oo({name:"ElImage",inheritAttrs:!1}),yne=oo({...bne,props:gne,emits:hne,setup(g,{emit:C}){const _=g;let R="";const{t:V}=zu(),L=zo("image"),W=_J(),U=aQ(),j=nt(),Y=nt(!1),le=nt(!0),ce=nt(!1),ne=nt(),fe=nt(),te=Ha&&"loading"in HTMLImageElement.prototype;let ve,ie;const pe=bt(()=>W.style),Ce=bt(()=>{const{fit:Ut}=_;return Ha&&Ut?{objectFit:Ut}:{}}),P=bt(()=>{const{previewSrcList:Ut}=_;return Array.isArray(Ut)&&Ut.length>0}),he=bt(()=>{const{previewSrcList:Ut,initialIndex:we}=_;let Qe=we;return we>Ut.length-1&&(Qe=0),Qe}),Ye=bt(()=>_.loading==="eager"?!1:!te&&_.loading==="lazy"||_.lazy),Me=()=>{!Ha||(le.value=!0,Y.value=!1,j.value=_.src)};function K(Ut){le.value=!1,Y.value=!1,C("load",Ut)}function Ie(Ut){le.value=!1,Y.value=!0,C("error",Ut)}function pt(){Uee(ne.value,fe.value)&&(Me(),re())}const ft=OJ(pt,200);async function Oe(){var Ut;if(!Ha)return;await Ss();const{scrollContainer:we}=_;e6(we)?fe.value=we:G1(we)&&we!==""?fe.value=(Ut=document.querySelector(we))!=null?Ut:void 0:ne.value&&(fe.value=jee(ne.value)),fe.value&&(ve=Xm(fe,"scroll",ft),setTimeout(()=>pt(),100))}function re(){!Ha||!fe.value||!ft||(ve==null||ve(),fe.value=void 0)}function Nt(Ut){if(!!Ut.ctrlKey){if(Ut.deltaY<0)return Ut.preventDefault(),!1;if(Ut.deltaY>0)return Ut.preventDefault(),!1}}function Je(){!P.value||(ie=Xm("wheel",Nt,{passive:!1}),R=document.body.style.overflow,document.body.style.overflow="hidden",ce.value=!0,C("show"))}function ot(){ie==null||ie(),document.body.style.overflow=R,ce.value=!1,C("close")}function O(Ut){C("switch",Ut)}return _o(()=>_.src,()=>{Ye.value?(le.value=!0,Y.value=!1,re(),Oe()):Me()}),_c(()=>{Ye.value?Oe():Me()}),(Ut,we)=>(rt(),sn("div",{ref_key:"container",ref:ne,class:ct([ae(L).b(),Ut.$attrs.class]),style:Xs(ae(pe))},[j.value!==void 0&&!Y.value?(rt(),sn("img",s6({key:0},ae(U),{src:j.value,loading:Ut.loading,style:ae(Ce),class:[ae(L).e("inner"),ae(P)&&ae(L).e("preview"),le.value&&ae(L).is("loading")],onClick:Je,onLoad:K,onError:Ie}),null,16,pne)):An("v-if",!0),le.value||Y.value?(rt(),sn("div",{key:1,class:ct(ae(L).e("wrapper"))},[le.value?Bo(Ut.$slots,"placeholder",{key:0},()=>[Rn("div",{class:ct(ae(L).e("placeholder"))},null,2)]):Y.value?Bo(Ut.$slots,"error",{key:1},()=>[Rn("div",{class:ct(ae(L).e("error"))},Es(ae(V)("el.image.error")),3)]):An("v-if",!0)],2)):An("v-if",!0),ae(P)?(rt(),sn(Tc,{key:2},[ce.value?(rt(),zn(ae(mne),{key:0,"z-index":Ut.zIndex,"initial-index":ae(he),infinite:Ut.infinite,"zoom-rate":Ut.zoomRate,"url-list":Ut.previewSrcList,"hide-on-click-modal":Ut.hideOnClickModal,teleported:Ut.previewTeleported,"close-on-press-escape":Ut.closeOnPressEscape,onClose:ot,onSwitch:O},{default:zt(()=>[Ut.$slots.viewer?(rt(),sn("div",vne,[Bo(Ut.$slots,"viewer")])):An("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):An("v-if",!0)],64)):An("v-if",!0)],6))}});var Cne=hr(yne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const uX=jh(Cne),wne=za({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Rw}}),Sne={click:g=>g instanceof MouseEvent},xne=["disabled","aria-disabled"],Ene={key:0},kne=oo({name:"ElPaginationPrev"}),Tne=oo({...kne,props:wne,emits:Sne,setup(g){const C=g,_=bt(()=>C.disabled||C.currentPage<=1);return(R,V)=>(rt(),sn("button",{type:"button",class:"btn-prev",disabled:ae(_),"aria-disabled":ae(_),onClick:V[0]||(V[0]=L=>R.$emit("click",L))},[R.prevText?(rt(),sn("span",Ene,Es(R.prevText),1)):(rt(),zn(ae(ia),{key:1},{default:zt(()=>[(rt(),zn(Lu(R.prevIcon)))]),_:1}))],8,xne))}});var _ne=hr(Tne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const One=za({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Rw}}),Ane=["disabled","aria-disabled"],Rne={key:0},Dne=oo({name:"ElPaginationNext"}),Mne=oo({...Dne,props:One,emits:["click"],setup(g){const C=g,_=bt(()=>C.disabled||C.currentPage===C.pageCount||C.pageCount===0);return(R,V)=>(rt(),sn("button",{type:"button",class:"btn-next",disabled:ae(_),"aria-disabled":ae(_),onClick:V[0]||(V[0]=L=>R.$emit("click",L))},[R.nextText?(rt(),sn("span",Rne,Es(R.nextText),1)):(rt(),zn(ae(ia),{key:1},{default:zt(()=>[(rt(),zn(Lu(R.nextIcon)))]),_:1}))],8,Ane))}});var Bne=hr(Mne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const dX="ElSelectGroup",g6="ElSelect";function $ne(g,C){const _=Ea(g6),R=Ea(dX,{disabled:!1}),V=bt(()=>Object.prototype.toString.call(g.value).toLowerCase()==="[object object]"),L=bt(()=>_.props.multiple?ce(_.props.modelValue,g.value):ne(g.value,_.props.modelValue)),W=bt(()=>{if(_.props.multiple){const ve=_.props.modelValue||[];return!L.value&&ve.length>=_.props.multipleLimit&&_.props.multipleLimit>0}else return!1}),U=bt(()=>g.label||(V.value?"":g.value)),j=bt(()=>g.value||g.label||""),Y=bt(()=>g.disabled||C.groupDisabled||W.value),le=il(),ce=(ve=[],ie)=>{if(V.value){const pe=_.props.valueKey;return ve&&ve.some(Ce=>NT(ou(Ce,pe))===ou(ie,pe))}else return ve&&ve.includes(ie)},ne=(ve,ie)=>{if(V.value){const{valueKey:pe}=_.props;return ou(ve,pe)===ou(ie,pe)}else return ve===ie},fe=()=>{!g.disabled&&!R.disabled&&(_.hoverIndex=_.optionsArray.indexOf(le.proxy))};_o(()=>U.value,()=>{!g.created&&!_.props.remote&&_.setSelected()}),_o(()=>g.value,(ve,ie)=>{const{remote:pe,valueKey:Ce}=_.props;if(Object.is(ve,ie)||(_.onOptionDestroy(ie,le.proxy),_.onOptionCreate(le.proxy)),!g.created&&!pe){if(Ce&&typeof ve=="object"&&typeof ie=="object"&&ve[Ce]===ie[Ce])return;_.setSelected()}}),_o(()=>R.disabled,()=>{C.groupDisabled=R.disabled},{immediate:!0});const{queryChange:te}=NT(_);return _o(te,ve=>{const{query:ie}=ae(ve),pe=new RegExp(Wee(ie),"i");C.visible=pe.test(U.value)||g.created,C.visible||_.filteredOptionsCount--}),{select:_,currentLabel:U,currentValue:j,itemSelected:L,isDisabled:Y,hoverItem:fe}}const Pne=oo({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(g){const C=zo("select"),_=Pw({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:R,itemSelected:V,isDisabled:L,select:W,hoverItem:U}=$ne(g,_),{visible:j,hover:Y}=Nw(_),le=il().proxy;W.onOptionCreate(le),$w(()=>{const ne=le.value,{selected:fe}=W,ve=(W.props.multiple?fe:[fe]).some(ie=>ie.value===le.value);Ss(()=>{W.cachedOptions.get(ne)===le&&!ve&&W.cachedOptions.delete(ne)}),W.onOptionDestroy(ne,le)});function ce(){g.disabled!==!0&&_.groupDisabled!==!0&&W.handleOptionSelect(le,!0)}return{ns:C,currentLabel:R,itemSelected:V,isDisabled:L,select:W,hoverItem:U,visible:j,hover:Y,selectOptionClick:ce,states:_}}});function Nne(g,C,_,R,V,L){return ei((rt(),sn("li",{class:ct([g.ns.be("dropdown","item"),g.ns.is("disabled",g.isDisabled),{selected:g.itemSelected,hover:g.hover}]),onMouseenter:C[0]||(C[0]=(...W)=>g.hoverItem&&g.hoverItem(...W)),onClick:C[1]||(C[1]=Jl((...W)=>g.selectOptionClick&&g.selectOptionClick(...W),["stop"]))},[Bo(g.$slots,"default",{},()=>[Rn("span",null,Es(g.currentLabel),1)])],34)),[[Jm,g.visible]])}var VG=hr(Pne,[["render",Nne],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const Ine=oo({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const g=Ea(g6),C=zo("select"),_=bt(()=>g.props.popperClass),R=bt(()=>g.props.multiple),V=bt(()=>g.props.fitInputWidth),L=nt("");function W(){var U;L.value=`${(U=g.selectWrapper)==null?void 0:U.offsetWidth}px`}return _c(()=>{W(),RD(g.selectWrapper,W)}),{ns:C,minWidth:L,popperClass:_,isMultiple:R,isFitInputWidth:V}}});function Fne(g,C,_,R,V,L){return rt(),sn("div",{class:ct([g.ns.b("dropdown"),g.ns.is("multiple",g.isMultiple),g.popperClass]),style:Xs({[g.isFitInputWidth?"width":"minWidth"]:g.minWidth})},[Bo(g.$slots,"default")],6)}var Lne=hr(Ine,[["render",Fne],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function Hne(g){const{t:C}=zu();return Pw({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:g.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:C("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:11,tagInMultiLine:!1,mouseEnter:!1})}const zne=(g,C,_)=>{const{t:R}=zu(),V=zo("select");wG({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},bt(()=>g.suffixTransition===!1));const L=nt(null),W=nt(null),U=nt(null),j=nt(null),Y=nt(null),le=nt(null),ce=nt(-1),ne=IT({query:""}),fe=IT(""),{form:te,formItem:ve}=d6(),ie=bt(()=>!g.filterable||g.multiple||!C.visible),pe=bt(()=>g.disabled||(te==null?void 0:te.disabled)),Ce=bt(()=>{const Re=g.multiple?Array.isArray(g.modelValue)&&g.modelValue.length>0:g.modelValue!==void 0&&g.modelValue!==null&&g.modelValue!=="";return g.clearable&&!pe.value&&C.inputHovering&&Re}),P=bt(()=>g.remote&&g.filterable&&!g.remoteShowSuffix?"":g.suffixIcon),he=bt(()=>V.is("reverse",P.value&&C.visible&&g.suffixTransition)),Ye=bt(()=>g.remote?300:0),Me=bt(()=>g.loading?g.loadingText||R("el.select.loading"):g.remote&&C.query===""&&C.options.size===0?!1:g.filterable&&C.query&&C.options.size>0&&C.filteredOptionsCount===0?g.noMatchText||R("el.select.noMatch"):C.options.size===0?g.noDataText||R("el.select.noData"):null),K=bt(()=>Array.from(C.options.values())),Ie=bt(()=>Array.from(C.cachedOptions.values())),pt=bt(()=>{const Re=K.value.filter(yt=>!yt.created).some(yt=>yt.currentLabel===C.query);return g.filterable&&g.allowCreate&&C.query!==""&&!Re}),ft=BD(),Oe=bt(()=>["small"].includes(ft.value)?"small":"default"),re=bt({get(){return C.visible&&Me.value!==!1},set(Re){C.visible=Re}});_o([()=>pe.value,()=>ft.value,()=>te==null?void 0:te.size],()=>{Ss(()=>{Nt()})}),_o(()=>g.placeholder,Re=>{C.cachedPlaceHolder=C.currentPlaceholder=Re}),_o(()=>g.modelValue,(Re,yt)=>{g.multiple&&(Nt(),Re&&Re.length>0||W.value&&C.query!==""?C.currentPlaceholder="":C.currentPlaceholder=C.cachedPlaceHolder,g.filterable&&!g.reserveKeyword&&(C.query="",Je(C.query))),Ut(),g.filterable&&!g.multiple&&(C.inputLength=20),!l6(Re,yt)&&g.validateEvent&&(ve==null||ve.validate("change").catch(en=>ID()))},{flush:"post",deep:!0}),_o(()=>C.visible,Re=>{var yt,en,hn;Re?((en=(yt=U.value)==null?void 0:yt.updatePopper)==null||en.call(yt),g.filterable&&(C.filteredOptionsCount=C.optionsCount,C.query=g.remote?"":C.selectedLabel,g.multiple?(hn=W.value)==null||hn.focus():C.selectedLabel&&(C.currentPlaceholder=`${C.selectedLabel}`,C.selectedLabel=""),Je(C.query),!g.multiple&&!g.remote&&(ne.value.query="",kD(ne),kD(fe)))):(g.filterable&&(Wh(g.filterMethod)&&g.filterMethod(""),Wh(g.remoteMethod)&&g.remoteMethod("")),W.value&&W.value.blur(),C.query="",C.previousQuery=null,C.selectedLabel="",C.inputLength=20,C.menuVisibleOnFocus=!1,Qe(),Ss(()=>{W.value&&W.value.value===""&&C.selected.length===0&&(C.currentPlaceholder=C.cachedPlaceHolder)}),g.multiple||(C.selected&&(g.filterable&&g.allowCreate&&C.createdSelected&&C.createdLabel?C.selectedLabel=C.createdLabel:C.selectedLabel=C.selected.currentLabel,g.filterable&&(C.query=C.selectedLabel)),g.filterable&&(C.currentPlaceholder=C.cachedPlaceHolder))),_.emit("visible-change",Re)}),_o(()=>C.options.entries(),()=>{var Re,yt,en;if(!Ha)return;(yt=(Re=U.value)==null?void 0:Re.updatePopper)==null||yt.call(Re),g.multiple&&Nt();const hn=((en=Y.value)==null?void 0:en.querySelectorAll("input"))||[];Array.from(hn).includes(document.activeElement)||Ut(),g.defaultFirstOption&&(g.filterable||g.remote)&&C.filteredOptionsCount&&O()},{flush:"post"}),_o(()=>C.hoverIndex,Re=>{Ql(Re)&&Re>-1?ce.value=K.value[Re]||{}:ce.value={},K.value.forEach(yt=>{yt.hover=ce.value===yt})});const Nt=()=>{g.collapseTags&&!g.filterable||Ss(()=>{var Re,yt;if(!L.value)return;const en=L.value.$el.querySelector("input"),hn=j.value,vo=Yee(ft.value||(te==null?void 0:te.size));en.style.height=`${(C.selected.length===0?vo:Math.max(hn?hn.clientHeight+(hn.clientHeight>vo?6:0):0,vo))-2}px`,C.tagInMultiLine=Number.parseFloat(en.style.height)>=vo,C.visible&&Me.value!==!1&&((yt=(Re=U.value)==null?void 0:Re.updatePopper)==null||yt.call(Re))})},Je=async Re=>{if(!(C.previousQuery===Re||C.isOnComposition)){if(C.previousQuery===null&&(Wh(g.filterMethod)||Wh(g.remoteMethod))){C.previousQuery=Re;return}C.previousQuery=Re,Ss(()=>{var yt,en;C.visible&&((en=(yt=U.value)==null?void 0:yt.updatePopper)==null||en.call(yt))}),C.hoverIndex=-1,g.multiple&&g.filterable&&Ss(()=>{const yt=W.value.value.length*15+20;C.inputLength=g.collapseTags?Math.min(50,yt):yt,ot(),Nt()}),g.remote&&Wh(g.remoteMethod)?(C.hoverIndex=-1,g.remoteMethod(Re)):Wh(g.filterMethod)?(g.filterMethod(Re),kD(fe)):(C.filteredOptionsCount=C.optionsCount,ne.value.query=Re,kD(ne),kD(fe)),g.defaultFirstOption&&(g.filterable||g.remote)&&C.filteredOptionsCount&&(await Ss(),O())}},ot=()=>{C.currentPlaceholder!==""&&(C.currentPlaceholder=W.value.value?"":C.cachedPlaceHolder)},O=()=>{const Re=K.value.filter(hn=>hn.visible&&!hn.disabled&&!hn.states.groupDisabled),yt=Re.find(hn=>hn.created),en=Re[0];C.hoverIndex=Wn(K.value,yt||en)},Ut=()=>{var Re;if(g.multiple)C.selectedLabel="";else{const en=we(g.modelValue);(Re=en.props)!=null&&Re.created?(C.createdLabel=en.props.value,C.createdSelected=!0):C.createdSelected=!1,C.selectedLabel=en.currentLabel,C.selected=en,g.filterable&&(C.query=C.selectedLabel);return}const yt=[];Array.isArray(g.modelValue)&&g.modelValue.forEach(en=>{yt.push(we(en))}),C.selected=yt,Ss(()=>{Nt()})},we=Re=>{let yt;const en=gG(Re).toLowerCase()==="object",hn=gG(Re).toLowerCase()==="null",vo=gG(Re).toLowerCase()==="undefined";for(let Uo=C.cachedOptions.size-1;Uo>=0;Uo--){const Lr=Ie.value[Uo];if(en?ou(Lr.value,g.valueKey)===ou(Re,g.valueKey):Lr.value===Re){yt={value:Re,currentLabel:Lr.currentLabel,isDisabled:Lr.isDisabled};break}}if(yt)return yt;const Ts=en?Re.label:!hn&&!vo?Re:"",ka={value:Re,currentLabel:Ts};return g.multiple&&(ka.hitState=!1),ka},Qe=()=>{setTimeout(()=>{const Re=g.valueKey;g.multiple?C.selected.length>0?C.hoverIndex=Math.min.apply(null,C.selected.map(yt=>K.value.findIndex(en=>ou(en,Re)===ou(yt,Re)))):C.hoverIndex=-1:C.hoverIndex=K.value.findIndex(yt=>Dr(yt)===Dr(C.selected))},300)},it=()=>{var Re,yt;Fe(),(yt=(Re=U.value)==null?void 0:Re.updatePopper)==null||yt.call(Re),g.multiple&&!g.filterable&&Nt()},Fe=()=>{var Re;C.inputWidth=(Re=L.value)==null?void 0:Re.$el.getBoundingClientRect().width},_n=()=>{g.filterable&&C.query!==C.selectedLabel&&(C.query=C.selectedLabel,Je(C.query))},Kn=Bw(()=>{_n()},Ye.value),Pn=Bw(Re=>{Je(Re.target.value)},Ye.value),Jn=Re=>{l6(g.modelValue,Re)||_.emit(PY,Re)},Pe=Re=>{if(Re.target.value.length<=0&&!pn()){const yt=g.modelValue.slice();yt.pop(),_.emit(Fu,yt),Jn(yt)}Re.target.value.length===1&&g.modelValue.length===0&&(C.currentPlaceholder=C.cachedPlaceHolder)},St=(Re,yt)=>{const en=C.selected.indexOf(yt);if(en>-1&&!pe.value){const hn=g.modelValue.slice();hn.splice(en,1),_.emit(Fu,hn),Jn(hn),_.emit("remove-tag",yt.value)}Re.stopPropagation()},z=Re=>{Re.stopPropagation();const yt=g.multiple?[]:"";if(!G1(yt))for(const en of C.selected)en.isDisabled&&yt.push(en.value);_.emit(Fu,yt),Jn(yt),C.hoverIndex=-1,C.visible=!1,_.emit("clear")},Rr=(Re,yt)=>{var en;if(g.multiple){const hn=(g.modelValue||[]).slice(),vo=Wn(hn,Re.value);vo>-1?hn.splice(vo,1):(g.multipleLimit<=0||hn.length<g.multipleLimit)&&hn.push(Re.value),_.emit(Fu,hn),Jn(hn),Re.created&&(C.query="",Je(""),C.inputLength=20),g.filterable&&((en=W.value)==null||en.focus())}else _.emit(Fu,Re.value),Jn(Re.value),C.visible=!1;C.isSilentBlur=yt,ms(),!C.visible&&Ss(()=>{po(Re)})},Wn=(Re=[],yt)=>{if(!DD(yt))return Re.indexOf(yt);const en=g.valueKey;let hn=-1;return Re.some((vo,Ts)=>NT(ou(vo,en))===ou(yt,en)?(hn=Ts,!0):!1),hn},ms=()=>{C.softFocus=!0;const Re=W.value||L.value;Re&&(Re==null||Re.focus())},po=Re=>{var yt,en,hn,vo,Ts;const ka=Array.isArray(Re)?Re[0]:Re;let Uo=null;if(ka!=null&&ka.value){const Lr=K.value.filter(xt=>xt.value===ka.value);Lr.length>0&&(Uo=Lr[0].$el)}if(U.value&&Uo){const Lr=(vo=(hn=(en=(yt=U.value)==null?void 0:yt.popperRef)==null?void 0:en.contentRef)==null?void 0:hn.querySelector)==null?void 0:vo.call(hn,`.${V.be("dropdown","wrap")}`);Lr&&Kee(Lr,Uo)}(Ts=le.value)==null||Ts.handleScroll()},Vu=Re=>{C.optionsCount++,C.filteredOptionsCount++,C.options.set(Re.value,Re),C.cachedOptions.set(Re.value,Re)},dn=(Re,yt)=>{C.options.get(Re)===yt&&(C.optionsCount--,C.filteredOptionsCount--,C.options.delete(Re))},$o=Re=>{Re.code!==H0.backspace&&pn(!1),C.inputLength=W.value.value.length*15+20,Nt()},pn=Re=>{if(!Array.isArray(C.selected))return;const yt=C.selected[C.selected.length-1];if(!!yt)return Re===!0||Re===!1?(yt.hitState=Re,Re):(yt.hitState=!yt.hitState,yt.hitState)},Ge=Re=>{const yt=Re.target.value;if(Re.type==="compositionend")C.isOnComposition=!1,Ss(()=>Je(yt));else{const en=yt[yt.length-1]||"";C.isOnComposition=!lQ(en)}},cl=()=>{Ss(()=>po(C.selected))},ps=Re=>{C.softFocus?C.softFocus=!1:((g.automaticDropdown||g.filterable)&&(g.filterable&&!C.visible&&(C.menuVisibleOnFocus=!0),C.visible=!0),_.emit("focus",Re))},Qt=()=>{var Re;C.visible=!1,(Re=L.value)==null||Re.blur()},_l=Re=>{Ss(()=>{C.isSilentBlur?C.isSilentBlur=!1:_.emit("blur",Re)}),C.softFocus=!1},Vo=Re=>{z(Re)},Xi=()=>{C.visible=!1},ns=Re=>{C.visible&&(Re.preventDefault(),Re.stopPropagation(),C.visible=!1)},Js=Re=>{var yt;Re&&!C.mouseEnter||pe.value||(C.menuVisibleOnFocus?C.menuVisibleOnFocus=!1:(!U.value||!U.value.isFocusInsideContent())&&(C.visible=!C.visible),C.visible&&((yt=W.value||L.value)==null||yt.focus()))},Si=()=>{C.visible?K.value[C.hoverIndex]&&Rr(K.value[C.hoverIndex],void 0):Js()},Dr=Re=>DD(Re.value)?ou(Re.value,g.valueKey):Re.value,ks=bt(()=>K.value.filter(Re=>Re.visible).every(Re=>Re.disabled)),It=Re=>{if(!C.visible){C.visible=!0;return}if(!(C.options.size===0||C.filteredOptionsCount===0)&&!C.isOnComposition&&!ks.value){Re==="next"?(C.hoverIndex++,C.hoverIndex===C.options.size&&(C.hoverIndex=0)):Re==="prev"&&(C.hoverIndex--,C.hoverIndex<0&&(C.hoverIndex=C.options.size-1));const yt=K.value[C.hoverIndex];(yt.disabled===!0||yt.states.groupDisabled===!0||!yt.visible)&&It(Re),Ss(()=>po(ce.value))}};return{optionsArray:K,selectSize:ft,handleResize:it,debouncedOnInputChange:Kn,debouncedQueryChange:Pn,deletePrevTag:Pe,deleteTag:St,deleteSelected:z,handleOptionSelect:Rr,scrollToOption:po,readonly:ie,resetInputHeight:Nt,showClose:Ce,iconComponent:P,iconReverse:he,showNewOption:pt,collapseTagSize:Oe,setSelected:Ut,managePlaceholder:ot,selectDisabled:pe,emptyText:Me,toggleLastOptionHitState:pn,resetInputState:$o,handleComposition:Ge,onOptionCreate:Vu,onOptionDestroy:dn,handleMenuEnter:cl,handleFocus:ps,blur:Qt,handleBlur:_l,handleClearClick:Vo,handleClose:Xi,handleKeydownEscape:ns,toggleMenu:Js,selectOption:Si,getValueKey:Dr,navigateOptions:It,dropMenuVisible:re,queryChange:ne,groupQueryChange:fe,reference:L,input:W,tooltipRef:U,tags:j,selectWrapper:Y,scrollbar:le,handleMouseEnter:()=>{C.mouseEnter=!0},handleMouseLeave:()=>{C.mouseEnter=!1}}},Yq="ElSelect",Vne=oo({name:Yq,componentName:Yq,components:{ElInput:f6,ElSelectMenu:Lne,ElOption:VG,ElTag:uQ,ElScrollbar:zG,ElTooltip:wY,ElIcon:ia},directives:{ClickOutside:KY},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:zY},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},teleported:AJ.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Rw,default:SY},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:Rw,default:xY},tagType:{...dQ.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:{type:Boolean,default:!1},suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:RJ,default:"bottom-start"}},emits:[Fu,PY,"remove-tag","clear","visible-change","focus","blur"],setup(g,C){const _=zo("select"),R=zo("input"),{t:V}=zu(),L=Hne(g),{optionsArray:W,selectSize:U,readonly:j,handleResize:Y,collapseTagSize:le,debouncedOnInputChange:ce,debouncedQueryChange:ne,deletePrevTag:fe,deleteTag:te,deleteSelected:ve,handleOptionSelect:ie,scrollToOption:pe,setSelected:Ce,resetInputHeight:P,managePlaceholder:he,showClose:Ye,selectDisabled:Me,iconComponent:K,iconReverse:Ie,showNewOption:pt,emptyText:ft,toggleLastOptionHitState:Oe,resetInputState:re,handleComposition:Nt,onOptionCreate:Je,onOptionDestroy:ot,handleMenuEnter:O,handleFocus:Ut,blur:we,handleBlur:Qe,handleClearClick:it,handleClose:Fe,handleKeydownEscape:_n,toggleMenu:Kn,selectOption:Pn,getValueKey:Jn,navigateOptions:Pe,dropMenuVisible:St,reference:z,input:Rr,tooltipRef:Wn,tags:ms,selectWrapper:po,scrollbar:Vu,queryChange:dn,groupQueryChange:$o,handleMouseEnter:pn,handleMouseLeave:Ge}=zne(g,L,C),{focus:cl}=Jee(z),{inputWidth:ps,selected:Qt,inputLength:_l,filteredOptionsCount:Vo,visible:Xi,softFocus:ns,selectedLabel:Js,hoverIndex:Si,query:Dr,inputHovering:ks,currentPlaceholder:It,menuVisibleOnFocus:Zn,isOnComposition:Dn,isSilentBlur:Re,options:yt,cachedOptions:en,optionsCount:hn,prefixWidth:vo,tagInMultiLine:Ts}=Nw(L),ka=bt(()=>{const Hn=[_.b()],pr=ae(U);return pr&&Hn.push(_.m(pr)),g.disabled&&Hn.push(_.m("disabled")),Hn}),Uo=bt(()=>({maxWidth:`${ae(ps)-32}px`,width:"100%"})),Lr=bt(()=>({maxWidth:`${ae(ps)>123?ae(ps)-123:ae(ps)-75}px`}));V0(g6,Pw({props:g,options:yt,optionsArray:W,cachedOptions:en,optionsCount:hn,filteredOptionsCount:Vo,hoverIndex:Si,handleOptionSelect:ie,onOptionCreate:Je,onOptionDestroy:ot,selectWrapper:po,selected:Qt,setSelected:Ce,queryChange:dn,groupQueryChange:$o})),_c(()=>{L.cachedPlaceHolder=It.value=g.placeholder||V("el.select.placeholder"),g.multiple&&Array.isArray(g.modelValue)&&g.modelValue.length>0&&(It.value=""),RD(po,Y),g.remote&&g.multiple&&P(),Ss(()=>{const Hn=z.value&&z.value.$el;if(!!Hn&&(ps.value=Hn.getBoundingClientRect().width,C.slots.prefix)){const pr=Hn.querySelector(`.${R.e("prefix")}`);vo.value=Math.max(pr.getBoundingClientRect().width+5,30)}}),Ce()}),g.multiple&&!Array.isArray(g.modelValue)&&C.emit(Fu,[]),!g.multiple&&Array.isArray(g.modelValue)&&C.emit(Fu,"");const xt=bt(()=>{var Hn,pr;return(pr=(Hn=Wn.value)==null?void 0:Hn.popperRef)==null?void 0:pr.contentRef});return{tagInMultiLine:Ts,prefixWidth:vo,selectSize:U,readonly:j,handleResize:Y,collapseTagSize:le,debouncedOnInputChange:ce,debouncedQueryChange:ne,deletePrevTag:fe,deleteTag:te,deleteSelected:ve,handleOptionSelect:ie,scrollToOption:pe,inputWidth:ps,selected:Qt,inputLength:_l,filteredOptionsCount:Vo,visible:Xi,softFocus:ns,selectedLabel:Js,hoverIndex:Si,query:Dr,inputHovering:ks,currentPlaceholder:It,menuVisibleOnFocus:Zn,isOnComposition:Dn,isSilentBlur:Re,options:yt,resetInputHeight:P,managePlaceholder:he,showClose:Ye,selectDisabled:Me,iconComponent:K,iconReverse:Ie,showNewOption:pt,emptyText:ft,toggleLastOptionHitState:Oe,resetInputState:re,handleComposition:Nt,handleMenuEnter:O,handleFocus:Ut,blur:we,handleBlur:Qe,handleClearClick:it,handleClose:Fe,handleKeydownEscape:_n,toggleMenu:Kn,selectOption:Pn,getValueKey:Jn,navigateOptions:Pe,dropMenuVisible:St,focus:cl,reference:z,input:Rr,tooltipRef:Wn,popperPaneRef:xt,tags:ms,selectWrapper:po,scrollbar:Vu,wrapperKls:ka,selectTagsStyle:Uo,nsSelect:_,tagTextStyle:Lr,handleMouseEnter:pn,handleMouseLeave:Ge}}}),Une=["disabled","autocomplete"],Wne={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function Zne(g,C,_,R,V,L){const W=qr("el-tag"),U=qr("el-tooltip"),j=qr("el-icon"),Y=qr("el-input"),le=qr("el-option"),ce=qr("el-scrollbar"),ne=qr("el-select-menu"),fe=IG("click-outside");return ei((rt(),sn("div",{ref:"selectWrapper",class:ct(g.wrapperKls),onMouseenter:C[22]||(C[22]=(...te)=>g.handleMouseEnter&&g.handleMouseEnter(...te)),onMouseleave:C[23]||(C[23]=(...te)=>g.handleMouseLeave&&g.handleMouseLeave(...te)),onClick:C[24]||(C[24]=Jl((...te)=>g.toggleMenu&&g.toggleMenu(...te),["stop"]))},[qt(U,{ref:"tooltipRef",visible:g.dropMenuVisible,placement:g.placement,teleported:g.teleported,"popper-class":[g.nsSelect.e("popper"),g.popperClass],"fallback-placements":["bottom-start","top-start","right","left"],effect:g.effect,pure:"",trigger:"click",transition:`${g.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:g.persistent,onShow:g.handleMenuEnter},{default:zt(()=>[Rn("div",{class:"select-trigger",onMouseenter:C[20]||(C[20]=te=>g.inputHovering=!0),onMouseleave:C[21]||(C[21]=te=>g.inputHovering=!1)},[g.multiple?(rt(),sn("div",{key:0,ref:"tags",class:ct(g.nsSelect.e("tags")),style:Xs(g.selectTagsStyle)},[g.collapseTags&&g.selected.length?(rt(),sn("span",{key:0,class:ct([g.nsSelect.b("tags-wrapper"),{"has-prefix":g.prefixWidth&&g.selected.length}])},[qt(W,{closable:!g.selectDisabled&&!g.selected[0].isDisabled,size:g.collapseTagSize,hit:g.selected[0].hitState,type:g.tagType,"disable-transitions":"",onClose:C[0]||(C[0]=te=>g.deleteTag(te,g.selected[0]))},{default:zt(()=>[Rn("span",{class:ct(g.nsSelect.e("tags-text")),style:Xs(g.tagTextStyle)},Es(g.selected[0].currentLabel),7)]),_:1},8,["closable","size","hit","type"]),g.selected.length>1?(rt(),zn(W,{key:0,closable:!1,size:g.collapseTagSize,type:g.tagType,"disable-transitions":""},{default:zt(()=>[g.collapseTagsTooltip?(rt(),zn(U,{key:0,disabled:g.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:g.effect,placement:"bottom",teleported:g.teleported},{default:zt(()=>[Rn("span",{class:ct(g.nsSelect.e("tags-text"))},"+ "+Es(g.selected.length-1),3)]),content:zt(()=>[Rn("div",{class:ct(g.nsSelect.e("collapse-tags"))},[(rt(!0),sn(Tc,null,Zh(g.selected.slice(1),(te,ve)=>(rt(),sn("div",{key:ve,class:ct(g.nsSelect.e("collapse-tag"))},[(rt(),zn(W,{key:g.getValueKey(te),class:"in-tooltip",closable:!g.selectDisabled&&!te.isDisabled,size:g.collapseTagSize,hit:te.hitState,type:g.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:ie=>g.deleteTag(ie,te)},{default:zt(()=>[Rn("span",{class:ct(g.nsSelect.e("tags-text")),style:Xs({maxWidth:g.inputWidth-75+"px"})},Es(te.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(rt(),sn("span",{key:1,class:ct(g.nsSelect.e("tags-text"))},"+ "+Es(g.selected.length-1),3))]),_:1},8,["size","type"])):An("v-if",!0)],2)):An("v-if",!0),An(" <div> "),g.collapseTags?An("v-if",!0):(rt(),zn(PD,{key:1,onAfterLeave:g.resetInputHeight},{default:zt(()=>[Rn("span",{class:ct([g.nsSelect.b("tags-wrapper"),{"has-prefix":g.prefixWidth&&g.selected.length}])},[(rt(!0),sn(Tc,null,Zh(g.selected,te=>(rt(),zn(W,{key:g.getValueKey(te),closable:!g.selectDisabled&&!te.isDisabled,size:g.collapseTagSize,hit:te.hitState,type:g.tagType,"disable-transitions":"",onClose:ve=>g.deleteTag(ve,te)},{default:zt(()=>[Rn("span",{class:ct(g.nsSelect.e("tags-text")),style:Xs({maxWidth:g.inputWidth-75+"px"})},Es(te.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],2)]),_:1},8,["onAfterLeave"])),An(" </div> "),g.filterable?ei((rt(),sn("input",{key:2,ref:"input","onUpdate:modelValue":C[1]||(C[1]=te=>g.query=te),type:"text",class:ct([g.nsSelect.e("input"),g.nsSelect.is(g.selectSize)]),disabled:g.selectDisabled,autocomplete:g.autocomplete,style:Xs({marginLeft:g.prefixWidth&&!g.selected.length||g.tagInMultiLine?`${g.prefixWidth}px`:"",flexGrow:1,width:`${g.inputLength/(g.inputWidth-32)}%`,maxWidth:`${g.inputWidth-42}px`}),onFocus:C[2]||(C[2]=(...te)=>g.handleFocus&&g.handleFocus(...te)),onBlur:C[3]||(C[3]=(...te)=>g.handleBlur&&g.handleBlur(...te)),onKeyup:C[4]||(C[4]=(...te)=>g.managePlaceholder&&g.managePlaceholder(...te)),onKeydown:[C[5]||(C[5]=(...te)=>g.resetInputState&&g.resetInputState(...te)),C[6]||(C[6]=wi(Jl(te=>g.navigateOptions("next"),["prevent"]),["down"])),C[7]||(C[7]=wi(Jl(te=>g.navigateOptions("prev"),["prevent"]),["up"])),C[8]||(C[8]=wi((...te)=>g.handleKeydownEscape&&g.handleKeydownEscape(...te),["esc"])),C[9]||(C[9]=wi(Jl((...te)=>g.selectOption&&g.selectOption(...te),["stop","prevent"]),["enter"])),C[10]||(C[10]=wi((...te)=>g.deletePrevTag&&g.deletePrevTag(...te),["delete"])),C[11]||(C[11]=wi(te=>g.visible=!1,["tab"]))],onCompositionstart:C[12]||(C[12]=(...te)=>g.handleComposition&&g.handleComposition(...te)),onCompositionupdate:C[13]||(C[13]=(...te)=>g.handleComposition&&g.handleComposition(...te)),onCompositionend:C[14]||(C[14]=(...te)=>g.handleComposition&&g.handleComposition(...te)),onInput:C[15]||(C[15]=(...te)=>g.debouncedQueryChange&&g.debouncedQueryChange(...te))},null,46,Une)),[[DJ,g.query]]):An("v-if",!0)],6)):An("v-if",!0),qt(Y,{id:g.id,ref:"reference",modelValue:g.selectedLabel,"onUpdate:modelValue":C[16]||(C[16]=te=>g.selectedLabel=te),type:"text",placeholder:g.currentPlaceholder,name:g.name,autocomplete:g.autocomplete,size:g.selectSize,disabled:g.selectDisabled,readonly:g.readonly,"validate-event":!1,class:ct([g.nsSelect.is("focus",g.visible)]),tabindex:g.multiple&&g.filterable?-1:void 0,onFocus:g.handleFocus,onBlur:g.handleBlur,onInput:g.debouncedOnInputChange,onPaste:g.debouncedOnInputChange,onCompositionstart:g.handleComposition,onCompositionupdate:g.handleComposition,onCompositionend:g.handleComposition,onKeydown:[C[17]||(C[17]=wi(Jl(te=>g.navigateOptions("next"),["stop","prevent"]),["down"])),C[18]||(C[18]=wi(Jl(te=>g.navigateOptions("prev"),["stop","prevent"]),["up"])),wi(Jl(g.selectOption,["stop","prevent"]),["enter"]),wi(g.handleKeydownEscape,["esc"]),C[19]||(C[19]=wi(te=>g.visible=!1,["tab"]))]},r6({suffix:zt(()=>[g.iconComponent&&!g.showClose?(rt(),zn(j,{key:0,class:ct([g.nsSelect.e("caret"),g.nsSelect.e("icon"),g.iconReverse])},{default:zt(()=>[(rt(),zn(Lu(g.iconComponent)))]),_:1},8,["class"])):An("v-if",!0),g.showClose&&g.clearIcon?(rt(),zn(j,{key:1,class:ct([g.nsSelect.e("caret"),g.nsSelect.e("icon")]),onClick:g.handleClearClick},{default:zt(()=>[(rt(),zn(Lu(g.clearIcon)))]),_:1},8,["class","onClick"])):An("v-if",!0)]),_:2},[g.$slots.prefix?{name:"prefix",fn:zt(()=>[Rn("div",Wne,[Bo(g.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:zt(()=>[qt(ne,null,{default:zt(()=>[ei(qt(ce,{ref:"scrollbar",tag:"ul","wrap-class":g.nsSelect.be("dropdown","wrap"),"view-class":g.nsSelect.be("dropdown","list"),class:ct([g.nsSelect.is("empty",!g.allowCreate&&Boolean(g.query)&&g.filteredOptionsCount===0)])},{default:zt(()=>[g.showNewOption?(rt(),zn(le,{key:0,value:g.query,created:!0},null,8,["value"])):An("v-if",!0),Bo(g.$slots,"default")]),_:3},8,["wrap-class","view-class","class"]),[[Jm,g.options.size>0&&!g.loading]]),g.emptyText&&(!g.allowCreate||g.loading||g.allowCreate&&g.options.size===0)?(rt(),sn(Tc,{key:0},[g.$slots.empty?Bo(g.$slots,"empty",{key:0}):(rt(),sn("p",{key:1,class:ct(g.nsSelect.be("dropdown","empty"))},Es(g.emptyText),3))],64)):An("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","effect","transition","persistent","onShow"])],34)),[[fe,g.handleClose,g.popperPaneRef]])}var jne=hr(Vne,[["render",Zne],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const Gne=oo({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(g){const C=zo("select"),_=nt(!0),R=il(),V=nt([]);V0(dX,Pw({...Nw(g)}));const L=Ea(g6);_c(()=>{V.value=W(R.subTree)});const W=j=>{const Y=[];return Array.isArray(j.children)&&j.children.forEach(le=>{var ce;le.type&&le.type.name==="ElOption"&&le.component&&le.component.proxy?Y.push(le.component.proxy):(ce=le.children)!=null&&ce.length&&Y.push(...W(le))}),Y},{groupQueryChange:U}=NT(L);return _o(U,()=>{_.value=V.value.some(j=>j.visible===!0)},{flush:"post"}),{visible:_,ns:C}}});function Kne(g,C,_,R,V,L){return ei((rt(),sn("ul",{class:ct(g.ns.be("group","wrap"))},[Rn("li",{class:ct(g.ns.be("group","title"))},Es(g.label),3),Rn("li",null,[Rn("ul",{class:ct(g.ns.b("group"))},[Bo(g.$slots,"default")],2)])],2)),[[Jm,g.visible]])}var fX=hr(Gne,[["render",Kne],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const mX=jh(jne,{Option:VG,OptionGroup:fX}),gX=FD(VG),qne=FD(fX),UG=()=>Ea(UY,{}),Yne=za({pageSize:{type:Number,required:!0},pageSizes:{type:xs(Array),default:()=>Dw([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:$G}}),Xne=oo({name:"ElPaginationSizes"}),Jne=oo({...Xne,props:Yne,emits:["page-size-change"],setup(g,{emit:C}){const _=g,{t:R}=zu(),V=zo("pagination"),L=UG(),W=nt(_.pageSize);_o(()=>_.pageSizes,(Y,le)=>{if(!l6(Y,le)&&Array.isArray(Y)){const ce=Y.includes(_.pageSize)?_.pageSize:_.pageSizes[0];C("page-size-change",ce)}}),_o(()=>_.pageSize,Y=>{W.value=Y});const U=bt(()=>_.pageSizes);function j(Y){var le;Y!==W.value&&(W.value=Y,(le=L.handleSizeChange)==null||le.call(L,Number(Y)))}return(Y,le)=>(rt(),sn("span",{class:ct(ae(V).e("sizes"))},[qt(ae(mX),{"model-value":W.value,disabled:Y.disabled,"popper-class":Y.popperClass,size:Y.size,"validate-event":!1,onChange:j},{default:zt(()=>[(rt(!0),sn(Tc,null,Zh(ae(U),ce=>(rt(),zn(ae(gX),{key:ce,value:ce,label:ce+ae(R)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var Qne=hr(Jne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const eoe=za({size:{type:String,values:$G}}),toe=["disabled"],noe=oo({name:"ElPaginationJumper"}),ooe=oo({...noe,props:eoe,setup(g){const{t:C}=zu(),_=zo("pagination"),{pageCount:R,disabled:V,currentPage:L,changeEvent:W}=UG(),U=nt(),j=bt(()=>{var ce;return(ce=U.value)!=null?ce:L==null?void 0:L.value});function Y(ce){U.value=+ce}function le(ce){ce=Math.trunc(+ce),W==null||W(+ce),U.value=void 0}return(ce,ne)=>(rt(),sn("span",{class:ct(ae(_).e("jump")),disabled:ae(V)},[Rn("span",{class:ct([ae(_).e("goto")])},Es(ae(C)("el.pagination.goto")),3),qt(ae(f6),{size:ce.size,class:ct([ae(_).e("editor"),ae(_).is("in-pagination")]),min:1,max:ae(R),disabled:ae(V),"model-value":ae(j),"validate-event":!1,type:"number","onUpdate:modelValue":Y,onChange:le},null,8,["size","class","max","disabled","model-value"]),Rn("span",{class:ct([ae(_).e("classifier")])},Es(ae(C)("el.pagination.pageClassifier")),3)],10,toe))}});var soe=hr(ooe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const roe=za({total:{type:Number,default:1e3}}),aoe=["disabled"],loe=oo({name:"ElPaginationTotal"}),ioe=oo({...loe,props:roe,setup(g){const{t:C}=zu(),_=zo("pagination"),{disabled:R}=UG();return(V,L)=>(rt(),sn("span",{class:ct(ae(_).e("total")),disabled:ae(R)},Es(ae(C)("el.pagination.total",{total:V.total})),11,aoe))}});var coe=hr(ioe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const uoe=za({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),doe=["onKeyup"],foe=["aria-current","tabindex"],moe=["tabindex"],goe=["aria-current","tabindex"],hoe=["tabindex"],poe=["aria-current","tabindex"],voe=oo({name:"ElPaginationPager"}),boe=oo({...voe,props:uoe,emits:["change"],setup(g,{emit:C}){const _=g,R=zo("pager"),V=zo("icon"),L=nt(!1),W=nt(!1),U=nt(!1),j=nt(!1),Y=nt(!1),le=nt(!1),ce=bt(()=>{const pe=_.pagerCount,Ce=(pe-1)/2,P=Number(_.currentPage),he=Number(_.pageCount);let Ye=!1,Me=!1;he>pe&&(P>pe-Ce&&(Ye=!0),P<he-Ce&&(Me=!0));const K=[];if(Ye&&!Me){const Ie=he-(pe-2);for(let pt=Ie;pt<he;pt++)K.push(pt)}else if(!Ye&&Me)for(let Ie=2;Ie<pe;Ie++)K.push(Ie);else if(Ye&&Me){const Ie=Math.floor(pe/2)-1;for(let pt=P-Ie;pt<=P+Ie;pt++)K.push(pt)}else for(let Ie=2;Ie<he;Ie++)K.push(Ie);return K}),ne=bt(()=>_.disabled?-1:0);Ow(()=>{const pe=(_.pagerCount-1)/2;L.value=!1,W.value=!1,_.pageCount>_.pagerCount&&(_.currentPage>_.pagerCount-pe&&(L.value=!0),_.currentPage<_.pageCount-pe&&(W.value=!0))});function fe(pe=!1){_.disabled||(pe?U.value=!0:j.value=!0)}function te(pe=!1){pe?Y.value=!0:le.value=!0}function ve(pe){const Ce=pe.target;if(Ce.tagName.toLowerCase()==="li"&&Array.from(Ce.classList).includes("number")){const P=Number(Ce.textContent);P!==_.currentPage&&C("change",P)}else Ce.tagName.toLowerCase()==="li"&&Array.from(Ce.classList).includes("more")&&ie(pe)}function ie(pe){const Ce=pe.target;if(Ce.tagName.toLowerCase()==="ul"||_.disabled)return;let P=Number(Ce.textContent);const he=_.pageCount,Ye=_.currentPage,Me=_.pagerCount-2;Ce.className.includes("more")&&(Ce.className.includes("quickprev")?P=Ye-Me:Ce.className.includes("quicknext")&&(P=Ye+Me)),Number.isNaN(+P)||(P<1&&(P=1),P>he&&(P=he)),P!==Ye&&C("change",P)}return(pe,Ce)=>(rt(),sn("ul",{class:ct(ae(R).b()),onClick:ie,onKeyup:wi(ve,["enter"])},[pe.pageCount>0?(rt(),sn("li",{key:0,class:ct([[ae(R).is("active",pe.currentPage===1),ae(R).is("disabled",pe.disabled)],"number"]),"aria-current":pe.currentPage===1,tabindex:ae(ne)}," 1 ",10,foe)):An("v-if",!0),L.value?(rt(),sn("li",{key:1,class:ct(["more","btn-quickprev",ae(V).b(),ae(R).is("disabled",pe.disabled)]),tabindex:ae(ne),onMouseenter:Ce[0]||(Ce[0]=P=>fe(!0)),onMouseleave:Ce[1]||(Ce[1]=P=>U.value=!1),onFocus:Ce[2]||(Ce[2]=P=>te(!0)),onBlur:Ce[3]||(Ce[3]=P=>Y.value=!1)},[(U.value||Y.value)&&!pe.disabled?(rt(),zn(ae(MJ),{key:0})):(rt(),zn(ae(Oq),{key:1}))],42,moe)):An("v-if",!0),(rt(!0),sn(Tc,null,Zh(ae(ce),P=>(rt(),sn("li",{key:P,class:ct([[ae(R).is("active",pe.currentPage===P),ae(R).is("disabled",pe.disabled)],"number"]),"aria-current":pe.currentPage===P,tabindex:ae(ne)},Es(P),11,goe))),128)),W.value?(rt(),sn("li",{key:2,class:ct(["more","btn-quicknext",ae(V).b(),ae(R).is("disabled",pe.disabled)]),tabindex:ae(ne),onMouseenter:Ce[4]||(Ce[4]=P=>fe()),onMouseleave:Ce[5]||(Ce[5]=P=>j.value=!1),onFocus:Ce[6]||(Ce[6]=P=>te()),onBlur:Ce[7]||(Ce[7]=P=>le.value=!1)},[(j.value||le.value)&&!pe.disabled?(rt(),zn(ae(BJ),{key:0})):(rt(),zn(ae(Oq),{key:1}))],42,hoe)):An("v-if",!0),pe.pageCount>1?(rt(),sn("li",{key:3,class:ct([[ae(R).is("active",pe.currentPage===pe.pageCount),ae(R).is("disabled",pe.disabled)],"number"]),"aria-current":pe.currentPage===pe.pageCount,tabindex:ae(ne)},Es(pe.pageCount),11,poe)):An("v-if",!0)],42,doe))}});var yoe=hr(boe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const nu=g=>typeof g!="number",Coe=za({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:g=>Ql(g)&&Math.trunc(g)===g&&g>4&&g<22&&g%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:xs(Array),default:()=>Dw([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Rw,default:()=>yY},nextText:{type:String,default:""},nextIcon:{type:Rw,default:()=>u6},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),woe={"update:current-page":g=>Ql(g),"update:page-size":g=>Ql(g),"size-change":g=>Ql(g),"current-change":g=>Ql(g),"prev-click":g=>Ql(g),"next-click":g=>Ql(g)},Xq="ElPagination";var Soe=oo({name:Xq,props:Coe,emits:woe,setup(g,{emit:C,slots:_}){const{t:R}=zu(),V=zo("pagination"),L=il().vnode.props||{},W="onUpdate:currentPage"in L||"onUpdate:current-page"in L||"onCurrentChange"in L,U="onUpdate:pageSize"in L||"onUpdate:page-size"in L||"onSizeChange"in L,j=bt(()=>{if(nu(g.total)&&nu(g.pageCount)||!nu(g.currentPage)&&!W)return!1;if(g.layout.includes("sizes")){if(nu(g.pageCount)){if(!nu(g.total)&&!nu(g.pageSize)&&!U)return!1}else if(!U)return!1}return!0}),Y=nt(nu(g.defaultPageSize)?10:g.defaultPageSize),le=nt(nu(g.defaultCurrentPage)?1:g.defaultCurrentPage),ce=bt({get(){return nu(g.pageSize)?Y.value:g.pageSize},set(P){nu(g.pageSize)&&(Y.value=P),U&&(C("update:page-size",P),C("size-change",P))}}),ne=bt(()=>{let P=0;return nu(g.pageCount)?nu(g.total)||(P=Math.max(1,Math.ceil(g.total/ce.value))):P=g.pageCount,P}),fe=bt({get(){return nu(g.currentPage)?le.value:g.currentPage},set(P){let he=P;P<1?he=1:P>ne.value&&(he=ne.value),nu(g.currentPage)&&(le.value=he),W&&(C("update:current-page",he),C("current-change",he))}});_o(ne,P=>{fe.value>P&&(fe.value=P)});function te(P){fe.value=P}function ve(P){ce.value=P;const he=ne.value;fe.value>he&&(fe.value=he)}function ie(){g.disabled||(fe.value-=1,C("prev-click",fe.value))}function pe(){g.disabled||(fe.value+=1,C("next-click",fe.value))}function Ce(P,he){P&&(P.props||(P.props={}),P.props.class=[P.props.class,he].join(" "))}return V0(UY,{pageCount:ne,disabled:bt(()=>g.disabled),currentPage:fe,changeEvent:te,handleSizeChange:ve}),()=>{var P,he;if(!j.value)return ID(Xq,R("el.pagination.deprecationWarning")),null;if(!g.layout||g.hideOnSinglePage&&ne.value<=1)return null;const Ye=[],Me=[],K=So("div",{class:V.e("rightwrapper")},Me),Ie={prev:So(_ne,{disabled:g.disabled,currentPage:fe.value,prevText:g.prevText,prevIcon:g.prevIcon,onClick:ie}),jumper:So(soe,{size:g.small?"small":"default"}),pager:So(yoe,{currentPage:fe.value,pageCount:ne.value,pagerCount:g.pagerCount,onChange:te,disabled:g.disabled}),next:So(Bne,{disabled:g.disabled,currentPage:fe.value,pageCount:ne.value,nextText:g.nextText,nextIcon:g.nextIcon,onClick:pe}),sizes:So(Qne,{pageSize:ce.value,pageSizes:g.pageSizes,popperClass:g.popperClass,disabled:g.disabled,size:g.small?"small":"default"}),slot:(he=(P=_==null?void 0:_.default)==null?void 0:P.call(_))!=null?he:null,total:So(coe,{total:nu(g.total)?0:g.total})},pt=g.layout.split(",").map(Oe=>Oe.trim());let ft=!1;return pt.forEach(Oe=>{if(Oe==="->"){ft=!0;return}ft?Me.push(Ie[Oe]):Ye.push(Ie[Oe])}),Ce(Ye[0],V.is("first")),Ce(Ye[Ye.length-1],V.is("last")),ft&&Me.length>0&&(Ce(Me[0],V.is("first")),Ce(Me[Me.length-1],V.is("last")),Ye.push(K)),So("div",{role:"pagination","aria-label":"pagination",class:[V.b(),V.is("background",g.background),{[V.m("small")]:g.small}]},Ye)}}});const xoe=jh(Soe),Eoe=za({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:g=>g>=0&&g<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:xs(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:xs([String,Array,Function]),default:""},format:{type:xs(Function),default:g=>`${g}%`}}),koe=["aria-valuenow"],Toe={viewBox:"0 0 100 100"},_oe=["d","stroke","stroke-width"],Ooe=["d","stroke","opacity","stroke-linecap","stroke-width"],Aoe={key:0},Roe=oo({name:"ElProgress"}),Doe=oo({...Roe,props:Eoe,setup(g){const C=g,_={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},R=zo("progress"),V=bt(()=>({width:`${C.percentage}%`,animationDuration:`${C.duration}s`,backgroundColor:Ce(C.percentage)})),L=bt(()=>(C.strokeWidth/C.width*100).toFixed(1)),W=bt(()=>["circle","dashboard"].includes(C.type)?Number.parseInt(`${50-Number.parseFloat(L.value)/2}`,10):0),U=bt(()=>{const P=W.value,he=C.type==="dashboard";return`
          M 50 50
          m 0 ${he?"":"-"}${P}
          a ${P} ${P} 0 1 1 0 ${he?"-":""}${P*2}
          a ${P} ${P} 0 1 1 0 ${he?"":"-"}${P*2}
          `}),j=bt(()=>2*Math.PI*W.value),Y=bt(()=>C.type==="dashboard"?.75:1),le=bt(()=>`${-1*j.value*(1-Y.value)/2}px`),ce=bt(()=>({strokeDasharray:`${j.value*Y.value}px, ${j.value}px`,strokeDashoffset:le.value})),ne=bt(()=>({strokeDasharray:`${j.value*Y.value*(C.percentage/100)}px, ${j.value}px`,strokeDashoffset:le.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),fe=bt(()=>{let P;return C.color?P=Ce(C.percentage):P=_[C.status]||_.default,P}),te=bt(()=>C.status==="warning"?$J:C.type==="line"?C.status==="success"?EY:SY:C.status==="success"?kY:NG),ve=bt(()=>C.type==="line"?12+C.strokeWidth*.4:C.width*.111111+2),ie=bt(()=>C.format(C.percentage));function pe(P){const he=100/P.length;return P.map((Me,K)=>G1(Me)?{color:Me,percentage:(K+1)*he}:Me).sort((Me,K)=>Me.percentage-K.percentage)}const Ce=P=>{var he;const{color:Ye}=C;if(Wh(Ye))return Ye(P);if(G1(Ye))return Ye;{const Me=pe(Ye);for(const K of Me)if(K.percentage>P)return K.color;return(he=Me[Me.length-1])==null?void 0:he.color}};return(P,he)=>(rt(),sn("div",{class:ct([ae(R).b(),ae(R).m(P.type),ae(R).is(P.status),{[ae(R).m("without-text")]:!P.showText,[ae(R).m("text-inside")]:P.textInside}]),role:"progressbar","aria-valuenow":P.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[P.type==="line"?(rt(),sn("div",{key:0,class:ct(ae(R).b("bar"))},[Rn("div",{class:ct(ae(R).be("bar","outer")),style:Xs({height:`${P.strokeWidth}px`})},[Rn("div",{class:ct([ae(R).be("bar","inner"),{[ae(R).bem("bar","inner","indeterminate")]:P.indeterminate}]),style:Xs(ae(V))},[(P.showText||P.$slots.default)&&P.textInside?(rt(),sn("div",{key:0,class:ct(ae(R).be("bar","innerText"))},[Bo(P.$slots,"default",{percentage:P.percentage},()=>[Rn("span",null,Es(ae(ie)),1)])],2)):An("v-if",!0)],6)],6)],2)):(rt(),sn("div",{key:1,class:ct(ae(R).b("circle")),style:Xs({height:`${P.width}px`,width:`${P.width}px`})},[(rt(),sn("svg",Toe,[Rn("path",{class:ct(ae(R).be("circle","track")),d:ae(U),stroke:`var(${ae(R).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":ae(L),fill:"none",style:Xs(ae(ce))},null,14,_oe),Rn("path",{class:ct(ae(R).be("circle","path")),d:ae(U),stroke:ae(fe),fill:"none",opacity:P.percentage?1:0,"stroke-linecap":P.strokeLinecap,"stroke-width":ae(L),style:Xs(ae(ne))},null,14,Ooe)]))],6)),(P.showText||P.$slots.default)&&!P.textInside?(rt(),sn("div",{key:2,class:ct(ae(R).e("text")),style:Xs({fontSize:`${ae(ve)}px`})},[Bo(P.$slots,"default",{percentage:P.percentage},()=>[P.status?(rt(),zn(ae(ia),{key:1},{default:zt(()=>[(rt(),zn(Lu(ae(te))))]),_:1})):(rt(),sn("span",Aoe,Es(ae(ie)),1))])],6)):An("v-if",!0)],10,koe))}});var Moe=hr(Doe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Boe=jh(Moe);/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var $oe=/["'&<>]/,Poe=Noe;function Noe(g){var C=""+g,_=$oe.exec(C);if(!_)return C;var R,V="",L=0,W=0;for(L=_.index;L<C.length;L++){switch(C.charCodeAt(L)){case 34:R="&quot;";break;case 38:R="&amp;";break;case 39:R="&#39;";break;case 60:R="&lt;";break;case 62:R="&gt;";break;default:continue}W!==L&&(V+=C.substring(W,L)),W=L+1,V+=R}return W!==L?V+C.substring(W,L):V}const bG=function(g){var C;return(C=g.target)==null?void 0:C.closest("td")},Jq=function(g){return g!==null&&typeof g=="object"},Ioe=function(g,C,_,R,V){if(!C&&!R&&(!V||Array.isArray(V)&&!V.length))return g;typeof _=="string"?_=_==="descending"?-1:1:_=_&&_<0?-1:1;const L=R?null:function(U,j){return V?(Array.isArray(V)||(V=[V]),V.map(Y=>typeof Y=="string"?ou(U,Y):Y(U,j,g))):(C!=="$key"&&Jq(U)&&"$value"in U&&(U=U.$value),[Jq(U)?ou(U,C):U])},W=function(U,j){if(R)return R(U.value,j.value);for(let Y=0,le=U.key.length;Y<le;Y++){if(U.key[Y]<j.key[Y])return-1;if(U.key[Y]>j.key[Y])return 1}return 0};return g.map((U,j)=>({value:U,index:j,key:L?L(U,j):null})).sort((U,j)=>{let Y=W(U,j);return Y||(Y=U.index-j.index),Y*+_}).map(U=>U.value)},hX=function(g,C){let _=null;return g.columns.forEach(R=>{R.id===C&&(_=R)}),_},Foe=function(g,C){let _=null;for(let R=0;R<g.columns.length;R++){const V=g.columns[R];if(V.columnKey===C){_=V;break}}return _||HT("ElTable",`No column matching with column-key: ${C}`),_},Qq=function(g,C,_){const R=(C.className||"").match(new RegExp(`${_}-table_[^\\s]+`,"gm"));return R?hX(g,R[0]):null},Yi=(g,C)=>{if(!g)throw new Error("Row is required when get row identity");if(typeof C=="string"){if(!C.includes("."))return`${g[C]}`;const _=C.split(".");let R=g;for(const V of _)R=R[V];return`${R}`}else if(typeof C=="function")return C.call(null,g)},_w=function(g,C){const _={};return(g||[]).forEach((R,V)=>{_[Yi(R,C)]={row:R,index:V}}),_};function Loe(g,C){const _={};let R;for(R in g)_[R]=g[R];for(R in C)if(Mw(C,R)){const V=C[R];typeof V<"u"&&(_[R]=V)}return _}function WG(g){return g===""||g!==void 0&&(g=Number.parseInt(g,10),Number.isNaN(g)&&(g="")),g}function pX(g){return g===""||g!==void 0&&(g=WG(g),Number.isNaN(g)&&(g=80)),g}function Hoe(g){return typeof g=="number"?g:typeof g=="string"?/^\d+(?:px)?$/.test(g)?Number.parseInt(g,10):g:null}function zoe(...g){return g.length===0?C=>C:g.length===1?g[0]:g.reduce((C,_)=>(...R)=>C(_(...R)))}function TD(g,C,_){let R=!1;const V=g.indexOf(C),L=V!==-1,W=U=>{U==="add"?g.push(C):g.splice(V,1),R=!0,Aw(C.children)&&C.children.forEach(j=>{TD(g,j,_!=null?_:!L)})};return MD(_)?_&&!L?W("add"):!_&&L&&W("remove"):W(L?"remove":"add"),R}function Voe(g,C,_="children",R="hasChildren"){const V=W=>!(Array.isArray(W)&&W.length);function L(W,U,j){C(W,U,j),U.forEach(Y=>{if(Y[R]){C(Y,null,j+1);return}const le=Y[_];V(le)||L(Y,le,j+1)})}g.forEach(W=>{if(W[R]){C(W,null,0);return}const U=W[_];V(U)||L(W,U,0)})}let j1;function Uoe(g,C,_,R,V){const{nextZIndex:L}=c6(),W=g==null?void 0:g.dataset.prefix,U=g==null?void 0:g.querySelector(`.${W}-scrollbar__wrap`);function j(){const te=V==="light",ve=document.createElement("div");return ve.className=`${W}-popper ${te?"is-light":"is-dark"}`,_=Poe(_),ve.innerHTML=_,ve.style.zIndex=String(L()),g==null||g.appendChild(ve),ve}function Y(){const te=document.createElement("div");return te.className=`${W}-popper__arrow`,te}function le(){ce&&ce.update()}j1==null||j1(),j1=()=>{try{ce&&ce.destroy(),ne&&(g==null||g.removeChild(ne)),C.removeEventListener("mouseenter",le),C.removeEventListener("mouseleave",j1),U==null||U.removeEventListener("scroll",j1),j1=void 0}catch{}};let ce=null;const ne=j(),fe=Y();return ne.appendChild(fe),ce=PJ(C,ne,{strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"arrow",options:{element:fe,padding:10}}],...R}),C.addEventListener("mouseenter",le),C.addEventListener("mouseleave",j1),U==null||U.addEventListener("scroll",j1),ce}function vX(g){return g.children?Iee(g.children,vX):[g]}function eY(g,C){return g+C.colSpan}const bX=(g,C,_,R)=>{let V=0,L=g;const W=_.states.columns.value;if(R){const j=vX(R[g]);V=W.slice(0,W.indexOf(j[0])).reduce(eY,0),L=V+j.reduce(eY,0)-1}else V=g;let U;switch(C){case"left":L<_.states.fixedLeafColumnsLength.value&&(U="left");break;case"right":V>=W.length-_.states.rightFixedLeafColumnsLength.value&&(U="right");break;default:L<_.states.fixedLeafColumnsLength.value?U="left":V>=W.length-_.states.rightFixedLeafColumnsLength.value&&(U="right")}return U?{direction:U,start:V,after:L}:{}},ZG=(g,C,_,R,V,L=0)=>{const W=[],{direction:U,start:j,after:Y}=bX(C,_,R,V);if(U){const le=U==="left";W.push(`${g}-fixed-column--${U}`),le&&Y+L===R.states.fixedLeafColumnsLength.value-1?W.push("is-last-column"):!le&&j-L===R.states.columns.value.length-R.states.rightFixedLeafColumnsLength.value&&W.push("is-first-column")}return W};function tY(g,C){return g+(C.realWidth===null||Number.isNaN(C.realWidth)?Number(C.width):C.realWidth)}const jG=(g,C,_,R)=>{const{direction:V,start:L=0,after:W=0}=bX(g,C,_,R);if(!V)return;const U={},j=V==="left",Y=_.states.columns.value;return j?U.left=Y.slice(0,L).reduce(tY,0):U.right=Y.slice(W+1).reverse().reduce(tY,0),U},LT=(g,C)=>{!g||Number.isNaN(g[C])||(g[C]=`${g[C]}px`)};function Woe(g){const C=il(),_=nt(!1),R=nt([]);return{updateExpandRows:()=>{const j=g.data.value||[],Y=g.rowKey.value;if(_.value)R.value=j.slice();else if(Y){const le=_w(R.value,Y);R.value=j.reduce((ce,ne)=>{const fe=Yi(ne,Y);return le[fe]&&ce.push(ne),ce},[])}else R.value=[]},toggleRowExpansion:(j,Y)=>{TD(R.value,j,Y)&&C.emit("expand-change",j,R.value.slice())},setExpandRowKeys:j=>{C.store.assertRowKey();const Y=g.data.value||[],le=g.rowKey.value,ce=_w(Y,le);R.value=j.reduce((ne,fe)=>{const te=ce[fe];return te&&ne.push(te.row),ne},[])},isRowExpanded:j=>{const Y=g.rowKey.value;return Y?!!_w(R.value,Y)[Yi(j,Y)]:R.value.includes(j)},states:{expandRows:R,defaultExpandAll:_}}}function Zoe(g){const C=il(),_=nt(null),R=nt(null),V=Y=>{C.store.assertRowKey(),_.value=Y,W(Y)},L=()=>{_.value=null},W=Y=>{const{data:le,rowKey:ce}=g;let ne=null;ce.value&&(ne=(ae(le)||[]).find(fe=>Yi(fe,ce.value)===Y)),R.value=ne,C.emit("current-change",R.value,null)};return{setCurrentRowKey:V,restoreCurrentRowKey:L,setCurrentRowByKey:W,updateCurrentRow:Y=>{const le=R.value;if(Y&&Y!==le){R.value=Y,C.emit("current-change",R.value,le);return}!Y&&le&&(R.value=null,C.emit("current-change",null,le))},updateCurrentRowData:()=>{const Y=g.rowKey.value,le=g.data.value||[],ce=R.value;if(!le.includes(ce)&&ce){if(Y){const ne=Yi(ce,Y);W(ne)}else R.value=null;R.value===null&&C.emit("current-change",null,ce)}else _.value&&(W(_.value),L())},states:{_currentRowKey:_,currentRow:R}}}function joe(g){const C=nt([]),_=nt({}),R=nt(16),V=nt(!1),L=nt({}),W=nt("hasChildren"),U=nt("children"),j=il(),Y=bt(()=>{if(!g.rowKey.value)return{};const pe=g.data.value||[];return ce(pe)}),le=bt(()=>{const pe=g.rowKey.value,Ce=Object.keys(L.value),P={};return Ce.length&&Ce.forEach(he=>{if(L.value[he].length){const Ye={children:[]};L.value[he].forEach(Me=>{const K=Yi(Me,pe);Ye.children.push(K),Me[W.value]&&!P[K]&&(P[K]={children:[]})}),P[he]=Ye}}),P}),ce=pe=>{const Ce=g.rowKey.value,P={};return Voe(pe,(he,Ye,Me)=>{const K=Yi(he,Ce);Array.isArray(Ye)?P[K]={children:Ye.map(Ie=>Yi(Ie,Ce)),level:Me}:V.value&&(P[K]={children:[],lazy:!0,level:Me})},U.value,W.value),P},ne=(pe=!1,Ce=(P=>(P=j.store)==null?void 0:P.states.defaultExpandAll.value)())=>{var P;const he=Y.value,Ye=le.value,Me=Object.keys(he),K={};if(Me.length){const Ie=ae(_),pt=[],ft=(re,Nt)=>{if(pe)return C.value?Ce||C.value.includes(Nt):!!(Ce||(re==null?void 0:re.expanded));{const Je=Ce||C.value&&C.value.includes(Nt);return!!((re==null?void 0:re.expanded)||Je)}};Me.forEach(re=>{const Nt=Ie[re],Je={...he[re]};if(Je.expanded=ft(Nt,re),Je.lazy){const{loaded:ot=!1,loading:O=!1}=Nt||{};Je.loaded=!!ot,Je.loading=!!O,pt.push(re)}K[re]=Je});const Oe=Object.keys(Ye);V.value&&Oe.length&&pt.length&&Oe.forEach(re=>{const Nt=Ie[re],Je=Ye[re].children;if(pt.includes(re)){if(K[re].children.length!==0)throw new Error("[ElTable]children must be an empty array.");K[re].children=Je}else{const{loaded:ot=!1,loading:O=!1}=Nt||{};K[re]={lazy:!0,loaded:!!ot,loading:!!O,expanded:ft(Nt,re),children:Je,level:""}}})}_.value=K,(P=j.store)==null||P.updateTableScrollY()};_o(()=>C.value,()=>{ne(!0)}),_o(()=>Y.value,()=>{ne()}),_o(()=>le.value,()=>{ne()});const fe=pe=>{C.value=pe,ne()},te=(pe,Ce)=>{j.store.assertRowKey();const P=g.rowKey.value,he=Yi(pe,P),Ye=he&&_.value[he];if(he&&Ye&&"expanded"in Ye){const Me=Ye.expanded;Ce=typeof Ce>"u"?!Ye.expanded:Ce,_.value[he].expanded=Ce,Me!==Ce&&j.emit("expand-change",pe,Ce),j.store.updateTableScrollY()}},ve=pe=>{j.store.assertRowKey();const Ce=g.rowKey.value,P=Yi(pe,Ce),he=_.value[P];V.value&&he&&"loaded"in he&&!he.loaded?ie(pe,P,he):te(pe,void 0)},ie=(pe,Ce,P)=>{const{load:he}=j.props;he&&!_.value[Ce].loaded&&(_.value[Ce].loading=!0,he(pe,P,Ye=>{if(!Array.isArray(Ye))throw new TypeError("[ElTable] data must be an array");_.value[Ce].loading=!1,_.value[Ce].loaded=!0,_.value[Ce].expanded=!0,Ye.length&&(L.value[Ce]=Ye),j.emit("expand-change",pe,!0)}))};return{loadData:ie,loadOrToggle:ve,toggleTreeExpansion:te,updateTreeExpandKeys:fe,updateTreeData:ne,normalize:ce,states:{expandRowKeys:C,treeData:_,indent:R,lazy:V,lazyTreeNodeMap:L,lazyColumnIdentifier:W,childrenColumnName:U}}}const Goe=(g,C)=>{const _=C.sortingColumn;return!_||typeof _.sortable=="string"?g:Ioe(g,C.sortProp,C.sortOrder,_.sortMethod,_.sortBy)},YL=g=>{const C=[];return g.forEach(_=>{_.children?C.push.apply(C,YL(_.children)):C.push(_)}),C};function Koe(){var g;const C=il(),{size:_}=Nw((g=C.proxy)==null?void 0:g.$props),R=nt(null),V=nt([]),L=nt([]),W=nt(!1),U=nt([]),j=nt([]),Y=nt([]),le=nt([]),ce=nt([]),ne=nt([]),fe=nt([]),te=nt([]),ve=nt(0),ie=nt(0),pe=nt(0),Ce=nt(!1),P=nt([]),he=nt(!1),Ye=nt(!1),Me=nt(null),K=nt({}),Ie=nt(null),pt=nt(null),ft=nt(null),Oe=nt(null),re=nt(null);_o(V,()=>C.state&&O(!1),{deep:!0});const Nt=()=>{if(!R.value)throw new Error("[ElTable] prop row-key is required")},Je=It=>{var Zn;(Zn=It.children)==null||Zn.forEach(Dn=>{Dn.fixed=It.fixed,Je(Dn)})},ot=()=>{U.value.forEach(yt=>{Je(yt)}),le.value=U.value.filter(yt=>yt.fixed===!0||yt.fixed==="left"),ce.value=U.value.filter(yt=>yt.fixed==="right"),le.value.length>0&&U.value[0]&&U.value[0].type==="selection"&&!U.value[0].fixed&&(U.value[0].fixed=!0,le.value.unshift(U.value[0]));const It=U.value.filter(yt=>!yt.fixed);j.value=[].concat(le.value).concat(It).concat(ce.value);const Zn=YL(It),Dn=YL(le.value),Re=YL(ce.value);ve.value=Zn.length,ie.value=Dn.length,pe.value=Re.length,Y.value=[].concat(Dn).concat(Zn).concat(Re),W.value=le.value.length>0||ce.value.length>0},O=(It,Zn=!1)=>{It&&ot(),Zn?C.state.doLayout():C.state.debouncedUpdateLayout()},Ut=It=>P.value.includes(It),we=()=>{Ce.value=!1,P.value.length&&(P.value=[],C.emit("selection-change",[]))},Qe=()=>{let It;if(R.value){It=[];const Zn=_w(P.value,R.value),Dn=_w(V.value,R.value);for(const Re in Zn)Mw(Zn,Re)&&!Dn[Re]&&It.push(Zn[Re].row)}else It=P.value.filter(Zn=>!V.value.includes(Zn));if(It.length){const Zn=P.value.filter(Dn=>!It.includes(Dn));P.value=Zn,C.emit("selection-change",Zn.slice())}},it=()=>(P.value||[]).slice(),Fe=(It,Zn=void 0,Dn=!0)=>{if(TD(P.value,It,Zn)){const yt=(P.value||[]).slice();Dn&&C.emit("select",yt,It),C.emit("selection-change",yt)}},_n=()=>{var It,Zn;const Dn=Ye.value?!Ce.value:!(Ce.value||P.value.length);Ce.value=Dn;let Re=!1,yt=0;const en=(Zn=(It=C==null?void 0:C.store)==null?void 0:It.states)==null?void 0:Zn.rowKey.value;V.value.forEach((hn,vo)=>{const Ts=vo+yt;Me.value?Me.value.call(null,hn,Ts)&&TD(P.value,hn,Dn)&&(Re=!0):TD(P.value,hn,Dn)&&(Re=!0),yt+=Jn(Yi(hn,en))}),Re&&C.emit("selection-change",P.value?P.value.slice():[]),C.emit("select-all",P.value)},Kn=()=>{const It=_w(P.value,R.value);V.value.forEach(Zn=>{const Dn=Yi(Zn,R.value),Re=It[Dn];Re&&(P.value[Re.index]=Zn)})},Pn=()=>{var It,Zn,Dn;if(((It=V.value)==null?void 0:It.length)===0){Ce.value=!1;return}let Re;R.value&&(Re=_w(P.value,R.value));const yt=function(Ts){return Re?!!Re[Yi(Ts,R.value)]:P.value.includes(Ts)};let en=!0,hn=0,vo=0;for(let Ts=0,ka=(V.value||[]).length;Ts<ka;Ts++){const Uo=(Dn=(Zn=C==null?void 0:C.store)==null?void 0:Zn.states)==null?void 0:Dn.rowKey.value,Lr=Ts+vo,xt=V.value[Ts],Hn=Me.value&&Me.value.call(null,xt,Lr);if(yt(xt))hn++;else if(!Me.value||Hn){en=!1;break}vo+=Jn(Yi(xt,Uo))}hn===0&&(en=!1),Ce.value=en},Jn=It=>{var Zn;if(!C||!C.store)return 0;const{treeData:Dn}=C.store.states;let Re=0;const yt=(Zn=Dn.value[It])==null?void 0:Zn.children;return yt&&(Re+=yt.length,yt.forEach(en=>{Re+=Jn(en)})),Re},Pe=(It,Zn)=>{Array.isArray(It)||(It=[It]);const Dn={};return It.forEach(Re=>{K.value[Re.id]=Zn,Dn[Re.columnKey||Re.id]=Zn}),Dn},St=(It,Zn,Dn)=>{pt.value&&pt.value!==It&&(pt.value.order=null),pt.value=It,ft.value=Zn,Oe.value=Dn},z=()=>{let It=ae(L);Object.keys(K.value).forEach(Zn=>{const Dn=K.value[Zn];if(!Dn||Dn.length===0)return;const Re=hX({columns:Y.value},Zn);Re&&Re.filterMethod&&(It=It.filter(yt=>Dn.some(en=>Re.filterMethod.call(null,en,yt,Re))))}),Ie.value=It},Rr=()=>{V.value=Goe(Ie.value,{sortingColumn:pt.value,sortProp:ft.value,sortOrder:Oe.value})},Wn=(It=void 0)=>{It&&It.filter||z(),Rr()},ms=It=>{const{tableHeaderRef:Zn}=C.refs;if(!Zn)return;const Dn=Object.assign({},Zn.filterPanels),Re=Object.keys(Dn);if(!!Re.length)if(typeof It=="string"&&(It=[It]),Array.isArray(It)){const yt=It.map(en=>Foe({columns:Y.value},en));Re.forEach(en=>{const hn=yt.find(vo=>vo.id===en);hn&&(hn.filteredValue=[])}),C.store.commit("filterChange",{column:yt,values:[],silent:!0,multi:!0})}else Re.forEach(yt=>{const en=Y.value.find(hn=>hn.id===yt);en&&(en.filteredValue=[])}),K.value={},C.store.commit("filterChange",{column:{},values:[],silent:!0})},po=()=>{!pt.value||(St(null,null,null),C.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Vu,toggleRowExpansion:dn,updateExpandRows:$o,states:pn,isRowExpanded:Ge}=Woe({data:V,rowKey:R}),{updateTreeExpandKeys:cl,toggleTreeExpansion:ps,updateTreeData:Qt,loadOrToggle:_l,states:Vo}=joe({data:V,rowKey:R}),{updateCurrentRowData:Xi,updateCurrentRow:ns,setCurrentRowKey:Js,states:Si}=Zoe({data:V,rowKey:R});return{assertRowKey:Nt,updateColumns:ot,scheduleLayout:O,isSelected:Ut,clearSelection:we,cleanSelection:Qe,getSelectionRows:it,toggleRowSelection:Fe,_toggleAllSelection:_n,toggleAllSelection:null,updateSelectionByRowKey:Kn,updateAllSelected:Pn,updateFilters:Pe,updateCurrentRow:ns,updateSort:St,execFilter:z,execSort:Rr,execQuery:Wn,clearFilter:ms,clearSort:po,toggleRowExpansion:dn,setExpandRowKeysAdapter:It=>{Vu(It),cl(It)},setCurrentRowKey:Js,toggleRowExpansionAdapter:(It,Zn)=>{Y.value.some(({type:Re})=>Re==="expand")?dn(It,Zn):ps(It,Zn)},isRowExpanded:Ge,updateExpandRows:$o,updateCurrentRowData:Xi,loadOrToggle:_l,updateTreeData:Qt,states:{tableSize:_,rowKey:R,data:V,_data:L,isComplex:W,_columns:U,originColumns:j,columns:Y,fixedColumns:le,rightFixedColumns:ce,leafColumns:ne,fixedLeafColumns:fe,rightFixedLeafColumns:te,leafColumnsLength:ve,fixedLeafColumnsLength:ie,rightFixedLeafColumnsLength:pe,isAllSelected:Ce,selection:P,reserveSelection:he,selectOnIndeterminate:Ye,selectable:Me,filters:K,filteredData:Ie,sortingColumn:pt,sortProp:ft,sortOrder:Oe,hoverRow:re,...pn,...Vo,...Si}}}function DG(g,C){return g.map(_=>{var R;return _.id===C.id?C:((R=_.children)!=null&&R.length&&(_.children=DG(_.children,C)),_)})}function yX(g){g.forEach(C=>{var _,R;C.no=(_=C.getColumnIndex)==null?void 0:_.call(C),(R=C.children)!=null&&R.length&&yX(C.children)}),g.sort((C,_)=>C.no-_.no)}function qoe(){const g=il(),C=Koe();return{ns:zo("table"),...C,mutations:{setData(W,U){const j=ae(W._data)!==U;W.data.value=U,W._data.value=U,g.store.execQuery(),g.store.updateCurrentRowData(),g.store.updateExpandRows(),g.store.updateTreeData(g.store.states.defaultExpandAll.value),ae(W.reserveSelection)?(g.store.assertRowKey(),g.store.updateSelectionByRowKey()):j?g.store.clearSelection():g.store.cleanSelection(),g.store.updateAllSelected(),g.$ready&&g.store.scheduleLayout()},insertColumn(W,U,j){const Y=ae(W._columns);let le=[];j?(j&&!j.children&&(j.children=[]),j.children.push(U),le=DG(Y,j)):(Y.push(U),le=Y),yX(le),W._columns.value=le,U.type==="selection"&&(W.selectable.value=U.selectable,W.reserveSelection.value=U.reserveSelection),g.$ready&&(g.store.updateColumns(),g.store.scheduleLayout())},removeColumn(W,U,j){const Y=ae(W._columns)||[];if(j)j.children.splice(j.children.findIndex(le=>le.id===U.id),1),Ss(()=>{var le;((le=j.children)==null?void 0:le.length)===0&&delete j.children}),W._columns.value=DG(Y,j);else{const le=Y.indexOf(U);le>-1&&(Y.splice(le,1),W._columns.value=Y)}g.$ready&&(g.store.updateColumns(),g.store.scheduleLayout())},sort(W,U){const{prop:j,order:Y,init:le}=U;if(j){const ce=ae(W.columns).find(ne=>ne.property===j);ce&&(ce.order=Y,g.store.updateSort(ce,j,Y),g.store.commit("changeSortCondition",{init:le}))}},changeSortCondition(W,U){const{sortingColumn:j,sortProp:Y,sortOrder:le}=W,ce=ae(j),ne=ae(Y),fe=ae(le);fe===null&&(W.sortingColumn.value=null,W.sortProp.value=null);const te={filter:!0};g.store.execQuery(te),(!U||!(U.silent||U.init))&&g.emit("sort-change",{column:ce,prop:ne,order:fe}),g.store.updateTableScrollY()},filterChange(W,U){const{column:j,values:Y,silent:le}=U,ce=g.store.updateFilters(j,Y);g.store.execQuery(),le||g.emit("filter-change",ce),g.store.updateTableScrollY()},toggleAllSelection(){g.store.toggleAllSelection()},rowSelectedChanged(W,U){g.store.toggleRowSelection(U),g.store.updateAllSelected()},setHoverRow(W,U){W.hoverRow.value=U},setCurrentRow(W,U){g.store.updateCurrentRow(U)}},commit:function(W,...U){const j=g.store.mutations;if(j[W])j[W].apply(g,[g.store.states].concat(U));else throw new Error(`Action not found: ${W}`)},updateTableScrollY:function(){Ss(()=>g.layout.updateScrollY.apply(g.layout))}}}const _D={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data",["treeProps.hasChildren"]:{key:"lazyColumnIdentifier",default:"hasChildren"},["treeProps.children"]:{key:"childrenColumnName",default:"children"}};function Yoe(g,C){if(!g)throw new Error("Table is required.");const _=qoe();return _.toggleAllSelection=Bw(_._toggleAllSelection,10),Object.keys(_D).forEach(R=>{CX(wX(C,R),R,_)}),Xoe(_,C),_}function Xoe(g,C){Object.keys(_D).forEach(_=>{_o(()=>wX(C,_),R=>{CX(R,_,g)})})}function CX(g,C,_){let R=g,V=_D[C];typeof _D[C]=="object"&&(V=V.key,R=R||_D[C].default),_.states[V].value=R}function wX(g,C){if(C.includes(".")){const _=C.split(".");let R=g;return _.forEach(V=>{R=R[V]}),R}else return g[C]}class Joe{constructor(C){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=nt(null),this.scrollX=nt(!1),this.scrollY=nt(!1),this.bodyWidth=nt(null),this.fixedWidth=nt(null),this.rightFixedWidth=nt(null),this.gutterWidth=0;for(const _ in C)Mw(C,_)&&(z0(this[_])?this[_].value=C[_]:this[_]=C[_]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const _=this.table.refs.scrollBarRef;if(this.table.vnode.el&&_){let R=!0;const V=this.scrollY.value;return R=_.wrapRef.scrollHeight>_.wrapRef.clientHeight,this.scrollY.value=R,V!==R}return!1}setHeight(C,_="height"){if(!Ha)return;const R=this.table.vnode.el;if(C=Hoe(C),this.height.value=Number(C),!R&&(C||C===0))return Ss(()=>this.setHeight(C,_));typeof C=="number"?(R.style[_]=`${C}px`,this.updateElsHeight()):typeof C=="string"&&(R.style[_]=C,this.updateElsHeight())}setMaxHeight(C){this.setHeight(C,"max-height")}getFlattenColumns(){const C=[];return this.table.store.states.columns.value.forEach(R=>{R.isColumnGroup?C.push.apply(C,R.columns):C.push(R)}),C}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(C){if(!C)return!0;let _=C;for(;_.tagName!=="DIV";){if(getComputedStyle(_).display==="none")return!0;_=_.parentElement}return!1}updateColumnsWidth(){if(!Ha)return;const C=this.fit,_=this.table.vnode.el.clientWidth;let R=0;const V=this.getFlattenColumns(),L=V.filter(j=>typeof j.width!="number");if(V.forEach(j=>{typeof j.width=="number"&&j.realWidth&&(j.realWidth=null)}),L.length>0&&C){if(V.forEach(j=>{R+=Number(j.width||j.minWidth||80)}),R<=_){this.scrollX.value=!1;const j=_-R;if(L.length===1)L[0].realWidth=Number(L[0].minWidth||80)+j;else{const Y=L.reduce((ne,fe)=>ne+Number(fe.minWidth||80),0),le=j/Y;let ce=0;L.forEach((ne,fe)=>{if(fe===0)return;const te=Math.floor(Number(ne.minWidth||80)*le);ce+=te,ne.realWidth=Number(ne.minWidth||80)+te}),L[0].realWidth=Number(L[0].minWidth||80)+j-ce}}else this.scrollX.value=!0,L.forEach(j=>{j.realWidth=Number(j.minWidth)});this.bodyWidth.value=Math.max(R,_),this.table.state.resizeState.value.width=this.bodyWidth.value}else V.forEach(j=>{!j.width&&!j.minWidth?j.realWidth=80:j.realWidth=Number(j.width||j.minWidth),R+=j.realWidth}),this.scrollX.value=R>_,this.bodyWidth.value=R;const W=this.store.states.fixedColumns.value;if(W.length>0){let j=0;W.forEach(Y=>{j+=Number(Y.realWidth||Y.width)}),this.fixedWidth.value=j}const U=this.store.states.rightFixedColumns.value;if(U.length>0){let j=0;U.forEach(Y=>{j+=Number(Y.realWidth||Y.width)}),this.rightFixedWidth.value=j}this.notifyObservers("columns")}addObserver(C){this.observers.push(C)}removeObserver(C){const _=this.observers.indexOf(C);_!==-1&&this.observers.splice(_,1)}notifyObservers(C){this.observers.forEach(R=>{var V,L;switch(C){case"columns":(V=R.state)==null||V.onColumnsChange(this);break;case"scrollable":(L=R.state)==null||L.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${C}.`)}})}}const{CheckboxGroup:Qoe}=FT,ese=oo({name:"ElTableFilterPanel",components:{ElCheckbox:FT,ElCheckboxGroup:Qoe,ElScrollbar:zG,ElTooltip:wY,ElIcon:ia,ArrowDown:xY,ArrowUp:NJ},directives:{ClickOutside:KY},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(g){const C=il(),{t:_}=zu(),R=zo("table-filter"),V=C==null?void 0:C.parent;V.filterPanels.value[g.column.id]||(V.filterPanels.value[g.column.id]=C);const L=nt(!1),W=nt(null),U=bt(()=>g.column&&g.column.filters),j=bt({get:()=>{var he;return(((he=g.column)==null?void 0:he.filteredValue)||[])[0]},set:he=>{Y.value&&(typeof he<"u"&&he!==null?Y.value.splice(0,1,he):Y.value.splice(0,1))}}),Y=bt({get(){return g.column?g.column.filteredValue||[]:[]},set(he){g.column&&g.upDataColumn("filteredValue",he)}}),le=bt(()=>g.column?g.column.filterMultiple:!0),ce=he=>he.value===j.value,ne=()=>{L.value=!1},fe=he=>{he.stopPropagation(),L.value=!L.value},te=()=>{L.value=!1},ve=()=>{Ce(Y.value),ne()},ie=()=>{Y.value=[],Ce(Y.value),ne()},pe=he=>{j.value=he,Ce(typeof he<"u"&&he!==null?Y.value:[]),ne()},Ce=he=>{g.store.commit("filterChange",{column:g.column,values:he}),g.store.updateAllSelected()};_o(L,he=>{g.column&&g.upDataColumn("filterOpened",he)},{immediate:!0});const P=bt(()=>{var he,Ye;return(Ye=(he=W.value)==null?void 0:he.popperRef)==null?void 0:Ye.contentRef});return{tooltipVisible:L,multiple:le,filteredValue:Y,filterValue:j,filters:U,handleConfirm:ve,handleReset:ie,handleSelect:pe,isActive:ce,t:_,ns:R,showFilterPanel:fe,hideFilterPanel:te,popperPaneRef:P,tooltip:W}}}),tse={key:0},nse=["disabled"],ose=["label","onClick"];function sse(g,C,_,R,V,L){const W=qr("el-checkbox"),U=qr("el-checkbox-group"),j=qr("el-scrollbar"),Y=qr("arrow-up"),le=qr("arrow-down"),ce=qr("el-icon"),ne=qr("el-tooltip"),fe=IG("click-outside");return rt(),zn(ne,{ref:"tooltip",visible:g.tooltipVisible,offset:0,placement:g.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":g.ns.b(),persistent:""},{content:zt(()=>[g.multiple?(rt(),sn("div",tse,[Rn("div",{class:ct(g.ns.e("content"))},[qt(j,{"wrap-class":g.ns.e("wrap")},{default:zt(()=>[qt(U,{modelValue:g.filteredValue,"onUpdate:modelValue":C[0]||(C[0]=te=>g.filteredValue=te),class:ct(g.ns.e("checkbox-group"))},{default:zt(()=>[(rt(!0),sn(Tc,null,Zh(g.filters,te=>(rt(),zn(W,{key:te.value,label:te.value},{default:zt(()=>[Hu(Es(te.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),Rn("div",{class:ct(g.ns.e("bottom"))},[Rn("button",{class:ct({[g.ns.is("disabled")]:g.filteredValue.length===0}),disabled:g.filteredValue.length===0,type:"button",onClick:C[1]||(C[1]=(...te)=>g.handleConfirm&&g.handleConfirm(...te))},Es(g.t("el.table.confirmFilter")),11,nse),Rn("button",{type:"button",onClick:C[2]||(C[2]=(...te)=>g.handleReset&&g.handleReset(...te))},Es(g.t("el.table.resetFilter")),1)],2)])):(rt(),sn("ul",{key:1,class:ct(g.ns.e("list"))},[Rn("li",{class:ct([g.ns.e("list-item"),{[g.ns.is("active")]:g.filterValue===void 0||g.filterValue===null}]),onClick:C[3]||(C[3]=te=>g.handleSelect(null))},Es(g.t("el.table.clearFilter")),3),(rt(!0),sn(Tc,null,Zh(g.filters,te=>(rt(),sn("li",{key:te.value,class:ct([g.ns.e("list-item"),g.ns.is("active",g.isActive(te))]),label:te.value,onClick:ve=>g.handleSelect(te.value)},Es(te.text),11,ose))),128))],2))]),default:zt(()=>[ei((rt(),sn("span",{class:ct([`${g.ns.namespace.value}-table__column-filter-trigger`,`${g.ns.namespace.value}-none-outline`]),onClick:C[4]||(C[4]=(...te)=>g.showFilterPanel&&g.showFilterPanel(...te))},[qt(ce,null,{default:zt(()=>[g.column.filterOpened?(rt(),zn(Y,{key:0})):(rt(),zn(le,{key:1}))]),_:1})],2)),[[fe,g.hideFilterPanel,g.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var rse=hr(ese,[["render",sse],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function SX(g){const C=il();TY(()=>{_.value.addObserver(C)}),_c(()=>{R(_.value),V(_.value)}),hY(()=>{R(_.value),V(_.value)}),_Y(()=>{_.value.removeObserver(C)});const _=bt(()=>{const L=g.layout;if(!L)throw new Error("Can not find table layout.");return L}),R=L=>{var W;const U=((W=g.vnode.el)==null?void 0:W.querySelectorAll("colgroup > col"))||[];if(!U.length)return;const j=L.getFlattenColumns(),Y={};j.forEach(le=>{Y[le.id]=le});for(let le=0,ce=U.length;le<ce;le++){const ne=U[le],fe=ne.getAttribute("name"),te=Y[fe];te&&ne.setAttribute("width",te.realWidth||te.width)}},V=L=>{var W,U;const j=((W=g.vnode.el)==null?void 0:W.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let le=0,ce=j.length;le<ce;le++)j[le].setAttribute("width",L.scrollY.value?L.gutterWidth:"0");const Y=((U=g.vnode.el)==null?void 0:U.querySelectorAll("th.gutter"))||[];for(let le=0,ce=Y.length;le<ce;le++){const ne=Y[le];ne.style.width=L.scrollY.value?`${L.gutterWidth}px`:"0",ne.style.display=L.scrollY.value?"":"none"}};return{tableLayout:_.value,onColumnsChange:R,onScrollableChange:V}}const Gh=Symbol("ElTable");function ase(g,C){const _=il(),R=Ea(Gh),V=ve=>{ve.stopPropagation()},L=(ve,ie)=>{!ie.filters&&ie.sortable?te(ve,ie,!1):ie.filterable&&!ie.sortable&&V(ve),R==null||R.emit("header-click",ie,ve)},W=(ve,ie)=>{R==null||R.emit("header-contextmenu",ie,ve)},U=nt(null),j=nt(!1),Y=nt({}),le=(ve,ie)=>{if(!!Ha&&!(ie.children&&ie.children.length>0)&&U.value&&g.border){j.value=!0;const pe=R;C("set-drag-visible",!0);const P=(pe==null?void 0:pe.vnode.el).getBoundingClientRect().left,he=_.vnode.el.querySelector(`th.${ie.id}`),Ye=he.getBoundingClientRect(),Me=Ye.left-P+30;PG(he,"noclick"),Y.value={startMouseLeft:ve.clientX,startLeft:Ye.right-P,startColumnLeft:Ye.left-P,tableLeft:P};const K=pe==null?void 0:pe.refs.resizeProxy;K.style.left=`${Y.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const Ie=ft=>{const Oe=ft.clientX-Y.value.startMouseLeft,re=Y.value.startLeft+Oe;K.style.left=`${Math.max(Me,re)}px`},pt=()=>{if(j.value){const{startColumnLeft:ft,startLeft:Oe}=Y.value,Nt=Number.parseInt(K.style.left,10)-ft;ie.width=ie.realWidth=Nt,pe==null||pe.emit("header-dragend",ie.width,Oe-ft,ie,ve),requestAnimationFrame(()=>{g.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",j.value=!1,U.value=null,Y.value={},C("set-drag-visible",!1)}document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",pt),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{QL(he,"noclick")},0)};document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",pt)}},ce=(ve,ie)=>{var pe;if(ie.children&&ie.children.length>0)return;const Ce=(pe=ve.target)==null?void 0:pe.closest("th");if(!(!ie||!ie.resizable)&&!j.value&&g.border){const P=Ce.getBoundingClientRect(),he=document.body.style;P.width>12&&P.right-ve.pageX<8?(he.cursor="col-resize",$T(Ce,"is-sortable")&&(Ce.style.cursor="col-resize"),U.value=ie):j.value||(he.cursor="",$T(Ce,"is-sortable")&&(Ce.style.cursor="pointer"),U.value=null)}},ne=()=>{!Ha||(document.body.style.cursor="")},fe=({order:ve,sortOrders:ie})=>{if(ve==="")return ie[0];const pe=ie.indexOf(ve||null);return ie[pe>ie.length-2?0:pe+1]},te=(ve,ie,pe)=>{var Ce;ve.stopPropagation();const P=ie.order===pe?null:pe||fe(ie),he=(Ce=ve.target)==null?void 0:Ce.closest("th");if(he&&$T(he,"noclick")){QL(he,"noclick");return}if(!ie.sortable)return;const Ye=g.store.states;let Me=Ye.sortProp.value,K;const Ie=Ye.sortingColumn.value;(Ie!==ie||Ie===ie&&Ie.order===null)&&(Ie&&(Ie.order=null),Ye.sortingColumn.value=ie,Me=ie.property),P?K=ie.order=P:K=ie.order=null,Ye.sortProp.value=Me,Ye.sortOrder.value=K,R==null||R.store.commit("changeSortCondition")};return{handleHeaderClick:L,handleHeaderContextMenu:W,handleMouseDown:le,handleMouseMove:ce,handleMouseOut:ne,handleSortClick:te,handleFilterClick:V}}function lse(g){const C=Ea(Gh),_=zo("table");return{getHeaderRowStyle:U=>{const j=C==null?void 0:C.props.headerRowStyle;return typeof j=="function"?j.call(null,{rowIndex:U}):j},getHeaderRowClass:U=>{const j=[],Y=C==null?void 0:C.props.headerRowClassName;return typeof Y=="string"?j.push(Y):typeof Y=="function"&&j.push(Y.call(null,{rowIndex:U})),j.join(" ")},getHeaderCellStyle:(U,j,Y,le)=>{var ce;let ne=(ce=C==null?void 0:C.props.headerCellStyle)!=null?ce:{};typeof ne=="function"&&(ne=ne.call(null,{rowIndex:U,columnIndex:j,row:Y,column:le}));const fe=jG(j,le.fixed,g.store,Y);return LT(fe,"left"),LT(fe,"right"),Object.assign({},ne,fe)},getHeaderCellClass:(U,j,Y,le)=>{const ce=ZG(_.b(),j,le.fixed,g.store,Y),ne=[le.id,le.order,le.headerAlign,le.className,le.labelClassName,...ce];le.children||ne.push("is-leaf"),le.sortable&&ne.push("is-sortable");const fe=C==null?void 0:C.props.headerCellClassName;return typeof fe=="string"?ne.push(fe):typeof fe=="function"&&ne.push(fe.call(null,{rowIndex:U,columnIndex:j,row:Y,column:le})),ne.push(_.e("cell")),ne.filter(te=>Boolean(te)).join(" ")}}}const xX=g=>{const C=[];return g.forEach(_=>{_.children?(C.push(_),C.push.apply(C,xX(_.children))):C.push(_)}),C},ise=g=>{let C=1;const _=(L,W)=>{if(W&&(L.level=W.level+1,C<L.level&&(C=L.level)),L.children){let U=0;L.children.forEach(j=>{_(j,L),U+=j.colSpan}),L.colSpan=U}else L.colSpan=1};g.forEach(L=>{L.level=1,_(L,void 0)});const R=[];for(let L=0;L<C;L++)R.push([]);return xX(g).forEach(L=>{L.children?(L.rowSpan=1,L.children.forEach(W=>W.isSubColumn=!0)):L.rowSpan=C-L.level+1,R[L.level-1].push(L)}),R};function cse(g){const C=Ea(Gh),_=bt(()=>ise(g.store.states.originColumns.value));return{isGroup:bt(()=>{const L=_.value.length>1;return L&&C&&(C.state.isGroup.value=!0),L}),toggleAllSelection:L=>{L.stopPropagation(),C==null||C.store.commit("toggleAllSelection")},columnRows:_}}var use=oo({name:"ElTableHeader",components:{ElCheckbox:FT},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(g,{emit:C}){const _=il(),R=Ea(Gh),V=zo("table"),L=nt({}),{onColumnsChange:W,onScrollableChange:U}=SX(R);_c(async()=>{await Ss(),await Ss();const{prop:Me,order:K}=g.defaultSort;R==null||R.store.commit("sort",{prop:Me,order:K,init:!0})});const{handleHeaderClick:j,handleHeaderContextMenu:Y,handleMouseDown:le,handleMouseMove:ce,handleMouseOut:ne,handleSortClick:fe,handleFilterClick:te}=ase(g,C),{getHeaderRowStyle:ve,getHeaderRowClass:ie,getHeaderCellStyle:pe,getHeaderCellClass:Ce}=lse(g),{isGroup:P,toggleAllSelection:he,columnRows:Ye}=cse(g);return _.state={onColumnsChange:W,onScrollableChange:U},_.filterPanels=L,{ns:V,filterPanels:L,onColumnsChange:W,onScrollableChange:U,columnRows:Ye,getHeaderRowClass:ie,getHeaderRowStyle:ve,getHeaderCellClass:Ce,getHeaderCellStyle:pe,handleHeaderClick:j,handleHeaderContextMenu:Y,handleMouseDown:le,handleMouseMove:ce,handleMouseOut:ne,handleSortClick:fe,handleFilterClick:te,isGroup:P,toggleAllSelection:he}},render(){const{ns:g,isGroup:C,columnRows:_,getHeaderCellStyle:R,getHeaderCellClass:V,getHeaderRowClass:L,getHeaderRowStyle:W,handleHeaderClick:U,handleHeaderContextMenu:j,handleMouseDown:Y,handleMouseMove:le,handleSortClick:ce,handleMouseOut:ne,store:fe,$parent:te}=this;let ve=1;return So("thead",{class:{[g.is("group")]:C}},_.map((ie,pe)=>So("tr",{class:L(pe),key:pe,style:W(pe)},ie.map((Ce,P)=>(Ce.rowSpan>ve&&(ve=Ce.rowSpan),So("th",{class:V(pe,P,ie,Ce),colspan:Ce.colSpan,key:`${Ce.id}-thead`,rowspan:Ce.rowSpan,style:R(pe,P,ie,Ce),onClick:he=>U(he,Ce),onContextmenu:he=>j(he,Ce),onMousedown:he=>Y(he,Ce),onMousemove:he=>le(he,Ce),onMouseout:ne},[So("div",{class:["cell",Ce.filteredValue&&Ce.filteredValue.length>0?"highlight":""]},[Ce.renderHeader?Ce.renderHeader({column:Ce,$index:P,store:fe,_self:te}):Ce.label,Ce.sortable&&So("span",{onClick:he=>ce(he,Ce),class:"caret-wrapper"},[So("i",{onClick:he=>ce(he,Ce,"ascending"),class:"sort-caret ascending"}),So("i",{onClick:he=>ce(he,Ce,"descending"),class:"sort-caret descending"})]),Ce.filterable&&So(rse,{store:fe,placement:Ce.filterPlacement||"bottom-start",column:Ce,upDataColumn:(he,Ye)=>{Ce[he]=Ye}})])]))))))}});function dse(g){const C=Ea(Gh),_=nt(""),R=nt(So("div")),V=(ne,fe,te)=>{var ve;const ie=C,pe=bG(ne);let Ce;const P=(ve=ie==null?void 0:ie.vnode.el)==null?void 0:ve.dataset.prefix;pe&&(Ce=Qq({columns:g.store.states.columns.value},pe,P),Ce&&(ie==null||ie.emit(`cell-${te}`,fe,Ce,pe,ne))),ie==null||ie.emit(`row-${te}`,fe,Ce,ne)},L=(ne,fe)=>{V(ne,fe,"dblclick")},W=(ne,fe)=>{g.store.commit("setCurrentRow",fe),V(ne,fe,"click")},U=(ne,fe)=>{V(ne,fe,"contextmenu")},j=Bw(ne=>{g.store.commit("setHoverRow",ne)},30),Y=Bw(()=>{g.store.commit("setHoverRow",null)},30);return{handleDoubleClick:L,handleClick:W,handleContextMenu:U,handleMouseEnter:j,handleMouseLeave:Y,handleCellMouseEnter:(ne,fe,te)=>{var ve;const ie=C,pe=bG(ne),Ce=(ve=ie==null?void 0:ie.vnode.el)==null?void 0:ve.dataset.prefix;if(pe){const K=Qq({columns:g.store.states.columns.value},pe,Ce),Ie=ie.hoverState={cell:pe,column:K,row:fe};ie==null||ie.emit("cell-mouse-enter",Ie.row,Ie.column,Ie.cell,ne)}const P=ne.target.querySelector(".cell");if(!($T(P,`${Ce}-tooltip`)&&P.childNodes.length))return;const he=document.createRange();he.setStart(P,0),he.setEnd(P,P.childNodes.length);const Ye=Math.round(he.getBoundingClientRect().width),Me=(Number.parseInt(JL(P,"paddingLeft"),10)||0)+(Number.parseInt(JL(P,"paddingRight"),10)||0);(Ye+Me>P.offsetWidth||P.scrollWidth>P.offsetWidth)&&Uoe(C==null?void 0:C.refs.tableWrapper,pe,pe.innerText||pe.textContent,{placement:"top",strategy:"fixed"},te)},handleCellMouseLeave:ne=>{if(!bG(ne))return;const te=C==null?void 0:C.hoverState;C==null||C.emit("cell-mouse-leave",te==null?void 0:te.row,te==null?void 0:te.column,te==null?void 0:te.cell,ne)},tooltipContent:_,tooltipTrigger:R}}function fse(g){const C=Ea(Gh),_=zo("table");return{getRowStyle:(Y,le)=>{const ce=C==null?void 0:C.props.rowStyle;return typeof ce=="function"?ce.call(null,{row:Y,rowIndex:le}):ce||null},getRowClass:(Y,le)=>{const ce=[_.e("row")];(C==null?void 0:C.props.highlightCurrentRow)&&Y===g.store.states.currentRow.value&&ce.push("current-row"),g.stripe&&le%2===1&&ce.push(_.em("row","striped"));const ne=C==null?void 0:C.props.rowClassName;return typeof ne=="string"?ce.push(ne):typeof ne=="function"&&ce.push(ne.call(null,{row:Y,rowIndex:le})),ce},getCellStyle:(Y,le,ce,ne)=>{const fe=C==null?void 0:C.props.cellStyle;let te=fe!=null?fe:{};typeof fe=="function"&&(te=fe.call(null,{rowIndex:Y,columnIndex:le,row:ce,column:ne}));const ve=jG(le,g==null?void 0:g.fixed,g.store);return LT(ve,"left"),LT(ve,"right"),Object.assign({},te,ve)},getCellClass:(Y,le,ce,ne,fe)=>{const te=ZG(_.b(),le,g==null?void 0:g.fixed,g.store,void 0,fe),ve=[ne.id,ne.align,ne.className,...te],ie=C==null?void 0:C.props.cellClassName;return typeof ie=="string"?ve.push(ie):typeof ie=="function"&&ve.push(ie.call(null,{rowIndex:Y,columnIndex:le,row:ce,column:ne})),ve.push(_.e("cell")),ve.filter(pe=>Boolean(pe)).join(" ")},getSpan:(Y,le,ce,ne)=>{let fe=1,te=1;const ve=C==null?void 0:C.props.spanMethod;if(typeof ve=="function"){const ie=ve({row:Y,column:le,rowIndex:ce,columnIndex:ne});Array.isArray(ie)?(fe=ie[0],te=ie[1]):typeof ie=="object"&&(fe=ie.rowspan,te=ie.colspan)}return{rowspan:fe,colspan:te}},getColspanRealWidth:(Y,le,ce)=>{if(le<1)return Y[ce].realWidth;const ne=Y.map(({realWidth:fe,width:te})=>fe||te).slice(ce,ce+le);return Number(ne.reduce((fe,te)=>Number(fe)+Number(te),-1))}}}function mse(g){const C=Ea(Gh),_=zo("table"),{handleDoubleClick:R,handleClick:V,handleContextMenu:L,handleMouseEnter:W,handleMouseLeave:U,handleCellMouseEnter:j,handleCellMouseLeave:Y,tooltipContent:le,tooltipTrigger:ce}=dse(g),{getRowStyle:ne,getRowClass:fe,getCellStyle:te,getCellClass:ve,getSpan:ie,getColspanRealWidth:pe}=fse(g),Ce=bt(()=>g.store.states.columns.value.findIndex(({type:K})=>K==="default")),P=(K,Ie)=>{const pt=C.props.rowKey;return pt?Yi(K,pt):Ie},he=(K,Ie,pt,ft=!1)=>{const{tooltipEffect:Oe,store:re}=g,{indent:Nt,columns:Je}=re.states,ot=fe(K,Ie);let O=!0;return pt&&(ot.push(_.em("row",`level-${pt.level}`)),O=pt.display),So("tr",{style:[O?null:{display:"none"},ne(K,Ie)],class:ot,key:P(K,Ie),onDblclick:we=>R(we,K),onClick:we=>V(we,K),onContextmenu:we=>L(we,K),onMouseenter:()=>W(Ie),onMouseleave:U},Je.value.map((we,Qe)=>{const{rowspan:it,colspan:Fe}=ie(K,we,Ie,Qe);if(!it||!Fe)return null;const _n={...we};_n.realWidth=pe(Je.value,Fe,Qe);const Kn={store:g.store,_self:g.context||C,column:_n,row:K,$index:Ie,cellIndex:Qe,expanded:ft};Qe===Ce.value&&pt&&(Kn.treeNode={indent:pt.level*Nt.value,level:pt.level},typeof pt.expanded=="boolean"&&(Kn.treeNode.expanded=pt.expanded,"loading"in pt&&(Kn.treeNode.loading=pt.loading),"noLazyChildren"in pt&&(Kn.treeNode.noLazyChildren=pt.noLazyChildren)));const Pn=`${Ie},${Qe}`,Jn=_n.columnKey||_n.rawColumnKey||"",Pe=Ye(Qe,we,Kn);return So("td",{style:te(Ie,Qe,K,we),class:ve(Ie,Qe,K,we,Fe-1),key:`${Jn}${Pn}`,rowspan:it,colspan:Fe,onMouseenter:St=>j(St,K,Oe),onMouseleave:Y},[Pe])}))},Ye=(K,Ie,pt)=>Ie.renderCell(pt);return{wrappedRowRender:(K,Ie)=>{const pt=g.store,{isRowExpanded:ft,assertRowKey:Oe}=pt,{treeData:re,lazyTreeNodeMap:Nt,childrenColumnName:Je,rowKey:ot}=pt.states,O=pt.states.columns.value;if(O.some(({type:we})=>we==="expand")){const we=ft(K),Qe=he(K,Ie,void 0,we),it=C.renderExpanded;return we?it?[[Qe,So("tr",{key:`expanded-row__${Qe.key}`},[So("td",{colspan:O.length,class:`${_.e("cell")} ${_.e("expanded-cell")}`},[it({row:K,$index:Ie,store:pt,expanded:we})])])]]:(console.error("[Element Error]renderExpanded is required."),Qe):[[Qe]]}else if(Object.keys(re.value).length){Oe();const we=Yi(K,ot.value);let Qe=re.value[we],it=null;Qe&&(it={expanded:Qe.expanded,level:Qe.level,display:!0},typeof Qe.lazy=="boolean"&&(typeof Qe.loaded=="boolean"&&Qe.loaded&&(it.noLazyChildren=!(Qe.children&&Qe.children.length)),it.loading=Qe.loading));const Fe=[he(K,Ie,it)];if(Qe){let _n=0;const Kn=(Jn,Pe)=>{!(Jn&&Jn.length&&Pe)||Jn.forEach(St=>{const z={display:Pe.display&&Pe.expanded,level:Pe.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Rr=Yi(St,ot.value);if(Rr==null)throw new Error("For nested data item, row-key is required.");if(Qe={...re.value[Rr]},Qe&&(z.expanded=Qe.expanded,Qe.level=Qe.level||z.level,Qe.display=!!(Qe.expanded&&z.display),typeof Qe.lazy=="boolean"&&(typeof Qe.loaded=="boolean"&&Qe.loaded&&(z.noLazyChildren=!(Qe.children&&Qe.children.length)),z.loading=Qe.loading)),_n++,Fe.push(he(St,Ie+_n,z)),Qe){const Wn=Nt.value[Rr]||St[Je.value];Kn(Wn,Qe)}})};Qe.display=!0;const Pn=Nt.value[we]||K[Je.value];Kn(Pn,Qe)}return Fe}else return he(K,Ie,void 0)},tooltipContent:le,tooltipTrigger:ce}}const gse={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var hse=oo({name:"ElTableBody",props:gse,setup(g){const C=il(),_=Ea(Gh),R=zo("table"),{wrappedRowRender:V,tooltipContent:L,tooltipTrigger:W}=mse(g),{onColumnsChange:U,onScrollableChange:j}=SX(_);return _o(g.store.states.hoverRow,(Y,le)=>{if(!g.store.states.isComplex.value||!Ha)return;let ce=window.requestAnimationFrame;ce||(ce=ne=>window.setTimeout(ne,16)),ce(()=>{const ne=C==null?void 0:C.vnode.el,fe=Array.from((ne==null?void 0:ne.children)||[]).filter(ie=>ie==null?void 0:ie.classList.contains(`${R.e("row")}`)),te=fe[le],ve=fe[Y];te&&QL(te,"hover-row"),ve&&PG(ve,"hover-row")})}),_Y(()=>{var Y;(Y=j1)==null||Y()}),{ns:R,onColumnsChange:U,onScrollableChange:j,wrappedRowRender:V,tooltipContent:L,tooltipTrigger:W}},render(){const{wrappedRowRender:g,store:C}=this,_=C.states.data.value||[];return So("tbody",{},[_.reduce((R,V)=>R.concat(g(V,R.length)),[])])}});function GG(g){const C=g.tableLayout==="auto";let _=g.columns||[];C&&_.every(V=>V.width===void 0)&&(_=[]);const R=V=>{const L={key:`${g.tableLayout}_${V.id}`,style:{},name:void 0};return C?L.style={width:`${V.width}px`}:L.name=V.id,L};return So("colgroup",{},_.map(V=>So("col",R(V))))}GG.props=["columns","tableLayout"];function pse(){const g=Ea(Gh),C=g==null?void 0:g.store,_=bt(()=>C.states.fixedLeafColumnsLength.value),R=bt(()=>C.states.rightFixedColumns.value.length),V=bt(()=>C.states.columns.value.length),L=bt(()=>C.states.fixedColumns.value.length),W=bt(()=>C.states.rightFixedColumns.value.length);return{leftFixedLeafCount:_,rightFixedLeafCount:R,columnsCount:V,leftFixedCount:L,rightFixedCount:W,columns:C.states.columns}}function vse(g){const{columns:C}=pse(),_=zo("table");return{getCellClasses:(L,W)=>{const U=L[W],j=[_.e("cell"),U.id,U.align,U.labelClassName,...ZG(_.b(),W,U.fixed,g.store)];return U.className&&j.push(U.className),U.children||j.push(_.is("leaf")),j},getCellStyles:(L,W)=>{const U=jG(W,L.fixed,g.store);return LT(U,"left"),LT(U,"right"),U},columns:C}}var bse=oo({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(g){const{getCellClasses:C,getCellStyles:_,columns:R}=vse(g);return{ns:zo("table"),getCellClasses:C,getCellStyles:_,columns:R}},render(){const{columns:g,getCellStyles:C,getCellClasses:_,summaryMethod:R,sumText:V,ns:L}=this,W=this.store.states.data.value;let U=[];return R?U=R({columns:g,data:W}):g.forEach((j,Y)=>{if(Y===0){U[Y]=V;return}const le=W.map(te=>Number(te[j.property])),ce=[];let ne=!0;le.forEach(te=>{if(!Number.isNaN(+te)){ne=!1;const ve=`${te}`.split(".")[1];ce.push(ve?ve.length:0)}});const fe=Math.max.apply(null,ce);ne?U[Y]="":U[Y]=le.reduce((te,ve)=>{const ie=Number(ve);return Number.isNaN(+ie)?te:Number.parseFloat((te+ve).toFixed(Math.min(fe,20)))},0)}),So("table",{class:L.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[GG({columns:g}),So("tbody",[So("tr",{},[...g.map((j,Y)=>So("td",{key:Y,colspan:j.colSpan,rowspan:j.rowSpan,class:_(g,Y),style:C(j,Y)},[So("div",{class:["cell",j.labelClassName]},[U[Y]])]))])])])}});function yse(g){return{setCurrentRow:le=>{g.commit("setCurrentRow",le)},getSelectionRows:()=>g.getSelectionRows(),toggleRowSelection:(le,ce)=>{g.toggleRowSelection(le,ce,!1),g.updateAllSelected()},clearSelection:()=>{g.clearSelection()},clearFilter:le=>{g.clearFilter(le)},toggleAllSelection:()=>{g.commit("toggleAllSelection")},toggleRowExpansion:(le,ce)=>{g.toggleRowExpansionAdapter(le,ce)},clearSort:()=>{g.clearSort()},sort:(le,ce)=>{g.commit("sort",{prop:le,order:ce})}}}function Cse(g,C,_,R){const V=nt(!1),L=nt(null),W=nt(!1),U=we=>{W.value=we},j=nt({width:null,height:null,headerHeight:null}),Y=nt(!1),le={display:"inline-block",verticalAlign:"middle"},ce=nt(),ne=nt(0),fe=nt(0),te=nt(0),ve=nt(0);Ow(()=>{C.setHeight(g.height)}),Ow(()=>{C.setMaxHeight(g.maxHeight)}),_o(()=>[g.currentRowKey,_.states.rowKey],([we,Qe])=>{!ae(Qe)||!ae(we)||_.setCurrentRowKey(`${we}`)},{immediate:!0}),_o(()=>g.data,we=>{R.store.commit("setData",we)},{immediate:!0,deep:!0}),Ow(()=>{g.expandRowKeys&&_.setExpandRowKeysAdapter(g.expandRowKeys)});const ie=()=>{R.store.commit("setHoverRow",null),R.hoverState&&(R.hoverState=null)},pe=(we,Qe)=>{const{pixelX:it,pixelY:Fe}=Qe;Math.abs(it)>=Math.abs(Fe)&&(R.refs.bodyWrapper.scrollLeft+=Qe.pixelX/5)},Ce=bt(()=>g.height||g.maxHeight||_.states.fixedColumns.value.length>0||_.states.rightFixedColumns.value.length>0),P=bt(()=>({width:C.bodyWidth.value?`${C.bodyWidth.value}px`:""})),he=()=>{Ce.value&&C.updateElsHeight(),C.updateColumnsWidth(),requestAnimationFrame(Ie)};_c(async()=>{await Ss(),_.updateColumns(),pt(),requestAnimationFrame(he);const we=R.vnode.el,Qe=R.refs.headerWrapper;g.flexible&&we&&we.parentElement&&(we.parentElement.style.minWidth="0"),j.value={width:ce.value=we.offsetWidth,height:we.offsetHeight,headerHeight:g.showHeader&&Qe?Qe.offsetHeight:null},_.states.columns.value.forEach(it=>{it.filteredValue&&it.filteredValue.length&&R.store.commit("filterChange",{column:it,values:it.filteredValue,silent:!0})}),R.$ready=!0});const Ye=(we,Qe)=>{if(!we)return;const it=Array.from(we.classList).filter(Fe=>!Fe.startsWith("is-scrolling-"));it.push(C.scrollX.value?Qe:"is-scrolling-none"),we.className=it.join(" ")},Me=we=>{const{tableWrapper:Qe}=R.refs;Ye(Qe,we)},K=we=>{const{tableWrapper:Qe}=R.refs;return!!(Qe&&Qe.classList.contains(we))},Ie=function(){if(!R.refs.scrollBarRef)return;if(!C.scrollX.value){const Jn="is-scrolling-none";K(Jn)||Me(Jn);return}const we=R.refs.scrollBarRef.wrapRef;if(!we)return;const{scrollLeft:Qe,offsetWidth:it,scrollWidth:Fe}=we,{headerWrapper:_n,footerWrapper:Kn}=R.refs;_n&&(_n.scrollLeft=Qe),Kn&&(Kn.scrollLeft=Qe);const Pn=Fe-it-1;Qe>=Pn?Me("is-scrolling-right"):Me(Qe===0?"is-scrolling-left":"is-scrolling-middle")},pt=()=>{!R.refs.scrollBarRef||(R.refs.scrollBarRef.wrapRef&&Xm(R.refs.scrollBarRef.wrapRef,"scroll",Ie,{passive:!0}),g.fit?RD(R.vnode.el,ft):Xm(window,"resize",ft),RD(R.refs.bodyWrapper,()=>{var we,Qe;ft(),(Qe=(we=R.refs)==null?void 0:we.scrollBarRef)==null||Qe.update()}))},ft=()=>{var we,Qe,it;const Fe=R.vnode.el;if(!R.$ready||!Fe)return;let _n=!1;const{width:Kn,height:Pn,headerHeight:Jn}=j.value,Pe=ce.value=Fe.offsetWidth;Kn!==Pe&&(_n=!0);const St=Fe.offsetHeight;(g.height||Ce.value)&&Pn!==St&&(_n=!0);const z=g.tableLayout==="fixed"?R.refs.headerWrapper:(we=R.refs.tableHeaderRef)==null?void 0:we.$el;g.showHeader&&(z==null?void 0:z.offsetHeight)!==Jn&&(_n=!0),ne.value=((Qe=R.refs.tableWrapper)==null?void 0:Qe.scrollHeight)||0,te.value=(z==null?void 0:z.scrollHeight)||0,ve.value=((it=R.refs.footerWrapper)==null?void 0:it.offsetHeight)||0,fe.value=ne.value-te.value-ve.value,_n&&(j.value={width:Pe,height:St,headerHeight:g.showHeader&&(z==null?void 0:z.offsetHeight)||0},he())},Oe=BD(),re=bt(()=>{const{bodyWidth:we,scrollY:Qe,gutterWidth:it}=C;return we.value?`${we.value-(Qe.value?it:0)}px`:""}),Nt=bt(()=>g.maxHeight?"fixed":g.tableLayout),Je=bt(()=>{if(g.data&&g.data.length)return null;let we="100%";g.height&&fe.value&&(we=`${fe.value}px`);const Qe=ce.value;return{width:Qe?`${Qe}px`:"",height:we}}),ot=bt(()=>g.height?{height:Number.isNaN(Number(g.height))?g.height:`${g.height}px`}:g.maxHeight?{maxHeight:Number.isNaN(Number(g.maxHeight))?g.maxHeight:`${g.maxHeight}px`}:{}),O=bt(()=>{if(g.height)return{height:"100%"};if(g.maxHeight){if(Number.isNaN(Number(g.maxHeight)))return{maxHeight:`calc(${g.maxHeight} - ${te.value+ve.value}px)`};{const we=g.maxHeight;if(ne.value>=Number(we))return{maxHeight:`${ne.value-te.value-ve.value}px`}}}return{}});return{isHidden:V,renderExpanded:L,setDragVisible:U,isGroup:Y,handleMouseLeave:ie,handleHeaderFooterMousewheel:pe,tableSize:Oe,emptyBlockStyle:Je,handleFixedMousewheel:(we,Qe)=>{const it=R.refs.bodyWrapper;if(Math.abs(Qe.spinY)>0){const Fe=it.scrollTop;Qe.pixelY<0&&Fe!==0&&we.preventDefault(),Qe.pixelY>0&&it.scrollHeight-it.clientHeight>Fe&&we.preventDefault(),it.scrollTop+=Math.ceil(Qe.pixelY/5)}else it.scrollLeft+=Math.ceil(Qe.pixelX/5)},resizeProxyVisible:W,bodyWidth:re,resizeState:j,doLayout:he,tableBodyStyles:P,tableLayout:Nt,scrollbarViewStyle:le,tableInnerStyle:ot,scrollbarStyle:O}}var wse={data:{type:Array,default:()=>[]},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean};const Sse=()=>{const g=nt(),C=(L,W)=>{const U=g.value;U&&U.scrollTo(L,W)},_=(L,W)=>{const U=g.value;U&&Ql(W)&&["Top","Left"].includes(L)&&U[`setScroll${L}`](W)};return{scrollBarRef:g,scrollTo:C,setScrollTop:L=>_("Top",L),setScrollLeft:L=>_("Left",L)}};let xse=1;const Ese=oo({name:"ElTable",directives:{Mousewheel:kte},components:{TableHeader:use,TableBody:hse,TableFooter:bse,ElScrollbar:zG,hColgroup:GG},props:wse,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(g){const{t:C}=zu(),_=zo("table"),R=il();V0(Gh,R);const V=Yoe(R,g);R.store=V;const L=new Joe({store:R.store,table:R,fit:g.fit,showHeader:g.showHeader});R.layout=L;const W=bt(()=>(V.states.data.value||[]).length===0),{setCurrentRow:U,getSelectionRows:j,toggleRowSelection:Y,clearSelection:le,clearFilter:ce,toggleAllSelection:ne,toggleRowExpansion:fe,clearSort:te,sort:ve}=yse(V),{isHidden:ie,renderExpanded:pe,setDragVisible:Ce,isGroup:P,handleMouseLeave:he,handleHeaderFooterMousewheel:Ye,tableSize:Me,emptyBlockStyle:K,handleFixedMousewheel:Ie,resizeProxyVisible:pt,bodyWidth:ft,resizeState:Oe,doLayout:re,tableBodyStyles:Nt,tableLayout:Je,scrollbarViewStyle:ot,tableInnerStyle:O,scrollbarStyle:Ut}=Cse(g,L,V,R),{scrollBarRef:we,scrollTo:Qe,setScrollLeft:it,setScrollTop:Fe}=Sse(),_n=Bw(re,50),Kn=`${_.namespace.value}-table_${xse++}`;R.tableId=Kn,R.state={isGroup:P,resizeState:Oe,doLayout:re,debouncedUpdateLayout:_n};const Pn=bt(()=>g.sumText||C("el.table.sumText")),Jn=bt(()=>g.emptyText||C("el.table.emptyText"));return{ns:_,layout:L,store:V,handleHeaderFooterMousewheel:Ye,handleMouseLeave:he,tableId:Kn,tableSize:Me,isHidden:ie,isEmpty:W,renderExpanded:pe,resizeProxyVisible:pt,resizeState:Oe,isGroup:P,bodyWidth:ft,tableBodyStyles:Nt,emptyBlockStyle:K,debouncedUpdateLayout:_n,handleFixedMousewheel:Ie,setCurrentRow:U,getSelectionRows:j,toggleRowSelection:Y,clearSelection:le,clearFilter:ce,toggleAllSelection:ne,toggleRowExpansion:fe,clearSort:te,doLayout:re,sort:ve,t:C,setDragVisible:Ce,context:R,computedSumText:Pn,computedEmptyText:Jn,tableLayout:Je,scrollbarViewStyle:ot,tableInnerStyle:O,scrollbarStyle:Ut,scrollBarRef:we,scrollTo:Qe,setScrollLeft:it,setScrollTop:Fe}}}),kse=["data-prefix"],Tse={ref:"hiddenColumns",class:"hidden-columns"};function _se(g,C,_,R,V,L){const W=qr("hColgroup"),U=qr("table-header"),j=qr("table-body"),Y=qr("el-scrollbar"),le=qr("table-footer"),ce=IG("mousewheel");return rt(),sn("div",{ref:"tableWrapper",class:ct([{[g.ns.m("fit")]:g.fit,[g.ns.m("striped")]:g.stripe,[g.ns.m("border")]:g.border||g.isGroup,[g.ns.m("hidden")]:g.isHidden,[g.ns.m("group")]:g.isGroup,[g.ns.m("fluid-height")]:g.maxHeight,[g.ns.m("scrollable-x")]:g.layout.scrollX.value,[g.ns.m("scrollable-y")]:g.layout.scrollY.value,[g.ns.m("enable-row-hover")]:!g.store.states.isComplex.value,[g.ns.m("enable-row-transition")]:(g.store.states.data.value||[]).length!==0&&(g.store.states.data.value||[]).length<100,"has-footer":g.showSummary},g.ns.m(g.tableSize),g.className,g.ns.b(),g.ns.m(`layout-${g.tableLayout}`)]),style:Xs(g.style),"data-prefix":g.ns.namespace.value,onMouseleave:C[0]||(C[0]=ne=>g.handleMouseLeave())},[Rn("div",{class:ct(g.ns.e("inner-wrapper")),style:Xs(g.tableInnerStyle)},[Rn("div",Tse,[Bo(g.$slots,"default")],512),g.showHeader&&g.tableLayout==="fixed"?ei((rt(),sn("div",{key:0,ref:"headerWrapper",class:ct(g.ns.e("header-wrapper"))},[Rn("table",{ref:"tableHeader",class:ct(g.ns.e("header")),style:Xs(g.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[qt(W,{columns:g.store.states.columns.value,"table-layout":g.tableLayout},null,8,["columns","table-layout"]),qt(U,{ref:"tableHeaderRef",border:g.border,"default-sort":g.defaultSort,store:g.store,onSetDragVisible:g.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[ce,g.handleHeaderFooterMousewheel]]):An("v-if",!0),Rn("div",{ref:"bodyWrapper",class:ct(g.ns.e("body-wrapper"))},[qt(Y,{ref:"scrollBarRef","view-style":g.scrollbarViewStyle,"wrap-style":g.scrollbarStyle,always:g.scrollbarAlwaysOn},{default:zt(()=>[Rn("table",{ref:"tableBody",class:ct(g.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Xs({width:g.bodyWidth,tableLayout:g.tableLayout})},[qt(W,{columns:g.store.states.columns.value,"table-layout":g.tableLayout},null,8,["columns","table-layout"]),g.showHeader&&g.tableLayout==="auto"?(rt(),zn(U,{key:0,ref:"tableHeaderRef",border:g.border,"default-sort":g.defaultSort,store:g.store,onSetDragVisible:g.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):An("v-if",!0),qt(j,{context:g.context,highlight:g.highlightCurrentRow,"row-class-name":g.rowClassName,"tooltip-effect":g.tooltipEffect,"row-style":g.rowStyle,store:g.store,stripe:g.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","row-style","store","stripe"])],6),g.isEmpty?(rt(),sn("div",{key:0,ref:"emptyBlock",style:Xs(g.emptyBlockStyle),class:ct(g.ns.e("empty-block"))},[Rn("span",{class:ct(g.ns.e("empty-text"))},[Bo(g.$slots,"empty",{},()=>[Hu(Es(g.computedEmptyText),1)])],2)],6)):An("v-if",!0),g.$slots.append?(rt(),sn("div",{key:1,ref:"appendWrapper",class:ct(g.ns.e("append-wrapper"))},[Bo(g.$slots,"append")],2)):An("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),g.showSummary?ei((rt(),sn("div",{key:1,ref:"footerWrapper",class:ct(g.ns.e("footer-wrapper"))},[qt(le,{border:g.border,"default-sort":g.defaultSort,store:g.store,style:Xs(g.tableBodyStyles),"sum-text":g.computedSumText,"summary-method":g.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[Jm,!g.isEmpty],[ce,g.handleHeaderFooterMousewheel]]):An("v-if",!0),g.border||g.isGroup?(rt(),sn("div",{key:2,class:ct(g.ns.e("border-left-patch"))},null,2)):An("v-if",!0)],6),ei(Rn("div",{ref:"resizeProxy",class:ct(g.ns.e("column-resize-proxy"))},null,2),[[Jm,g.resizeProxyVisible]])],46,kse)}var Ose=hr(Ese,[["render",_se],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const Ase={selection:"table-column--selection",expand:"table__expand-column"},Rse={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Dse=g=>Ase[g]||"",Mse={selection:{renderHeader({store:g}){function C(){return g.states.data.value&&g.states.data.value.length===0}return So(FT,{disabled:C(),size:g.states.tableSize.value,indeterminate:g.states.selection.value.length>0&&!g.states.isAllSelected.value,"onUpdate:modelValue":g.toggleAllSelection,modelValue:g.states.isAllSelected.value})},renderCell({row:g,column:C,store:_,$index:R}){return So(FT,{disabled:C.selectable?!C.selectable.call(null,g,R):!1,size:_.states.tableSize.value,onChange:()=>{_.commit("rowSelectedChanged",g)},onClick:V=>V.stopPropagation(),modelValue:_.isSelected(g)})},sortable:!1,resizable:!1},index:{renderHeader({column:g}){return g.label||"#"},renderCell({column:g,$index:C}){let _=C+1;const R=g.index;return typeof R=="number"?_=C+R:typeof R=="function"&&(_=R(C)),So("div",{},[_])},sortable:!1},expand:{renderHeader({column:g}){return g.label||""},renderCell({row:g,store:C,expanded:_}){const{ns:R}=C,V=[R.e("expand-icon")];return _&&V.push(R.em("expand-icon","expanded")),So("div",{class:V,onClick:function(W){W.stopPropagation(),C.toggleRowExpansion(g)}},{default:()=>[So(ia,null,{default:()=>[So(u6)]})]})},sortable:!1,resizable:!1}};function Bse({row:g,column:C,$index:_}){var R;const V=C.property,L=V&&IJ(g,V).value;return C&&C.formatter?C.formatter(g,C,L,_):((R=L==null?void 0:L.toString)==null?void 0:R.call(L))||""}function $se({row:g,treeNode:C,store:_},R=!1){const{ns:V}=_;if(!C)return R?[So("span",{class:V.e("placeholder")})]:null;const L=[],W=function(U){U.stopPropagation(),!C.loading&&_.loadOrToggle(g)};if(C.indent&&L.push(So("span",{class:V.e("indent"),style:{"padding-left":`${C.indent}px`}})),typeof C.expanded=="boolean"&&!C.noLazyChildren){const U=[V.e("expand-icon"),C.expanded?V.em("expand-icon","expanded"):""];let j=u6;C.loading&&(j=FJ),L.push(So("div",{class:U,onClick:W},{default:()=>[So(ia,{class:{[V.is("loading")]:C.loading}},{default:()=>[So(j)]})]}))}else L.push(So("span",{class:V.e("placeholder")}));return L}function nY(g,C){return g.reduce((_,R)=>(_[R]=R,_),C)}function Pse(g,C){const _=il();return{registerComplexWatchers:()=>{const L=["fixed"],W={realWidth:"width",realMinWidth:"minWidth"},U=nY(L,W);Object.keys(U).forEach(j=>{const Y=W[j];Mw(C,Y)&&_o(()=>C[Y],le=>{let ce=le;Y==="width"&&j==="realWidth"&&(ce=WG(le)),Y==="minWidth"&&j==="realMinWidth"&&(ce=pX(le)),_.columnConfig.value[Y]=ce,_.columnConfig.value[j]=ce;const ne=Y==="fixed";g.value.store.scheduleLayout(ne)})})},registerNormalWatchers:()=>{const L=["label","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],W={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},U=nY(L,W);Object.keys(U).forEach(j=>{const Y=W[j];Mw(C,Y)&&_o(()=>C[Y],le=>{_.columnConfig.value[j]=le})})}}}function Nse(g,C,_){const R=il(),V=nt(""),L=nt(!1),W=nt(),U=nt(),j=zo("table");Ow(()=>{W.value=g.align?`is-${g.align}`:null,W.value}),Ow(()=>{U.value=g.headerAlign?`is-${g.headerAlign}`:W.value,U.value});const Y=bt(()=>{let P=R.vnode.vParent||R.parent;for(;P&&!P.tableId&&!P.columnId;)P=P.vnode.vParent||P.parent;return P}),le=bt(()=>{const{store:P}=R.parent;if(!P)return!1;const{treeData:he}=P.states,Ye=he.value;return Ye&&Object.keys(Ye).length>0}),ce=nt(WG(g.width)),ne=nt(pX(g.minWidth)),fe=P=>(ce.value&&(P.width=ce.value),ne.value&&(P.minWidth=ne.value),!ce.value&&ne.value&&(P.width=void 0),P.minWidth||(P.minWidth=80),P.realWidth=Number(P.width===void 0?P.minWidth:P.width),P),te=P=>{const he=P.type,Ye=Mse[he]||{};Object.keys(Ye).forEach(K=>{const Ie=Ye[K];K!=="className"&&Ie!==void 0&&(P[K]=Ie)});const Me=Dse(he);if(Me){const K=`${ae(j.namespace)}-${Me}`;P.className=P.className?`${P.className} ${K}`:K}return P},ve=P=>{Array.isArray(P)?P.forEach(Ye=>he(Ye)):he(P);function he(Ye){var Me;((Me=Ye==null?void 0:Ye.type)==null?void 0:Me.name)==="ElTableColumn"&&(Ye.vParent=R)}};return{columnId:V,realAlign:W,isSubColumn:L,realHeaderAlign:U,columnOrTableParent:Y,setColumnWidth:fe,setColumnForcedProps:te,setColumnRenders:P=>{g.renderHeader||P.type!=="selection"&&(P.renderHeader=Ye=>{R.columnConfig.value.label;const Me=C.header;return Me?Me(Ye):P.label});let he=P.renderCell;return P.type==="expand"?(P.renderCell=Ye=>So("div",{class:"cell"},[he(Ye)]),_.value.renderExpanded=Ye=>C.default?C.default(Ye):C.default):(he=he||Bse,P.renderCell=Ye=>{let Me=null;if(C.default){const ft=C.default(Ye);Me=ft.some(Oe=>Oe.type!==LJ)?ft:he(Ye)}else Me=he(Ye);const K=le.value&&Ye.cellIndex===0&&Ye.column.type!=="selection",Ie=$se(Ye,K),pt={class:"cell",style:{}};return P.showOverflowTooltip&&(pt.class=`${pt.class} ${ae(j.namespace)}-tooltip`,pt.style={width:`${(Ye.column.realWidth||Number(Ye.column.width))-1}px`}),ve(Me),So("div",pt,[Ie,Me])}),P},getPropsData:(...P)=>P.reduce((he,Ye)=>(Array.isArray(Ye)&&Ye.forEach(Me=>{he[Me]=g[Me]}),he),{}),getColumnElIndex:(P,he)=>Array.prototype.indexOf.call(P,he)}}var Ise={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:g=>g.every(C=>["ascending","descending",null].includes(C))}};let Fse=1;var EX=oo({name:"ElTableColumn",components:{ElCheckbox:FT},props:Ise,setup(g,{slots:C}){const _=il(),R=nt({}),V=bt(()=>{let Ce=_.parent;for(;Ce&&!Ce.tableId;)Ce=Ce.parent;return Ce}),{registerNormalWatchers:L,registerComplexWatchers:W}=Pse(V,g),{columnId:U,isSubColumn:j,realHeaderAlign:Y,columnOrTableParent:le,setColumnWidth:ce,setColumnForcedProps:ne,setColumnRenders:fe,getPropsData:te,getColumnElIndex:ve,realAlign:ie}=Nse(g,C,V),pe=le.value;U.value=`${pe.tableId||pe.columnId}_column_${Fse++}`,TY(()=>{j.value=V.value!==pe;const Ce=g.type||"default",P=g.sortable===""?!0:g.sortable,he={...Rse[Ce],id:U.value,type:Ce,property:g.prop||g.property,align:ie,headerAlign:Y,showOverflowTooltip:g.showOverflowTooltip||g.showTooltipWhenOverflow,filterable:g.filters||g.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:P,index:g.index,rawColumnKey:_.vnode.key};let pt=te(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);pt=Loe(he,pt),pt=zoe(fe,ce,ne)(pt),R.value=pt,L(),W()}),_c(()=>{var Ce;const P=le.value,he=j.value?P.vnode.el.children:(Ce=P.refs.hiddenColumns)==null?void 0:Ce.children,Ye=()=>ve(he||[],_.vnode.el);R.value.getColumnIndex=Ye,Ye()>-1&&V.value.store.commit("insertColumn",R.value,j.value?P.columnConfig.value:null)}),$w(()=>{V.value.store.commit("removeColumn",R.value,j.value?pe.columnConfig.value:null)}),_.columnId=U.value,_.columnConfig=R},render(){var g,C,_;try{const R=(C=(g=this.$slots).default)==null?void 0:C.call(g,{row:{},column:{},$index:-1}),V=[];if(Array.isArray(R))for(const W of R)((_=W.type)==null?void 0:_.name)==="ElTableColumn"||W.shapeFlag&2?V.push(W):W.type===Tc&&Array.isArray(W.children)&&W.children.forEach(U=>{(U==null?void 0:U.patchFlag)!==1024&&!G1(U==null?void 0:U.children)&&V.push(U)});return So("div",V)}catch{return So("div",[])}}});const Lse=jh(Ose,{TableColumn:EX}),Hse=FD(EX),zse="ElUpload";class Vse extends Error{constructor(C,_,R,V){super(C),this.name="UploadAjaxError",this.status=_,this.method=R,this.url=V}}function oY(g,C,_){let R;return _.response?R=`${_.response.error||_.response}`:_.responseText?R=`${_.responseText}`:R=`fail to ${C.method} ${g} ${_.status}`,new Vse(R,_.status,C.method,g)}function Use(g){const C=g.responseText||g.response;if(!C)return C;try{return JSON.parse(C)}catch{return C}}const Wse=g=>{typeof XMLHttpRequest>"u"&&HT(zse,"XMLHttpRequest is undefined");const C=new XMLHttpRequest,_=g.action;C.upload&&C.upload.addEventListener("progress",L=>{const W=L;W.percent=L.total>0?L.loaded/L.total*100:0,g.onProgress(W)});const R=new FormData;if(g.data)for(const[L,W]of Object.entries(g.data))Array.isArray(W)?R.append(L,...W):R.append(L,W);R.append(g.filename,g.file,g.file.name),C.addEventListener("error",()=>{g.onError(oY(_,g,C))}),C.addEventListener("load",()=>{if(C.status<200||C.status>=300)return g.onError(oY(_,g,C));g.onSuccess(Use(C))}),C.open(g.method,_,!0),g.withCredentials&&"withCredentials"in C&&(C.withCredentials=!0);const V=g.headers||{};if(V instanceof Headers)V.forEach((L,W)=>C.setRequestHeader(W,L));else for(const[L,W]of Object.entries(V))OY(W)||C.setRequestHeader(L,String(W));return C.send(R),C},kX=["text","picture","picture-card"];let Zse=1;const MG=()=>Date.now()+Zse++,TX=za({action:{type:String,default:"#"},headers:{type:xs(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>Dw({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:xs(Array),default:()=>Dw([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:kX,default:"text"},httpRequest:{type:xs(Function),default:Wse},disabled:Boolean,limit:Number}),jse=za({...TX,beforeUpload:{type:xs(Function),default:Xl},beforeRemove:{type:xs(Function)},onRemove:{type:xs(Function),default:Xl},onChange:{type:xs(Function),default:Xl},onPreview:{type:xs(Function),default:Xl},onSuccess:{type:xs(Function),default:Xl},onProgress:{type:xs(Function),default:Xl},onError:{type:xs(Function),default:Xl},onExceed:{type:xs(Function),default:Xl}}),Gse=za({files:{type:xs(Array),default:()=>Dw([])},disabled:{type:Boolean,default:!1},handlePreview:{type:xs(Function),default:Xl},listType:{type:String,values:kX,default:"text"}}),Kse={remove:g=>!!g},qse=["onKeydown"],Yse=["src"],Xse=["onClick"],Jse=["onClick"],Qse=["onClick"],ere=oo({name:"ElUploadList"}),tre=oo({...ere,props:Gse,emits:Kse,setup(g,{emit:C}){const{t:_}=zu(),R=zo("upload"),V=zo("icon"),L=zo("list"),W=ND(),U=nt(!1),j=Y=>{C("remove",Y)};return(Y,le)=>(rt(),zn(VJ,{tag:"ul",class:ct([ae(R).b("list"),ae(R).bm("list",Y.listType),ae(R).is("disabled",ae(W))]),name:ae(L).b()},{default:zt(()=>[(rt(!0),sn(Tc,null,Zh(Y.files,ce=>(rt(),sn("li",{key:ce.uid||ce.name,class:ct([ae(R).be("list","item"),ae(R).is(ce.status),{focusing:U.value}]),tabindex:"0",onKeydown:wi(ne=>!ae(W)&&j(ce),["delete"]),onFocus:le[0]||(le[0]=ne=>U.value=!0),onBlur:le[1]||(le[1]=ne=>U.value=!1),onClick:le[2]||(le[2]=ne=>U.value=!1)},[Bo(Y.$slots,"default",{file:ce},()=>[Y.listType==="picture"||ce.status!=="uploading"&&Y.listType==="picture-card"?(rt(),sn("img",{key:0,class:ct(ae(R).be("list","item-thumbnail")),src:ce.url,alt:""},null,10,Yse)):An("v-if",!0),ce.status==="uploading"||Y.listType!=="picture-card"?(rt(),sn("div",{key:1,class:ct(ae(R).be("list","item-info"))},[Rn("a",{class:ct(ae(R).be("list","item-name")),onClick:Jl(ne=>Y.handlePreview(ce),["prevent"])},[qt(ae(ia),{class:ct(ae(V).m("document"))},{default:zt(()=>[qt(ae(HJ))]),_:1},8,["class"]),Rn("span",{class:ct(ae(R).be("list","item-file-name"))},Es(ce.name),3)],10,Xse),ce.status==="uploading"?(rt(),zn(ae(Boe),{key:0,type:Y.listType==="picture-card"?"circle":"line","stroke-width":Y.listType==="picture-card"?6:2,percentage:Number(ce.percentage),style:Xs(Y.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):An("v-if",!0)],2)):An("v-if",!0),Rn("label",{class:ct(ae(R).be("list","item-status-label"))},[Y.listType==="text"?(rt(),zn(ae(ia),{key:0,class:ct([ae(V).m("upload-success"),ae(V).m("circle-check")])},{default:zt(()=>[qt(ae(EY))]),_:1},8,["class"])):["picture-card","picture"].includes(Y.listType)?(rt(),zn(ae(ia),{key:1,class:ct([ae(V).m("upload-success"),ae(V).m("check")])},{default:zt(()=>[qt(ae(kY))]),_:1},8,["class"])):An("v-if",!0)],2),ae(W)?An("v-if",!0):(rt(),zn(ae(ia),{key:2,class:ct(ae(V).m("close")),onClick:ne=>j(ce)},{default:zt(()=>[qt(ae(NG))]),_:2},1032,["class","onClick"])),An(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),An(" This is a bug which needs to be fixed "),An(" TODO: Fix the incorrect navigation interaction "),ae(W)?An("v-if",!0):(rt(),sn("i",{key:3,class:ct(ae(V).m("close-tip"))},Es(ae(_)("el.upload.deleteTip")),3)),Y.listType==="picture-card"?(rt(),sn("span",{key:4,class:ct(ae(R).be("list","item-actions"))},[Rn("span",{class:ct(ae(R).be("list","item-preview")),onClick:ne=>Y.handlePreview(ce)},[qt(ae(ia),{class:ct(ae(V).m("zoom-in"))},{default:zt(()=>[qt(ae(CY))]),_:1},8,["class"])],10,Jse),ae(W)?An("v-if",!0):(rt(),sn("span",{key:0,class:ct(ae(R).be("list","item-delete")),onClick:ne=>j(ce)},[qt(ae(ia),{class:ct(ae(V).m("delete"))},{default:zt(()=>[qt(ae(zJ))]),_:1},8,["class"])],10,Qse))],2)):An("v-if",!0)])],42,qse))),128)),Bo(Y.$slots,"append")]),_:3},8,["class","name"]))}});var sY=hr(tre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const nre=za({disabled:{type:Boolean,default:!1}}),ore={file:g=>Aw(g)},sre=["onDrop","onDragover"],_X="ElUploadDrag",rre=oo({name:_X}),are=oo({...rre,props:nre,emits:ore,setup(g,{emit:C}){const _=Ea(ZY);_||HT(_X,"usage: <el-upload><el-upload-dragger /></el-upload>");const R=zo("upload"),V=nt(!1),L=ND(),W=j=>{if(L.value)return;V.value=!1;const Y=Array.from(j.dataTransfer.files),le=_.accept.value;if(!le){C("file",Y);return}const ce=Y.filter(ne=>{const{type:fe,name:te}=ne,ve=te.includes(".")?`.${te.split(".").pop()}`:"",ie=fe.replace(/\/.*$/,"");return le.split(",").map(pe=>pe.trim()).filter(pe=>pe).some(pe=>pe.startsWith(".")?ve===pe:/\/\*$/.test(pe)?ie===pe.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(pe)?fe===pe:!1)});C("file",ce)},U=()=>{L.value||(V.value=!0)};return(j,Y)=>(rt(),sn("div",{class:ct([ae(R).b("dragger"),ae(R).is("dragover",V.value)]),onDrop:Jl(W,["prevent"]),onDragover:Jl(U,["prevent"]),onDragleave:Y[0]||(Y[0]=Jl(le=>V.value=!1,["prevent"]))},[Bo(j.$slots,"default")],42,sre))}});var lre=hr(are,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const ire=za({...TX,beforeUpload:{type:xs(Function),default:Xl},onRemove:{type:xs(Function),default:Xl},onStart:{type:xs(Function),default:Xl},onSuccess:{type:xs(Function),default:Xl},onProgress:{type:xs(Function),default:Xl},onError:{type:xs(Function),default:Xl},onExceed:{type:xs(Function),default:Xl}}),cre=["onKeydown"],ure=["name","multiple","accept"],dre=oo({name:"ElUploadContent",inheritAttrs:!1}),fre=oo({...dre,props:ire,setup(g,{expose:C}){const _=g,R=zo("upload"),V=ND(),L=IT({}),W=IT(),U=te=>{if(te.length===0)return;const{autoUpload:ve,limit:ie,fileList:pe,multiple:Ce,onStart:P,onExceed:he}=_;if(ie&&pe.length+te.length>ie){he(te,pe);return}Ce||(te=te.slice(0,1));for(const Ye of te){const Me=Ye;Me.uid=MG(),P(Me),ve&&j(Me)}},j=async te=>{if(W.value.value="",!_.beforeUpload)return Y(te);let ve;try{ve=await _.beforeUpload(te)}catch{ve=!1}if(ve===!1){_.onRemove(te);return}let ie=te;ve instanceof Blob&&(ve instanceof File?ie=ve:ie=new File([ve],te.name,{type:te.type})),Y(Object.assign(ie,{uid:te.uid}))},Y=te=>{const{headers:ve,data:ie,method:pe,withCredentials:Ce,name:P,action:he,onProgress:Ye,onSuccess:Me,onError:K,httpRequest:Ie}=_,{uid:pt}=te,ft={headers:ve||{},withCredentials:Ce,file:te,data:ie,method:pe,filename:P,action:he,onProgress:re=>{Ye(re,te)},onSuccess:re=>{Me(re,te),delete L.value[pt]},onError:re=>{K(re,te),delete L.value[pt]}},Oe=Ie(ft);L.value[pt]=Oe,Oe instanceof Promise&&Oe.then(ft.onSuccess,ft.onError)},le=te=>{const ve=te.target.files;!ve||U(Array.from(ve))},ce=()=>{V.value||(W.value.value="",W.value.click())},ne=()=>{ce()};return C({abort:te=>{UJ(L.value).filter(te?([ie])=>String(te.uid)===ie:()=>!0).forEach(([ie,pe])=>{pe instanceof XMLHttpRequest&&pe.abort(),delete L.value[ie]})},upload:j}),(te,ve)=>(rt(),sn("div",{class:ct([ae(R).b(),ae(R).m(te.listType),ae(R).is("drag",te.drag)]),tabindex:"0",onClick:ce,onKeydown:wi(Jl(ne,["self"]),["enter","space"])},[te.drag?(rt(),zn(lre,{key:0,disabled:ae(V),onFile:U},{default:zt(()=>[Bo(te.$slots,"default")]),_:3},8,["disabled"])):Bo(te.$slots,"default",{key:1}),Rn("input",{ref_key:"inputRef",ref:W,class:ct(ae(R).e("input")),name:te.name,multiple:te.multiple,accept:te.accept,type:"file",onChange:le,onClick:ve[0]||(ve[0]=Jl(()=>{},["stop"]))},null,42,ure)],42,cre))}});var rY=hr(fre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const aY="ElUpload",mre=g=>{var C;(C=g.url)!=null&&C.startsWith("blob:")&&URL.revokeObjectURL(g.url)},gre=(g,C)=>{const _=WJ(g,"fileList",void 0,{passive:!0}),R=ne=>_.value.find(fe=>fe.uid===ne.uid);function V(ne){var fe;(fe=C.value)==null||fe.abort(ne)}function L(ne=["ready","uploading","success","fail"]){_.value=_.value.filter(fe=>!ne.includes(fe.status))}const W=(ne,fe)=>{const te=R(fe);!te||(console.error(ne),te.status="fail",_.value.splice(_.value.indexOf(te),1),g.onError(ne,te,_.value),g.onChange(te,_.value))},U=(ne,fe)=>{const te=R(fe);!te||(g.onProgress(ne,te,_.value),te.status="uploading",te.percentage=Math.round(ne.percent))},j=(ne,fe)=>{const te=R(fe);!te||(te.status="success",te.response=ne,g.onSuccess(ne,te,_.value),g.onChange(te,_.value))},Y=ne=>{OY(ne.uid)&&(ne.uid=MG());const fe={name:ne.name,percentage:0,status:"ready",size:ne.size,raw:ne,uid:ne.uid};if(g.listType==="picture-card"||g.listType==="picture")try{fe.url=URL.createObjectURL(ne)}catch(te){ID(aY,te.message),g.onError(te,fe,_.value)}_.value=[..._.value,fe],g.onChange(fe,_.value)},le=async ne=>{const fe=ne instanceof File?R(ne):ne;fe||HT(aY,"file to be removed not found");const te=ve=>{V(ve);const ie=_.value;ie.splice(ie.indexOf(ve),1),g.onRemove(ve,ie),mre(ve)};g.beforeRemove?await g.beforeRemove(fe,_.value)!==!1&&te(fe):te(fe)};function ce(){_.value.filter(({status:ne})=>ne==="ready").forEach(({raw:ne})=>{var fe;return ne&&((fe=C.value)==null?void 0:fe.upload(ne))})}return _o(()=>g.listType,ne=>{ne!=="picture-card"&&ne!=="picture"||(_.value=_.value.map(fe=>{const{raw:te,url:ve}=fe;if(!ve&&te)try{fe.url=URL.createObjectURL(te)}catch(ie){g.onError(ie,fe,_.value)}return fe}))}),_o(_,ne=>{for(const fe of ne)fe.uid||(fe.uid=MG()),fe.status||(fe.status="success")},{immediate:!0,deep:!0}),{uploadFiles:_,abort:V,clearFiles:L,handleError:W,handleProgress:U,handleStart:Y,handleSuccess:j,handleRemove:le,submit:ce}},hre=oo({name:"ElUpload"}),pre=oo({...hre,props:jse,setup(g,{expose:C}){const _=g,R=i6(),V=ND(),L=IT(),{abort:W,submit:U,clearFiles:j,uploadFiles:Y,handleStart:le,handleError:ce,handleRemove:ne,handleSuccess:fe,handleProgress:te}=gre(_,L),ve=bt(()=>_.listType==="picture-card"),ie=bt(()=>({..._,fileList:Y.value,onStart:le,onProgress:te,onSuccess:fe,onError:ce,onRemove:ne}));return $w(()=>{Y.value.forEach(({url:pe})=>{pe!=null&&pe.startsWith("blob:")&&URL.revokeObjectURL(pe)})}),V0(ZY,{accept:CG(_,"accept")}),C({abort:W,submit:U,clearFiles:j,handleStart:le,handleRemove:ne}),(pe,Ce)=>(rt(),sn("div",null,[ae(ve)&&pe.showFileList?(rt(),zn(sY,{key:0,disabled:ae(V),"list-type":pe.listType,files:ae(Y),"handle-preview":pe.onPreview,onRemove:ae(ne)},r6({append:zt(()=>[qt(rY,s6({ref_key:"uploadRef",ref:L},ae(ie)),{default:zt(()=>[ae(R).trigger?Bo(pe.$slots,"trigger",{key:0}):An("v-if",!0),!ae(R).trigger&&ae(R).default?Bo(pe.$slots,"default",{key:1}):An("v-if",!0)]),_:3},16)]),_:2},[pe.$slots.file?{name:"default",fn:zt(({file:P})=>[Bo(pe.$slots,"file",{file:P})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):An("v-if",!0),!ae(ve)||ae(ve)&&!pe.showFileList?(rt(),zn(rY,s6({key:1,ref_key:"uploadRef",ref:L},ae(ie)),{default:zt(()=>[ae(R).trigger?Bo(pe.$slots,"trigger",{key:0}):An("v-if",!0),!ae(R).trigger&&ae(R).default?Bo(pe.$slots,"default",{key:1}):An("v-if",!0)]),_:3},16)):An("v-if",!0),pe.$slots.trigger?Bo(pe.$slots,"default",{key:2}):An("v-if",!0),Bo(pe.$slots,"tip"),!ae(ve)&&pe.showFileList?(rt(),zn(sY,{key:3,disabled:ae(V),"list-type":pe.listType,files:ae(Y),"handle-preview":pe.onPreview,onRemove:ae(ne)},r6({_:2},[pe.$slots.file?{name:"default",fn:zt(({file:P})=>[Bo(pe.$slots,"file",{file:P})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):An("v-if",!0)]))}});var vre=hr(pre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const bre=jh(vre),yre=oo({name:"ElMessageBox",directives:{TrapFocus:bte},components:{ElButton:FG,ElFocusTrap:vY,ElInput:f6,ElOverlay:lX,ElIcon:ia,...ZJ},inheritAttrs:!1,props:{buttonSize:{type:String,validator:zY},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(g,{emit:C}){const{t:_}=zu(),R=zo("message-box"),V=nt(!1),{nextZIndex:L}=c6(),W=Pw({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:L()}),U=bt(()=>{const Nt=W.type;return{[R.bm("icon",Nt)]:Nt&&Aq[Nt]}}),j=o6(),Y=o6(),le=BD(bt(()=>g.buttonSize),{prop:!0,form:!0,formItem:!0}),ce=bt(()=>W.icon||Aq[W.type]||""),ne=bt(()=>!!W.message),fe=nt(),te=nt(),ve=nt(),ie=nt(),pe=nt(),Ce=bt(()=>W.confirmButtonClass);_o(()=>W.inputValue,async Nt=>{await Ss(),g.boxType==="prompt"&&Nt!==null&&pt()},{immediate:!0}),_o(()=>V.value,Nt=>{var Je,ot;Nt&&(g.boxType!=="prompt"&&(W.autofocus?ve.value=(ot=(Je=pe.value)==null?void 0:Je.$el)!=null?ot:fe.value:ve.value=fe.value),W.zIndex=L()),g.boxType==="prompt"&&(Nt?Ss().then(()=>{var O;ie.value&&ie.value.$el&&(W.autofocus?ve.value=(O=ft())!=null?O:fe.value:ve.value=fe.value)}):(W.editorErrorMessage="",W.validateError=!1))});const P=bt(()=>g.draggable);jY(fe,te,P),_c(async()=>{await Ss(),g.closeOnHashChange&&window.addEventListener("hashchange",he)}),$w(()=>{g.closeOnHashChange&&window.removeEventListener("hashchange",he)});function he(){!V.value||(V.value=!1,Ss(()=>{W.action&&C("action",W.action)}))}const Ye=()=>{g.closeOnClickModal&&Ie(W.distinguishCancelAndClose?"close":"cancel")},Me=HG(Ye),K=Nt=>{if(W.inputType!=="textarea")return Nt.preventDefault(),Ie("confirm")},Ie=Nt=>{var Je;g.boxType==="prompt"&&Nt==="confirm"&&!pt()||(W.action=Nt,W.beforeClose?(Je=W.beforeClose)==null||Je.call(W,Nt,W,he):he())},pt=()=>{if(g.boxType==="prompt"){const Nt=W.inputPattern;if(Nt&&!Nt.test(W.inputValue||""))return W.editorErrorMessage=W.inputErrorMessage||_("el.messagebox.error"),W.validateError=!0,!1;const Je=W.inputValidator;if(typeof Je=="function"){const ot=Je(W.inputValue);if(ot===!1)return W.editorErrorMessage=W.inputErrorMessage||_("el.messagebox.error"),W.validateError=!0,!1;if(typeof ot=="string")return W.editorErrorMessage=ot,W.validateError=!0,!1}}return W.editorErrorMessage="",W.validateError=!1,!0},ft=()=>{const Nt=ie.value.$refs;return Nt.input||Nt.textarea},Oe=()=>{Ie("close")},re=()=>{g.closeOnPressEscape&&Oe()};return g.lockScroll&&GY(V),ote(V),{...Nw(W),ns:R,overlayEvent:Me,visible:V,hasMessage:ne,typeClass:U,contentId:j,inputId:Y,btnSize:le,iconComponent:ce,confirmButtonClasses:Ce,rootRef:fe,focusStartRef:ve,headerRef:te,inputRef:ie,confirmRef:pe,doClose:he,handleClose:Oe,onCloseRequested:re,handleWrapperClick:Ye,handleInputEnter:K,handleAction:Ie,t:_}}}),Cre=["aria-label","aria-describedby"],wre=["aria-label"],Sre=["id"];function xre(g,C,_,R,V,L){const W=qr("el-icon"),U=qr("close"),j=qr("el-input"),Y=qr("el-button"),le=qr("el-focus-trap"),ce=qr("el-overlay");return rt(),zn(PD,{name:"fade-in-linear",onAfterLeave:C[11]||(C[11]=ne=>g.$emit("vanish")),persisted:""},{default:zt(()=>[ei(qt(ce,{"z-index":g.zIndex,"overlay-class":[g.ns.is("message-box"),g.modalClass],mask:g.modal},{default:zt(()=>[Rn("div",{role:"dialog","aria-label":g.title,"aria-modal":"true","aria-describedby":g.showInput?void 0:g.contentId,class:ct(`${g.ns.namespace.value}-overlay-message-box`),onClick:C[8]||(C[8]=(...ne)=>g.overlayEvent.onClick&&g.overlayEvent.onClick(...ne)),onMousedown:C[9]||(C[9]=(...ne)=>g.overlayEvent.onMousedown&&g.overlayEvent.onMousedown(...ne)),onMouseup:C[10]||(C[10]=(...ne)=>g.overlayEvent.onMouseup&&g.overlayEvent.onMouseup(...ne))},[qt(le,{loop:"",trapped:g.visible,"focus-trap-el":g.rootRef,"focus-start-el":g.focusStartRef,onReleaseRequested:g.onCloseRequested},{default:zt(()=>[Rn("div",{ref:"rootRef",class:ct([g.ns.b(),g.customClass,g.ns.is("draggable",g.draggable),{[g.ns.m("center")]:g.center}]),style:Xs(g.customStyle),tabindex:"-1",onClick:C[7]||(C[7]=Jl(()=>{},["stop"]))},[g.title!==null&&g.title!==void 0?(rt(),sn("div",{key:0,ref:"headerRef",class:ct(g.ns.e("header"))},[Rn("div",{class:ct(g.ns.e("title"))},[g.iconComponent&&g.center?(rt(),zn(W,{key:0,class:ct([g.ns.e("status"),g.typeClass])},{default:zt(()=>[(rt(),zn(Lu(g.iconComponent)))]),_:1},8,["class"])):An("v-if",!0),Rn("span",null,Es(g.title),1)],2),g.showClose?(rt(),sn("button",{key:0,type:"button",class:ct(g.ns.e("headerbtn")),"aria-label":g.t("el.messagebox.close"),onClick:C[0]||(C[0]=ne=>g.handleAction(g.distinguishCancelAndClose?"close":"cancel")),onKeydown:C[1]||(C[1]=wi(Jl(ne=>g.handleAction(g.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[qt(W,{class:ct(g.ns.e("close"))},{default:zt(()=>[qt(U)]),_:1},8,["class"])],42,wre)):An("v-if",!0)],2)):An("v-if",!0),Rn("div",{id:g.contentId,class:ct(g.ns.e("content"))},[Rn("div",{class:ct(g.ns.e("container"))},[g.iconComponent&&!g.center&&g.hasMessage?(rt(),zn(W,{key:0,class:ct([g.ns.e("status"),g.typeClass])},{default:zt(()=>[(rt(),zn(Lu(g.iconComponent)))]),_:1},8,["class"])):An("v-if",!0),g.hasMessage?(rt(),sn("div",{key:1,class:ct(g.ns.e("message"))},[Bo(g.$slots,"default",{},()=>[g.dangerouslyUseHTMLString?(rt(),zn(Lu(g.showInput?"label":"p"),{key:1,for:g.showInput?g.inputId:void 0,innerHTML:g.message},null,8,["for","innerHTML"])):(rt(),zn(Lu(g.showInput?"label":"p"),{key:0,for:g.showInput?g.inputId:void 0},{default:zt(()=>[Hu(Es(g.dangerouslyUseHTMLString?"":g.message),1)]),_:1},8,["for"]))])],2)):An("v-if",!0)],2),ei(Rn("div",{class:ct(g.ns.e("input"))},[qt(j,{id:g.inputId,ref:"inputRef",modelValue:g.inputValue,"onUpdate:modelValue":C[2]||(C[2]=ne=>g.inputValue=ne),type:g.inputType,placeholder:g.inputPlaceholder,"aria-invalid":g.validateError,class:ct({invalid:g.validateError}),onKeydown:wi(g.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),Rn("div",{class:ct(g.ns.e("errormsg")),style:Xs({visibility:g.editorErrorMessage?"visible":"hidden"})},Es(g.editorErrorMessage),7)],2),[[Jm,g.showInput]])],10,Sre),Rn("div",{class:ct(g.ns.e("btns"))},[g.showCancelButton?(rt(),zn(Y,{key:0,loading:g.cancelButtonLoading,class:ct([g.cancelButtonClass]),round:g.roundButton,size:g.btnSize,onClick:C[3]||(C[3]=ne=>g.handleAction("cancel")),onKeydown:C[4]||(C[4]=wi(Jl(ne=>g.handleAction("cancel"),["prevent"]),["enter"]))},{default:zt(()=>[Hu(Es(g.cancelButtonText||g.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):An("v-if",!0),ei(qt(Y,{ref:"confirmRef",type:"primary",loading:g.confirmButtonLoading,class:ct([g.confirmButtonClasses]),round:g.roundButton,disabled:g.confirmButtonDisabled,size:g.btnSize,onClick:C[5]||(C[5]=ne=>g.handleAction("confirm")),onKeydown:C[6]||(C[6]=wi(Jl(ne=>g.handleAction("confirm"),["prevent"]),["enter"]))},{default:zt(()=>[Hu(Es(g.confirmButtonText||g.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[Jm,g.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Cre)]),_:3},8,["z-index","overlay-class","mask"]),[[Jm,g.visible]])]),_:3})}var Ere=hr(yre,[["render",xre],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const $D=new Map,kre=g=>{let C=document.body;return g.appendTo&&(G1(g.appendTo)&&(C=document.querySelector(g.appendTo)),e6(g.appendTo)&&(C=g.appendTo),e6(C)||(C=document.body)),C},Tre=(g,C,_=null)=>{const R=qt(Ere,g,Wh(g.message)||AY(g.message)?{default:Wh(g.message)?g.message:()=>g.message}:null);return R.appContext=_,RY(R,C),kre(g).appendChild(C.firstElementChild),R.component},_re=()=>document.createElement("div"),Ore=(g,C)=>{const _=_re();g.onVanish=()=>{RY(null,_),$D.delete(V)},g.onAction=L=>{const W=$D.get(V);let U;g.showInput?U={value:V.inputValue,action:L}:U=L,g.callback?g.callback(U,R.proxy):L==="cancel"||L==="close"?g.distinguishCancelAndClose&&L!=="cancel"?W.reject("close"):W.reject("cancel"):W.resolve(U)};const R=Tre(g,_,C),V=R.proxy;for(const L in g)Mw(g,L)&&!Mw(V.$props,L)&&(V[L]=g[L]);return V.visible=!0,V};function VT(g,C=null){if(!Ha)return Promise.reject();let _;return G1(g)||AY(g)?g={message:g}:_=g.callback,new Promise((R,V)=>{const L=Ore(g,C!=null?C:VT._context);$D.set(L,{options:g,callback:_,resolve:R,reject:V})})}const Are=["alert","confirm","prompt"],Rre={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Are.forEach(g=>{VT[g]=Dre(g)});function Dre(g){return(C,_,R,V)=>{let L="";return DD(_)?(R=_,L=""):t6(_)?L="":L=_,VT(Object.assign({title:L,message:C,type:"",...Rre[g]},R,{boxType:g}),V)}}VT.close=()=>{$D.forEach((g,C)=>{C.doClose()}),$D.clear()};VT._context=null;const L0=VT;L0.install=g=>{L0._context=g._context,g.config.globalProperties.$msgbox=L0,g.config.globalProperties.$messageBox=L0,g.config.globalProperties.$alert=L0.alert,g.config.globalProperties.$confirm=L0.confirm,g.config.globalProperties.$prompt=L0.prompt};const lY=L0;var Mre=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Bre=function(g){return Mre.map(function(C){return C.toLowerCase()}).indexOf(g.toLowerCase())!==-1},$re=function(g,C,_){Object.keys(C).filter(Bre).forEach(function(R){var V=C[R];typeof V=="function"&&(R==="onInit"?V(g,_):_.on(R.substring(2),function(L){return V(L,_)}))})},Pre=function(g,C,_,R){var V=g.modelEvents?g.modelEvents:null,L=Array.isArray(V)?V.join(" "):V;_o(R,function(W,U){_&&typeof W=="string"&&W!==U&&W!==_.getContent({format:g.outputFormat})&&_.setContent(W)}),_.on(L||"change input undo redo",function(){C.emit("update:modelValue",_.getContent({format:g.outputFormat}))})},Nre=function(g,C,_,R,V,L){R.setContent(L()),_.attrs["onUpdate:modelValue"]&&Pre(C,_,R,V),$re(g,_.attrs,R)},iY=0,OX=function(g){var C=Date.now(),_=Math.floor(Math.random()*1e9);return iY++,g+"_"+_+iY+String(C)},Ire=function(g){return g!==null&&g.tagName.toLowerCase()==="textarea"},cY=function(g){return typeof g>"u"||g===""?[]:Array.isArray(g)?g:g.split(" ")},Fre=function(g,C){return cY(g).concat(cY(C))},Lre=function(g){return g==null},uY=function(){return{listeners:[],scriptId:OX("tiny-script"),scriptLoaded:!1}},Hre=function(){var g=uY(),C=function(V,L,W,U){var j=L.createElement("script");j.referrerPolicy="origin",j.type="application/javascript",j.id=V,j.src=W;var Y=function(){j.removeEventListener("load",Y),U()};j.addEventListener("load",Y),L.head&&L.head.appendChild(j)},_=function(V,L,W){g.scriptLoaded?W():(g.listeners.push(W),V.getElementById(g.scriptId)||C(g.scriptId,V,L,function(){g.listeners.forEach(function(U){return U()}),g.scriptLoaded=!0}))},R=function(){g=uY()};return{load:_,reinitialize:R}},zre=Hre(),Vre=function(){return typeof window<"u"?window:global},Ew=function(){var g=Vre();return g&&g.tinymce?g.tinymce:null},Ure={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(g){return g==="html"||g==="text"}}},Uh=globalThis&&globalThis.__assign||function(){return Uh=Object.assign||function(g){for(var C,_=1,R=arguments.length;_<R;_++){C=arguments[_];for(var V in C)Object.prototype.hasOwnProperty.call(C,V)&&(g[V]=C[V])}return g},Uh.apply(this,arguments)},Wre=function(g,C,_,R){return g(R||"div",{id:C,ref:_})},Zre=function(g,C,_){return g("textarea",{id:C,visibility:"hidden",ref:_})},yG={selector:void 0,target:void 0},jre=oo({props:Ure,setup:function(g,C){var _=g.init?Uh(Uh({},g.init),yG):Uh({},yG),R=Nw(g),V=R.disabled,L=R.modelValue,W=R.tagName,U=nt(null),j=null,Y=g.id||OX("tiny-vue"),le=g.init&&g.init.inline||g.inline,ce=!!C.attrs["onUpdate:modelValue"],ne=!0,fe=g.initialValue?g.initialValue:"",te="",ve=function(Ce){return ce?function(){return L!=null&&L.value?L.value:""}:function(){return Ce?fe:te}},ie=function(){var Ce=ve(ne),P=Uh(Uh({},_),{readonly:g.disabled,target:U.value,plugins:Fre(_.plugins,g.plugins),toolbar:g.toolbar||_.toolbar,inline:le,setup:function(he){j=he,he.on("init",function(Ye){return Nre(Ye,g,C,he,L,Ce)}),typeof _.setup=="function"&&_.setup(he)}});Ire(U.value)&&(U.value.style.visibility=""),Ew().init(P),ne=!1};_o(V,function(Ce){var P;j!==null&&(typeof((P=j.mode)===null||P===void 0?void 0:P.set)=="function"?j.mode.set(Ce?"readonly":"design"):j.setMode(Ce?"readonly":"design"))}),_o(W,function(Ce){var P;ce||(te=j.getContent()),(P=Ew())===null||P===void 0||P.remove(j),Ss(function(){return ie()})}),_c(function(){if(Ew()!==null)ie();else if(U.value&&U.value.ownerDocument){var Ce=g.cloudChannel?g.cloudChannel:"6",P=g.apiKey?g.apiKey:"no-api-key",he=Lre(g.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(P,"/tinymce/").concat(Ce,"/tinymce.min.js"):g.tinymceScriptSrc;zre.load(U.value.ownerDocument,he,ie)}}),$w(function(){Ew()!==null&&Ew().remove(j)}),le||(jJ(function(){ne||ie()}),GJ(function(){var Ce;ce||(te=j.getContent()),(Ce=Ew())===null||Ce===void 0||Ce.remove(j)}));var pe=function(Ce){var P;te=j.getContent(),(P=Ew())===null||P===void 0||P.remove(j),_=Uh(Uh(Uh({},_),Ce),yG),Ss(function(){return ie()})};return C.expose({rerender:pe,getEditor:function(){return j}}),function(){return le?Wre(So,Y,U,g.tagName):Zre(So,Y,U)}}}),Gre={exports:{}};(function(g){(function(){var C=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},_=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},R=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},V=function(e,n){return L(function(o,r){return e.eq(n(o),n(r))})},L=function(e){return{eq:e}},W=L(function(e,n){return e===n}),U=W,j=function(e){return L(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,l=0;l<r;l++)if(!e.eq(n[l],o[l]))return!1;return!0})},Y=function(e,n){return V(j(e),function(o){return R(o,n)})},le=function(e){return L(function(n,o){var r=Object.keys(n),l=Object.keys(o);if(!Y(U).eq(r,l))return!1;for(var u=r.length,m=0;m<u;m++){var b=r[m];if(!e.eq(n[b],o[b]))return!1}return!0})},ce=L(function(e,n){if(e===n)return!0;var o=C(e),r=C(n);return o!==r?!1:_(o)?e===n:o==="array"?j(ce).eq(e,n):o==="object"?le(ce).eq(e,n):!1});const ne=Object.getPrototypeOf,fe=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},te=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&fe(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},ve=e=>n=>te(n)===e,ie=e=>n=>typeof n===e,pe=e=>n=>e===n,Ce=(e,n)=>he(e)&&fe(e,n,(o,r)=>ne(o)===r),P=ve("string"),he=ve("object"),Ye=e=>Ce(e,Object),Me=ve("array"),K=pe(null),Ie=ie("boolean"),pt=pe(void 0),ft=e=>e==null,Oe=e=>!ft(e),re=ie("function"),Nt=ie("number"),Je=(e,n)=>{if(Me(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},ot=()=>{},O=(e,n)=>(...o)=>e(n.apply(null,o)),Ut=(e,n)=>o=>e(n(o)),we=e=>()=>e,Qe=e=>e,it=(e,n)=>e===n;function Fe(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const _n=e=>n=>!e(n),Kn=e=>()=>{throw new Error(e)},Pn=e=>e(),Jn=e=>{e()},Pe=we(!1),St=we(!0);class z{constructor(n,o){this.tag=n,this.value=o}static some(n){return new z(!0,n)}static none(){return z.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?z.some(n(this.value)):z.none()}bind(n){return this.tag?n(this.value):z.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:z.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n!=null?n:"Called getOrDie on None")}static from(n){return Oe(n)?z.some(n):z.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}z.singletonNone=new z(!1);const Rr=Array.prototype.slice,Wn=Array.prototype.indexOf,ms=Array.prototype.push,po=(e,n)=>Wn.call(e,n),Vu=(e,n)=>{const o=po(e,n);return o===-1?z.none():z.some(o)},dn=(e,n)=>po(e,n)>-1,$o=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const l=e[o];if(n(l,o))return!0}return!1},pn=(e,n)=>{const o=e.length,r=new Array(o);for(let l=0;l<o;l++){const u=e[l];r[l]=n(u,l)}return r},Ge=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const l=e[o];n(l,o)}},cl=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},ps=(e,n)=>{const o=[],r=[];for(let l=0,u=e.length;l<u;l++){const m=e[l];(n(m,l)?o:r).push(m)}return{pass:o,fail:r}},Qt=(e,n)=>{const o=[];for(let r=0,l=e.length;r<l;r++){const u=e[r];n(u,r)&&o.push(u)}return o},_l=(e,n,o)=>(cl(e,(r,l)=>{o=n(o,r,l)}),o),Vo=(e,n,o)=>(Ge(e,(r,l)=>{o=n(o,r,l)}),o),Xi=(e,n,o)=>{for(let r=0,l=e.length;r<l;r++){const u=e[r];if(n(u,r))return z.some(u);if(o(u,r))break}return z.none()},ns=(e,n)=>Xi(e,n,Pe),Js=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const l=e[o];if(n(l,o))return z.some(o)}return z.none()},Si=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Me(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ms.apply(n,e[o])}return n},Dr=(e,n)=>Si(pn(e,n)),ks=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const l=e[o];if(n(l,o)!==!0)return!1}return!0},It=e=>{const n=Rr.call(e,0);return n.reverse(),n},Zn=(e,n)=>Qt(e,o=>!dn(n,o)),Dn=(e,n)=>{const o={};for(let r=0,l=e.length;r<l;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Re=(e,n)=>{const o=Rr.call(e,0);return o.sort(n),o},yt=(e,n)=>n>=0&&n<e.length?z.some(e[n]):z.none(),en=e=>yt(e,0),hn=e=>yt(e,e.length-1),vo=re(Array.from)?Array.from:e=>Rr.call(e),Ts=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return z.none()},ka=(e,n)=>{const o=[],r=re(n)?l=>$o(o,u=>n(u,l)):l=>dn(o,l);for(let l=0,u=e.length;l<u;l++){const m=e[l];r(m)||o.push(m)}return o},Uo=Object.keys,Lr=Object.hasOwnProperty,xt=(e,n)=>{const o=Uo(e);for(let r=0,l=o.length;r<l;r++){const u=o[r],m=e[u];n(m,u)}},Hn=(e,n)=>pr(e,(o,r)=>({k:r,v:n(o,r)})),pr=(e,n)=>{const o={};return xt(e,(r,l)=>{const u=n(r,l);o[u.k]=u.v}),o},ul=e=>(n,o)=>{e[o]=n},Lf=(e,n,o,r)=>{xt(e,(l,u)=>{(n(l,u)?o:r)(l,u)})},su=(e,n)=>{const o={},r={};return Lf(e,n,ul(o),ul(r)),{t:o,f:r}},os=(e,n)=>{const o={};return Lf(e,n,ul(o),ot),o},ru=(e,n)=>{const o=[];return xt(e,(r,l)=>{o.push(n(r,l))}),o},Uu=e=>ru(e,Qe),Ko=(e,n)=>Cn(e,n)?z.from(e[n]):z.none(),Cn=(e,n)=>Lr.call(e,n),Ta=(e,n)=>Cn(e,n)&&e[n]!==void 0&&e[n]!==null,Oc=(e,n,o=ce)=>le(o).eq(e,n),Qm=e=>{const n={};return Ge(e,o=>{n[o]={}}),Uo(n)},eg=e=>e.length!==void 0,Va=Array.isArray,Hr=e=>{if(Va(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Qs=(e,n,o)=>{if(!e)return!1;if(o=o||e,eg(e)){for(let r=0,l=e.length;r<l;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Cn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Ji=(e,n)=>{const o=[];return Qs(e,(r,l)=>{o.push(n(r,l,e))}),o},Ud=(e,n)=>{const o=[];return Qs(e,(r,l)=>{(!n||n(r,l,e))&&o.push(r)}),o},Yr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},dl=(e,n,o,r)=>{let l=pt(o)?e[0]:o;for(let u=0;u<e.length;u++)l=n.call(r,l,e[u],u);return l},Fs=(e,n,o)=>{for(let r=0,l=e.length;r<l;r++)if(n.call(o,e[r],r,e))return r;return-1},_a=e=>e[e.length-1],au=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Hf=(e,n,o,r)=>{const l=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!l,m=e.isiOS()||e.isAndroid(),b=m||r("(pointer:coarse)"),w=l||!u&&m&&r("(min-device-width:768px)"),k=u||m&&!w,B=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,M=!k&&!w&&!B;return{isiPad:we(l),isiPhone:we(u),isTablet:we(w),isPhone:we(k),isTouch:we(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:we(B),isDesktop:we(M)}},tg=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Qi=(e,n)=>{const o=tg(e,n);if(!o)return{major:0,minor:0};const r=l=>Number(n.replace(o,"$"+l));return Ua(r(1),r(2))},UT=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?Te():Qi(e,o)},Te=()=>Ua(0,0),Ua=(e,n)=>({major:e,minor:n}),Wd={nu:Ua,detect:UT,unknown:Te},K1=(e,n)=>Ts(n.brands,o=>{const r=o.brand.toLowerCase();return ns(e,l=>{var u;return r===((u=l.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(l=>({current:l.name,version:Wd.nu(parseInt(o.version,10),0)}))}),Kh=(e,n)=>{const o=String(n).toLowerCase();return ns(e,r=>r.search(o))},ss=(e,n)=>Kh(e,n).map(o=>{const r=Wd.detect(o.versionRegexes,n);return{current:o.name,version:r}}),q1=(e,n)=>Kh(e,n).map(o=>{const r=Wd.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Iw=(e,n)=>e.substring(n),Wu=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Zd=(e,n)=>or(e,n)?Iw(e,n.length):e,Mr=(e,n,o=0,r)=>{const l=e.indexOf(n,o);return l!==-1?pt(r)?!0:l+n.length<=r:!1},or=(e,n)=>Wu(e,n,0),Ac=(e,n)=>Wu(e,n,e.length-n.length),Ol=e=>n=>n.replace(e,""),lu=Ol(/^\s+|\s+$/g),zf=Ol(/^\s+/g),jd=Ol(/\s+$/g),Oo=e=>e.length>0,Al=e=>!Oo(e),Gd=(e,n)=>n<=0?"":new Array(n+1).join(e),Kd=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?z.none():z.some(o)},iu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Rl=e=>n=>Mr(n,e),_s=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Mr(e,"edge/")&&Mr(e,"chrome")&&Mr(e,"safari")&&Mr(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,iu],search:e=>Mr(e,"chrome")&&!Mr(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Mr(e,"msie")||Mr(e,"trident")},{name:"Opera",versionRegexes:[iu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rl("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rl("firefox")},{name:"Safari",versionRegexes:[iu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Mr(e,"safari")||Mr(e,"mobile/"))&&Mr(e,"applewebkit")}],Fw=[{name:"Windows",search:Rl("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Mr(e,"iphone")||Mr(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rl("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Rl("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rl("linux"),versionRegexes:[]},{name:"Solaris",search:Rl("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rl("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Rl("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],qh={browsers:we(_s),oses:we(Fw)},Lo="Edge",Dl="Chromium",fl="IE",Br="Opera",Vf="Firefox",Zu="Safari",xi=()=>Wa({current:void 0,version:Wd.unknown()}),Wa=e=>{const n=e.current,o=e.version,r=l=>()=>n===l;return{current:n,version:o,isEdge:r(Lo),isChromium:r(Dl),isIE:r(fl),isOpera:r(Br),isFirefox:r(Vf),isSafari:r(Zu)}},Yh={unknown:xi,nu:Wa,edge:we(Lo),chromium:we(Dl),ie:we(fl),opera:we(Br),firefox:we(Vf),safari:we(Zu)},Xh="Windows",Y1="iOS",Ml="Android",cu="Linux",Jh="macOS",Qh="Solaris",ng="FreeBSD",og="ChromeOS",X1=()=>sg({current:void 0,version:Wd.unknown()}),sg=e=>{const n=e.current,o=e.version,r=l=>()=>n===l;return{current:n,version:o,isWindows:r(Xh),isiOS:r(Y1),isAndroid:r(Ml),isMacOS:r(Jh),isLinux:r(cu),isSolaris:r(Qh),isFreeBSD:r(ng),isChromeOS:r(og)}},Xr={unknown:X1,nu:sg,windows:we(Xh),ios:we(Y1),android:we(Ml),linux:we(cu),macos:we(Jh),solaris:we(Qh),freebsd:we(ng),chromeos:we(og)},ju={detect:(e,n,o)=>{const r=qh.browsers(),l=qh.oses(),u=n.bind(w=>K1(r,w)).orThunk(()=>ss(r,e)).fold(Yh.unknown,Yh.nu),m=q1(l,e).fold(Xr.unknown,Xr.nu),b=Hf(m,u,e,o);return{browser:u,os:m,deviceType:b}}},ep=e=>window.matchMedia(e).matches;let J1=au(()=>ju.detect(navigator.userAgent,z.from(navigator.userAgentData),ep));const ec=()=>J1(),U0=navigator.userAgent,ca=ec(),Vr=ca.browser,tc=ca.os,Rc=ca.deviceType,In=U0.indexOf("Windows Phone")!==-1,co={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Vr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Vr.isIE(),windowsPhone:In,browser:{current:Vr.current,version:Vr.version,isChromium:Vr.isChromium,isEdge:Vr.isEdge,isFirefox:Vr.isFirefox,isIE:Vr.isIE,isOpera:Vr.isOpera,isSafari:Vr.isSafari},os:{current:tc.current,version:tc.version,isAndroid:tc.isAndroid,isChromeOS:tc.isChromeOS,isFreeBSD:tc.isFreeBSD,isiOS:tc.isiOS,isLinux:tc.isLinux,isMacOS:tc.isMacOS,isSolaris:tc.isSolaris,isWindows:tc.isWindows},deviceType:{isDesktop:Rc.isDesktop,isiPad:Rc.isiPad,isiPhone:Rc.isiPhone,isPhone:Rc.isPhone,isTablet:Rc.isTablet,isTouch:Rc.isTouch,isWebView:Rc.isWebView}},Jr=/^\s*|\s*$/g,Zs=e=>ft(e)?"":(""+e).replace(Jr,""),F=(e,n)=>n?n==="array"&&Va(e)?!0:typeof e===n:e!==void 0,q=(e,n,o={})=>{const r=P(e)?e.split(n||","):e||[];let l=r.length;for(;l--;)o[r[l]]={};return o},me=Cn,Ne=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const l in r)if(Cn(r,l)){const u=r[l];u!==void 0&&(e[l]=u)}}return e},Lt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Qs(e,(l,u)=>n.call(r,l,u,o)===!1?!1:(Lt(l,n,o,r),!0)))},et={trim:Zs,isArray:Va,is:F,toArray:Hr,makeMap:q,each:Qs,map:Ji,grep:Ud,inArray:Yr,hasOwn:me,extend:Ne,walk:Lt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,l=o.length;r<l&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Me(e)?e:e===""?[]:Ji(e.split(n||","),Zs),_addCacheSuffix:e=>{const n=co.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},ua=(e,n,o=it)=>e.exists(r=>o(r,n)),Yo=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},vr=(e,n,o)=>e.isSome()&&n.isSome()?z.some(o(e.getOrDie(),n.getOrDie())):z.none(),Q1=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?z.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):z.none(),so=(e,n)=>e?z.some(n):z.none(),Gu=typeof window<"u"?window:Function("return this;")(),qd=(e,n)=>{let o=n!=null?n:Gu;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},cs=(e,n)=>{const o=e.split(".");return qd(o,n)},js=(e,n)=>cs(e,n),Dc=(e,n)=>{const o=js(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},WT=Object.getPrototypeOf,ev=e=>Dc("HTMLElement",e),vs=e=>{const n=cs("ownerDocument.defaultView",e);return he(e)&&(ev(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(WT(e).constructor.name))},Bl=8,rg=9,ml=11,ag=1,tp=3,gs=e=>e.dom.nodeName.toLowerCase(),Za=e=>e.dom.nodeType,$l=e=>n=>Za(n)===e,Lw=e=>Za(e)===Bl||gs(e)==="#comment",uu=e=>rs(e)&&vs(e.dom),rs=$l(ag),ja=$l(tp),Uf=$l(rg),Hw=$l(ml),lg=e=>n=>rs(n)&&gs(n)===e,Mc=(e,n,o)=>{if(P(o)||Ie(o)||Nt(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},sr=(e,n,o)=>{Mc(e.dom,n,o)},gl=(e,n)=>{const o=e.dom;xt(n,(r,l)=>{Mc(o,l,r)})},hl=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Bc=(e,n)=>z.from(hl(e,n)),np=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},rr=(e,n)=>{e.dom.removeAttribute(n)},Ei=e=>{const n=e.dom.attributes;return n==null||n.length===0},tv=e=>Vo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),ig=(e,n)=>{const o=hl(e,n);return o===void 0||o===""?[]:o.split(" ")},nv=(e,n,o)=>{const l=ig(e,n).concat([o]);return sr(e,n,l.join(" ")),!0},zw=(e,n,o)=>{const r=Qt(ig(e,n),l=>l!==o);return r.length>0?sr(e,n,r.join(" ")):rr(e,n),!1},Wf=e=>e.dom.classList!==void 0,Yd=e=>ig(e,"class"),op=(e,n)=>nv(e,"class",n),pl=(e,n)=>zw(e,"class",n),W0=(e,n)=>dn(Yd(e),n)?pl(e,n):op(e,n),Zf=(e,n)=>{Wf(e)?e.dom.classList.add(n):op(e,n)},ov=e=>{(Wf(e)?e.dom.classList:Yd(e)).length===0&&rr(e,"class")},jf=(e,n)=>{Wf(e)?e.dom.classList.remove(n):pl(e,n),ov(e)},Z0=(e,n)=>{const o=Wf(e)?e.dom.classList.toggle(n):W0(e,n);return ov(e),o},sv=(e,n)=>Wf(e)&&e.dom.classList.contains(n),cg=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,e),new Error(l)}return ug(r.childNodes[0])},Vw=(e,n)=>{const r=(n||document).createElement(e);return ug(r)},Uw=(e,n)=>{const r=(n||document).createTextNode(e);return ug(r)},ug=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},de={fromHtml:cg,fromTag:Vw,fromText:Uw,fromDom:ug,fromPoint:(e,n,o)=>z.from(e.dom.elementFromPoint(n,o)).map(ug)},rv=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let l=n(e);do l=l.bind(r);while(l.isSome());return o},vl=(e,n)=>{const o=e.dom;if(o.nodeType!==ag)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},j0=e=>e.nodeType!==ag&&e.nodeType!==rg&&e.nodeType!==ml||e.childElementCount===0,jT=(e,n)=>{const o=n===void 0?document:n.dom;return j0(o)?[]:pn(o.querySelectorAll(e),de.fromDom)},GT=(e,n)=>{const o=n===void 0?document:n.dom;return j0(o)?z.none():z.from(o.querySelector(e)).map(de.fromDom)},Ao=(e,n)=>e.dom===n.dom,$c=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Oa=e=>de.fromDom(e.dom.ownerDocument),Ku=e=>Uf(e)?e:Oa(e),Ww=e=>de.fromDom(Ku(e).dom.documentElement),dg=e=>de.fromDom(Ku(e).dom.defaultView),ti=e=>z.from(e.dom.parentNode).map(de.fromDom),av=e=>z.from(e.dom.parentElement).map(de.fromDom),G0=(e,n)=>{const o=re(n)?n:Pe;let r=e.dom;const l=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,m=de.fromDom(u);if(l.push(m),o(m)===!0)break;r=u}return l},Zw=e=>{const n=o=>Qt(o,r=>!Ao(e,r));return ti(e).map(Qr).map(n).getOr([])},nc=e=>z.from(e.dom.previousSibling).map(de.fromDom),fg=e=>z.from(e.dom.nextSibling).map(de.fromDom),jw=e=>It(rv(e,nc)),ni=e=>rv(e,fg),Qr=e=>pn(e.dom.childNodes,de.fromDom),Xd=(e,n)=>{const o=e.dom.childNodes;return z.from(o[n]).map(de.fromDom)},mg=e=>Xd(e,0),oc=e=>Xd(e,e.dom.childNodes.length-1),Pl=e=>e.dom.childNodes.length,K0=e=>e.dom.hasChildNodes(),Gw=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return de.fromDom(n)},sp=e=>Hw(e)&&Oe(e.dom.host),lv=re(Element.prototype.attachShadow)&&re(Node.prototype.getRootNode),q0=we(lv),du=lv?e=>de.fromDom(e.dom.getRootNode()):Ku,iv=e=>sp(e)?e:Gw(Ku(e)),h6=e=>sp(e)?e:de.fromDom(Ku(e).dom.body),LD=e=>{const n=du(e);return sp(n)?z.some(n):z.none()},KT=e=>de.fromDom(e.dom.host),cv=e=>{if(q0()&&Oe(e.target)){const n=de.fromDom(e.target);if(rs(n)&&Kw(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return en(o)}}return z.from(e.target)},Kw=e=>Oe(e.dom.shadowRoot),Gf=e=>{const n=ja(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return LD(de.fromDom(n)).fold(()=>o.body.contains(n),Ut(Gf,KT))};var br=(e,n,o,r,l)=>e(o,r)?z.some(o):re(l)&&l(o)?z.none():n(o,r,l);const us=(e,n,o)=>{let r=e.dom;const l=re(o)?o:Pe;for(;r.parentNode;){r=r.parentNode;const u=de.fromDom(r);if(n(u))return z.some(u);if(l(u))break}return z.none()},ki=(e,n,o)=>br((l,u)=>u(l),us,e,n,o),Y0=(e,n)=>{const o=e.dom;return o.parentNode?qT(de.fromDom(o.parentNode),r=>!Ao(e,r)&&n(r)):z.none()},qT=(e,n)=>{const o=l=>n(de.fromDom(l));return ns(e.dom.childNodes,o).map(de.fromDom)},Ga=(e,n)=>{const o=r=>{for(let l=0;l<r.childNodes.length;l++){const u=de.fromDom(r.childNodes[l]);if(n(u))return z.some(u);const m=o(r.childNodes[l]);if(m.isSome())return m}return z.none()};return o(e.dom)},rp=(e,n,o)=>us(e,r=>vl(r,n),o),Kf=(e,n)=>GT(n,e),bl=(e,n,o)=>br((l,u)=>vl(l,u),rp,e,n,o),qw=e=>bl(e,"[contenteditable]"),Mn=(e,n=!1)=>Gf(e)?e.dom.isContentEditable:qw(e).fold(we(n),o=>Ti(o)==="true"),Ti=e=>e.dom.contentEditable,qu=e=>e.style!==void 0&&re(e.style.getPropertyValue),X0=(e,n,o)=>{if(!P(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);qu(e)&&e.style.setProperty(n,o)},ap=(e,n)=>{qu(e)&&e.style.removeProperty(n)},J0=(e,n,o)=>{const r=e.dom;X0(r,n,o)},uv=(e,n)=>{const o=e.dom;xt(n,(r,l)=>{X0(o,l,r)})},Ur=(e,n)=>{const o=e.dom,l=window.getComputedStyle(o).getPropertyValue(n);return l===""&&!Gf(e)?yl(o,n):l},yl=(e,n)=>qu(e)?e.style.getPropertyValue(n):"",Cl=(e,n)=>{const o=e.dom,r=yl(o,n);return z.from(r).filter(l=>l.length>0)},da=e=>{const n={},o=e.dom;if(qu(o))for(let r=0;r<o.style.length;r++){const l=o.style.item(r);n[l]=o.style[l]}return n},Yw=(e,n)=>{const o=e.dom;ap(o,n),ua(Bc(e,"style").map(lu),"")&&rr(e,"style")},Bs=e=>e.dom.offsetWidth,Nl=(e,n)=>{ti(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},oi=(e,n)=>{fg(e).fold(()=>{ti(e).each(l=>{ar(l,n)})},r=>{Nl(r,n)})},gg=(e,n)=>{mg(e).fold(()=>{ar(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},ar=(e,n)=>{e.dom.appendChild(n.dom)},Xw=(e,n)=>{Nl(e,n),ar(n,e)},Q0=(e,n)=>{Ge(n,(o,r)=>{const l=r===0?e:n[r-1];oi(l,o)})},Xo=(e,n)=>{Ge(n,o=>{ar(e,o)})},Jd=e=>{e.dom.textContent="",Ge(Qr(e),n=>{Ro(n)})},Ro=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Pc=e=>{const n=Qr(e);n.length>0&&Q0(e,n),Ro(e)},ey=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Qr(de.fromDom(r))},dv=e=>pn(e,de.fromDom),ty=e=>e.dom.innerHTML,Yn=(e,n)=>{const r=Oa(e).dom,l=de.fromDom(r.createDocumentFragment()),u=ey(n,r);Xo(l,u),Jd(e),ar(e,l)},ny=e=>{const n=de.fromTag("div"),o=de.fromDom(e.dom.cloneNode(!0));return ar(n,o),ty(n)},oy=(e,n,o,r,l,u,m)=>({target:e,x:n,y:o,stop:r,prevent:l,kill:u,raw:m}),YT=e=>{const n=de.fromDom(cv(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),l=O(r,o);return oy(n,e.clientX,e.clientY,o,r,l,e)},HD=(e,n)=>o=>{e(o)&&n(YT(o))},sy=(e,n,o,r,l)=>{const u=HD(o,r);return e.dom.addEventListener(n,u,l),{unbind:Fe(Jw,e,n,u,l)}},ry=(e,n,o,r)=>sy(e,n,o,r,!1),Jw=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Qd=(e,n)=>({left:e,top:n,translate:(r,l)=>Qd(e+r,n+l)}),qf=Qd,XT=e=>{const n=e.getBoundingClientRect();return qf(n.left,n.top)},lp=(e,n)=>e!==void 0?e:n!==void 0?n:0,Yu=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,l=n.documentElement;if(o===e.dom)return qf(o.offsetLeft,o.offsetTop);const u=lp(r==null?void 0:r.pageYOffset,l.scrollTop),m=lp(r==null?void 0:r.pageXOffset,l.scrollLeft),b=lp(l.clientTop,o.clientTop),w=lp(l.clientLeft,o.clientLeft);return ay(e).translate(m-w,u-b)},ay=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?qf(r.offsetLeft,r.offsetTop):Gf(e)?XT(n):qf(0,0)},Nc=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return qf(o,r)},Yf=(e,n)=>{ec().browser.isSafari()&&re(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},JT=e=>{const n=e===void 0?window:e;return ec().browser.isFirefox()?z.none():z.from(n.visualViewport)},fv=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),ly=e=>{const n=e===void 0?window:e,o=n.document,r=Nc(de.fromDom(o));return JT(n).fold(()=>{const l=n.document.documentElement,u=l.clientWidth,m=l.clientHeight;return fv(r.left,r.top,u,m)},l=>fv(Math.max(l.pageLeft,r.left),Math.max(l.pageTop,r.top),l.width,l.height))},Qw=(e,n)=>Qt(Qr(e),n),iy=(e,n)=>{let o=[];return Ge(Qr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(iy(r,n))}),o},fa=(e,n)=>jT(n,e),mv=(e,n,o)=>rp(e,n,o).isSome();class lr{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,l){if(n){if(!l&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let m=n.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(u=m[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const l=n.parentNode;if(l&&l!==this.rootNode)return l}}}const ea=e=>n=>!!n&&n.nodeType===e,rn=e=>!!e&&!Object.getPrototypeOf(e),Bt=ea(1),Xf=e=>{const n=e.toLowerCase();return o=>Oe(o)&&o.nodeName.toLowerCase()===n},_i=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return dn(n,r)}return!1}},cy=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Bt(r)){const l=r.ownerDocument.defaultView;if(l)for(let u=0;u<o.length;u++){const m=l.getComputedStyle(r,null);if((m?m.getPropertyValue(e):null)===o[u])return!0}}return!1}},uy=e=>n=>Bt(n)&&n.hasAttribute(e),Oi=(e,n)=>o=>Bt(o)&&o.getAttribute(e)===n,Ai=e=>Bt(e)&&e.hasAttribute("data-mce-bogus"),gv=e=>Bt(e)&&e.getAttribute("data-mce-bogus")==="all",Os=e=>Bt(e)&&e.tagName==="TABLE",hg=e=>n=>!!(Bt(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ip=_i(["textarea","input"]),ut=ea(3),QT=ea(4),e_=ea(7),si=ea(8),pg=ea(9),ef=ea(11),bs=Xf("br"),eS=Xf("img"),Do=hg("true"),Eo=hg("false"),ma=_i(["td","th"]),vg=_i(["td","th","caption"]),er=_i(["video","audio","object","embed"]),Jf=Xf("li"),Wr=Xf("details"),Ka=Xf("summary"),Xu="\uFEFF",We="\xA0",wl=e=>e===Xu,tS=e=>e.replace(/\uFEFF/g,""),sc=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?z.from(u.dom.nodeValue):z.none();return{get:o,getOption:r,set:(u,m)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=m}}})(ja,"text"),hv=e=>sc.get(e),Ri=e=>sc.getOption(e),t_=(e,n)=>sc.set(e,n),tf=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],nS=["td","th"],ri=["thead","tbody","tfoot"],xo=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],fu=["h1","h2","h3","h4","h5","h6"],cp=["li","dd","dt"],ga=["ul","ol","dl"],pv=["pre","script","textarea","style"],nf=["pre"].concat(fu),Ju=e=>{let n;return o=>(n=n||Dn(e,St),Cn(n,gs(o)))},Gs=Ju(tf),dy=e=>gs(e)==="table",Ae=e=>rs(e)&&!Gs(e),ha=e=>rs(e)&&gs(e)==="br",vv=Ju(xo),ai=Ju(ga),Il=Ju(cp),ta=Ju(ri),Ls=Ju(nS),bv=Ju(pv),bg=Ju(nf),of=e=>bg(e)||Ae(e),cn=e=>{const n=[];let o=e.dom;for(;o;)n.push(de.fromDom(o)),o=o.lastChild;return n},zD=e=>{const n=fa(e,"br"),o=Qt(cn(e).slice(-1),ha);n.length===o.length&&Ge(o,Ro)},Fl=()=>{const e=de.fromTag("br");return sr(e,"data-mce-bogus","1"),e},sf=e=>{Jd(e),ar(e,Fl())},n_=e=>{oc(e).each(n=>{nc(n).each(o=>{Gs(e)&&ha(n)&&Gs(o)&&Ro(n)})})},pa=Xu,yv=wl,Qu=tS,yg=Bt,Di=ut,rf=e=>(Di(e)&&(e=e.parentNode),yg(e)&&e.hasAttribute("data-mce-caret")),ed=e=>Di(e)&&yv(e.data),Mi=e=>rf(e)||ed(e),mu=e=>e.firstChild!==e.lastChild||!bs(e.firstChild),oS=(e,n)=>{var o;const l=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(pa),u=e.parentNode;if(n){const m=e.previousSibling;if(Di(m)){if(Mi(m))return m;if(up(m))return m.splitText(m.data.length-1)}u==null||u.insertBefore(l,e)}else{const m=e.nextSibling;if(Di(m)){if(Mi(m))return m;if(gu(m))return m.splitText(1),m}e.nextSibling?u==null||u.insertBefore(l,e.nextSibling):u==null||u.appendChild(l)}return l},Cg=e=>{const n=e.container();return ut(n)?n.data.charAt(e.offset())===pa||e.isAtStart()&&ed(n.previousSibling):!1},Cv=e=>{const n=e.container();return ut(n)?n.data.charAt(e.offset()-1)===pa||e.isAtEnd()&&ed(n.nextSibling):!1},sS=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Fl().dom);const m=n.parentNode;return o?m==null||m.insertBefore(u,n):n.nextSibling?m==null||m.insertBefore(u,n.nextSibling):m==null||m.appendChild(u),u},gu=e=>Di(e)&&e.data[0]===pa,up=e=>Di(e)&&e.data[e.data.length-1]===pa,o_=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Ai(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},fy=e=>e&&e.hasAttribute("data-mce-caret")?(o_(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,wv=e=>rf(e.startContainer),Cr=Do,hu=Eo,wg=bs,Qf=ut,rS=_i(["script","style","textarea"]),li=_i(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Sv=_i(["table"]),dp=Mi,Ll=e=>dp(e)?!1:Qf(e)?!rS(e.parentNode):li(e)||wg(e)||Sv(e)||Ic(e),td=e=>Bt(e)&&e.getAttribute("unselectable")==="true",Ic=e=>!td(e)&&hu(e),af=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Ic(o))return!1;if(Cr(o))return!0}return!0},rc=e=>Ic(e)?!Vo(vo(e.getElementsByTagName("*")),(n,o)=>n||Cr(o),!1):!1,aS=e=>li(e)||rc(e),lf=(e,n)=>Ll(e)&&af(e,n),Sg=/^[ \t\r\n]*$/,Bi=e=>Sg.test(e),lS=e=>{for(const n of e)if(!wl(n))return!1;return!0},fp=e=>" \f	\v".indexOf(e)!==-1,my=e=>e===`
`||e==="\r",gy=(e,n)=>n<e.length&&n>=0?my(e[n]):!1,$s=(e,n=4,o=!0,r=!0)=>{const l=Gd(" ",n),u=e.replace(/\t/g,l);return Vo(u,(b,w)=>fp(w)||w===We?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||gy(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+We}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:my(w),str:b.str+w},{pcIsSpace:!1,str:""}).str},iS=(e,n)=>{const o=de.fromDom(n),r=de.fromDom(e);return mv(r,"pre,code",Fe(Ao,o))},pu=(e,n)=>ut(e)&&Bi(e.data)&&!iS(e,n),xg=e=>Bt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Fc=(e,n)=>Ll(e)&&!pu(e,n)||xg(e)||Lc(e),Lc=uy("data-mce-bookmark"),ii=uy("data-mce-bogus"),Eg=Oi("data-mce-bogus","all"),mp=(e,n)=>{let o=0;if(Fc(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const l=new lr(r,e);do{if(n){if(Eg(r)){r=l.next(!0);continue}if(ii(r)){r=l.next();continue}}if(bs(r)){o++,r=l.next();continue}if(Fc(r,e))return!1;r=l.next()}while(r);return o<=1}},ir=(e,n=!0)=>mp(e.dom,n),em="data-mce-block",hy=e=>Qt(Uo(e),n=>!/[A-Z]/.test(n)),tm=e=>hy(e).join(","),kg=(e,n)=>Oe(n.querySelector(e))?(n.setAttribute(em,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(em),!1),py=(e,n)=>{const o=tm(e.getTransparentElements()),r=tm(e.getBlockElements());return Qt(n.querySelectorAll(o),l=>kg(r,l))},nm=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let l=e[r];l;l=l[r])if(ir(de.fromDom(l))){(o=l.parentNode)===null||o===void 0||o.removeChild(l);return}},nd=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const l=o.extractContents();nm(l,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();nm(u,!1),ir(de.fromDom(l))||r.insertBefore(l,e),ir(de.fromDom(n))||r.insertBefore(n,e),ir(de.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},Sl=(e,n,o)=>{const r=e.getBlockElements(),l=de.fromDom(n),u=b=>gs(b)in r,m=b=>Ao(b,l);Ge(dv(o),b=>{us(b,u,m).each(w=>{const k=Qw(b,B=>u(B)&&!e.isValidChild(gs(w),gs(B)));if(k.length>0){const B=av(w);Ge(k,M=>{us(M,u,m).each(H=>{nd(H.dom,M.dom)})}),B.each(M=>py(e,M.dom))}})})},od=(e,n,o)=>{Ge([...o,...cf(e,n)?[n]:[]],r=>Ge(fa(de.fromDom(r),r.nodeName.toLowerCase()),l=>{cS(e,l.dom)&&Pc(l)}))},vu=(e,n)=>{const o=py(e,n);Sl(e,n,o),od(e,n,o)},vy=(e,n)=>{if(Tg(e,n)){const o=tm(e.getBlockElements());kg(o,n)}},xv=(e,n,o)=>{const r=u=>Ao(u,de.fromDom(n)),l=G0(de.fromDom(o),r);yt(l,l.length-2).filter(rs).fold(()=>vu(e,n),u=>vu(e,u.dom))},gp=e=>e.hasAttribute(em),Ev=(e,n)=>Cn(e.getTransparentElements(),n),Tg=(e,n)=>Bt(n)&&Ev(e,n.nodeName),cf=(e,n)=>Tg(e,n)&&gp(n),cS=(e,n)=>Tg(e,n)&&!gp(n),hp=(e,n)=>n.type===1&&Ev(e,n.name)&&P(n.attr(em)),Co=ec().browser,tn=e=>ns(e,rs),om=e=>Co.isFirefox()&&gs(e)==="table"?tn(Qr(e)).filter(n=>gs(n)==="caption").bind(n=>tn(ni(n)).map(o=>{const r=o.dom.offsetTop,l=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=l?-u:0})).getOr(0):0,kv=(e,n)=>e.children&&dn(e.children,n),Tv=(e,n,o)=>{let r=0,l=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Ur(de.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,l=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:l}}let m=n;for(;m&&m!==o&&m.nodeType&&!kv(m,o);){const b=m;r+=b.offsetLeft||0,l+=b.offsetTop||0,m=b.offsetParent}for(m=n.parentNode;m&&m!==o&&m.nodeType&&!kv(m,o);)r-=m.scrollLeft||0,l-=m.scrollTop||0,m=m.parentNode;l+=om(de.fromDom(n))}return{x:r,y:l}},by=(e,n={})=>{let o=0;const r={},l=de.fromDom(e),u=Ku(l),m=X=>{n.referrerPolicy=X},b=X=>{n.contentCssCors=X},w=X=>{ar(iv(l),X)},k=X=>{const oe=iv(l);Kf(oe,"#"+X).each(Ro)},B=X=>Ko(r,X).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=X=>new Promise((oe,ye)=>{let xe;const Ee=et._addCacheSuffix(X),De=B(Ee);r[Ee]=De,De.count++;const tt=(Ze,Et)=>{Ge(Ze,Jn),De.status=Et,De.passed=[],De.failed=[],xe&&(xe.onload=null,xe.onerror=null,xe=null)},Gt=()=>tt(De.passed,2),at=()=>tt(De.failed,3);if(oe&&De.passed.push(oe),ye&&De.failed.push(ye),De.status===1)return;if(De.status===2){Gt();return}if(De.status===3){at();return}De.status=1;const ze=de.fromTag("link",u.dom);gl(ze,{rel:"stylesheet",type:"text/css",id:De.id}),n.contentCssCors&&sr(ze,"crossOrigin","anonymous"),n.referrerPolicy&&sr(ze,"referrerpolicy",n.referrerPolicy),xe=ze.dom,xe.onload=Gt,xe.onerror=at,w(ze),sr(ze,"href",Ee)}),H=X=>Promise.allSettled(pn(X,ye=>M(ye).then(we(ye)))).then(ye=>{const xe=ps(ye,Ee=>Ee.status==="fulfilled");return xe.fail.length>0?Promise.reject(pn(xe.fail,Ee=>Ee.reason)):pn(xe.pass,Ee=>Ee.value)}),Q=X=>{const oe=et._addCacheSuffix(X);Ko(r,oe).each(ye=>{--ye.count===0&&(delete r[oe],k(ye.id))})};return{load:M,loadAll:H,unload:Q,unloadAll:X=>{Ge(X,oe=>{Q(oe)})},_setReferrerPolicy:m,_setContentCssCors:b}},Wo=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=du(o).dom;return z.from(e.get(u)).getOrThunk(()=>{const m=by(u,r);return e.set(u,m),m})}}})(),_v=e=>e.nodeName.toLowerCase()==="span",uS=(e,n)=>Oe(e)&&(Fc(e,n)||Ae(de.fromDom(e))),pp=(e,n)=>{const o=new lr(e,n).prev(!1),r=new lr(e,n).next(!1),l=pt(o)||uS(o,n),u=pt(r)||uS(r,n);return l&&u},Xe=e=>_v(e)&&e.getAttribute("data-mce-type")==="bookmark",_g=(e,n)=>ut(e)&&e.data.length>0&&pp(e,n),r_=e=>Bt(e)?e.childNodes.length>0:!1,Ov=e=>ef(e)||pg(e),yy=(e,n,o)=>{var r;const l=o||n;if(Bt(n)&&Xe(n))return n;const u=n.childNodes;for(let m=u.length-1;m>=0;m--)yy(e,u[m],l);if(Bt(n)){const m=n.childNodes;m.length===1&&Xe(m[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(m[0],n))}return!Ov(n)&&!Fc(n,l)&&!r_(n)&&!_g(n,l)&&e.remove(n),n},Og=et.makeMap,Ag=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bu=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a_=/[<>&\"\']/g,Rg=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,as={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},Aa={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},l_={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Hc=e=>{const n=de.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},vp=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let l=0;l<r.length;l+=2){const u=String.fromCharCode(parseInt(r[l],n));if(!Aa[u]){const m="&"+r[l+1]+";";o[u]=m,o[m]=u}}return o}else return},sm=vp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),rm=(e,n)=>e.replace(n?Ag:bu,o=>Aa[o]||o),dS=e=>(""+e).replace(a_,n=>Aa[n]||n),fS=(e,n)=>e.replace(n?Ag:bu,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Aa[o]||"&#"+o.charCodeAt(0)+";"),Cy=(e,n,o)=>{const r=o||sm;return e.replace(n?Ag:bu,l=>Aa[l]||r[l]||l)},sd={encodeRaw:rm,encodeAllRaw:dS,encodeNumeric:fS,encodeNamed:Cy,getEncodeFunc:(e,n)=>{const o=vp(n)||sm,r=(m,b)=>m.replace(b?Ag:bu,w=>Aa[w]!==void 0?Aa[w]:o[w]!==void 0?o[w]:w.length>1?"&#"+((w.charCodeAt(0)-55296)*1024+(w.charCodeAt(1)-56320)+65536)+";":"&#"+w.charCodeAt(0)+";"),l=(m,b)=>Cy(m,b,o),u=Og(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?l:Cy:u.numeric?fS:rm},decode:e=>e.replace(Rg,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):as[o]||String.fromCharCode(o)):l_[n]||sm[n]||Hc(n))},Av={},Rv={},bp={},$t=et.makeMap,Ra=et.each,yp=et.extend,mS=et.explode,Dv=et.inArray,va=(e,n)=>(e=et.trim(e),e?e.split(n||" "):[]),Mv=(e,n={})=>{const o=$t(e," ",$t(e.toUpperCase()," "));return yp(o,n)},ac=e=>Mv("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),rd=e=>{const n={};let o,r,l,u;const m=(w,k="",B="")=>{const M=va(B),H=va(w);let Q=H.length;for(;Q--;){const se=va([o,k].join(" "));n[H[Q]]={attributes:Dn(se,()=>({})),attributesOrder:se,children:Dn(M,we(bp))}}},b=(w,k)=>{const B=va(w),M=va(k);let H=B.length;for(;H--;){const Q=n[B[H]];for(let se=0,X=M.length;se<X;se++)Q.attributes[M[se]]={},Q.attributesOrder.push(M[se])}};if(Av[e])return Av[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",l="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const w="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+w,l+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const w="acronym applet basefont big font strike tt";l=[l,w].join(" "),Ra(va(w),B=>{m(B,"",l)});const k="center dir isindex noframes";r=[r,k].join(" "),u=[r,l].join(" "),Ra(va(k),B=>{m(B,"",u)})}return u=u||[r,l].join(" "),m("html","manifest","head body"),m("head","","base command link meta noscript script style title"),m("title hr noscript br"),m("base","href target"),m("link","href rel media hreflang type sizes hreflang"),m("meta","name http-equiv content charset"),m("style","media type scoped"),m("script","src async defer type charset"),m("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),m("dd div","",u),m("address dt caption","",e==="html4"?l:u),m("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",l),m("blockquote","cite",u),m("ol","reversed start type","li"),m("ul","","li"),m("li","value",u),m("dl","","dt dd"),m("a","href target rel media hreflang type",e==="html4"?l:u),m("q","cite",l),m("ins del","cite datetime",u),m("img","src sizes srcset alt usemap ismap width height"),m("iframe","src name width height",u),m("embed","src type width height"),m("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),m("param","name value"),m("map","name",[u,"area"].join(" ")),m("area","alt coords shape href target rel media hreflang type"),m("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),m("colgroup","span","col"),m("col","span"),m("tbody thead tfoot","","tr"),m("tr","","td th"),m("td","colspan rowspan headers",u),m("th","colspan rowspan headers scope abbr",u),m("form","accept-charset action autocomplete enctype method name novalidate target",u),m("fieldset","disabled form name",[u,"legend"].join(" ")),m("label","form for",l),m("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),m("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:l),m("select","disabled form multiple name required size","option optgroup"),m("optgroup","disabled label","option"),m("option","disabled label selected value"),m("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),m("menu","type label",[u,"li"].join(" ")),m("noscript","",u),e!=="html4"&&(m("wbr"),m("ruby","",[l,"rt rp"].join(" ")),m("figcaption","",u),m("mark rt rp summary bdi","",l),m("canvas","width height",u),m("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),m("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),m("picture","","img source"),m("source","src srcset type media sizes"),m("track","kind src srclang label default"),m("datalist","",[l,"option"].join(" ")),m("article section nav aside main header footer","",u),m("hgroup","","h1 h2 h3 h4 h5 h6"),m("figure","",[u,"figcaption"].join(" ")),m("time","datetime",l),m("dialog","open",u),m("command","type label icon disabled checked radiogroup command"),m("output","for form name",l),m("progress","value max",l),m("meter","value min max low high optimum",l),m("details","open",[u,"summary"].join(" ")),m("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&Ge([n.video,n.audio],w=>{delete w.children.audio,delete w.children.video}),Ra(va("a form meter progress dfn"),w=>{n[w]&&delete n[w].children[w]}),delete n.caption.children.table,delete n.script,Av[e]=n,n},wy=(e,n)=>{if(e){const o={};return P(e)&&(e={"*":e}),Ra(e,(r,l)=>{o[l]=o[l.toUpperCase()]=n==="map"?$t(r,/[, ]/):mS(r,/[, ]/)}),o}else return},zc=(e={})=>{var n;const o={},r={};let l=[];const u={},m={},b=(En,lo,Us)=>{const Go=e[En];if(Go)return $t(Go,/[, ]/,$t(Go.toUpperCase(),/[, ]/));{let Is=Rv[En];return Is||(Is=Mv(lo,Us),Rv[En]=Is),Is}},w=(n=e.schema)!==null&&n!==void 0?n:"html5",k=rd(w);e.verify_html===!1&&(e.valid_elements="*[*]");const B=wy(e.valid_styles),M=wy(e.invalid_styles,"map"),H=wy(e.valid_classes,"map"),Q=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),se=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),X=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),oe=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ye="td th iframe video audio object script code",xe=b("non_empty_elements",ye+" pre",X),Ee=b("move_caret_before_on_enter_elements",ye+" table",X),De=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),tt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",De),Gt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),at=b("transparent_elements","a ins del canvas map");Ra("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),En=>{m[En]=new RegExp("</"+En+"[^>]*>","gi")});const ze=En=>new RegExp("^"+En.replace(/([?+*])/g,".$1")+"$"),Ze=En=>{const lo=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Us=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Go=/[*?+]/;if(En){const Is=va(En,",");let ws,ts;o["@"]&&(ws=o["@"].attributes,ts=o["@"].attributesOrder);for(let mr=0,Fa=Is.length;mr<Fa;mr++){let La=lo.exec(Is[mr]);if(La){const Ld=La[1],Ys=La[2],Km=La[3],Yl=La[5],Hd={},mo=[],Ds={attributes:Hd,attributesOrder:mo};if(Ld==="#"&&(Ds.paddEmpty=!0),Ld==="-"&&(Ds.removeEmpty=!0),La[4]==="!"&&(Ds.removeEmptyAttrs=!0),ws&&(xt(ws,(bi,$u)=>{Hd[$u]=bi}),ts&&mo.push(...ts)),Yl){const bi=va(Yl,"|");for(let $u=0,ji=bi.length;$u<ji;$u++)if(La=Us.exec(bi[$u]),La){const Gi={},If=La[1],xa=La[2].replace(/[\\:]:/g,":"),qm=La[3],zd=La[4];if(If==="!"&&(Ds.attributesRequired=Ds.attributesRequired||[],Ds.attributesRequired.push(xa),Gi.required=!0),If==="-"){delete Hd[xa],mo.splice(Dv(mo,xa),1);continue}if(qm&&(qm==="="&&(Ds.attributesDefault=Ds.attributesDefault||[],Ds.attributesDefault.push({name:xa,value:zd}),Gi.defaultValue=zd),qm==="~"&&(Ds.attributesForced=Ds.attributesForced||[],Ds.attributesForced.push({name:xa,value:zd}),Gi.forcedValue=zd),qm==="<"&&(Gi.validValues=$t(zd,"?"))),Go.test(xa)){const tu=Gi;Ds.attributePatterns=Ds.attributePatterns||[],tu.pattern=ze(xa),Ds.attributePatterns.push(tu)}else Hd[xa]||mo.push(xa),Hd[xa]=Gi}}if(!ws&&Ys==="@"&&(ws=Hd,ts=mo),Km&&(Ds.outputName=Ys,o[Km]=Ds),Go.test(Ys)){const bi=Ds;bi.pattern=ze(Ys),l.push(bi)}else o[Ys]=Ds}}}},Et=En=>{l=[],Ge(Uo(o),lo=>{delete o[lo]}),Ze(En),Ra(k,(lo,Us)=>{r[Us]=lo.children})},_t=En=>{const lo=/^(~)?(.+)$/;En&&(delete Rv.text_block_elements,delete Rv.block_elements,Ra(va(En,","),Us=>{const Go=lo.exec(Us);if(Go){const Is=Go[1]==="~",ws=Is?"span":"div",ts=Go[2];if(r[ts]=r[ws],u[ts]=ws,xe[ts.toUpperCase()]={},xe[ts]={},Is||(tt[ts.toUpperCase()]={},tt[ts]={}),!o[ts]){let mr=o[ws];mr=yp({},mr),delete mr.removeEmptyAttrs,delete mr.removeEmpty,o[ts]=mr}Ra(r,(mr,Fa)=>{mr[ws]&&(r[Fa]=mr=yp({},r[Fa]),mr[ts]=mr[ws])})}}))},Ht=En=>{const lo=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Av[w],En&&Ra(va(En,","),Us=>{const Go=lo.exec(Us);if(Go){const Is=Go[1];let ws;Is?ws=r[Go[2]]:ws=r[Go[2]]={"#comment":{}},ws=r[Go[2]],Ra(va(Go[3],"|"),ts=>{Is==="-"?delete ws[ts]:ws[ts]={}})}})},mn=En=>{const lo=o[En];if(lo)return lo;let Us=l.length;for(;Us--;){const Go=l[Us];if(Go.pattern.test(En))return Go}};e.valid_elements?Et(e.valid_elements):(Ra(k,(En,lo)=>{o[lo]={attributes:En.attributes,attributesOrder:En.attributesOrder},r[lo]=En.children}),Ra(va("strong/b em/i"),En=>{const lo=va(En,"/");o[lo[1]].outputName=lo[0]}),Ra(Gt,(En,lo)=>{o[lo]&&(e.padd_empty_block_inline_children&&(o[lo].paddInEmptyBlock=!0),o[lo].removeEmpty=!0)}),Ra(va("ol ul blockquote a table tbody"),En=>{o[En]&&(o[En].removeEmpty=!0)}),Ra(va("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),En=>{o[En]&&(o[En].paddEmpty=!0)}),Ra(va("span"),En=>{o[En].removeEmptyAttrs=!0})),_t(e.custom_elements),Ht(e.valid_children),Ze(e.extended_valid_elements),Ht("+ol[ul|ol],+ul[ul|ol]"),Ra({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(En,lo)=>{o[lo]&&(o[lo].parentsRequired=va(En))}),e.invalid_elements&&Ra(mS(e.invalid_elements),En=>{o[En]&&delete o[En]}),mn("span")||Ze("span[!data-mce-type|*]");const gn=we(B),uo=we(M),yo=we(H),Io=we(oe),Ia=we(tt),Fr=we(De),vt=we(Gt),Wt=we(Object.seal(X)),ho=we(se),ao=we(xe),Kt=we(Ee),Jt=we(Q),mt=we(at),bn=we(Object.seal(m)),On=(En,lo)=>{const Us=r[En.toLowerCase()];return!!(Us&&Us[lo.toLowerCase()])},fo=(En,lo)=>{const Us=mn(En);if(Us)if(lo){if(Us.attributes[lo])return!0;const Go=Us.attributePatterns;if(Go){let Is=Go.length;for(;Is--;)if(Go[Is].pattern.test(lo))return!0}}else return!0;return!1},ds=we(u);return{type:w,children:r,elements:o,getValidStyles:gn,getValidClasses:yo,getBlockElements:Ia,getInvalidStyles:uo,getVoidElements:Wt,getTextBlockElements:Fr,getTextInlineElements:vt,getBoolAttrs:Io,getElementRule:mn,getSelfClosingElements:ho,getNonEmptyElements:ao,getMoveCaretBeforeOnEnterElements:Kt,getWhitespaceElements:Jt,getTransparentElements:mt,getSpecialElements:bn,isValidChild:On,isValid:fo,getCustomElements:ds,addValidElements:Ze,setValidElements:Et,addCustomElements:_t,addValidChildren:Ht}},Sy=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,u={};let m,b;const w=Xu;n&&(m=n.getValidStyles(),b=n.getInvalidStyles());const k=(`\\" \\' \\; \\: ; : `+w).split(" ");for(let M=0;M<k.length;M++)u[k[M]]=w+M,u[w+M]=k[M];const B={parse:M=>{const H={};let Q=!1;const se=e.url_converter,X=e.url_converter_scope||B,oe=(ze,Ze,Et)=>{const _t=H[ze+"-top"+Ze];if(!_t)return;const Ht=H[ze+"-right"+Ze];if(!Ht)return;const mn=H[ze+"-bottom"+Ze];if(!mn)return;const gn=H[ze+"-left"+Ze];if(!gn)return;const uo=[_t,Ht,mn,gn];let yo=uo.length-1;for(;yo--&&uo[yo]===uo[yo+1];);yo>-1&&Et||(H[ze+Ze]=yo===-1?uo[0]:uo.join(" "),delete H[ze+"-top"+Ze],delete H[ze+"-right"+Ze],delete H[ze+"-bottom"+Ze],delete H[ze+"-left"+Ze])},ye=ze=>{const Ze=H[ze];if(!Ze)return;const Et=Ze.split(" ");let _t=Et.length;for(;_t--;)if(Et[_t]!==Et[0])return!1;return H[ze]=Et[0],!0},xe=(ze,Ze,Et,_t)=>{!ye(Ze)||!ye(Et)||!ye(_t)||(H[ze]=H[Ze]+" "+H[Et]+" "+H[_t],delete H[Ze],delete H[Et],delete H[_t])},Ee=ze=>(Q=!0,u[ze]),De=(ze,Ze)=>(Q&&(ze=ze.replace(/\uFEFF[0-9]/g,Et=>u[Et])),Ze||(ze=ze.replace(/\\([\'\";:])/g,"$1")),ze),tt=ze=>String.fromCharCode(parseInt(ze.slice(1),16)),Gt=ze=>ze.replace(/\\[0-9a-f]+/gi,tt),at=(ze,Ze,Et,_t,Ht,mn)=>{if(Ht=Ht||mn,Ht)return Ht=De(Ht),"'"+Ht.replace(/\'/g,"\\'")+"'";if(Ze=De(Ze||Et||_t||""),!e.allow_script_urls){const gn=Ze.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(gn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(gn))return""}return se&&(Ze=se.call(X,Ze,"style")),"url('"+Ze.replace(/\'/g,"\\'")+"')"};if(M){M=M.replace(/[\u0000-\u001F]/g,""),M=M.replace(/\\[\"\';:\uFEFF]/g,Ee).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ze=>Ze.replace(/[;:]/g,Ee));let ze;for(;ze=r.exec(M);){r.lastIndex=ze.index+ze[0].length;let Ze=ze[1].replace(l,"").toLowerCase(),Et=ze[2].replace(l,"");if(Ze&&Et){if(Ze=Gt(Ze),Et=Gt(Et),Ze.indexOf(w)!==-1||Ze.indexOf('"')!==-1||!e.allow_script_urls&&(Ze==="behavior"||/expression\s*\(|\/\*|\*\//.test(Et)))continue;Ze==="font-weight"&&Et==="700"?Et="bold":(Ze==="color"||Ze==="background-color")&&(Et=Et.toLowerCase()),Et=Et.replace(o,at),H[Ze]=Q?De(Et,!0):Et}}oe("border","",!0),oe("border","-width"),oe("border","-color"),oe("border","-style"),oe("padding",""),oe("margin",""),xe("border","border-width","border-style","border-color"),H.border==="medium none"&&delete H.border,H["border-image"]==="none"&&delete H["border-image"]}return H},serialize:(M,H)=>{let Q="";const se=(oe,ye)=>{const xe=ye[oe];if(xe)for(let Ee=0,De=xe.length;Ee<De;Ee++){const tt=xe[Ee],Gt=M[tt];Gt&&(Q+=(Q.length>0?" ":"")+tt+": "+Gt+";")}},X=(oe,ye)=>{if(!b||!ye)return!0;let xe=b["*"];return xe&&xe[oe]?!1:(xe=b[ye],!(xe&&xe[oe]))};return H&&m?(se("*",m),se(H,m)):xt(M,(oe,ye)=>{oe&&X(ye,H)&&(Q+=(Q.length>0?" ":"")+ye+": "+oe+";")}),Q}};return B},gS={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},xy=e=>e instanceof Event||re(e.initEvent),Cp=e=>e.isDefaultPrevented===St||e.isDefaultPrevented===Pe,yu=e=>ft(e.preventDefault)||xy(e),wp=(e,n)=>{const o=n!=null?n:{};for(const r in e)Cn(gS,r)||(o[r]=e[r]);return Oe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},Bv=(e,n,o,r)=>{var l;const u=wp(n,r);return u.type=e,ft(u.target)&&(u.target=(l=u.srcElement)!==null&&l!==void 0?l:o),yu(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=St,re(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=St,re(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=St,u.stopPropagation()},Cp(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?St:Pe,u.isPropagationStopped=u.cancelBubble===!0?St:Pe,u.isImmediatePropagationStopped=Pe)),u},c_="mce-data-",hS=/^(?:mouse|contextmenu)|click/,Dg=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Da=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Hl=e=>Oe(e)&&hS.test(e.type),Mg=(e,n)=>{const o=Bv(e.type,e,document,n);if(Hl(e)&&pt(e.pageX)&&!pt(e.clientX)){const r=o.target.ownerDocument||document,l=r.documentElement,u=r.body,m=o;m.pageX=e.clientX+(l&&l.scrollLeft||u&&u.scrollLeft||0)-(l&&l.clientLeft||u&&u.clientLeft||0),m.pageY=e.clientY+(l&&l.scrollTop||u&&u.scrollTop||0)-(l&&l.clientTop||u&&u.clientTop||0)}return o},pS=(e,n,o)=>{const r=e.document,l={type:"ready"};if(o.domLoaded){n(l);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,m=()=>{Da(e,"DOMContentLoaded",m),Da(e,"load",m),o.domLoaded||(o.domLoaded=!0,n(l)),e=null};u()?m():Dg(e,"DOMContentLoaded",m),o.domLoaded||Dg(e,"load",m)};class lm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=c_+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,l){const u=this;let m;const b=window,w=H=>{u.executeHandlers(Mg(H||b.event),k)};if(!n||ut(n)||si(n))return r;let k;n[u.expando]?k=n[u.expando]:(k=u.count++,n[u.expando]=k,u.events[k]={}),l=l||n;const B=o.split(" ");let M=B.length;for(;M--;){let H=B[M],Q=w,se=!1,X=!1;if(H==="DOMContentLoaded"&&(H="ready"),u.domLoaded&&H==="ready"&&n.readyState==="complete"){r.call(l,Mg({type:H}));continue}!u.hasFocusIn&&(H==="focusin"||H==="focusout")&&(se=!0,X=H==="focusin"?"focus":"blur",Q=oe=>{const ye=Mg(oe||b.event);ye.type=ye.type==="focus"?"focusin":"focusout",u.executeHandlers(ye,k)}),m=u.events[k][H],m?H==="ready"&&u.domLoaded?r(Mg({type:H})):m.push({func:r,scope:l}):(u.events[k][H]=m=[{func:r,scope:l}],m.fakeName=X,m.capture=se,m.nativeHandler=Q,H==="ready"?pS(n,Q,u):Dg(n,X||H,Q,se))}return n=m=null,r}unbind(n,o,r){if(!n||ut(n)||si(n))return this;const l=n[this.expando];if(l){let u=this.events[l];if(o){const m=o.split(" ");let b=m.length;for(;b--;){const w=m[b],k=u[w];if(k){if(r){let B=k.length;for(;B--;)if(k[B].func===r){const M=k.nativeHandler,H=k.fakeName,Q=k.capture,se=k.slice(0,B).concat(k.slice(B+1));se.nativeHandler=M,se.fakeName=H,se.capture=Q,u[w]=se}}(!r||k.length===0)&&(delete u[w],Da(n,k.fakeName||w,k.nativeHandler,k.capture))}}}else xt(u,(m,b)=>{Da(n,m.fakeName||b,m.nativeHandler,m.capture)}),u={};for(const m in u)if(Cn(u,m))return this;delete this.events[l];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||ut(n)||si(n))return this;const l=Mg({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(l,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!l.isPropagationStopped());return this}clean(n){if(!n||ut(n)||si(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],l=r&&r[n.type];if(l)for(let u=0,m=l.length;u<m;u++){const b=l[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}lm.Event=new lm;const $v=et.each,lc=et.grep,Ey="data-mce-style",Pv=et.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Bg=(e,n,o)=>{ft(o)||o===""?rr(e,n):sr(e,n,o)},ky=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),ad=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,l=e.previousSibling;l;l=l.previousSibling){const u=l.nodeType;n&&ut(l)&&(u===r||!l.data.length)||(o++,r=u)}return o},vS=(e,n)=>{const o=hl(n,"style"),r=e.serialize(e.parse(o),gs(n));Bg(n,Ey,r)},Nv=(e,n)=>Nt(e)?Cn(Pv,n)?e+"":e+"px":e,Iv=(e,n,o)=>{const r=ky(n);ft(o)||o===""?Yw(e,r):J0(e,r,Nv(o,r))},Ty=(e,n,o)=>{const r=n.keep_values,l={set:(m,b,w)=>{const k=de.fromDom(m);re(n.url_converter)&&Oe(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),w,m));const B="data-mce-"+w;Bg(k,B,b),Bg(k,w,b)},get:(m,b)=>{const w=de.fromDom(m);return hl(w,"data-mce-"+b)||hl(w,b)}},u={style:{set:(m,b)=>{const w=de.fromDom(m);r&&Bg(w,Ey,b),rr(w,"style"),P(b)&&uv(w,e.parse(b))},get:m=>{const b=de.fromDom(m),w=hl(b,Ey)||hl(b,"style");return e.serialize(e.parse(w),gs(b))}}};return r&&(u.href=u.src=l),u},Po=(e,n={})=>{const o={},r=window,l={};let u=0;const m=!0,b=!0,w=Wo.forElement(de.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),k=[],B=n.schema?n.schema:zc({}),M=Sy({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),H=n.ownEvents?new lm:lm.Event,Q=B.getBlockElements(),se=Be=>P(Be)?Cn(Q,Be):Bt(Be)&&(Cn(Q,Be.nodeName)||cf(B,Be)),X=Be=>Be&&e&&P(Be)?e.getElementById(Be):Be,oe=Be=>{const $e=X(Be);return Oe($e)?de.fromDom($e):null},ye=(Be,$e,Ct="")=>{let dt;const on=oe(Be);if(Oe(on)&&rs(on)){const io=B0[$e];io&&io.get?dt=io.get(on.dom,$e):dt=hl(on,$e)}return Oe(dt)?dt:Ct},xe=Be=>{const $e=X(Be);return ft($e)?[]:$e.attributes},Ee=(Be,$e,Ct)=>{Wt(Be,dt=>{if(Bt(dt)){const on=de.fromDom(dt),io=Ct===""?null:Ct,fs=hl(on,$e),aa=B0[$e];aa&&aa.set?aa.set(on.dom,io,$e):Bg(on,$e,io),fs!==io&&n.onSetAttrib&&n.onSetAttrib({attrElm:on.dom,attrName:$e,attrValue:io})}})},De=(Be,$e)=>Be.cloneNode($e),tt=()=>n.root_element||e.body,Gt=Be=>{const $e=ly(Be);return{x:$e.x,y:$e.y,w:$e.width,h:$e.height}},at=(Be,$e)=>Tv(e.body,X(Be),$e),ze=(Be,$e,Ct)=>{Wt(Be,dt=>{const on=de.fromDom(dt);Iv(on,$e,Ct),n.update_styles&&vS(M,on)})},Ze=(Be,$e)=>{Wt(Be,Ct=>{const dt=de.fromDom(Ct);xt($e,(on,io)=>{Iv(dt,io,on)}),n.update_styles&&vS(M,dt)})},Et=(Be,$e,Ct)=>{const dt=X(Be);if(!(ft(dt)||!Bt(dt)))return Ct?Ur(de.fromDom(dt),ky($e)):($e=$e.replace(/-(\D)/g,(on,io)=>io.toUpperCase()),$e==="float"&&($e="cssFloat"),dt.style?dt.style[$e]:void 0)},_t=Be=>{const $e=X(Be);if(!$e)return{w:0,h:0};let Ct=Et($e,"width"),dt=Et($e,"height");return(!Ct||Ct.indexOf("px")===-1)&&(Ct="0"),(!dt||dt.indexOf("px")===-1)&&(dt="0"),{w:parseInt(Ct,10)||$e.offsetWidth||$e.clientWidth,h:parseInt(dt,10)||$e.offsetHeight||$e.clientHeight}},Ht=Be=>{const $e=X(Be),Ct=at($e),dt=_t($e);return{x:Ct.x,y:Ct.y,w:dt.w,h:dt.h}},mn=(Be,$e)=>{if(!Be)return!1;const Ct=Me(Be)?Be:[Be];return $o(Ct,dt=>vl(de.fromDom(dt),$e))},gn=(Be,$e,Ct,dt)=>{const on=[];let io=X(Be);dt=dt===void 0;const fs=Ct||(tt().nodeName!=="BODY"?tt().parentNode:null);if(P($e))if($e==="*")$e=Bt;else{const aa=$e;$e=la=>mn(la,aa)}for(;io&&!(io===fs||ft(io.nodeType)||pg(io)||ef(io));){if(!$e||$e(io))if(dt)on.push(io);else return[io];io=io.parentNode}return dt?on:null},uo=(Be,$e,Ct)=>{const dt=gn(Be,$e,Ct,!1);return dt&&dt.length>0?dt[0]:null},yo=(Be,$e,Ct)=>{let dt=$e;if(Be){P($e)&&(dt=on=>mn(on,$e));for(let on=Be[Ct];on;on=on[Ct])if(re(dt)&&dt(on))return on}return null},Io=(Be,$e)=>yo(Be,$e,"nextSibling"),Ia=(Be,$e)=>yo(Be,$e,"previousSibling"),Fr=Be=>re(Be.querySelectorAll),vt=(Be,$e)=>{var Ct,dt;const on=(dt=(Ct=X($e))!==null&&Ct!==void 0?Ct:n.root_element)!==null&&dt!==void 0?dt:e;return Fr(on)?vo(on.querySelectorAll(Be)):[]},Wt=function(Be,$e,Ct){const dt=Ct!=null?Ct:this;if(Me(Be)){const on=[];return $v(Be,(io,fs)=>{const aa=X(io);aa&&on.push($e.call(dt,aa,fs))}),on}else{const on=X(Be);return on?$e.call(dt,on):!1}},ho=(Be,$e)=>{Wt(Be,Ct=>{xt($e,(dt,on)=>{Ee(Ct,on,dt)})})},ao=(Be,$e)=>{Wt(Be,Ct=>{const dt=de.fromDom(Ct);Yn(dt,$e)})},Kt=(Be,$e,Ct,dt,on)=>Wt(Be,io=>{const fs=P($e)?e.createElement($e):$e;return Oe(Ct)&&ho(fs,Ct),dt&&(!P(dt)&&dt.nodeType?fs.appendChild(dt):P(dt)&&ao(fs,dt)),on?fs:io.appendChild(fs)}),Jt=(Be,$e,Ct)=>Kt(e.createElement(Be),Be,$e,Ct,!0),mt=sd.decode,bn=sd.encodeAllRaw,On=(Be,$e,Ct="")=>{let dt="<"+Be;for(const on in $e)Ta($e,on)&&(dt+=" "+on+'="'+bn($e[on])+'"');return Al(Ct)&&Cn(B.getVoidElements(),Be)?dt+" />":dt+">"+Ct+"</"+Be+">"},fo=Be=>{const $e=e.createElement("div"),Ct=e.createDocumentFragment();Ct.appendChild($e),Be&&($e.innerHTML=Be);let dt;for(;dt=$e.firstChild;)Ct.appendChild(dt);return Ct.removeChild($e),Ct},ds=(Be,$e)=>Wt(Be,Ct=>{const dt=de.fromDom(Ct);return $e&&Ge(Qr(dt),on=>{ja(on)&&on.dom.length===0?Ro(on):Nl(dt,on)}),Ro(dt),dt.dom}),En=Be=>Wt(Be,$e=>{const Ct=$e.attributes;for(let dt=Ct.length-1;dt>=0;dt--)$e.removeAttributeNode(Ct.item(dt))}),lo=Be=>M.parse(Be),Us=(Be,$e)=>M.serialize(Be,$e),Go=Be=>{if(Vd!==Po.DOM&&e===document){if(o[Be])return;o[Be]=!0}let $e=e.getElementById("mceDefaultStyles");if(!$e){$e=e.createElement("style"),$e.id="mceDefaultStyles",$e.type="text/css";const Ct=e.head;Ct.firstChild?Ct.insertBefore($e,Ct.firstChild):Ct.appendChild($e)}$e.styleSheet?$e.styleSheet.cssText+=Be:$e.appendChild(e.createTextNode(Be))},Is=Be=>{Be||(Be=""),Ge(Be.split(","),$e=>{l[$e]=!0,w.load($e).catch(ot)})},ws=(Be,$e,Ct)=>{Wt(Be,dt=>{if(Bt(dt)){const on=de.fromDom(dt),io=$e.split(" ");Ge(io,fs=>{Oe(Ct)?(Ct?Zf:jf)(on,fs):Z0(on,fs)})}})},ts=(Be,$e)=>{ws(Be,$e,!0)},mr=(Be,$e)=>{ws(Be,$e,!1)},Fa=(Be,$e)=>{const Ct=oe(Be),dt=$e.split(" ");return Oe(Ct)&&ks(dt,on=>sv(Ct,on))},La=Be=>{Wt(Be,$e=>Yw(de.fromDom($e),"display"))},Ld=Be=>{Wt(Be,$e=>J0(de.fromDom($e),"display","none"))},Ys=Be=>{const $e=oe(Be);return Oe($e)&&ua(Cl($e,"display"),"none")},Km=Be=>(Be||"mce_")+u++,Yl=Be=>{const $e=oe(Be);return Oe($e)?Bt($e.dom)?$e.dom.outerHTML:ny($e):""},Hd=(Be,$e)=>{Wt(Be,Ct=>{Bt(Ct)&&(Ct.outerHTML=$e)})},mo=(Be,$e)=>{const Ct=X($e);return Wt(Be,dt=>{const on=Ct==null?void 0:Ct.parentNode,io=Ct==null?void 0:Ct.nextSibling;return on&&(io?on.insertBefore(dt,io):on.appendChild(dt)),dt})},Ds=(Be,$e,Ct)=>Wt($e,dt=>{var on;const io=Me($e)?Be.cloneNode(!0):Be;return Ct&&$v(lc(dt.childNodes),fs=>{io.appendChild(fs)}),(on=dt.parentNode)===null||on===void 0||on.replaceChild(io,dt),dt}),bi=(Be,$e)=>{if(Be.nodeName!==$e.toUpperCase()){const Ct=Jt($e);return $v(xe(Be),dt=>{Ee(Ct,dt.nodeName,ye(Be,dt.nodeName))}),Ds(Ct,Be,!0),Ct}else return Be},$u=(Be,$e)=>{let Ct=Be;for(;Ct;){let dt=$e;for(;dt&&Ct!==dt;)dt=dt.parentNode;if(Ct===dt)break;Ct=Ct.parentNode}return!Ct&&Be.ownerDocument?Be.ownerDocument.documentElement:Ct},ji=Be=>{if(Bt(Be)){const $e=Be.nodeName.toLowerCase()==="a"&&!ye(Be,"href")&&ye(Be,"id");if(ye(Be,"name")||ye(Be,"data-mce-bookmark")||$e)return!0}return!1},Gi=(Be,$e,Ct)=>{let dt=0;if(ji(Be))return!1;const on=Be.firstChild;if(on){const io=new lr(on,Be),fs=B?B.getWhitespaceElements():{},aa=$e||(B?B.getNonEmptyElements():null);let la=on;do{if(Bt(la)){const $0=la.getAttribute("data-mce-bogus");if($0){la=io.next($0==="all");continue}const P0=la.nodeName.toLowerCase();if(aa&&aa[P0]){if(P0==="br"){dt++,la=io.next();continue}return!1}if(ji(la))return!1}if(si(la)||ut(la)&&!Bi(la.data)&&(!(Ct!=null&&Ct.includeZwsp)||!lS(la.data))||ut(la)&&la.parentNode&&fs[la.parentNode.nodeName]&&Bi(la.data))return!1;la=io.next()}while(la)}return dt<=1},If=()=>e.createRange(),xa=(Be,$e,Ct)=>{let dt=If(),on,io;if(Be&&$e&&Be.parentNode&&$e.parentNode){const fs=Be.parentNode;return dt.setStart(fs,ad(Be)),dt.setEnd($e.parentNode,ad($e)),on=dt.extractContents(),dt=If(),dt.setStart($e.parentNode,ad($e)+1),dt.setEnd(fs,ad(Be)+1),io=dt.extractContents(),fs.insertBefore(yy(Vd,on),Be),Ct?fs.insertBefore(Ct,Be):fs.insertBefore($e,Be),fs.insertBefore(yy(Vd,io),Be),ds(Be),Ct||$e}else return},qm=(Be,$e,Ct,dt)=>{if(Me(Be)){let on=Be.length;const io=[];for(;on--;)io[on]=qm(Be[on],$e,Ct,dt);return io}else return n.collect&&(Be===e||Be===r)&&k.push([Be,$e,Ct,dt]),H.bind(Be,$e,Ct,dt||Vd)},zd=(Be,$e,Ct)=>{if(Me(Be)){let dt=Be.length;const on=[];for(;dt--;)on[dt]=zd(Be[dt],$e,Ct);return on}else{if(k.length>0&&(Be===e||Be===r)){let dt=k.length;for(;dt--;){const[on,io,fs]=k[dt];Be===on&&(!$e||$e===io)&&(!Ct||Ct===fs)&&H.unbind(on,io,fs)}}return H.unbind(Be,$e,Ct)}},tu=(Be,$e,Ct)=>H.dispatch(Be,$e,Ct),Ff=(Be,$e,Ct)=>H.dispatch(Be,$e,Ct),ww=Be=>{if(Be&&Bt(Be)){const $e=Be.getAttribute("data-mce-contenteditable");return $e&&$e!=="inherit"?$e:Be.contentEditable!=="inherit"?Be.contentEditable:null}else return null},Vd={doc:e,settings:n,win:r,files:l,stdMode:m,boxModel:b,styleSheetLoader:w,boundEvents:k,styles:M,schema:B,events:H,isBlock:se,root:null,clone:De,getRoot:tt,getViewPort:Gt,getRect:Ht,getSize:_t,getParent:uo,getParents:gn,get:X,getNext:Io,getPrev:Ia,select:vt,is:mn,add:Kt,create:Jt,createHTML:On,createFragment:fo,remove:ds,setStyle:ze,getStyle:Et,setStyles:Ze,removeAllAttribs:En,setAttrib:Ee,setAttribs:ho,getAttrib:ye,getPos:at,parseStyle:lo,serializeStyle:Us,addStyle:Go,loadCSS:Is,addClass:ts,removeClass:mr,hasClass:Fa,toggleClass:ws,show:La,hide:Ld,isHidden:Ys,uniqueId:Km,setHTML:ao,getOuterHTML:Yl,setOuterHTML:Hd,decode:mt,encode:bn,insertAfter:mo,replace:Ds,rename:bi,findCommonAncestor:$u,run:Wt,getAttribs:xe,isEmpty:Gi,createRng:If,nodeIndex:ad,split:xa,bind:qm,unbind:zd,fire:Ff,dispatch:tu,getContentEditable:ww,getContentEditableParent:Be=>{const $e=tt();let Ct=null;for(let dt=Be;dt&&dt!==$e&&(Ct=ww(dt),Ct===null);dt=dt.parentNode);return Ct},isEditable:Be=>{if(Oe(Be)){const $e=Bt(Be)?Be:Be.parentElement;return Oe($e)&&Mn(de.fromDom($e))}else return!1},destroy:()=>{if(k.length>0){let Be=k.length;for(;Be--;){const[$e,Ct,dt]=k[Be];H.unbind($e,Ct,dt)}}xt(l,(Be,$e)=>{w.unload($e),delete l[$e]})},isChildOf:(Be,$e)=>Be===$e||$e.contains(Be),dumpRng:Be=>"startContainer: "+Be.startContainer.nodeName+", startOffset: "+Be.startOffset+", endContainer: "+Be.endContainer.nodeName+", endOffset: "+Be.endOffset},B0=Ty(M,n,we(Vd));return Vd};Po.DOM=Po(document),Po.nodeIndex=ad;const Fv=Po.DOM,u_=0,bS=1,$g=2,yS=3;class zl{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const l=Fv;let u;const m=()=>{l.remove(k),u&&(u.onerror=u.onload=u=null)},b=()=>{m(),o()},w=()=>{m(),r("Failed to load script: "+n)},k=l.uniqueId();u=document.createElement("script"),u.id=k,u.type="text/javascript",u.src=et._addCacheSuffix(n),this.settings.referrerPolicy&&l.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=w,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===$g}markDone(n){this.states[n]=$g}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=u_),new Promise((l,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:l,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(w,k)=>{Ko(o.scriptLoadedCallbacks,k).each(B=>{Ge(B,M=>M[w](k))}),delete o.scriptLoadedCallbacks[k]},l=w=>{const k=Qt(w,B=>B.status==="rejected");return k.length>0?Promise.reject(Dr(k,({reason:B})=>Me(B)?B:[B])):Promise.resolve()},u=w=>Promise.allSettled(pn(w,k=>o.states[k]===$g?(r("resolve",k),Promise.resolve()):o.states[k]===yS?(r("reject",k),Promise.reject(k)):(o.states[k]=bS,o.loadScript(k).then(()=>{o.states[k]=$g,r("resolve",k);const B=o.queue;return B.length>0?(o.queue=[],u(B).then(l)):Promise.resolve()},()=>(o.states[k]=yS,r("reject",k),Promise.reject(k)))))),m=w=>(o.loading=!0,u(w).then(k=>{o.loading=!1;const B=o.queueLoadedCallbacks.shift();return z.from(B).each(Jn),l(k)})),b=Qm(n);return o.loading?new Promise((w,k)=>{o.queueLoadedCallbacks.push(()=>{m(b).then(w,k)})}):m(b)}}zl.ScriptLoader=new zl;const wr=e=>{let n=e;return{get:()=>n,set:l=>{n=l}}},_y=e=>he(e)&&Cn(e,"raw"),CS=e=>Me(e)&&e.length>1,Pg={},Lv=wr("en"),Oy=()=>Ko(Pg,Lv.get()),Vc={getData:()=>Hn(Pg,e=>({...e})),setCode:e=>{e&&Lv.set(e)},getCode:()=>Lv.get(),add:(e,n)=>{let o=Pg[e];o||(Pg[e]=o={}),xt(n,(r,l)=>{o[l.toLowerCase()]=r})},translate:e=>{const n=Oy().getOr({}),o=m=>re(m)?Object.prototype.toString.call(m):r(m)?"":""+m,r=m=>m===""||m===null||m===void 0,l=m=>{const b=o(m);return Ko(n,b.toLowerCase()).map(o).getOr(b)},u=m=>m.replace(/{context:\w+}$/,"");if(r(e))return"";if(_y(e))return o(e.raw);if(CS(e)){const m=e.slice(1),b=l(e[0]).replace(/\{([0-9]+)\}/g,(w,k)=>Cn(m,k)?o(m[k]):w);return u(b)}return u(l(e))},isRtl:()=>Oy().bind(e=>Ko(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Cn(Pg,e)},bo=()=>{const e=[],n={},o={},r=[],l=(X,oe)=>{const ye=Qt(r,xe=>xe.name===X&&xe.state===oe);Ge(ye,xe=>xe.resolve())},u=X=>Cn(n,X),m=X=>Cn(o,X),b=X=>{if(o[X])return o[X].instance},w=(X,oe)=>{const ye=Vc.getCode(),xe=","+(oe||"")+",";!ye||oe&&xe.indexOf(","+ye+",")===-1||zl.ScriptLoader.add(n[X]+"/langs/"+ye+".js")},k=(X,oe)=>{bo.languageLoad!==!1&&(u(X)?w(X,oe):se(X,"loaded").then(()=>w(X,oe)))},B=(X,oe)=>(e.push(oe),o[X]={instance:oe},l(X,"added"),oe),M=X=>{delete n[X],delete o[X]},H=(X,oe)=>P(oe)?P(X)?{prefix:"",resource:oe,suffix:""}:{prefix:X.prefix,resource:oe,suffix:X.suffix}:oe,Q=(X,oe)=>{if(n[X])return Promise.resolve();let ye=P(oe)?oe:oe.prefix+oe.resource+oe.suffix;ye.indexOf("/")!==0&&ye.indexOf("://")===-1&&(ye=bo.baseURL+"/"+ye),n[X]=ye.substring(0,ye.lastIndexOf("/"));const xe=()=>(l(X,"loaded"),Promise.resolve());return o[X]?xe():zl.ScriptLoader.add(ye).then(xe)},se=(X,oe="added")=>oe==="added"&&m(X)||oe==="loaded"&&u(X)?Promise.resolve():new Promise(ye=>{r.push({name:X,state:oe,resolve:ye})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:k,add:B,remove:M,createUrl:H,load:Q,waitFor:se}};bo.languageLoad=!0,bo.baseURL="",bo.PluginManager=bo(),bo.ThemeManager=bo(),bo.ModelManager=bo();const qa=e=>{const n=wr(z.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(z.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(z.some(b))}}},Cu=e=>{const n=wr(z.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(z.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(z.some(setInterval(b,e)))}}},Zr=()=>{const e=qa(ot);return{...e,on:o=>e.get().each(o)}},ld=(e,n)=>{let o=null;return{cancel:()=>{K(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{K(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Ay=(e,n)=>{let o=null;const r=()=>{K(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},df=we("mce-annotation"),Ya=we("data-mce-annotation"),ci=we("data-mce-annotation-uid"),cr=we("data-mce-annotation-active"),Ng=we("data-mce-annotation-classes"),ff=we("data-mce-annotation-attrs"),Ry=e=>n=>Ao(n,e),SS=(e,n)=>{const o=e.selection.getRng(),r=de.fromDom(o.startContainer),l=de.fromDom(e.getBody()),u=n.fold(()=>"."+df(),w=>`[${Ya()}="${w}"]`),m=Xd(r,o.startOffset).getOr(r);return bl(m,u,Ry(l)).bind(w=>Bc(w,`${ci()}`).bind(k=>Bc(w,`${Ya()}`).map(B=>{const M=xS(e,k);return{uid:k,name:B,elements:M}})))},id=e=>rs(e)&&sv(e,df()),Uc=(e,n)=>np(e,"data-mce-bogus")||mv(e,'[data-mce-bogus="all"]',Ry(n)),xS=(e,n)=>{const o=de.fromDom(e.getBody()),r=fa(o,`[${ci()}="${n}"]`);return Qt(r,l=>!Uc(l,o))},Dy=(e,n)=>{const o=de.fromDom(e.getBody()),r=fa(o,`[${Ya()}="${n}"]`),l={};return Ge(r,u=>{if(!Uc(u,o)){const m=hl(u,ci()),b=Ko(l,m).getOr([]);l[m]=b.concat([u])}}),l},d_=(e,n)=>{const o=wr({}),r=()=>({listeners:[],previous:Zr()}),l=(M,H)=>{u(M,Q=>(H(Q),Q))},u=(M,H)=>{const Q=o.get(),se=Ko(Q,M).getOrThunk(r),X=H(se);Q[M]=X,o.set(Q)},m=(M,H,Q)=>{l(M,se=>{Ge(se.listeners,X=>X(!0,M,{uid:H,nodes:pn(Q,oe=>oe.dom)}))})},b=M=>{l(M,H=>{Ge(H.listeners,Q=>Q(!1,M))})},w=(M,H)=>{Ge(xS(e,M),Q=>{H?sr(Q,cr(),"true"):rr(Q,cr())})},k=Ay(()=>{const M=Re(n.getNames());Ge(M,H=>{u(H,Q=>{const se=Q.previous.get();return SS(e,z.some(H)).fold(()=>{se.each(X=>{b(H),Q.previous.clear(),w(X,!1)})},({uid:X,name:oe,elements:ye})=>{ua(se,X)||(se.each(xe=>w(xe,!1)),m(oe,X,ye),Q.previous.set(X),w(X,!0))}),{previous:Q.previous,listeners:Q.listeners}})})},30);return e.on("remove",()=>{k.cancel()}),e.on("NodeChange",()=>{k.throttle()}),{addListener:(M,H)=>{u(M,Q=>({previous:Q.previous,listeners:Q.listeners.concat([H])}))}}},f_=(e,n)=>{const o=Ya(),r=u=>z.from(u.attr(o)).bind(n.lookup),l=u=>{var m,b;u.attr(ci(),null),u.attr(Ya(),null),u.attr(cr(),null);const w=z.from(u.attr(ff())).map(H=>H.split(",")).getOr([]),k=z.from(u.attr(Ng())).map(H=>H.split(",")).getOr([]);Ge(w,H=>u.attr(H,null));const B=(b=(m=u.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&b!==void 0?b:[],M=Zn(B,[df()].concat(k));u.attr("class",M.length>0?M.join(" "):null),u.attr(Ng(),null),u.attr(ff(),null)};e.serializer.addTempAttr(cr()),e.serializer.addAttributeFilter(o,u=>{for(const m of u)r(m).each(b=>{b.persistent===!1&&(m.name==="span"?m.unwrap():l(m))})})},m_=()=>{const e={};return{register:(l,u)=>{e[l]={name:l,settings:u}},lookup:l=>Ko(e,l).map(u=>u.settings),getNames:()=>Uo(e)}};let My=0;const Sp=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return My++,e+"_"+r+My+String(o)},g_=(e,n)=>{Ge(n,o=>{Zf(e,o)})},h_=(e,n)=>{Ge(n,o=>{jf(e,o)})},By=(e,n)=>de.fromDom(e.dom.cloneNode(n)),mf=e=>By(e,!1),p_=e=>By(e,!0),zv=(e,n)=>{const o=de.fromTag(n),r=tv(e);return gl(o,r),o},Hs=(e,n)=>{const o=zv(e,n);oi(e,o);const r=Qr(e);return Xo(o,r),Ro(e),o},Vv=(e,n,o=Pe)=>{const r=new lr(e,n),l=u=>{let m;do m=r[u]();while(m&&!ut(m)&&!o(m));return z.from(m).filter(ut)};return{current:()=>z.from(r.current()).filter(ut),next:()=>l("next"),prev:()=>l("prev"),prev2:()=>l("prev2")}},gf=(e,n)=>{const o=n||(m=>e.isBlock(m)||bs(m)||Eo(m)),r=(m,b,w,k)=>{if(ut(m)){const B=k(m,b,m.data);if(B!==-1)return z.some({container:m,offset:B})}return w().bind(B=>r(B.container,B.offset,w,k))};return{backwards:(m,b,w,k)=>{const B=Vv(m,k!=null?k:e.getRoot(),o);return r(m,b,()=>B.prev().map(M=>({container:M,offset:M.length})),w).getOrNull()},forwards:(m,b,w,k)=>{const B=Vv(m,k!=null?k:e.getRoot(),o);return r(m,b,()=>B.next().map(M=>({container:M,offset:0})),w).getOrNull()}}},hf=Math.round,cd=e=>e?{left:hf(e.left),top:hf(e.top),bottom:hf(e.bottom),right:hf(e.right),width:hf(e.width),height:hf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},na=(e,n)=>(e=cd(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),$i=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,im=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Ig=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:im(n.top-e.bottom,e,n)},Fg=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:im(n.bottom-e.top,e,n),v_=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,ES=e=>Vo(e,(n,o)=>n.fold(()=>z.some(o),r=>{const l=Math.min(o.left,r.left),u=Math.min(o.top,r.top),m=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return z.some({top:u,right:m,bottom:b,left:l,width:m-l,height:b-u})}),z.none()),$y=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),l=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-l)*(o-l))},ud=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Uv=(e,n,o)=>Math.min(Math.max(e,n),o),As=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},ba=(e,n)=>{if(Bt(e)&&e.hasChildNodes()){const o=e.childNodes,r=Uv(n,0,o.length-1);return o[r]}else return e},xp=(e,n)=>{if(!(n<0&&Bt(e)&&e.hasChildNodes()))return ba(e,n)},kS=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Py=e=>P(e)&&e.charCodeAt(0)>=768&&kS.test(e),b_=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},cm=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Ny=Bt,um=Ll,Wv=cy("display","block table"),y_=cy("float","left right"),Lg=cm(Ny,um,_n(y_)),C_=_n(cy("white-space","pre pre-line pre-wrap")),Ep=ut,Zv=bs,Hg=Po.nodeIndex,kp=xp,jv=e=>e?e.createRange():Po.DOM.createRng(),zg=e=>P(e)&&/[\r\n\t ]/.test(e),TS=e=>!!e.setStart&&!!e.setEnd,Gv=e=>{const n=e.startContainer,o=e.startOffset;if(zg(e.toString())&&C_(n.parentNode)&&ut(n)){const r=n.data;if(zg(r[o-1])||zg(r[o+1]))return!0}return!1},WD=e=>{const n=e.ownerDocument,o=jv(n),r=n.createTextNode(We),l=e.parentNode;l.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=cd(o.getBoundingClientRect());return l.removeChild(r),u},wu=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,l=e.endOffset;if(n===o&&ut(o)&&r===0&&l===1){const u=e.cloneRange();return u.setEndAfter(o),xl(u)}else return null},dm=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,xl=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=cd(r[0]):o=cd(e.getBoundingClientRect()),!TS(e)&&Zv(e)&&dm(o)?WD(e):dm(o)&&TS(e)&&(n=wu(e))!==null&&n!==void 0?n:o},Vn=(e,n)=>{const o=na(e,n);return o.width=1,o.right=o.left+1,o},Vl=e=>{const n=[],o=m=>{m.height!==0&&(n.length>0&&$i(m,n[n.length-1])||n.push(m))},r=(m,b)=>{const w=jv(m.ownerDocument);if(b<m.data.length){if(Py(m.data[b]))return;if(Py(m.data[b-1])&&(w.setStart(m,b),w.setEnd(m,b+1),!Gv(w))){o(Vn(xl(w),!1));return}}b>0&&(w.setStart(m,b-1),w.setEnd(m,b),Gv(w)||o(Vn(xl(w),!1))),b<m.data.length&&(w.setStart(m,b),w.setEnd(m,b+1),Gv(w)||o(Vn(xl(w),!0)))},l=e.container(),u=e.offset();if(Ep(l))return r(l,u),n;if(Ny(l))if(e.isAtEnd()){const m=kp(l,u);Ep(m)&&r(m,m.data.length),Lg(m)&&!Zv(m)&&o(Vn(xl(m),!1))}else{const m=kp(l,u);if(Ep(m)&&r(m,0),Lg(m)&&e.isAtEnd())return o(Vn(xl(m),!1)),n;const b=kp(e.container(),e.offset()-1);Lg(b)&&!Zv(b)&&(Wv(b)||Wv(m)||!Lg(m))&&o(Vn(xl(b),!1)),Lg(m)&&o(Vn(xl(m),!0))}return n},He=(e,n,o)=>{const r=()=>(Ep(e),n===0),l=()=>Ep(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const B=jv(e.ownerDocument);return B.setStart(e,n),B.setEnd(e,n),B},m=()=>(o||(o=Vl(He(e,n))),o),b=()=>m().length>0,w=B=>B&&e===B.container()&&n===B.offset(),k=B=>kp(e,B?n-1:n);return{container:we(e),offset:we(n),toRange:u,getClientRects:m,isVisible:b,isAtStart:r,isAtEnd:l,isEqual:w,getNode:k}};He.fromRangeStart=e=>He(e.startContainer,e.startOffset),He.fromRangeEnd=e=>He(e.endContainer,e.endOffset),He.after=e=>He(e.parentNode,Hg(e)+1),He.before=e=>He(e.parentNode,Hg(e)),He.isAbove=(e,n)=>vr(en(n.getClientRects()),hn(e.getClientRects()),Ig).getOr(!1),He.isBelow=(e,n)=>vr(hn(n.getClientRects()),en(e.getClientRects()),Fg).getOr(!1),He.isAtStart=e=>e?e.isAtStart():!1,He.isAtEnd=e=>e?e.isAtEnd():!1,He.isTextPosition=e=>e?ut(e.container()):!1,He.isElementPosition=e=>!He.isTextPosition(e);const Vg=(e,n)=>{ut(n)&&n.data.length===0&&e.remove(n)},ls=(e,n,o)=>{n.insertNode(o),Vg(e,o.previousSibling),Vg(e,o.nextSibling)},_S=(e,n,o)=>{const r=z.from(o.firstChild),l=z.from(o.lastChild);n.insertNode(o),r.each(u=>Vg(e,u.previousSibling)),l.each(u=>Vg(e,u.nextSibling))},Kv=(e,n,o)=>{ef(o)?_S(e,n,o):ls(e,n,o)},ys=ut,dd=Ai,qv=Po.nodeIndex,Iy=e=>{const n=e.parentNode;return dd(n)?Iy(n):n},Fy=e=>e?dl(e.childNodes,(n,o)=>(dd(o)&&o.nodeName!=="BR"?n=n.concat(Fy(o)):n.push(o),n),[]):[],Yv=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&ys(o);)n+=o.data.length;return n},Xv=e=>n=>e===n,pf=e=>{let n,o;n=Fy(Iy(e)),o=Fs(n,Xv(e),e),n=n.slice(0,o+1);const r=dl(n,(l,u,m)=>(ys(u)&&ys(n[m-1])&&l++,l),0);return n=Ud(n,_i([e.nodeName])),o=Fs(n,Xv(e),e),o-r},Tp=e=>(ys(e)?"text()":e.nodeName.toLowerCase())+"["+pf(e)+"]",Ly=(e,n,o)=>{const r=[];for(let l=n.parentNode;l&&l!==e&&!(o&&o(l));l=l.parentNode)r.push(l);return r},Jv=(e,n)=>{let o=[],r=n.container(),l=n.offset(),u;if(ys(r))u=Yv(r,l);else{const b=r.childNodes;l>=b.length?(u="after",l=b.length-1):u="before",r=b[l]}o.push(Tp(r));let m=Ly(e,r);return m=Ud(m,_n(Ai)),o=o.concat(Ji(m,b=>Tp(b))),o.reverse().join("/")+","+u},OS=(e,n,o)=>{let r=Fy(e);return r=Ud(r,(l,u)=>!ys(l)||!ys(r[u-1])),r=Ud(r,_i([n])),r[o]},AS=(e,n)=>{let o=e,r=0;for(;ys(o);){const l=o.data.length;if(n>=r&&n<=r+l){e=o,n=n-r;break}if(!ys(o.nextSibling)){e=o,n=l;break}r+=l,o=o.nextSibling}return ys(e)&&n>e.data.length&&(n=e.data.length),He(e,n)},fm=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),l=o.length>1?o[1]:"before",u=dl(r,(m,b)=>{const w=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return w?(w[1]==="text()"&&(w[1]="#text"),OS(m,w[1],parseInt(w[2],10))):null},e);if(!u)return null;if(!ys(u)&&u.parentNode){let m;return l==="after"?m=qv(u)+1:m=qv(u),He(u.parentNode,m)}return AS(u,parseInt(l,10))},Ma=Eo,ZD=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let l=n.previousSibling;l&&ut(l);l=l.previousSibling)r+=e(l.data).length;return r},Zo=(e,n,o,r,l)=>{const u=l?r.startContainer:r.endContainer;let m=l?r.startOffset:r.endOffset;const b=[],w=e.getRoot();if(ut(u))b.push(o?ZD(n,u,m):m);else{let k=0;const B=u.childNodes;m>=B.length&&B.length&&(k=1,m=Math.max(0,B.length-1)),b.push(e.nodeIndex(B[m],o)+k)}for(let k=u;k&&k!==w;k=k.parentNode)b.push(e.nodeIndex(k,o));return b},w_=(e,n,o,r)=>{const l=n.dom,u=Zo(l,e,o,r,!0),m=n.isForward(),b=wv(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:m,...b};{const w=Zo(l,e,o,r,!1);return{start:u,end:w,forward:m,...b}}},Su=(e,n,o)=>{let r=0;return et.each(e.select(n),l=>{if(l.getAttribute("data-mce-bogus")!=="all"){if(l===o)return!1;r++;return}}),r},Hy=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Bt(o)&&o.nodeName==="TR"){const l=o.childNodes;o=l[Math.min(n?r:r-1,l.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},zy=e=>(Hy(e,!0),Hy(e,!1),e),_p=(e,n)=>{if(Bt(e)&&(e=ba(e,n),Ma(e)))return e;if(Mi(e)){ut(e)&&rf(e)&&(e=e.parentNode);let o=e.previousSibling;if(Ma(o)||(o=e.nextSibling,Ma(o)))return o}},Op=e=>_p(e.startContainer,e.startOffset)||_p(e.endContainer,e.endOffset),Qv=(e,n,o)=>{const r=o.getNode(),l=o.getRng();if(r.nodeName==="IMG"||Ma(r)){const m=r.nodeName;return{name:m,index:Su(o.dom,m,r)}}const u=Op(l);if(u){const m=u.tagName;return{name:m,index:Su(o.dom,m,u)}}return w_(e,o,n,l)},RS=e=>{const n=e.getRng();return{start:Jv(e.dom.getRoot(),He.fromRangeStart(n)),end:Jv(e.dom.getRoot(),He.fromRangeEnd(n)),forward:e.isForward()}},S_=e=>({rng:e.getRng(),forward:e.isForward()}),Vy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},$r=(e,n)=>{const o=e.dom;let r=e.getRng();const l=o.uniqueId(),u=e.isCollapsed(),m=e.getNode(),b=m.nodeName,w=e.isForward();if(b==="IMG")return{name:b,index:Su(o,b,m)};const k=zy(r.cloneRange());if(!u){k.collapse(!1);const M=Vy(o,l+"_end",n);Kv(o,k,M)}r=zy(r),r.collapse(!0);const B=Vy(o,l+"_start",n);return Kv(o,r,B),e.moveToBookmark({id:l,keep:!0,forward:w}),{id:l,forward:w}},Sr=(e,n,o=!1)=>n===2?Qv(Qu,o,e):n===3?RS(e):n?S_(e):$r(e,!1),Ba=Fe(Qv,Qe,!0),Xa=e=>{const n=u=>u(e),o=we(e),r=()=>l,l={tag:!0,inner:e,fold:(u,m)=>m(e),isValue:St,isError:Pe,map:u=>$a.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>z.some(e)};return l},Jo=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,l)=>r(e),isValue:Pe,isError:St,map:n,mapError:r=>$a.error(r(e)),bind:n,exists:Pe,forall:St,getOr:Qe,or:Qe,getOrThunk:Pn,orThunk:Pn,getOrDie:Kn(String(e)),each:ot,toOptional:z.none};return o},$a={value:Xa,error:Jo,fromOption:(e,n)=>e.fold(()=>Jo(n),Xa)},Wc={generate:e=>{if(!Me(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return Ge(e,(r,l)=>{const u=Uo(r);if(u.length!==1)throw new Error("one and only one name per case");const m=u[0],b=r[m];if(o[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Me(b))throw new Error("case arguments must be an array");n.push(m),o[m]=(...w)=>{const k=w.length;if(k!==b.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+b.length+" ("+b+"), got "+k);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[l].apply(null,w)},match:M=>{const H=Uo(M);if(n.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+H.join(","));if(!ks(n,se=>dn(H,se)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+n.join(", "));return M[m].apply(null,w)},log:M=>{console.log(M,{constructors:n,constructor:m,params:w})}}}}),o}};Wc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const MS=e=>{const n=[],o=[];return Ge(e,r=>{r.fold(l=>{n.push(l)},l=>{o.push(l)})}),{errors:n,values:o}},BS=e=>e.type==="inline-command"||e.type==="inline-format",$S=e=>e.type==="block-command"||e.type==="block-format",Uy=e=>{const n=r=>$a.error({message:r,pattern:e}),o=(r,l,u)=>{if(e.format!==void 0){let m;if(Me(e.format)){if(!ks(e.format,P))return n(r+" pattern has non-string items in the `format` array");m=e.format}else if(P(e.format))m=[e.format];else return n(r+" pattern has non-string `format` parameter");return $a.value(l(m))}else return e.cmd!==void 0?P(e.cmd)?$a.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!he(e))return n("Raw pattern is not an object");if(!P(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!P(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,l=e.end;return l.length===0&&(l=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:l,format:u}),(u,m)=>({type:"inline-command",start:r,end:l,cmd:u,value:m}))}else return e.replacement!==void 0?P(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):$a.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,l)=>({type:"block-command",start:e.start,cmd:r,value:l}))},eb=e=>Qt(e,$S),tb=e=>Qt(e,BS),jD=(e,n)=>({inlinePatterns:tb(e),blockPatterns:eb(e),dynamicPatternsLookup:n}),PS=e=>{const n=MS(pn(e,Uy));return Ge(n.errors,o=>console.error(o.message,o.pattern)),n.values},x_=e=>n=>{const o=e(n);return PS(o)},Wy=ec().deviceType,Zy=Wy.isTouch(),E_=Po.DOM,k_=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Vo(n,(o,r)=>{const l=r.split("="),u=l[0],m=l.length>1?l[1]:u;return o[lu(u)]=lu(m),o},{})},NS=e=>Ce(e,RegExp),Pt=e=>n=>n.options.get(e),nb=e=>P(e)||he(e),gt=(e,n="")=>o=>{const r=P(o);if(r)if(o.indexOf("=")!==-1){const l=k_(o);return{value:Ko(l,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},T_=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:gt(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:gt(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=P(o)&&Oo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=dn(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Ie(o)?{valid:!0,value:o}:P(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||P(o)||Je(o,P);return r?P(o)?{value:pn(o.split(","),lu),valid:r}:Me(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ab(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=P(o)||Je(o,P);return r?{value:Me(o)?o:pn(o.split(","),lu),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Ie(o)||P(o);return r?o===!1||Wy.isiPhone()||Wy.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Zy}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||P(o)||re(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||P(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:nb}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:nb}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:nb}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>P(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Je(o,he)||o===!1?{value:PS(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>re(o)?{value:x_(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Je(o,NS)?{value:o,valid:!0}:NS(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=dn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=dn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Vc.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:E_.getAttrib(e.getElement(),"placeholder")})})},jr=Pt("iframe_attrs"),__=Pt("doctype"),jy=Pt("document_base_url"),O_=Pt("body_id"),Ja=Pt("body_class"),Gy=Pt("content_security_policy"),IS=Pt("br_in_pre"),Ps=Pt("forced_root_block"),vf=Pt("forced_root_block_attrs"),Ug=Pt("newline_behavior"),xu=Pt("br_newline_selector"),ic=Pt("no_newline_selector"),Ap=Pt("keep_styles"),Ul=Pt("end_container_on_empty_block"),FS=Pt("automatic_uploads"),Ky=Pt("images_reuse_filename"),qy=Pt("images_replace_blob_uris"),Yy=Pt("icons"),LS=Pt("icons_url"),Xy=Pt("images_upload_url"),A_=Pt("images_upload_base_path"),HS=Pt("images_upload_credentials"),R_=Pt("images_upload_handler"),D_=Pt("content_css_cors"),Jy=Pt("referrer_policy"),zS=Pt("language"),M_=Pt("language_url"),ob=Pt("indent_use_margin"),B_=Pt("indentation"),VS=Pt("content_css"),$_=Pt("content_style"),Rp=Pt("font_css"),P_=Pt("directionality"),N_=Pt("inline_boundaries_selector"),US=Pt("object_resizing"),I_=Pt("resize_img_proportional"),F_=Pt("placeholder"),Dp=Pt("event_root"),WS=Pt("service_message"),Qa=Pt("theme"),is=Pt("theme_url"),sb=Pt("model"),el=Pt("model_url"),mm=Pt("inline_boundaries"),Mp=Pt("formats"),Pr=Pt("preview_styles"),rb=Pt("format_empty_lines"),ZS=Pt("format_noneditable_selector"),L_=Pt("custom_ui_selector"),ab=Pt("inline"),jS=Pt("hidden_input"),H_=Pt("submit_patch"),z_=Pt("add_form_submit_trigger"),V_=Pt("add_unload_trigger"),U_=Pt("custom_undo_redo_levels"),Bp=Pt("disable_nodechange"),Qy=Pt("readonly"),GD=Pt("editable_root"),bf=Pt("content_css_cors"),lb=Pt("plugins"),W_=Pt("external_plugins"),GS=Pt("block_unsupported_drop"),Z_=Pt("visual"),gm=Pt("visual_table_class"),$p=Pt("visual_anchor_class"),j_=Pt("iframe_aria_text"),G_=Pt("setup"),K_=Pt("init_instance_callback"),fd=Pt("urlconverter_callback"),ib=Pt("auto_focus"),cb=Pt("browser_spellcheck"),eC=Pt("protect"),KS=Pt("paste_block_drop"),Pi=Pt("paste_data_images"),ub=Pt("paste_preprocess"),qS=Pt("paste_postprocess"),md=Pt("newdocument_content"),hm=Pt("paste_webkit_styles"),Pp=Pt("paste_remove_styles_if_webkit"),tC=Pt("paste_merge_formats"),YS=Pt("smart_paste"),q_=Pt("paste_as_text"),XS=Pt("paste_tab_spaces"),Y_=Pt("allow_html_data_urls"),X_=Pt("text_patterns"),JS=Pt("text_patterns_lookup"),QS=Pt("noneditable_class"),nC=Pt("editable_class"),J_=Pt("noneditable_regexp"),Q_=Pt("preserve_cdata"),eO=Pt("highlight_on_focus"),db=Pt("xss_sanitization"),oC=Pt("init_content_sync"),ex=e=>e.options.isSet("text_patterns_lookup"),tO=e=>et.explode(e.options.get("font_size_style_values")),nO=e=>et.explode(e.options.get("font_size_classes")),oO=e=>e.options.get("encoding")==="xml",Np=e=>et.explode(e.options.get("images_file_types")),sO=Pt("table_tab_navigation"),Ip=Pt("details_initial_state"),Fp=Pt("details_serialized_state"),tx=Bt,fb=ut,sC=e=>{const n=e.parentNode;n&&n.removeChild(e)},rC=e=>{const n=Qu(e);return{count:e.length-n.length,text:n}},aC=e=>{let n;for(;(n=e.data.lastIndexOf(pa))!==-1;)e.deleteData(n,1)},nx=(e,n)=>(pm(e),n),Lp=(e,n)=>{const o=rC(e.data.substr(0,n.offset())),r=rC(e.data.substr(n.offset()));return(o.text+r.text).length>0?(aC(e),He(e,n.offset()-o.count)):n},ox=(e,n)=>{const o=n.container(),r=Vu(vo(o.childNodes),e).map(l=>l<n.offset()?He(o,n.offset()-1):n).getOr(n);return pm(e),r},rO=(e,n)=>fb(e)&&n.container()===e?Lp(e,n):nx(e,n),lC=(e,n)=>n.container()===e.parentNode?ox(e,n):nx(e,n),aO=(e,n)=>He.isTextPosition(n)?rO(e,n):lC(e,n),pm=e=>{tx(e)&&Mi(e)&&(mu(e)?e.removeAttribute("data-mce-caret"):sC(e)),fb(e)&&(aC(e),e.data.length===0&&sC(e))},lO=Eo,iC=er,Hp=ma,iO="*[contentEditable=false],video,audio,embed,object",sx=(e,n,o)=>{const r=na(n.getBoundingClientRect(),o);let l,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;l=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();l=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=l,r.right+=l,r.top+=u,r.bottom+=u,r.width=1;let m=n.offsetWidth-n.clientWidth;return m>0&&(o&&(m*=-1),r.left+=m,r.right+=m),r},rx=e=>{var n,o;const r=fa(de.fromDom(e),iO);for(let l=0;l<r.length;l++){const u=r[l].dom;let m=u.previousSibling;if(up(m)){const b=m.data;b.length===1?(n=m.parentNode)===null||n===void 0||n.removeChild(m):m.deleteData(b.length-1,1)}m=u.nextSibling,gu(m)&&(m.data.length===1?(o=m.parentNode)===null||o===void 0||o.removeChild(m):m.deleteData(0,1))}},ax=(e,n,o,r)=>{const l=Zr();let u,m;const b=Ps(e),w=e.dom,k=(X,oe)=>{let ye;if(B(),Hp(oe))return null;if(o(oe)){const xe=sS(b,oe,X),Ee=sx(n,oe,X);w.setStyle(xe,"top",Ee.top),m=xe;const De=w.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});w.setStyles(De,{...Ee}),w.add(n,De),l.set({caret:De,element:oe,before:X}),X&&w.addClass(De,"mce-visual-caret-before"),M(),ye=oe.ownerDocument.createRange(),ye.setStart(xe,0),ye.setEnd(xe,0)}else return m=oS(oe,X),ye=oe.ownerDocument.createRange(),mb(m.nextSibling)?(ye.setStart(m,0),ye.setEnd(m,0)):(ye.setStart(m,1),ye.setEnd(m,1)),ye;return ye},B=()=>{rx(n),m&&(pm(m),m=null),l.on(X=>{w.remove(X.caret),l.clear()}),u&&(clearInterval(u),u=void 0)},M=()=>{u=setInterval(()=>{l.on(X=>{r()?w.toggleClass(X.caret,"mce-visual-caret-hidden"):w.addClass(X.caret,"mce-visual-caret-hidden")})},500)};return{show:k,hide:B,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{l.on(X=>{const oe=sx(n,X.element,X.before);w.setStyles(X.caret,{...oe})})},destroy:()=>clearInterval(u)}},ya=()=>co.browser.isFirefox(),mb=e=>lO(e)||iC(e),Eu=e=>(mb(e)||Os(e)&&ya())&&av(de.fromDom(e)).exists(Mn),zp=Do,gb=Eo,cO=er,lx=cy("display","block table table-cell table-caption list-item"),ix=Mi,hb=rf,pb=Bt,tl=ut,uO=Ll,ku=e=>e>0,yf=e=>e<0,Vp=(e,n)=>{let o;for(;o=e(n);)if(!hb(o))return o;return null},Up=(e,n,o,r,l)=>{const u=new lr(e,r),m=gb(e)||hb(e);let b;if(yf(n)){if(m&&(b=Vp(u.prev.bind(u),!0),o(b)))return b;for(;b=Vp(u.prev.bind(u),l);)if(o(b))return b}if(ku(n)){if(m&&(b=Vp(u.next.bind(u),!0),o(b)))return b;for(;b=Vp(u.next.bind(u),l);)if(o(b))return b}return null},cx=(e,n)=>{const o=l=>zp(l.dom),r=l=>l.dom===n;return us(de.fromDom(e),o,r).map(l=>l.dom).getOr(n)},Zc=(e,n)=>{for(;e&&e!==n;){if(lx(e))return e;e=e.parentNode}return null},gd=(e,n,o)=>Zc(e.container(),o)===Zc(n.container(),o),Wg=(e,n)=>{if(!n)return z.none();const o=n.container(),r=n.offset();return pb(o)?z.from(o.childNodes[r+e]):z.none()},dO=(e,n)=>{var o;const l=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(l.setStartBefore(n),l.setEndBefore(n)):(l.setStartAfter(n),l.setEndAfter(n)),l},ux=(e,n,o)=>Zc(n,e)===Zc(o,e),Zg=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let l=o;for(;l&&l!==n;){let u=l[r];if(u&&ix(u)&&(u=u[r]),gb(u)||cO(u)){if(ux(n,u,l))return u;break}if(uO(u))break;l=l.parentNode}return null},Cf=Fe(dO,!0),jg=Fe(dO,!1),Gg=(e,n,o)=>{let r;const l=Fe(Zg,!0,n),u=Fe(Zg,!1,n),m=o.startContainer,b=o.startOffset;if(rf(m)){const w=tl(m)?m.parentNode:m,k=w.getAttribute("data-mce-caret");if(k==="before"&&(r=w.nextSibling,Eu(r)))return Cf(r);if(k==="after"&&(r=w.previousSibling,Eu(r)))return jg(r)}if(!o.collapsed)return o;if(ut(m)){if(ix(m)){if(e===1){if(r=u(m),r)return Cf(r);if(r=l(m),r)return jg(r)}if(e===-1){if(r=l(m),r)return jg(r);if(r=u(m),r)return Cf(r)}return o}if(up(m)&&b>=m.data.length-1)return e===1&&(r=u(m),r)?Cf(r):o;if(gu(m)&&b<=1)return e===-1&&(r=l(m),r)?jg(r):o;if(b===m.data.length)return r=u(m),r?Cf(r):o;if(b===0)return r=l(m),r?jg(r):o}return o},cC=(e,n)=>Wg(e?0:-1,n).filter(gb),vm=(e,n,o)=>{const r=Gg(e,n,o);return e===-1?He.fromRangeStart(r):He.fromRangeEnd(r)},Wp=e=>z.from(e.getNode()).map(de.fromDom),hd=e=>z.from(e.getNode(!0)).map(de.fromDom),wf=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Zp=(e,n)=>{const o=gd(e,n);return!o&&bs(e.getNode())?!0:o};var xr;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(xr||(xr={}));const fO=Eo,Tu=ut,vb=Bt,Kg=bs,bm=Ll,uC=aS,qg=lf,mO=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},dx=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,dC=(e,n)=>{if(ku(e)){if(bm(n.previousSibling)&&!Tu(n.previousSibling))return He.before(n);if(Tu(n))return He(n,0)}if(yf(e)){if(bm(n.nextSibling)&&!Tu(n.nextSibling))return He.after(n);if(Tu(n))return He(n,n.data.length)}return yf(e)?Kg(n)?He.before(n):He.after(n):He.before(n)},fx=(e,n)=>{const o=n.nextSibling;return o&&bm(o)?Tu(o)?He(o,0):He.before(o):Yg(xr.Forwards,He.after(n),e)},Yg=(e,n,o)=>{let r,l,u,m;if(!vb(o)||!n)return null;if(n.isEqual(He.after(o))&&o.lastChild){if(m=He.after(o.lastChild),yf(e)&&bm(o.lastChild)&&vb(o.lastChild))return Kg(o.lastChild)?He.before(o.lastChild):m}else m=n;const b=m.container();let w=m.offset();if(Tu(b)){if(yf(e)&&w>0)return He(b,--w);if(ku(e)&&w<b.length)return He(b,++w);r=b}else{if(yf(e)&&w>0&&(l=dx(b,w-1),bm(l)))return!uC(l)&&(u=Up(l,e,qg,l),u)?Tu(u)?He(u,u.data.length):He.after(u):Tu(l)?He(l,l.data.length):He.before(l);if(ku(e)&&w<b.childNodes.length&&(l=dx(b,w),bm(l)))return Kg(l)?fx(o,l):!uC(l)&&(u=Up(l,e,qg,l),u)?Tu(u)?He(u,0):He.before(u):Tu(l)?He(l,0):He.after(l);r=l||m.getNode()}if(r&&(ku(e)&&m.isAtEnd()||yf(e)&&m.isAtStart())&&(r=Up(r,e,St,o,!0),qg(r,o)))return dC(e,r);l=r&&Up(r,e,qg,o);const k=_a(Qt(mO(b,o),fO));return k&&(!l||!k.contains(l))?(ku(e)?m=He.after(k):m=He.before(k),m):l?dC(e,l):null},jc=e=>({next:n=>Yg(xr.Forwards,n,e),prev:n=>Yg(xr.Backwards,n,e)}),mx=(e,n,o)=>{const r=e?He.before(o):He.after(o);return cc(e,n,r)},gO=e=>bs(e)?He.before(e):He.after(e),gx=e=>He.isTextPosition(e)?e.offset()===0:Ll(e.getNode()),hx=e=>{if(He.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Ll(e.getNode(!0))},Xg=(e,n)=>!He.isTextPosition(e)&&!He.isTextPosition(n)&&e.getNode()===n.getNode(!0),KD=e=>!He.isTextPosition(e)&&bs(e.getNode()),qD=(e,n,o)=>e?!Xg(n,o)&&!KD(n)&&hx(n)&&gx(o):!Xg(o,n)&&gx(n)&&hx(o),cc=(e,n,o)=>{const r=jc(n);return z.from(e?r.next(o):r.prev(o))},fC=(e,n,o)=>cc(e,n,o).bind(r=>gd(o,r,n)&&qD(e,o,r)?cc(e,n,r):z.some(r)),ym=(e,n,o,r)=>fC(e,n,o).bind(l=>r(l)?ym(e,n,l,r):z.some(l)),Er=(e,n)=>{const o=e?n.firstChild:n.lastChild;return ut(o)?z.some(He(o,e?0:o.data.length)):o?Ll(o)?z.some(e?He.before(o):gO(o)):mx(e,n,o):z.none()},Ca=Fe(cc,!0),oa=Fe(cc,!1),kr=Fe(Er,!0),Wl=Fe(Er,!1),jp="_mce_caret",Ni=e=>Bt(e)&&e.id===jp,Cm=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ni(o))return o;o=o.parentNode}return null},hO=e=>P(e.start),pO=e=>Cn(e,"rng"),_u=e=>Cn(e,"id"),Jg=e=>Cn(e,"name"),bb=e=>et.isArray(e.start),uc=e=>!Jg(e)&&Ie(e.forward)?e.forward:!0,mC=(e,n)=>(Bt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),gC=(e,n)=>{const o=z.from(fm(e.getRoot(),n.start)),r=z.from(fm(e.getRoot(),n.end));return vr(o,r,(l,u)=>{const m=e.createRng();return m.setStart(l.container(),l.offset()),m.setEnd(u.container(),u.offset()),{range:m,forward:uc(n)}})},wm=(e,n)=>{var o;const l=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(pa);e.appendChild(l),n.setStart(l,0),n.setEnd(l,0)},hC=e=>!e.hasChildNodes(),px=(e,n)=>Wl(e).fold(Pe,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),yb=(e,n,o)=>hC(n)&&Cm(e,n)?(wm(n,o),!0):!1,pd=(e,n,o,r)=>{const l=o[n?"start":"end"],u=e.getRoot();if(l){let m=u,b=l[0];for(let w=l.length-1;m&&w>=1;w--){const k=m.childNodes;if(yb(u,m,r))return!0;if(l[w]>k.length-1)return yb(u,m,r)?!0:px(m,r);m=k[l[w]]}ut(m)&&(b=Math.min(l[0],m.data.length)),Bt(m)&&(b=Math.min(l[0],m.childNodes.length)),n?r.setStart(m,b):r.setEnd(m,b)}return!0},pC=e=>ut(e)&&e.data.length>0,Gc=(e,n,o)=>{const r=e.get(o.id+"_"+n),l=r==null?void 0:r.parentNode,u=o.keep;if(r&&l){let m,b;if(n==="start"?u?r.hasChildNodes()?(m=r.firstChild,b=1):pC(r.nextSibling)?(m=r.nextSibling,b=0):pC(r.previousSibling)?(m=r.previousSibling,b=r.previousSibling.data.length):(m=l,b=e.nodeIndex(r)+1):(m=l,b=e.nodeIndex(r)):u?r.hasChildNodes()?(m=r.firstChild,b=1):pC(r.previousSibling)?(m=r.previousSibling,b=r.previousSibling.data.length):(m=l,b=e.nodeIndex(r)):(m=l,b=e.nodeIndex(r)),!u){const w=r.previousSibling,k=r.nextSibling;et.each(et.grep(r.childNodes),M=>{ut(M)&&(M.data=M.data.replace(/\uFEFF/g,""))});let B;for(;B=e.get(o.id+"_"+n);)e.remove(B,!0);if(ut(k)&&ut(w)&&!co.browser.isOpera()){const M=w.data.length;w.appendData(k.data),e.remove(k),m=w,b=M}}return z.some(He(m,b))}else return z.none()},vx=(e,n)=>{const o=e.createRng();return pd(e,!0,n,o)&&pd(e,!1,n,o)?z.some({range:o,forward:uc(n)}):z.none()},vC=(e,n)=>{const o=Gc(e,"start",n),r=Gc(e,"end",n);return vr(o,r.or(o),(l,u)=>{const m=e.createRng();return m.setStart(mC(e,l.container()),l.offset()),m.setEnd(mC(e,u.container()),u.offset()),{range:m,forward:uc(n)}})},vO=(e,n)=>z.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),YD=(e,n)=>{const o=e.dom;if(n){if(bb(n))return vx(o,n);if(hO(n))return gC(o,n);if(_u(n))return vC(o,n);if(Jg(n))return vO(o,n);if(pO(n))return z.some({range:n.rng,forward:uc(n)})}return z.none()},bO=(e,n,o)=>Sr(e,n,o),yO=(e,n)=>{YD(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},ui=e=>Bt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Sm=(e=>n=>e===n)(We),Qg=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,bC=e=>!Qg(e)&&!Sm(e)&&!wl(e),yC=e=>({value:CO(e)}),CO=e=>Zd(e,"#").toUpperCase(),bx=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},CC=e=>{const n=bx(e.red)+bx(e.green)+bx(e.blue);return yC(n)},to=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,vd=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,xm=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Cb=(e,n,o,r)=>{const l=parseInt(e,10),u=parseInt(n,10),m=parseInt(o,10),b=parseFloat(r);return xm(l,u,m,b)},wO=e=>{if(e==="transparent")return z.some(xm(0,0,0,0));const n=to.exec(e);if(n!==null)return z.some(Cb(n[1],n[2],n[3],"1"));const o=vd.exec(e);return o!==null?z.some(Cb(o[1],o[2],o[3],o[4])):z.none()},Em=e=>wO(e).map(CC).map(n=>"#"+n.value).getOr(e),wb=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},wC=e=>Dr(e,n=>{const o=As(n);return o?[de.fromDom(o)]:[]}),SC=e=>wb(e).length>1,xC=e=>Qt(wC(e),Ls),yx=e=>fa(e,"td[data-mce-selected],th[data-mce-selected]"),SO=(e,n)=>{const o=yx(n);return o.length>0?o:xC(e)},Sf=e=>SO(wb(e.selection.getSel()),de.fromDom(e.getBody())),eh=(e,n)=>rp(e,"table",n),JD=e=>{const n=e.startContainer,o=e.startOffset;return ut(n)?o===0?z.some(de.fromDom(n)):z.none():z.from(n.childNodes[o]).map(de.fromDom)},xO=e=>{const n=e.endContainer,o=e.endOffset;return ut(n)?o===n.data.length?z.some(de.fromDom(n)):z.none():z.from(n.childNodes[o-1]).map(de.fromDom)},Sb=e=>mg(e).fold(we([e]),n=>[e].concat(Sb(n))),xb=e=>oc(e).fold(we([e]),n=>gs(n)==="br"?nc(n).map(o=>[e].concat(xb(o))).getOr([]):[e].concat(xb(n))),bd=(e,n)=>vr(JD(n),xO(n),(o,r)=>{const l=ns(Sb(e),Fe(Ao,o)),u=ns(xb(e),Fe(Ao,r));return l.isSome()&&u.isSome()}).getOr(!1),Eb=(e,n,o,r)=>{const l=o,u=new lr(o,l),m=os(e.schema.getMoveCaretBeforeOnEnterElements(),(w,k)=>!dn(["td","th","table"],k.toLowerCase()));let b=o;do{if(ut(b)&&et.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(m[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());l.nodeName==="BODY"&&(r?n.setStart(l,0):n.setEnd(l,l.childNodes.length))},km=e=>{const n=e.selection.getSel();return Oe(n)&&n.rangeCount>0},yd=(e,n)=>{const o=Sf(e);o.length>0?Ge(o,r=>{const l=r.dom,u=e.dom.createRng();u.setStartBefore(l),u.setEndAfter(l),n(u,!0)}):n(e.selection.getRng(),!1)},Cx=(e,n,o)=>{const r=$r(e,n);o(r),e.moveToBookmark(r)},Gp=e=>Nt(e==null?void 0:e.nodeType),EC=e=>Bt(e)&&!ui(e)&&!Ni(e)&&!Ai(e),EO=(e,n)=>{if(EC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Ou=e=>e.isContentEditable===!0,wx=(e,n,o)=>{const{selection:r,dom:l}=e,u=r.getNode(),m=Eo(u);Cx(r,!0,()=>{n()}),m&&Eo(u)&&l.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&kO(l,r)},kO=(e,n)=>{var o,r;const l=n.getRng(),{startContainer:u,startOffset:m}=l,b=n.getNode();if(!EO(e,b)&&Bt(u)){const w=u.childNodes,k=e.getRoot();let B;if(m<w.length){const M=w[m];B=new lr(M,(o=e.getParent(M,e.isBlock))!==null&&o!==void 0?o:k)}else{const M=w[w.length-1];B=new lr(M,(r=e.getParent(M,e.isBlock))!==null&&r!==void 0?r:k),B.next(!0)}for(let M=B.current();M;M=B.next()){if(e.getContentEditable(M)==="false")return;if(ut(M)&&!TC(M)){l.setStart(M,0),n.setRng(l);return}}}},Sx=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(Bt(e)||!TC(e))return e}},kC=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||cf(e,n),th=(e,n,o)=>e.schema.isValidChild(n,o),TC=(e,n=!1)=>{if(Oe(e)&&ut(e)){const o=n?e.data.replace(/ /g,"\xA0"):e.data;return Bi(o)}else return!1},TO=e=>Oe(e)&&ut(e)&&e.length===0,nh=(e,n)=>{const o="[data-mce-cef-wrappable]",r=ZS(e),l=Al(r)?o:`${o},${r}`;return vl(de.fromDom(n),l)},xx=(e,n)=>{const o=e.dom;return EC(n)&&o.getContentEditable(n)==="false"&&nh(e,n)&&o.select('[contenteditable="true"]',n).length===0},At=(e,n)=>re(e)?e(n):(Oe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),dr=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),oh=(e,n)=>{if(ft(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Em(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},zs=(e,n,o)=>{const r=e.getStyle(n,o);return oh(r,o)},Ii=(e,n)=>{let o;return e.getParent(n,r=>Bt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Kp=(e,n,o)=>e.getParents(n,o,e.getRoot()),sh=(e,n,o)=>{const r=e.formatter.get(n);return Oe(r)&&$o(r,o)},_C=(e,n)=>sh(e,n,r=>{const l=u=>re(u)||u.length>1&&u.charAt(0)==="%";return $o(["styles","attributes"],u=>Ko(r,u).exists(m=>{const b=Me(m)?m:Uu(m);return $o(b,l)}))}),kb=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],l=u=>os(u,(m,b)=>$o(r,w=>w===b));return sh(e,n,u=>{const m=l(u);return sh(e,o,b=>{const w=l(b);return Oc(m,w)})})},Kc=e=>Ta(e,"block"),Tb=e=>Kc(e)&&e.wrapper===!0,_O=e=>Kc(e)&&e.wrapper!==!0,di=e=>Ta(e,"selector"),Tr=e=>Ta(e,"inline"),OC=e=>di(e)&&Tr(e)&&ua(Ko(e,"mixed"),!0),_b=e=>di(e)&&e.expand!==!1&&!Tr(e),Tm=ui,rh=Kp,qp=TC,Ob=kC,Ab=e=>bs(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Rb=(e,n)=>{let o=n;for(;o;){if(Bt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Ex=(e,n,o,r)=>{const l=n.data;if(e){for(let u=o;u>0;u--)if(r(l.charAt(u-1)))return u}else for(let u=o;u<l.length;u++)if(r(l.charAt(u)))return u;return-1},ah=(e,n,o)=>Ex(e,n,o,r=>Sm(r)||Qg(r)),Cd=(e,n,o)=>Ex(e,n,o,bC),kx=(e,n,o,r,l,u)=>{let m;const b=e.getParent(o,e.isBlock)||n,w=(B,M,H)=>{const Q=gf(e),se=l?Q.backwards:Q.forwards;return z.from(se(B,M,(X,oe)=>Tm(X.parentNode)?-1:(m=X,H(l,X,oe)),b))};return w(o,r,ah).bind(B=>u?w(B.container,B.offset+(l?-1:0),Cd):z.some(B)).orThunk(()=>m?z.some({container:m,offset:l?0:m.length}):z.none())},AC=(e,n,o,r,l)=>{const u=r[l];ut(r)&&Al(r.data)&&u&&(r=u);const m=rh(e,r);for(let b=0;b<m.length;b++)for(let w=0;w<n.length;w++){const k=n[w];if(!(Oe(k.collapsed)&&k.collapsed!==o.collapsed)&&di(k)&&e.is(m[b],k.selector))return m[b]}return r},Db=(e,n,o,r)=>{var l;let u=o;const m=e.getRoot(),b=n[0];if(Kc(b)&&(u=b.wrapper?null:e.getParent(o,b.block,m)),!u){const w=(l=e.getParent(o,"LI,TD,TH"))!==null&&l!==void 0?l:m;u=e.getParent(ut(o)?o.parentNode:o,k=>k!==m&&Ob(e.schema,k),w)}if(u&&Kc(b)&&b.wrapper&&(u=rh(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!dr(u,"br")););return u||o},Tx=(e,n,o,r)=>{const l=o.parentNode;return Oe(o[r])?!1:l===n||ft(l)||e.isBlock(l)?!0:Tx(e,n,l,r)},Yp=(e,n,o,r,l)=>{let u=o;const m=l?"previousSibling":"nextSibling",b=e.getRoot();if(ut(o)&&!qp(o)&&(l?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let w=u[m];w;w=w[m]){const k=ut(w)&&!Tx(e,b,w,m);if(!Tm(w)&&!Ab(w)&&!qp(w,k))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Xp=e=>Tm(e.parentNode)||Tm(e),_m=(e,n,o,r=!1)=>{let{startContainer:l,startOffset:u,endContainer:m,endOffset:b}=n;const w=o[0];return Bt(l)&&l.hasChildNodes()&&(l=ba(l,u),ut(l)&&(u=0)),Bt(m)&&m.hasChildNodes()&&(m=ba(m,n.collapsed?b:b-1),ut(m)&&(b=m.data.length)),l=Rb(e,l),m=Rb(e,m),Xp(l)&&(l=Tm(l)?l:l.parentNode,n.collapsed?l=l.previousSibling||l:l=l.nextSibling||l,ut(l)&&(u=n.collapsed?l.length:0)),Xp(m)&&(m=Tm(m)?m:m.parentNode,n.collapsed?m=m.nextSibling||m:m=m.previousSibling||m,ut(m)&&(b=n.collapsed?0:m.length)),n.collapsed&&(kx(e,e.getRoot(),l,u,!0,r).each(({container:M,offset:H})=>{l=M,u=H}),kx(e,e.getRoot(),m,b,!1,r).each(({container:M,offset:H})=>{m=M,b=H})),(Tr(w)||w.block_expand)&&((!Tr(w)||!ut(l)||u===0)&&(l=Yp(e,o,l,u,!0)),(!Tr(w)||!ut(m)||b===m.data.length)&&(m=Yp(e,o,m,b,!1))),_b(w)&&(l=AC(e,o,n,l,"previousSibling"),m=AC(e,o,n,m,"nextSibling")),(Kc(w)||di(w))&&(l=Db(e,o,l,"previousSibling"),m=Db(e,o,m,"nextSibling"),Kc(w)&&(e.isBlock(l)||(l=Yp(e,o,l,u,!0)),e.isBlock(m)||(m=Yp(e,o,m,b,!1)))),Bt(l)&&l.parentNode&&(u=e.nodeIndex(l),l=l.parentNode),Bt(m)&&m.parentNode&&(b=e.nodeIndex(m)+1,m=m.parentNode),{startContainer:l,startOffset:u,endContainer:m,endOffset:b}},xf=(e,n,o)=>{var r;const l=n.startOffset,u=ba(n.startContainer,l),m=n.endOffset,b=ba(n.endContainer,m-1),w=oe=>{const ye=oe[0];ut(ye)&&ye===u&&l>=ye.data.length&&oe.splice(0,1);const xe=oe[oe.length-1];return m===0&&oe.length>0&&xe===b&&ut(xe)&&oe.splice(oe.length-1,1),oe},k=(oe,ye,xe)=>{const Ee=[];for(;oe&&oe!==xe;oe=oe[ye])Ee.push(oe);return Ee},B=(oe,ye)=>e.getParent(oe,xe=>xe.parentNode===ye,ye),M=(oe,ye,xe)=>{const Ee=xe?"nextSibling":"previousSibling";for(let De=oe,tt=De.parentNode;De&&De!==ye;De=tt){tt=De.parentNode;const Gt=k(De===oe?De:De[Ee],Ee);Gt.length&&(xe||Gt.reverse(),o(w(Gt)))}};if(u===b)return o(w([u]));const H=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return M(u,H,!0);if(e.isChildOf(b,u))return M(b,H);const Q=B(u,H)||u,se=B(b,H)||b;M(u,Q,!0);const X=k(Q===u?Q:Q.nextSibling,"nextSibling",se===b?se.nextSibling:se);X.length&&o(w(X)),M(b,se)},Nr=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],dc=e=>ja(e)&&hv(e)===pa,Fi=(e,n,o,r)=>ti(n).fold(()=>"skipping",l=>r==="br"||dc(n)?"valid":id(n)?"existing":Ni(n.dom)?"caret":$o(Nr,u=>vl(n,u))?"valid-block":!th(e,o,r)||!th(e,gs(l),o)?"invalid-child":"valid"),Mb=(e,n)=>{const o=_m(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},fc=(e,n,o,r,l,u)=>{const{uid:m=n,...b}=o;Zf(e,df()),sr(e,`${ci()}`,m),sr(e,`${Ya()}`,r);const{attributes:w={},classes:k=[]}=l(m,b);if(gl(e,w),g_(e,k),u){k.length>0&&sr(e,`${Ng()}`,k.join(","));const B=Uo(w);B.length>0&&sr(e,`${ff()}`,B.join(","))}},OO=e=>{jf(e,df()),rr(e,`${ci()}`),rr(e,`${Ya()}`),rr(e,`${cr()}`);const n=Bc(e,`${ff()}`).map(r=>r.split(",")).getOr([]),o=Bc(e,`${Ng()}`).map(r=>r.split(",")).getOr([]);Ge(n,r=>rr(e,r)),h_(e,o),rr(e,`${Ng()}`),rr(e,`${ff()}`)},Bb=(e,n,o,r,l)=>{const u=de.fromTag("span",e);return fc(u,n,o,r,l,!1),u},RC=(e,n,o,r,l,u)=>{const m=[],b=Bb(e.getDoc(),o,u,r,l),w=Zr(),k=()=>{w.clear()},B=()=>w.get().getOrThunk(()=>{const se=mf(b);return m.push(se),w.set(se),se}),M=se=>{Ge(se,H)},H=se=>{switch(Fi(e,se,"span",gs(se))){case"invalid-child":{k();const oe=Qr(se);M(oe),k();break}case"valid-block":{k(),fc(se,o,u,r,l,!0);break}case"valid":{const oe=B();Xw(se,oe);break}}},Q=se=>{const X=pn(se,de.fromDom);M(X)};return xf(e.dom,n,se=>{k(),Q(se)}),m},DC=(e,n,o,r)=>{e.undoManager.transact(()=>{const l=e.selection,u=l.getRng(),m=Sf(e).length>0,b=Sp("mce-annotation");if(u.collapsed&&!m&&Mb(e,u),l.getRng().collapsed&&!m){const w=Bb(e.getDoc(),b,r,n,o.decorate);Yn(w,We),l.getRng().insertNode(w.dom),l.select(w.dom)}else Cx(l,!1,()=>{yd(e,w=>{RC(e,w,b,n,o.decorate,r)})})})},_x=e=>{const n=m_();f_(e,n);const o=d_(e,n),r=lg("span"),l=u=>{Ge(u,m=>{r(m)?Pc(m):OO(m)})};return{register:(u,m)=>{n.register(u,m)},annotate:(u,m)=>{n.lookup(u).each(b=>{DC(e,u,b,m)})},annotationChanged:(u,m)=>{o.addListener(u,m)},remove:u=>{SS(e,z.some(u)).each(({elements:m})=>{const b=e.selection.getBookmark();l(m),e.selection.moveToBookmark(b)})},removeAll:u=>{const m=e.selection.getBookmark();xt(Dy(e,u),(b,w)=>{l(b)}),e.selection.moveToBookmark(m)},getAll:u=>{const m=Dy(e,u);return Hn(m,b=>pn(b,w=>w.dom))}}},Om=e=>({getBookmark:Fe(bO,e),moveToBookmark:Fe(yO,e)});Om.isBookmarkNode=ui;const Ox=(e,n,o)=>o.collapsed?!1:$o(o.getClientRects(),r=>v_(r,e,n)),AO=(e,n)=>e.dispatch("PreProcess",n),MC=(e,n)=>e.dispatch("PostProcess",n),BC=e=>{e.dispatch("remove")},No=e=>{e.dispatch("detach")},Ef=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},Ax=(e,n,o,r,l)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:l})},Rx=(e,n,o,r,l)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:l})},Dx=e=>{e.dispatch("PreInit")},$C=e=>{e.dispatch("PostRender")},Mx=e=>{e.dispatch("Init")},PC=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},NC=(e,n,o)=>{e.dispatch(n,o)},Bx=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},IC=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},RO=(e,n)=>e.dispatch("BeforeSetContent",n),$b=(e,n)=>e.dispatch("SetContent",n),DO=(e,n)=>e.dispatch("BeforeGetContent",n),kf=(e,n)=>e.dispatch("GetContent",n),Jp=(e,n)=>{e.dispatch("AutocompleterStart",n)},FC=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},MO=e=>{e.dispatch("AutocompleterEnd")},nr=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),fr=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Am=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Pb=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Ft={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ft.metaKeyPressed(e),metaKeyPressed:e=>co.os.isMacOS()||co.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Rm="data-mce-selected",Qn="table,img,figure.image,hr,video,span.mce-preview-object,details",$x=Math.abs,Qp=Math.round,e1={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},BO=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Px=(e,n)=>{const o=n.dom,r=n.getDoc(),l=document,u=n.getBody();let m,b,w,k,B,M,H,Q,se,X,oe,ye,xe,Ee,De,tt,Gt;const at=mt=>Oe(mt)&&(eS(mt)||o.is(mt,"figure.image")),ze=mt=>er(mt)||o.hasClass(mt,"mce-preview-object"),Ze=(mt,bn)=>{if(BO(mt)){const On=mt.touches[0];return at(mt.target)&&!Ox(On.clientX,On.clientY,bn)}else return at(mt.target)&&!Ox(mt.clientX,mt.clientY,bn)},Et=mt=>{const bn=mt.target;Ze(mt,n.selection.getRng())&&!mt.isDefaultPrevented()&&n.selection.select(bn)},_t=mt=>o.hasClass(mt,"mce-preview-object")&&Oe(mt.firstElementChild)?[mt,mt.firstElementChild]:o.is(mt,"figure.image")?[mt.querySelector("img")]:[mt],Ht=mt=>{const bn=US(n);return!bn||mt.getAttribute("data-mce-resize")==="false"||mt===n.getBody()?!1:o.hasClass(mt,"mce-preview-object")&&Oe(mt.firstElementChild)?vl(de.fromDom(mt.firstElementChild),bn):vl(de.fromDom(mt),bn)},mn=mt=>ze(mt)?o.create("img",{src:co.transparentSrc}):mt.cloneNode(!0),gn=(mt,bn,On)=>{if(Oe(On)){const fo=_t(mt);Ge(fo,ds=>{ds.style[bn]||!n.schema.isValid(ds.nodeName.toLowerCase(),bn)?o.setStyle(ds,bn,On):o.setAttrib(ds,bn,""+On)})}},uo=(mt,bn,On)=>{gn(mt,"width",bn),gn(mt,"height",On)},yo=mt=>{let bn,On,fo,ds,En;bn=mt.screenX-M,On=mt.screenY-H,Ee=bn*k[2]+X,De=On*k[3]+oe,Ee=Ee<5?5:Ee,De=De<5?5:De,(at(m)||ze(m))&&I_(n)!==!1?fo=!Ft.modifierPressed(mt):fo=Ft.modifierPressed(mt),fo&&($x(bn)>$x(On)?(De=Qp(Ee*ye),Ee=Qp(De/ye)):(Ee=Qp(De/ye),De=Qp(Ee*ye))),uo(b,Ee,De),ds=k.startPos.x+bn,En=k.startPos.y+On,ds=ds>0?ds:0,En=En>0?En:0,o.setStyles(w,{left:ds,top:En,display:"block"}),w.innerHTML=Ee+" &times; "+De,k[2]<0&&b.clientWidth<=Ee&&o.setStyle(b,"left",Q+(X-Ee)),k[3]<0&&b.clientHeight<=De&&o.setStyle(b,"top",se+(oe-De)),bn=u.scrollWidth-tt,On=u.scrollHeight-Gt,bn+On!==0&&o.setStyles(w,{left:ds-bn,top:En-On}),xe||(Ax(n,m,X,oe,"corner-"+k.name),xe=!0)},Io=()=>{const mt=xe;xe=!1,mt&&(gn(m,"width",Ee),gn(m,"height",De)),o.unbind(r,"mousemove",yo),o.unbind(r,"mouseup",Io),l!==r&&(o.unbind(l,"mousemove",yo),o.unbind(l,"mouseup",Io)),o.remove(b),o.remove(w),o.remove(B),Ia(m),mt&&(Rx(n,m,Ee,De,"corner-"+k.name),o.setAttrib(m,"style",o.getAttrib(m,"style"))),n.nodeChanged()},Ia=mt=>{ao();const bn=o.getPos(mt,u),On=bn.x,fo=bn.y,ds=mt.getBoundingClientRect(),En=ds.width||ds.right-ds.left,lo=ds.height||ds.bottom-ds.top;m!==mt&&(vt(),m=mt,Ee=De=0);const Us=n.dispatch("ObjectSelected",{target:mt});Ht(mt)&&!Us.isDefaultPrevented()?xt(e1,(Go,Is)=>{const ws=mr=>{const Fa=_t(m)[0];M=mr.screenX,H=mr.screenY,X=Fa.clientWidth,oe=Fa.clientHeight,ye=oe/X,k=Go,k.name=Is,k.startPos={x:En*Go[0]+On,y:lo*Go[1]+fo},tt=u.scrollWidth,Gt=u.scrollHeight,B=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(B,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=mn(m),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:On,top:fo,margin:0}),uo(b,En,lo),b.removeAttribute(Rm),u.appendChild(b),o.bind(r,"mousemove",yo),o.bind(r,"mouseup",Io),l!==r&&(o.bind(l,"mousemove",yo),o.bind(l,"mouseup",Io)),w=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},X+" &times; "+oe)};let ts=o.get("mceResizeHandle"+Is);ts&&o.remove(ts),ts=o.add(u,"div",{id:"mceResizeHandle"+Is,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Is+"-resize; margin:0; padding:0"}),o.bind(ts,"mousedown",mr=>{mr.stopImmediatePropagation(),mr.preventDefault(),ws(mr)}),Go.elm=ts,o.setStyles(ts,{left:En*Go[0]+On-ts.offsetWidth/2,top:lo*Go[1]+fo-ts.offsetHeight/2})}):vt(!1)},Fr=ld(Ia,0),vt=(mt=!0)=>{Fr.cancel(),ao(),m&&mt&&m.removeAttribute(Rm),xt(e1,(bn,On)=>{const fo=o.get("mceResizeHandle"+On);fo&&(o.unbind(fo),o.remove(fo))})},Wt=(mt,bn)=>o.isChildOf(mt,bn),ho=mt=>{if(xe||n.removed||n.composing)return;const bn=mt.type==="mousedown"?mt.target:e.getNode(),On=bl(de.fromDom(bn),Qn).map(ds=>ds.dom).filter(ds=>o.isEditable(ds.parentElement)).getOrUndefined(),fo=Oe(On)?o.getAttrib(On,Rm,"1"):"1";if(Ge(o.select(`img[${Rm}],hr[${Rm}]`),ds=>{ds.removeAttribute(Rm)}),Oe(On)&&Wt(On,u)&&n.hasFocus()){Kt();const ds=e.getStart(!0);if(Wt(ds,On)&&Wt(e.getEnd(!0),On)){o.setAttrib(On,Rm,fo),Fr.throttle(On);return}}vt()},ao=()=>{xt(e1,mt=>{mt.elm&&(o.unbind(mt.elm),delete mt.elm)})},Kt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Kt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ho),n.on("keyup compositionend",mt=>{m&&m.nodeName==="TABLE"&&ho(mt)}),n.on("hide blur",vt),n.on("contextmenu longpress",Et,!0)}),n.on("remove",ao),{isResizable:Ht,showResizeRect:Ia,hideResizeRect:vt,updateResizeRect:ho,destroy:()=>{Fr.cancel(),m=b=B=null}}},LC=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},$O=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Nx=(e,n,o)=>{const r=e.document.createRange();return LC(r,n),$O(r,o),r},HC=(e,n,o,r,l)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,l),u},Dm=Wc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Nb=(e,n,o)=>n(de.fromDom(o.startContainer),o.startOffset,de.fromDom(o.endContainer),o.endOffset),Ix=(e,n)=>n.match({domRange:o=>({ltr:we(o),rtl:z.none}),relative:(o,r)=>({ltr:au(()=>Nx(e,o,r)),rtl:au(()=>z.some(Nx(e,r,o)))}),exact:(o,r,l,u)=>({ltr:au(()=>HC(e,o,r,l,u)),rtl:au(()=>z.some(HC(e,l,u,o,r)))})}),QD=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(l=>l.collapsed===!1).map(l=>Dm.rtl(de.fromDom(l.endContainer),l.endOffset,de.fromDom(l.startContainer),l.startOffset)).getOrThunk(()=>Nb(e,Dm.ltr,o)):Nb(e,Dm.ltr,o)},Fx=(e,n)=>{const o=Ix(e,n);return QD(e,o)};Dm.ltr,Dm.rtl;const Lx={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},PO=(e,n,o)=>{var r,l;return z.from((l=(r=e.dom).caretPositionFromPoint)===null||l===void 0?void 0:l.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return z.none();const m=e.dom.createRange();return m.setStart(u.offsetNode,u.offset),m.collapse(),z.some(m)})},eM=(e,n,o)=>{var r,l;return z.from((l=(r=e.dom).caretRangeFromPoint)===null||l===void 0?void 0:l.call(r,n,o))},un=(()=>document.caretPositionFromPoint?PO:document.caretRangeFromPoint?eM:z.none)(),NO=(e,n,o)=>{const r=de.fromDom(e.document);return un(r,n,o).map(l=>Lx.create(de.fromDom(l.startContainer),l.startOffset,de.fromDom(l.endContainer),l.endOffset))},Hx=Wc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),IO=(e,n,o,r)=>e.fold(n,o,r),t1=e=>e.fold(Qe,Qe,Qe),tM=Hx.before,Ib=Hx.on,FO=Hx.after,wd={before:tM,on:Ib,after:FO,cata:IO,getStart:t1},lh=Wc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),LO=e=>lh.exact(e.start,e.soffset,e.finish,e.foffset),zC=e=>e.match({domRange:n=>de.fromDom(n.startContainer),relative:(n,o)=>wd.getStart(n),exact:(n,o,r,l)=>n}),VC=lh.domRange,UC=lh.relative,WC=lh.exact,HO=e=>{const n=zC(e);return dg(n)},zO=Lx.create,Sd={domRange:VC,relative:UC,exact:WC,exactFromRange:LO,getWin:HO,range:zO},n1=(e,n)=>{const o=gs(e);return o==="input"?wd.after(e):dn(["br","img"],o)?n===0?wd.before(e):wd.after(e):wd.on(e,n)},VO=(e,n)=>{const o=e.fold(wd.before,n1,wd.after),r=n.fold(wd.before,n1,wd.after);return Sd.relative(o,r)},go=(e,n,o,r)=>{const l=n1(e,n),u=n1(o,r);return Sd.relative(l,u)},UO=e=>e.match({domRange:n=>{const o=de.fromDom(n.startContainer),r=de.fromDom(n.endContainer);return go(o,n.startOffset,r,n.endOffset)},relative:VO,exact:go}),mc=(e,n)=>{const r=(n||document).createDocumentFragment();return Ge(e,l=>{r.appendChild(l.dom)}),de.fromDom(r)},qc=e=>{const n=Sd.getWin(e).dom,o=(l,u,m,b)=>HC(n,l,u,m,b),r=UO(e);return Fx(n,r).match({ltr:o,rtl:o})},Fb=(e,n,o)=>NO(e,n,o),El=(e,n,o)=>{const r=dg(de.fromDom(o));return Fb(r.dom,e,n).map(l=>{const u=o.createRange();return u.setStart(l.start.dom,l.soffset),u.setEnd(l.finish.dom,l.foffset),u}).getOrUndefined()},ih=(e,n)=>Oe(e)&&Oe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,o1=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},s1=(e,n,o)=>o1(e,n,o)!==null,ch=(e,n,o)=>s1(e,n,r=>r.nodeName===o),nM=(e,n)=>Mi(e)&&!s1(e,n,Ni),zx=(e,n,o)=>{const r=n.parentNode;if(r){const l=new lr(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=l[o?"prev":"next"]();)if(bs(u))return!0}return!1},oM=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},sM=(e,n)=>{let o=n;for(;o&&o!==e;){if(Eo(o))return!0;o=o.parentNode}return!1},no=(e,n,o,r,l)=>{const u=e.getRoot(),m=e.schema.getNonEmptyElements(),b=l.parentNode;let w,k;if(!b)return z.none();const B=e.getParent(b,e.isBlock)||u;if(r&&bs(l)&&n&&e.isEmpty(B))return z.some(He(b,e.nodeIndex(l)));const M=new lr(l,B);for(;k=M[r?"prev":"next"]();){if(e.getContentEditableParent(k)==="false"||nM(k,u))return z.none();if(ut(k)&&k.data.length>0)return ch(k,u,"A")?z.none():z.some(He(k,r?k.data.length:0));if(e.isBlock(k)||m[k.nodeName.toLowerCase()])return z.none();w=k}return si(w)?z.none():o&&w?z.some(He(w,0)):z.none()},Li=(e,n,o,r)=>{const l=e.getRoot();let u,m=!1,b=o?r.startContainer:r.endContainer,w=o?r.startOffset:r.endOffset;const k=Bt(b)&&w===b.childNodes.length,B=e.schema.getNonEmptyElements();let M=o;if(Mi(b))return z.none();if(Bt(b)&&w>b.childNodes.length-1&&(M=!1),pg(b)&&(b=l,w=0),b===l){if(M&&(u=b.childNodes[w>0?w-1:0],u&&(Mi(u)||B[u.nodeName]||Os(u))))return z.none();if(b.hasChildNodes()){if(w=Math.min(!M&&w>0?w-1:w,b.childNodes.length-1),b=b.childNodes[w],w=ut(b)&&k?b.data.length:0,!n&&b===l.lastChild&&Os(b)||sM(l,b)||Mi(b))return z.none();if(b.hasChildNodes()&&!Os(b)){u=b;const H=new lr(b,l);do{if(Eo(u)||Mi(u)){m=!1;break}if(ut(u)&&u.data.length>0){w=M?0:u.data.length,b=u,m=!0;break}if(B[u.nodeName.toLowerCase()]&&!vg(u)){w=e.nodeIndex(u),b=u.parentNode,M||w++,m=!0;break}}while(u=M?H.next():H.prev())}}}return n&&(ut(b)&&w===0&&no(e,k,n,!0,b).each(H=>{b=H.container(),w=H.offset(),m=!0}),Bt(b)&&(u=b.childNodes[w],u||(u=b.childNodes[w-1]),u&&bs(u)&&!oM(u,"A")&&!zx(e,u,!1)&&!zx(e,u,!0)&&no(e,k,n,!0,u).each(H=>{b=H.container(),w=H.offset(),m=!0}))),M&&!n&&ut(b)&&w===b.data.length&&no(e,k,n,!1,b).each(H=>{b=H.container(),w=H.offset(),m=!0}),m&&b?z.some(He(b,w)):z.none()},xd=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),l=He.fromRangeStart(n);return Li(e,o,!0,r).each(u=>{(!o||!He.isAbove(l,u))&&r.setStart(u.container(),u.offset())}),o||Li(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),ih(n,r)?z.none():z.some(r)},Lb=(e,n)=>e.splitText(n),Tf=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,l=e.endOffset;if(n===r&&ut(n)){if(o>0&&o<n.data.length)if(r=Lb(n,o),n=r.previousSibling,l>o){l=l-o;const u=Lb(r,l).previousSibling;n=r=u,l=u.data.length,o=0}else l=0}else if(ut(n)&&o>0&&o<n.data.length&&(n=Lb(n,o),o=0),ut(r)&&l>0&&l<r.data.length){const u=Lb(r,l).previousSibling;r=u,l=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:l}},jn=e=>({walk:(u,m)=>xf(e,u,m),split:Tf,expand:(u,m={type:"word"})=>{if(m.type==="word"){const b=_m(e,u,[{inline:"span"}]),w=e.createRng();return w.setStart(b.startContainer,b.startOffset),w.setEnd(b.endContainer,b.endOffset),w}return u},normalize:u=>xd(e,u).fold(Pe,m=>(u.setStart(m.startContainer,m.startOffset),u.setEnd(m.endContainer,m.endOffset),!0))});jn.compareRanges=ih,jn.getCaretRangeFromPoint=El,jn.getSelectedNode=As,jn.getNode=ba;const Ux=((e,n)=>{const o=(b,w)=>{if(!Nt(w)&&!w.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+w);const k=b.dom;qu(k)&&(k.style[e]=w+"px")},r=b=>{const w=n(b);if(w<=0||w===null){const k=Ur(b,e);return parseFloat(k)||0}return w},l=r,u=(b,w)=>Vo(w,(k,B)=>{const M=Ur(b,B),H=M===void 0?0:parseInt(M,10);return isNaN(H)?k:k+H},0);return{set:o,get:r,getOuter:l,aggregate:u,max:(b,w,k)=>{const B=u(b,k);return w>B?w-B:0}}})("height",e=>{const n=e.dom;return Gf(e)?n.getBoundingClientRect().height:n.offsetHeight}),ZC=e=>Ux.get(e),Wx=()=>de.fromDom(document),Mm=(e,n)=>e.view(n).fold(we([]),r=>{const l=e.owner(r),u=Mm(e,l);return[r].concat(u)}),Bm=(e,n)=>{const o=n.owner(e);return Mm(n,o)};var f=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?z.none():z.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(de.fromDom)},owner:e=>Ku(e)});const p=e=>{const n=Wx(),o=Nc(n),r=Bm(e,f),l=ay(e),u=_l(r,(m,b)=>{const w=ay(b);return{left:m.left+w.left,top:m.top+w.top}},{left:0,top:0});return qf(u.left+l.left+o.left,u.top+l.top+o.top)},y=e=>gs(e)==="textarea",E=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),A=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},N=(e,n)=>{const o=Qr(e);if(o.length===0||y(e))return{element:e,offset:n};if(n<o.length&&!y(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return y(r)?{element:e,offset:n}:gs(r)==="img"?{element:r,offset:1}:ja(r)?{element:r,offset:hv(r).length}:{element:r,offset:Qr(r).length}}},G=(e,n)=>{const o=Yu(e),r=ZC(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},ee=(e,n)=>{const o=N(e,n),r=de.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+pa+"</span>");return Nl(o.element,r),G(r,()=>Ro(r))},ge=e=>G(de.fromDom(e),ot),ke=(e,n,o,r)=>{Ke(e,(l,u)=>Dt(e,n,o,r),o)},st=(e,n,o,r,l)=>{const u={elm:r.element.dom,alignToTop:l};if(E(e,u))return;const m=Nc(n).top;o(n,m,r,l),A(e,u)},Dt=(e,n,o,r)=>{const l=de.fromDom(e.getBody()),u=de.fromDom(e.getDoc());Bs(l);const m=ee(de.fromDom(o.startContainer),o.startOffset);st(e,u,n,m,r),m.cleanup()},Tt=(e,n,o,r)=>{const l=de.fromDom(e.getDoc());st(e,l,o,ge(n),r)},Ke=(e,n,o)=>{const r=o.startContainer,l=o.startOffset,u=o.endContainer,m=o.endOffset;n(de.fromDom(r),de.fromDom(u));const b=e.dom.createRng();b.setStart(r,l),b.setEnd(u,m),e.selection.setRng(o)},Ot=(e,n)=>e.element.dom.scrollIntoView({block:n?"start":"end"}),je=(e,n,o,r)=>{const l=n+e,u=o.pos.top,m=o.bottom,b=m-u>=n;u<e?Ot(o,r!==!1):u>l?Ot(o,b?r!==!1:r===!0):m>l&&!b&&Ot(o,r===!0)},Vt=(e,n,o,r)=>{const l=dg(e).dom.innerHeight;je(n,l,o,r)},vn=(e,n,o,r)=>{const l=dg(e).dom.innerHeight;je(n,l,o,r);const u=p(o.element),m=ly(window);u.top<m.y?Yf(o.element,r!==!1):u.top>m.bottom&&Yf(o.element,r===!0)},Nn=(e,n,o)=>ke(e,Vt,n,o),Qo=(e,n,o)=>Tt(e,n,Vt,o),Gr=(e,n,o)=>ke(e,vn,n,o),Vs=(e,n,o)=>Tt(e,n,vn,o),Zl=(e,n,o)=>{(e.inline?Qo:Vs)(e,n,o)},Yc=(e,n,o)=>{(e.inline?Nn:Gr)(e,n,o)},r1=e=>e.dom.focus(),Hb=e=>{const n=du(e).dom;return e.dom===n.activeElement},uh=(e=Wx())=>z.from(e.dom.activeElement).map(de.fromDom),Mo=e=>uh(du(e)).filter(n=>e.dom.contains(n.dom)),Pa=(e,n)=>{const o=ja(n)?hv(n).length:Qr(n).length+1;return e>o?o:e<0?0:e},nl=e=>Sd.range(e.start,Pa(e.soffset,e.start),e.finish,Pa(e.foffset,e.finish)),Hi=(e,n)=>!rn(n.dom)&&($c(e,n)||Ao(e,n)),fi=e=>n=>Hi(e,n.start)&&Hi(e,n.finish),dh=e=>e.inline||co.browser.isFirefox(),ol=e=>Sd.range(de.fromDom(e.startContainer),e.startOffset,de.fromDom(e.endContainer),e.endOffset),jC=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?z.none():z.from(n.getRangeAt(0))).map(ol)},a1=e=>{const n=dg(e);return jC(n.dom).filter(fi(e))},zi=(e,n)=>z.from(n).filter(fi(e)).map(nl),sa=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),z.some(n)}catch{return z.none()}},GC=e=>{const n=dh(e)?a1(de.fromDom(e.getBody())):z.none();e.bookmark=n.isSome()?n:e.bookmark},zb=e=>(e.bookmark?e.bookmark:z.none()).bind(o=>zi(de.fromDom(e.getBody()),o)).bind(sa),Zx=e=>{zb(e).each(n=>e.selection.setRng(n))},jx={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},KC=(e,n)=>(Nt(n)||(n=0),setTimeout(e,n)),ZO=(e,n)=>(Nt(n)||(n=0),setInterval(e,n)),sl={setEditorTimeout:(e,n,o)=>KC(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=ZO(()=>{e.removed?clearInterval(r):n()},o);return r}},aM=e=>e.type==="nodechange"&&e.selectionChange,lM=(e,n)=>{const o=()=>{n.throttle()};Po.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Po.DOM.unbind(document,"mouseup",o)})},Gx=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},v6=(e,n)=>{Gx(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{aM(o)||GC(e)})},b6=e=>{const n=ld(()=>{GC(e)},0);e.on("init",()=>{e.inline&&lM(e,n),v6(e,n)}),e.on("remove",()=>{n.cancel()})};let fh;const jO=Po.DOM,iM=e=>Bt(e)&&jx.isEditorUIElement(e),Kx=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},qC=(e,n)=>{const o=L_(e);return jO.getParent(n,l=>iM(l)||(o?e.dom.is(l,o):!1))!==null},GO=e=>{try{const n=du(de.fromDom(e.getElement()));return uh(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},y6=(e,n)=>{const o=n.editor;b6(o);const r=(l,u)=>{if(eO(l)&&l.inline!==!0){const m=de.fromDom(l.getContainer());u(m,"tox-edit-focus")}};o.on("focusin",()=>{const l=e.focusedEditor;Kx(GO(o))&&r(o,Zf),l!==o&&(l&&l.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:l}),o.focus(!0))}),o.on("focusout",()=>{sl.setEditorTimeout(o,()=>{const l=e.focusedEditor;(!Kx(GO(o))||l!==o)&&r(o,jf),!qC(o,GO(o))&&l===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),fh||(fh=l=>{const u=e.activeEditor;u&&cv(l).each(m=>{const b=m;b.ownerDocument===document&&b!==document.body&&!qC(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},jO.bind(document,"focusin",fh))},C6=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&fh&&(jO.unbind(document,"focusin",fh),fh=null)},w6=e=>{e.on("AddEditor",Fe(y6,e)),e.on("RemoveEditor",Fe(C6,e))},qx=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),cM=e=>e.collapsed?z.from(ba(e.startContainer,e.startOffset)).map(de.fromDom):z.none(),uM=(e,n)=>cM(n).bind(o=>ta(o)?z.some(o):$c(e,o)?z.none():z.some(e)),KO=(e,n)=>{uM(de.fromDom(e.getBody()),n).bind(o=>kr(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},Yx=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},S6=e=>Hb(e)||Mo(e).isSome(),x6=e=>Oe(e.iframeElement)&&Hb(de.fromDom(e.iframeElement)),E6=e=>{const n=e.getBody();return n&&S6(de.fromDom(n))},k6=e=>{const n=du(de.fromDom(e.getElement()));return uh(n).filter(o=>!Kx(o.dom)&&qC(e,o.dom)).isSome()},l1=e=>e.inline?E6(e):x6(e),T6=e=>l1(e)||k6(e),_6=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Oe(e.bookmark)&&!l1(e)&&zb(e).each(u=>{e.selection.setRng(u),r=u});const l=qx(e,n.getNode());if(l&&e.dom.isChildOf(l,o)){Yx(l),KO(e,r),qO(e);return}e.inline||(co.browser.isOpera()||Yx(o),e.getWin().focus()),(co.browser.isFirefox()||e.inline)&&(Yx(o),KO(e,r)),qO(e)},qO=e=>e.editorManager.setActive(e),O6=(e,n)=>{e.removed||(n?qO(e):_6(e))},dM=(e,n,o,r,l)=>{const u=o?n.startContainer:n.endContainer,m=o?n.startOffset:n.endOffset;return z.from(u).map(de.fromDom).map(b=>!r||!n.collapsed?Xd(b,l(b,m)).getOr(b):b).bind(b=>rs(b)?z.some(b):ti(b).filter(rs)).map(b=>b.dom).getOr(e)},fM=(e,n,o=!1)=>dM(e,n,!0,o,(r,l)=>Math.min(Pl(r),l)),mM=(e,n,o=!1)=>dM(e,n,!1,o,(r,l)=>l>0?l-1:l),YC=(e,n)=>{const o=e;for(;e&&ut(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},gM=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const l=n.startOffset,u=n.endOffset;let m=n.commonAncestorContainer;n.collapsed||(o===r&&u-l<2&&o.hasChildNodes()&&(m=o.childNodes[l]),ut(o)&&ut(r)&&(o.length===l?o=YC(o.nextSibling,!0):o=o.parentNode,u===0?r=YC(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(m=o)));const b=ut(m)?m.parentNode:m;return Bt(b)?b:e},hM=(e,n,o,r)=>{const l=[],u=e.getRoot(),m=e.getParent(o||fM(u,n,n.collapsed),e.isBlock),b=e.getParent(r||mM(u,n,n.collapsed),e.isBlock);if(m&&m!==u&&l.push(m),m&&b&&m!==b){let w;const k=new lr(m,u);for(;(w=k.next())&&w!==b;)e.isBlock(w)&&l.push(w)}return b&&m!==b&&b!==u&&l.push(b),l},A6=(e,n,o)=>z.from(n).bind(r=>z.from(r.parentNode).map(l=>{const u=e.nodeIndex(r),m=e.createRng();return m.setStart(l,u),m.setEnd(l,u+1),o&&(Eb(e,m,r,!0),Eb(e,m,r,!1)),m})),YO=(e,n)=>pn(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),R6=e=>gs(e)==="img"?1:Ri(e).fold(()=>Qr(e).length,n=>n.length),D6=e=>Ri(e).filter(n=>n.trim().length!==0||n.indexOf(We)>-1).isSome(),M6=e=>uu(e)&&hl(e,"contenteditable")==="false",B6=["img","br"],XO=e=>D6(e)||dn(B6,gs(e))||M6(e),$6=e=>Ga(e,XO),pM=e=>vM(e,XO),vM=(e,n)=>{const o=r=>{const l=Qr(r);for(let u=l.length-1;u>=0;u--){const m=l[u];if(n(m))return z.some(m);const b=o(m);if(b.isSome())return b}return z.none()};return o(e)},bM="[data-mce-autocompleter]",P6=(e,n)=>{if(yM(de.fromDom(e.getBody())).isNone()){const o=de.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());ar(o,de.fromDom(n.extractContents())),n.insertNode(o.dom),ti(o).each(r=>r.dom.normalize()),pM(o).map(r=>{e.selection.setCursorLocation(r.dom,R6(r))})}},N6=e=>bl(e,bM),yM=e=>Kf(e,bM),I6=(e,n)=>yM(n).each(o=>{const r=e.selection.getBookmark();Pc(o),e.selection.moveToBookmark(r)}),F6={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Xx=(e,n,o)=>{const r=o?"lastChild":"firstChild",l=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[l];if(u)return u;for(let m=e.parent;m&&m!==n;m=m.parent)if(u=m[l],u)return u}},L6=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Bi(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},CM=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class mi{static create(n,o){const r=new mi(n,F6[n]||1);return o&&xt(o,(l,u)=>{r.attr(u,l)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!P(n))return Oe(n)&&xt(n,(u,m)=>{r.attr(m,u)}),r;const l=r.attributes;if(l){if(o!==void 0){if(o===null){if(n in l.map){delete l.map[n];let u=l.length;for(;u--;)if(l[u].name===n)return l.splice(u,1),r}return r}if(n in l.map){let u=l.length;for(;u--;)if(l[u].name===n){l[u].value=o;break}}else l.push({name:n,value:o});return l.map[n]=o,r}return l.map[n]}}clone(){const n=this,o=new mi(n.name,n.type),r=n.attributes;if(r){const l=[];l.map={};for(let u=0,m=r.length;u<m;u++){const b=r[u];b.name!=="id"&&(l[l.length]={name:b.name,value:b.value},l.map[b.name]=b.value)}o.attributes=l}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,l=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):l&&(l.next=r),o.lastChild===n?(o.lastChild=l,l&&(l.next=null)):r&&(r.prev=l),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const l=o.parent||this;return r?(o===l.firstChild?l.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===l.lastChild?l.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=l,n}getAll(n){const o=this,r=[];for(let l=o.firstChild;l;l=Xx(l,o))l.name===n&&r.push(l);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let l=n.firstChild;l;l=Xx(l,n))o.push(l);let r=o.length;for(;r--;){const l=o[r];l.parent=l.firstChild=l.lastChild=l.next=l.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var l;const u=this;let m=u.firstChild;if(CM(u))return!1;if(m)do{if(m.type===1){if(m.attr("data-mce-bogus"))continue;if(n[m.name]||CM(m))return!1}if(m.type===8||m.type===3&&!L6(m)||m.type===3&&m.parent&&o[m.parent.name]&&Bi((l=m.value)!==null&&l!==void 0?l:"")||r&&r(m))return!1}while(m=Xx(m,u));return!0}walk(n){return Xx(this,null,n)}}const H6=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),wM=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&H6(r,o)){const l=r.indexOf("[endif]",o);return r.indexOf(">",l)}else if(n){const l=r.indexOf(">",o);return l!==-1?l:r.length}else{const l=/--!?>/g;l.lastIndex=o;const u=l.exec(e);return u?u.index+u[0].length:r.length}},z6=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,l=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let m=1,b=o;for(;m!==0;)for(r.lastIndex=b;;){const w=r.exec(n);if(w===null)return b;if(w[1]==="!"){or(w[2],"--")?b=wM(n,!1,w.index+3):b=wM(n,!0,w.index+1);break}else{l.lastIndex=r.lastIndex;const k=l.exec(n);if(K(k)||k.index!==r.lastIndex)continue;w[1]==="/"?m-=1:Cn(u,w[2])||(m+=1),b=r.lastIndex+k[0].length;break}}return b},V6=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},SM=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let l=V6(e.getTempAttrs(),n);const u=r.getVoidElements();let m;for(;m=o.exec(l);){const b=o.lastIndex,w=m[0].length;let k;u[m[1]]?k=b:k=z6(r,l,b),l=l.substring(0,b-w)+l.substring(k),o.lastIndex=b-w}return Qu(l)},U6=SM,xM=e=>{const n=fa(e,"[data-mce-bogus]");Ge(n,o=>{hl(o,"data-mce-bogus")==="all"?Ro(o):ha(o)?(Nl(o,de.fromText(Xu)),Ro(o)):Pc(o)})},EM=e=>{const n=fa(e,"input");Ge(n,o=>{rr(o,"name")})},W6=(e,n)=>{const o=Ps(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},nn=(e,n)=>{const o=e.getDoc(),r=du(de.fromDom(e.getBody())),l=de.fromTag("div",o);sr(l,"data-mce-bogus","all"),uv(l,{position:"fixed",left:"-9999999px",top:"0"}),Yn(l,n.innerHTML),xM(l),EM(l);const u=h6(r);ar(u,l);const m=Qu(l.dom.innerText);return Ro(l),m},kM=(e,n,o)=>{let r;return n.format==="raw"?r=et.trim(U6(e.serializer,o.innerHTML)):n.format==="text"?r=nn(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=W6(e,e.serializer.serialize(o,n)),n.format!=="text"&&!bv(de.fromDom(o))&&P(r)?et.trim(r):r},TM=(e,n)=>z.from(e.getBody()).fold(we(n.format==="tree"?new mi("body",11):""),o=>kM(e,n,o)),_M=et.makeMap,Jx=e=>{const n=[];e=e||{};const o=e.indent,r=_M(e.indent_before||""),l=_M(e.indent_after||""),u=sd.getEncodeFunc(e.entity_encoding||"raw",e.entities),m=e.element_format!=="xhtml";return{start:(b,w,k)=>{if(o&&r[b]&&n.length>0){const B=n[n.length-1];B.length>0&&B!==`
`&&n.push(`
`)}if(n.push("<",b),w)for(let B=0,M=w.length;B<M;B++){const H=w[B];n.push(" ",H.name,'="',u(H.value,!0),'"')}if(!k||m?n[n.length]=">":n[n.length]=" />",k&&o&&l[b]&&n.length>0){const B=n[n.length-1];B.length>0&&B!==`
`&&n.push(`
`)}},end:b=>{let w;n.push("</",b,">"),o&&l[b]&&n.length>0&&(w=n[n.length-1],w.length>0&&w!==`
`&&n.push(`
`))},text:(b,w)=>{b.length>0&&(n[n.length]=w?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,w)=>{w?n.push("<?",b," ",u(w),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},mh=(e={},n=zc())=>{const o=Jx(e);return e.validate="validate"in e?e.validate:!0,{serialize:l=>{const u=e.validate,m={3:w=>{var k;o.text((k=w.value)!==null&&k!==void 0?k:"",w.raw)},8:w=>{var k;o.comment((k=w.value)!==null&&k!==void 0?k:"")},7:w=>{o.pi(w.name,w.value)},10:w=>{var k;o.doctype((k=w.value)!==null&&k!==void 0?k:"")},4:w=>{var k;o.cdata((k=w.value)!==null&&k!==void 0?k:"")},11:w=>{let k=w;if(k=k.firstChild)do b(k);while(k=k.next)}};o.reset();const b=w=>{var k;const B=m[w.type];if(B)B(w);else{const M=w.name,H=M in n.getVoidElements();let Q=w.attributes;if(u&&Q&&Q.length>1){const se=[];se.map={};const X=n.getElementRule(w.name);if(X){for(let oe=0,ye=X.attributesOrder.length;oe<ye;oe++){const xe=X.attributesOrder[oe];if(xe in Q.map){const Ee=Q.map[xe];se.map[xe]=Ee,se.push({name:xe,value:Ee})}}for(let oe=0,ye=Q.length;oe<ye;oe++){const xe=Q[oe].name;if(!(xe in se.map)){const Ee=Q.map[xe];se.map[xe]=Ee,se.push({name:xe,value:Ee})}}Q=se}}if(o.start(M,Q,H),!H){let se=w.firstChild;if(se){(M==="pre"||M==="textarea")&&se.type===3&&((k=se.value)===null||k===void 0?void 0:k[0])===`
`&&o.text(`
`,!0);do b(se);while(se=se.next)}o.end(M)}}};return l.type===1&&!e.inner?b(l):l.type===3?m[3](l):m[11](l),o.getContent()}}},OM=new Set;Ge(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{OM.add(n)});const AM=["font","text-decoration","text-emphasis"],JO=(e,n)=>Uo(e.parseStyle(e.getAttrib(n,"style"))),Z6=e=>OM.has(e),Qx=(e,n)=>ks(JO(e,n),o=>!Z6(o)),RM=e=>Qt(e,n=>$o(AM,o=>or(n,o))),qG=(e,n,o)=>{const r=JO(e,n),l=JO(e,o),u=m=>{var b,w;const k=(b=e.getStyle(n,m))!==null&&b!==void 0?b:"",B=(w=e.getStyle(o,m))!==null&&w!==void 0?w:"";return Oo(k)&&Oo(B)&&k!==B};return $o(r,m=>{const b=w=>$o(w,k=>k===m);if(!b(l)&&b(AM)){const w=RM(l);return $o(w,u)}else return u(m)})},DM=(e,n,o)=>z.from(o.container()).filter(ut).exists(r=>{const l=e?0:-1;return n(r.data.charAt(o.offset()+l))}),wn=Fe(DM,!0,Qg),QO=Fe(DM,!1,Qg),Bn=e=>{const n=e.container();return ut(n)&&(n.data.length===0||yv(n.data)&&Om.isBookmarkNode(n.parentNode))},$m=(e,n)=>o=>Wg(e?0:-1,o).filter(n).isSome(),j6=e=>eS(e)&&Ur(de.fromDom(e),"display")==="block",G6=e=>Eo(e)&&!gv(e),K6=$m(!0,j6),YG=$m(!1,j6),eE=$m(!0,er),XC=$m(!1,er),MM=$m(!0,Os),fn=$m(!1,Os),gh=$m(!0,G6),hh=$m(!1,G6),q6=e=>e.slice(0,-1),JC=(e,n,o)=>$c(n,e)?q6(G0(e,r=>o(r)||Ao(r,n))):[],e4=(e,n)=>JC(e,n,Pe),Pm=(e,n)=>[e].concat(e4(e,n)),t4=(e,n,o)=>ym(e,n,o,Bn),BM=(e,n)=>ns(Pm(de.fromDom(n.container()),e),Gs),n4=(e,n,o)=>t4(e,n.dom,o).forall(r=>BM(n,o).fold(()=>!gd(r,o,n.dom),l=>!gd(r,o,n.dom)&&$c(l,de.fromDom(r.container())))),$M=(e,n,o)=>BM(n,o).fold(()=>t4(e,n.dom,o).forall(r=>!gd(r,o,n.dom)),r=>t4(e,r.dom,o).isNone()),PM=Fe($M,!1),Y6=Fe($M,!0),X6=Fe(n4,!1),J6=Fe(n4,!0),Q6=e=>Wp(e).exists(ha),tE=(e,n,o)=>{const r=Qt(Pm(de.fromDom(o.container()),n),Gs),l=en(r).getOr(n);return cc(e,l.dom,o).filter(Q6)},nE=(e,n)=>Wp(n).exists(ha)||tE(!0,e,n).isSome(),o4=(e,n)=>hd(n).exists(ha)||tE(!1,e,n).isSome(),Fn=Fe(tE,!1),NM=Fe(tE,!0),QC=e=>He.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),s4=(e,n)=>{const o=Qt(Pm(de.fromDom(n.container()),e),Gs);return en(o).getOr(e)},r4=(e,n)=>QC(n)?QO(n):QO(n)||oa(s4(e,n).dom,n).exists(QO),a4=(e,n)=>QC(n)?wn(n):wn(n)||Ca(s4(e,n).dom,n).exists(wn),IM=e=>dn(["pre","pre-wrap"],e),oE=e=>Wp(e).bind(n=>ki(n,rs)).exists(n=>IM(Ur(n,"white-space"))),e8=(e,n)=>oa(e.dom,n).isNone(),FM=(e,n)=>Ca(e.dom,n).isNone(),t8=(e,n)=>e8(e,n)||FM(e,n)||PM(e,n)||Y6(e,n)||o4(e,n)||nE(e,n),n8=e=>Oe(e)&&Eo(e)&&lx(e),LM=(e,n)=>o=>n8(new lr(o,e)[n]()),o8=(e,n)=>{const o=Ca(e.dom,n).getOr(n),r=LM(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},s8=(e,n)=>{const o=oa(e.dom,n).getOr(n),r=LM(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},HM=(e,n)=>oE(n)?!1:t8(e,n)||r4(e,n)||a4(e,n),e2=(e,n)=>oE(n)?!1:PM(e,n)||X6(e,n)||o4(e,n)||r4(e,n)||s8(e,n),r8=e=>{const n=e.container(),o=e.offset();return ut(n)&&o<n.data.length?He(n,o+1):e},i1=(e,n)=>oE(n)?!1:Y6(e,n)||J6(e,n)||nE(e,n)||a4(e,n)||o8(e,n),t2=(e,n)=>e2(e,n)||i1(e,r8(n)),zM=(e,n)=>Sm(e.charAt(n)),VM=(e,n)=>Qg(e.charAt(n)),a8=e=>{const n=e.container();return ut(n)&&Mr(n.data,We)},l8=e=>{const n=e.split("");return pn(n,(o,r)=>Sm(o)&&r>0&&r<n.length-1&&bC(n[r-1])&&bC(n[r+1])?" ":o).join("")},UM=(e,n,o)=>{const r=n.data,l=He(n,0);return!o&&zM(r,0)&&!t2(e,l)?(n.data=" "+r.slice(1),!0):o&&VM(r,0)&&e2(e,l)?(n.data=We+r.slice(1),!0):!1},i8=e=>{const n=e.data,o=l8(n);return o!==n?(e.data=o,!0):!1},WM=(e,n,o)=>{const r=n.data,l=He(n,r.length-1);return!o&&zM(r,r.length-1)&&!t2(e,l)?(n.data=r.slice(0,-1)+" ",!0):o&&VM(r,r.length-1)&&i1(e,l)?(n.data=r.slice(0,-1)+We,!0):!1},c8=(e,n)=>{const o=n.container();if(!ut(o))return z.none();if(a8(n)){const r=UM(e,o,!1)||i8(o)||WM(e,o,!1);return so(r,n)}else if(t2(e,n)){const r=UM(e,o,!0)||WM(e,o,!0);return so(r,n)}else return z.none()},ZM=e=>{const n=de.fromDom(e.getBody());e.selection.isCollapsed()&&c8(n,He.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},jM=(e,n,o)=>{if(o===0)return;const r=de.fromDom(e),l=us(r,Gs).getOr(r),u=e.data.slice(n,n+o),m=n+o>=e.data.length&&i1(l,He(e,e.data.length)),b=n===0&&e2(l,He(e,0));e.replaceData(n,o,$s(u,4,b,m))},sE=(e,n)=>{const o=e.data.slice(n),r=o.length-zf(o).length;jM(e,n,r)},Nm=(e,n)=>{const o=e.data.slice(0,n),r=o.length-jd(o).length;jM(e,n-r,r)},l4=(e,n,o,r=!0)=>{const l=jd(e.data).length,u=r?e:n,m=r?n:e;return r?u.appendData(m.data):u.insertData(0,m.data),Ro(de.fromDom(m)),o&&sE(u,l),u},GM=(e,n)=>{const o=e.container(),r=e.offset();return!He.isTextPosition(e)&&o===n.parentNode&&r>He.before(n).offset()},u8=(e,n)=>GM(n,e)?He(n.container(),n.offset()-1):n,d8=e=>ut(e)?He(e,0):He.before(e),KM=e=>ut(e)?He(e,e.data.length):He.after(e),i4=e=>Ll(e.previousSibling)?z.some(KM(e.previousSibling)):e.previousSibling?Wl(e.previousSibling):z.none(),c4=e=>Ll(e.nextSibling)?z.some(d8(e.nextSibling)):e.nextSibling?kr(e.nextSibling):z.none(),qM=(e,n)=>z.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>oa(e,He.before(o))).orThunk(()=>Ca(e,He.after(n))),jl=(e,n)=>Ca(e,He.after(n)).orThunk(()=>oa(e,He.before(n))),f8=(e,n)=>i4(n).orThunk(()=>c4(n)).orThunk(()=>qM(e,n)),m8=(e,n)=>c4(n).orThunk(()=>i4(n)).orThunk(()=>jl(e,n)),g8=(e,n,o)=>e?m8(n,o):f8(n,o),h8=(e,n,o)=>g8(e,n,o).map(Fe(u8,o)),YM=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},c1=e=>n=>n.dom===e,p8=(e,n)=>n&&Cn(e.schema.getBlockElements(),gs(n)),v8=e=>{if(ir(e)){const n=de.fromHtml('<br data-mce-bogus="1">');return Jd(e),ar(e,n),z.some(He.before(n.dom))}else return z.none()},Rs=(e,n,o)=>{const r=nc(e).filter(ja),l=fg(e).filter(ja);return Ro(e),Q1(r,l,n,(u,m,b)=>{const w=u.dom,k=m.dom,B=w.data.length;return l4(w,k,o),b.container()===k?He(w,B):b}).orThunk(()=>(o&&(r.each(u=>Nm(u.dom,u.dom.length)),l.each(u=>sE(u.dom,0))),n))},rE=(e,n)=>Cn(e.schema.getTextInlineElements(),gs(n)),Vb=(e,n,o,r=!0)=>{const l=h8(n,e.getBody(),o.dom),u=us(o,Fe(p8,e),c1(e.getBody())),m=Rs(o,l,rE(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(v8).fold(()=>{r&&YM(e,n,m)},b=>{r&&YM(e,n,z.some(b))})},wa=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ko=e=>wa.test(e),rl=(e,n)=>vl(de.fromDom(n),N_(e))&&!cf(e.schema,n)&&e.dom.isEditable(n),XM=e=>{var n;return Po.DOM.getStyle(e,"direction",!0)==="rtl"||ko((n=e.textContent)!==null&&n!==void 0?n:"")},JM=(e,n,o)=>Qt(Po.DOM.getParents(o.container(),"*",n),e),_f=(e,n,o)=>{const r=JM(e,n,o);return z.from(r[r.length-1])},u4=(e,n,o)=>{const r=Zc(n,e),l=Zc(o,e);return Oe(r)&&r===l},QM=e=>Cg(e)||Cv(e),gc=(e,n)=>{const o=n.container(),r=n.offset();return e?ed(o)?ut(o.nextSibling)?He(o.nextSibling,0):He.after(o):Cg(n)?He(o,r+1):n:ed(o)?ut(o.previousSibling)?He(o.previousSibling,o.previousSibling.data.length):He.before(o):Cv(n)?He(o,r-1):n},eB=Fe(gc,!0),tB=Fe(gc,!1),aE=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},nB=e=>{e.execCommand("delete")},hc=e=>aE(e,"Delete"),b8=e=>aE(e,"ForwardDelete"),y8=e=>n=>ua(ti(n),e,Ao),XG=e=>vv(e)||Il(e),Ub=(e,n)=>$c(e,n)?ki(n,XG,y8(e)):z.none(),d4=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},Wb=(e,n,o)=>vr(kr(o),Wl(o),(r,l)=>{const u=gc(!0,r),m=gc(!1,l),b=gc(!1,n);return e?Ca(o,b).exists(w=>w.isEqual(m)&&n.isEqual(u)):oa(o,b).exists(w=>w.isEqual(u)&&n.isEqual(m))}).getOr(!0),oB=e=>(Lw(e)?nc(e):oc(e)).bind(oB).orThunk(()=>z.some(e)),u1=(e,n,o,r=!0)=>{var l;n.deleteContents();const u=oB(o).getOr(o),m=de.fromDom((l=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&l!==void 0?l:o.dom);if(m.dom===e.getBody()?d4(e,r):ir(m)&&(sf(m),r&&e.selection.setCursorLocation(m.dom,0)),!Ao(o,m)){const b=ua(ti(m),o)?[]:Zw(m);Ge(b.concat(Qr(o)),w=>{!Ao(w,m)&&!$c(w,m)&&ir(w)&&Ro(w)})}},Xc=e=>n=>Ao(e,n),d1=e=>fa(e,"td,th"),es=(e,n)=>{const o=k=>eh(de.fromDom(k),n),r=o(e.startContainer),l=o(e.endContainer),u=r.isSome(),m=l.isSome(),b=vr(r,l,Ao).getOr(!1);return{startTable:r,endTable:l,isStartInTable:u,isEndInTable:m,isSameTable:b,isMultiTable:!b&&u&&m}},f1=(e,n)=>({start:e,end:n}),sB=(e,n,o)=>({rng:e,table:n,cells:o}),Zb=Wc.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),jb=(e,n)=>bl(de.fromDom(e),"td,th",n),lE=e=>!Ao(e.start,e.end),iE=(e,n)=>eh(e.start,n).bind(o=>eh(e.end,n).bind(r=>so(Ao(o,r),o))),f4=(e,n)=>!lE(e)&&iE(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),cE=(e,n)=>{const o=jb(e.startContainer,n),r=jb(e.endContainer,n);return vr(o,r,f1)},m4=e=>n=>eh(n,e).bind(o=>hn(d1(o)).map(r=>f1(n,r))),rB=e=>n=>eh(n,e).bind(o=>en(d1(o)).map(r=>f1(r,n))),uE=e=>n=>iE(n,e).map(o=>sB(n,o,d1(o))),g4=(e,n,o,r)=>{if(o.collapsed||!e.forall(lE))return z.none();if(n.isSameTable){const l=e.bind(uE(r));return z.some({start:l,end:l})}else{const l=jb(o.startContainer,r),u=jb(o.endContainer,r),m=l.bind(m4(r)).bind(uE(r)),b=u.bind(rB(r)).bind(uE(r));return z.some({start:m,end:b})}},h4=(e,n)=>Js(e,o=>Ao(o,n)),dE=e=>vr(h4(e.cells,e.rng.start),h4(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),Gb=(e,n,o)=>e.exists(r=>f4(r,o)&&bd(r.start,n)),p4=(e,n)=>{const{startTable:o,endTable:r}=n,l=e.cloneRange();return o.each(u=>l.setStartAfter(u.dom)),r.each(u=>l.setEndBefore(u.dom)),l},v4=(e,n,o,r)=>g4(e,n,o,r).bind(({start:l,end:u})=>l.or(u)).bind(l=>{const{isSameTable:u}=n,m=dE(l).getOr([]);if(u&&l.cells.length===m.length)return z.some(Zb.fullTable(l.table));if(m.length>0){if(u)return z.some(Zb.partialTable(m,z.none()));{const b=p4(o,n);return z.some(Zb.partialTable(m,z.some({...n,rng:b})))}}else return z.none()}),C8=(e,n,o,r)=>g4(e,n,o,r).bind(({start:l,end:u})=>{const m=l.bind(dE).getOr([]),b=u.bind(dE).getOr([]);if(m.length>0&&b.length>0){const w=p4(o,n);return z.some(Zb.multiTable(m,b,w))}else return z.none()}),w8=(e,n)=>{const o=Xc(e),r=cE(n,o),l=es(n,o);return Gb(r,n,o)?r.map(u=>Zb.singleCellTable(n,u.start)):l.isMultiTable?C8(r,l,n,o):v4(r,l,n,o)},b4=e=>Ge(e,n=>{rr(n,"contenteditable"),sf(n)}),aB=(e,n)=>z.from(e.dom.getParent(n,e.dom.isBlock)).map(de.fromDom),lB=(e,n,o)=>{o.each(r=>{n?Ro(r):(sf(r),e.selection.setCursorLocation(r.dom,0))})},Kb=(e,n,o,r)=>{const l=o.cloneRange();r?(l.setStart(o.startContainer,o.startOffset),l.setEndAfter(n.dom.lastChild)):(l.setStartBefore(n.dom.firstChild),l.setEnd(o.endContainer,o.endOffset)),fE(e,l,n,!1).each(u=>u())},y4=e=>{const n=Sf(e),o=de.fromDom(e.selection.getNode());ma(o.dom)&&ir(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&$o(n,r=>Ao(r,o))&&sr(o,"data-mce-selected","1")},C4=(e,n,o)=>z.some(()=>{const r=e.selection.getRng(),l=o.bind(({rng:u,isStartInTable:m})=>{const b=aB(e,m?u.endContainer:u.startContainer);u.deleteContents(),lB(e,m,b.filter(ir));const w=m?n[0]:n[n.length-1];return Kb(e,w,r,m),ir(w)?z.none():z.some(m?n.slice(1):n.slice(0,-1))}).getOr(n);b4(l),y4(e)}),iB=(e,n,o,r)=>z.some(()=>{const l=e.selection.getRng(),u=n[0],m=o[o.length-1];Kb(e,u,l,!0),Kb(e,m,l,!1);const b=ir(u)?n:n.slice(1),w=ir(m)?o:o.slice(0,-1);b4(b.concat(w)),r.deleteContents(),y4(e)}),fE=(e,n,o,r=!0)=>z.some(()=>{u1(e,n,o,r)}),cB=(e,n)=>z.some(()=>Vb(e,!1,n)),uB=(e,n,o)=>w8(n,o).bind(r=>r.fold(Fe(fE,e),Fe(cB,e),Fe(C4,e),Fe(iB,e))),dB=(e,n)=>n2(e,n),fB=(e,n,o,r)=>mE(n,r).fold(()=>uB(e,n,o),l=>dB(e,l)),mB=(e,n,o)=>{const r=de.fromDom(e.getBody()),l=e.selection.getRng();return o.length!==0?C4(e,o,z.none()):fB(e,r,l,n)},w4=(e,n)=>ns(Pm(n,e),Ls),mE=(e,n)=>ns(Pm(n,e),lg("caption")),gB=(e,n,o,r,l)=>fC(o,e.getBody(),l).bind(u=>w4(n,de.fromDom(u.getNode())).bind(m=>Ao(m,r)?z.none():z.some(ot))),n2=(e,n)=>z.some(()=>{sf(n),e.selection.setCursorLocation(n.dom,0)}),hB=(e,n,o,r)=>kr(e.dom).bind(l=>Wl(e.dom).map(u=>n?o.isEqual(l)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(l))).getOr(!0),pB=(e,n)=>n2(e,n),S4=(e,n,o)=>mE(e,de.fromDom(o.getNode())).fold(()=>z.some(ot),r=>so(!Ao(r,n),ot)),gE=(e,n,o,r,l)=>fC(o,e.getBody(),l).fold(()=>z.some(ot),u=>hB(r,o,l,u)?pB(e,r):S4(n,r,u)),vB=(e,n,o,r)=>{const l=He.fromRangeStart(e.selection.getRng());return w4(o,r).bind(u=>ir(u)?n2(e,u):gB(e,o,n,u,l))},bB=(e,n,o,r)=>{const l=He.fromRangeStart(e.selection.getRng());return ir(r)?n2(e,r):gE(e,o,n,r,l)},o2=(e,n)=>e?MM(n):fn(n),x4=(e,n)=>{const o=He.fromRangeStart(e.selection.getRng());return o2(n,o)||cc(n,e.getBody(),o).exists(r=>o2(n,r))},s2=(e,n,o)=>{const r=de.fromDom(e.getBody());return mE(r,o).fold(()=>vB(e,n,r,o).orThunk(()=>so(x4(e,n),ot)),l=>bB(e,n,r,l))},r2=(e,n)=>{const o=de.fromDom(e.selection.getStart(!0)),r=Sf(e);return e.selection.isCollapsed()&&r.length===0?s2(e,n,o):mB(e,o,r)},ph=(e,n)=>{let o=n;for(;o&&o!==e;){if(Do(o)||Eo(o))return o;o=o.parentNode}return null},qb=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],E4=et.each,a2=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,m)=>{if(u.nodeName!==m.nodeName||u.nodeType!==m.nodeType)return!1;const b=k=>{const B={};return E4(n.getAttribs(k),M=>{const H=M.nodeName.toLowerCase();H!=="style"&&!l(H)&&(B[H]=n.getAttrib(k,H))}),B},w=(k,B)=>{for(const M in k)if(Cn(k,M)){const H=B[M];if(pt(H)||k[M]!==H)return!1;delete B[M]}for(const M in B)if(Cn(B,M))return!1;return!0};return Bt(u)&&Bt(m)&&(!w(b(u),b(m))||!w(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(m,"style"))))?!1:!ui(u)&&!ui(m)},l=u=>$o(qb,m=>or(u,m))||o.has(u);return{compare:r,isAttributeInternal:l}},l2=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},Im=(e,n,o,r)=>{const l=o.name;for(let u=0,m=e.length;u<m;u++){const b=e[u];if(b.name===l){const w=r.nodes[l];w?w.nodes.push(o):r.nodes[l]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,m=n.length;u<m;u++){const b=n[u],w=b.name;if(w in o.attributes.map){const k=r.attributes[w];k?k.nodes.push(o):r.attributes[w]={filter:b,nodes:[o]}}}},yB=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&l2(o,l=>{Im(e,n,l,r)}),r},CB=(e,n)=>{const o=(r,l)=>{xt(r,u=>{const m=vo(u.nodes);Ge(u.filter.callbacks,b=>{for(let w=m.length-1;w>=0;w--){const k=m[w];(!(l?k.attr(u.filter.name)!==void 0:k.name===u.filter.name)||ft(k.parent))&&m.splice(w,1)}m.length>0&&b(m,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},k4=(e,n,o,r={})=>{const l=yB(e,n,o);CB(l,r)},hE=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new mi("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new mi("#text",3)).value=We},S8=e=>{var n;return x8(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===We},x8=(e,n)=>{const o=e==null?void 0:e.firstChild;return Oe(o)&&o===e.lastChild&&o.name===n},E8=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},m1=(e,n,o,r)=>r.isEmpty(n,o,l=>E8(e,l)),Ed=(e,n)=>Oe(e)&&(n(e)||e.name==="br"),T4=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return z.from(n)},Yb=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const l of r)o&&!n.isValidChild(o.name,l.name)&&Yb(l,n,o);e.unwrap()}},i2=(e,n,o,r=ot)=>{const l=n.getTextBlockElements(),u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),b=et.makeMap("tr,td,th,tbody,thead,tfoot,table"),w=new Set,k=B=>B!==o&&!b[B.name];for(let B=0;B<e.length;B++){const M=e[B];let H,Q,se;if(!M.parent||w.has(M))continue;if(l[M.name]&&M.parent.name==="li"){let oe=M.next;for(;oe&&l[oe.name];){oe.name="li",w.add(oe),M.parent.insert(oe,M.parent);oe=oe.next}M.unwrap();continue}const X=[M];for(H=M.parent;H&&!n.isValidChild(H.name,M.name)&&k(H);H=H.parent)X.push(H);if(H&&X.length>1)if(n.isValidChild(H.name,M.name)){X.reverse(),Q=X[0].clone(),r(Q);let oe=Q;for(let ye=0;ye<X.length-1;ye++){n.isValidChild(oe.name,X[ye].name)&&ye>0?(se=X[ye].clone(),r(se),oe.append(se)):se=oe;for(let xe=X[ye].firstChild;xe&&xe!==X[ye+1];){const Ee=xe.next;se.append(xe),xe=Ee}oe=se}m1(n,u,m,Q)?H.insert(M,X[0],!0):(H.insert(Q,X[0],!0),H.insert(M,Q)),H=X[0],(m1(n,u,m,H)||x8(H,"br"))&&H.empty().remove()}else Yb(M,n);else if(M.parent){if(M.name==="li"){let oe=M.prev;if(oe&&(oe.name==="ul"||oe.name==="ol")){oe.append(M);continue}if(oe=M.next,oe&&(oe.name==="ul"||oe.name==="ol")&&oe.firstChild){oe.insert(M,oe.firstChild,!0);continue}const ye=new mi("ul",1);r(ye),M.wrap(ye);continue}if(n.isValidChild(M.parent.name,"div")&&n.isValidChild("div",M.name)){const oe=new mi("div",1);r(oe),M.wrap(oe)}else Yb(M,n)}}},k8=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},_4=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&k8(o,"a")),T8=(e,n,o,r)=>{const l=document.createRange();return l.setStart(e,n),l.setEnd(o,r),l},wB=e=>{const n=He.fromRangeStart(e),o=He.fromRangeEnd(e),r=e.commonAncestorContainer;return cc(!1,r,o).map(l=>!gd(n,o,r)&&gd(n,l,r)?T8(n.container(),n.offset(),l.container(),l.offset()):e).getOr(e)},c2=e=>e.collapsed?e:wB(e),_8=e=>Oe(e.firstChild)&&e.firstChild===e.lastChild,SB=e=>e.name==="br"||e.value===We,O8=(e,n)=>e.getBlockElements()[n.name]&&_8(n)&&SB(n.firstChild),u2=(e,n)=>{const o=e.getNonEmptyElements();return Oe(n)&&(n.isEmpty(o)||O8(e,n))},xB=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),u2(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},A8=e=>{var n,o;const r=e.firstChild,l=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),l&&l.id==="mce_marker"&&((o=l.parentNode)===null||o===void 0||o.removeChild(l)),e},EB=(e,n,o)=>{const r=n.serialize(o),l=e.createFragment(r);return A8(l)},R8=e=>{var n;return Qt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},D8=e=>e.data===We||bs(e),M8=e=>Oe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&D8(e.firstChild),B8=e=>!e.firstChild||M8(e),$8=e=>e.length>0&&B8(e[e.length-1])?e.slice(0,-1):e,pE=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},P8=(e,n)=>!!pE(e,n),O4=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},g1=(e,n)=>{const o=He.before(e),l=jc(n).next(o);return l?l.toRange():null},kB=(e,n)=>{const o=He.after(e),l=jc(n).prev(o);return l?l.toRange():null},N8=(e,n,o,r)=>{const l=O4(e,r),u=e.parentNode;return u&&(u.insertBefore(l[0],e),et.each(n,m=>{u.insertBefore(m,e)}),u.insertBefore(l[1],e),u.removeChild(e)),kB(n[n.length-1],o)},vE=(e,n,o)=>{const r=e.parentNode;return r&&et.each(n,l=>{r.insertBefore(l,e)}),g1(e,o)},TB=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),kB(n[0],o)),_B=(e,n,o,r)=>{const l=EB(n,e,r),u=pE(n,o.startContainer),m=$8(R8(l.firstChild)),b=1,w=2,k=n.getRoot(),B=M=>{const H=He.fromRangeStart(o),Q=jc(n.getRoot()),se=M===b?Q.prev(H):Q.next(H),X=se==null?void 0:se.getNode();return X?pE(n,X)!==u:!0};return u?B(b)?vE(u,m,k):B(w)?TB(u,m,k,n):N8(u,m,k,o):null},I8=["pre"],OB=(e,n,o,r)=>{var l;const u=n.firstChild,m=n.lastChild,b=m.attr("data-mce-type")==="bookmark"?m.prev:m,w=u===b,k=dn(I8,u.name);if(w&&k){const B=u.attr("contenteditable")!=="false",M=((l=e.getParent(o,e.isBlock))===null||l===void 0?void 0:l.nodeName.toLowerCase())===u.name,H=z.from(ph(r,o)).forall(Do);return B&&M&&H}else return!1},A4=ma,h1=(e,n,o)=>{if(Oe(o)){const r=e.getParent(n.endContainer,A4);return o===r&&bd(de.fromDom(o),n)}else return!1},AB=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const l=o.firstChild,u=o.lastChild;!l||l===u&&l.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},RB=(e,n)=>{z.from(e.getParent(n,"td,th")).map(de.fromDom).each(n_)},DB=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const l=e.getBody(),u=a2(e);et.each(r.select("*[data-mce-fragment]"),m=>{if(Oe(o[m.nodeName.toLowerCase()])&&Qx(r,m)){for(let w=m.parentElement;Oe(w)&&w!==l&&!qG(r,m,w);w=w.parentElement)if(u.compare(w,m)){r.remove(m,!0);break}}})}},bE=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},MB=e=>{et.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},F8=e=>!!e.getAttribute("data-mce-fragment"),BB=(e,n)=>Oe(n)&&!e.schema.getVoidElements()[n.nodeName],L8=(e,n)=>{var o,r,l;let u;const m=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const w=ph(e.getBody(),n);if(w&&m.getContentEditable(w)==="false"){m.remove(n),b.select(w);return}let k=m.createRng();const B=n.previousSibling;if(ut(B)){k.setStart(B,(r=(o=B.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const Q=n.nextSibling;ut(Q)&&(B.appendData(Q.data),(l=Q.parentNode)===null||l===void 0||l.removeChild(Q))}else k.setStartBefore(n),k.setEndBefore(n);const M=Q=>{let se=He.fromRangeStart(Q);return se=jc(e.getBody()).next(se),se==null?void 0:se.toRange()},H=m.getParent(n,m.isBlock);m.remove(n),H&&m.isEmpty(H)&&(Jd(de.fromDom(H)),k.setStart(H,0),k.setEnd(H,0),!A4(H)&&!F8(H)&&(u=M(k))?(k=u,m.remove(H)):m.add(H,m.create("br",{"data-mce-bogus":"1"}))),b.setRng(k)},H8=e=>{const n=e.dom,o=c2(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,A4);h1(n,o,r)?fE(e,o,de.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&ut(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},yE=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return z.some(n);return z.none()},$B=e=>{Ge(vo(e.getBody().querySelectorAll("details")),n=>{const o=Qt(vo(n.children),r=>r.nodeName==="SUMMARY");o.length>1&&Ge(o.slice(1),r=>{const l=de.fromDom(r);jf(l,"mce-accordion-summary"),Hs(l,"p")})})},R4=(e,n,o)=>{var r,l;const u=e.selection,m=e.dom,b=e.parser,w=o.merge,k=mh({validate:!0},e.schema),B='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,B);let M=u.getRng();const H=M.startContainer,Q=e.getBody();H===Q&&u.isCollapsed()&&m.isBlock(Q.firstChild)&&BB(e,Q.firstChild)&&m.isEmpty(Q.firstChild)&&(M=m.createRng(),M.setStart(Q.firstChild,0),M.setEnd(Q.firstChild,0),u.setRng(M)),u.isCollapsed()||H8(e);const se=u.getNode(),X={context:se.nodeName.toLowerCase(),data:o.data,insert:!0},oe=b.parse(n,X);if(o.paste===!0&&xB(e.schema,oe)&&P8(m,se))return M=_B(k,m,u.getRng(),oe),M&&u.setRng(M),n;o.paste===!0&&OB(m,oe,se,e.getBody())&&((r=oe.firstChild)===null||r===void 0||r.unwrap()),bE(oe);let ye=oe.lastChild;if(ye&&ye.attr("id")==="mce_marker"){const xe=ye;for(ye=ye.prev;ye;ye=ye.walk(!0))if(ye.type===3||!m.isBlock(ye.name)){ye.parent&&e.schema.isValidChild(ye.parent.name,"span")&&ye.parent.insert(xe,ye,ye.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(se),!X.invalid)n=k.serialize(oe),AB(e,n,se);else{e.selection.setContent(B);let xe=u.getNode(),Ee;const De=e.getBody();for(pg(xe)?xe=Ee=De:Ee=xe;Ee&&Ee!==De;)xe=Ee,Ee=Ee.parentNode;n=xe===De?De.innerHTML:m.getOuterHTML(xe);const tt=b.parse(n),Gt=yE(tt),at=Gt.bind(T4).getOr(tt);Gt.each(_t=>_t.replace(oe));const ze=oe.children(),Ze=(l=oe.parent)!==null&&l!==void 0?l:tt;oe.unwrap();const Et=Qt(ze,_t=>_4(e.schema,_t,Ze));i2(Et,e.schema,at),k4(b.getNodeFilters(),b.getAttributeFilters(),tt),n=k.serialize(tt),xe===De?m.setHTML(De,n):m.setOuterHTML(xe,n)}return DB(e,w),L8(e,m.get("mce_marker")),MB(e.getBody()),RB(m,u.getStart()),$B(e),xv(e.schema,e.getBody(),u.getStart()),n},CE=e=>e instanceof mi,z8=e=>{l1(e)&&kr(e.getBody()).each(n=>{const o=n.getNode(),r=Os(o)?kr(o).getOr(n):n;e.selection.setRng(r.toRange())})},wE=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&z8(e)},D4=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const l='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+l+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+l+"</li>");const u=Ps(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=l,o=e.dom.createHTML(u,vf(e),o)):o||(o=l),wE(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=mh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const l=bv(de.fromDom(n))?o:et.trim(o);return wE(e,l,r.no_selection),{content:l,html:l}}},PB=(e,n,o,r)=>{k4(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const l=mh({validate:!1},e.schema).serialize(o),u=bv(de.fromDom(n))?l:et.trim(l);return wE(e,u,r.no_selection),{content:o,html:u}},V8=(e,n,o)=>z.from(e.getBody()).map(r=>CE(n)?PB(e,r,n,o):D4(e,r,n,o)).getOr({content:n,html:CE(o.content)?"":o.content}),U8=(e,n,o)=>us(e,n,o).isSome(),W8=(e,n)=>Y0(e,n).isSome(),d2=e=>re(e)?e:Pe,Fm=(e,n,o)=>{let r=e.dom;const l=d2(o);for(;r.parentNode;){r=r.parentNode;const u=de.fromDom(r),m=n(u);if(m.isSome())return m;if(l(u))break}return z.none()},M4=(e,n,o)=>{const r=n(e),l=d2(o);return r.orThunk(()=>l(e)?z.none():Fm(e,n,l))},f2=dr,Ks=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let l=0;l<r.length;l++){const u=r[l];if(di(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},m2=(e,n,o,r,l)=>{const u=e.dom.getRoot();if(n===u)return!1;const m=e.dom.getParent(n,b=>Ks(e,b,o)?!0:b.parentNode===u||!!kd(e,b,o,r,!0));return!!kd(e,m,o,r,l)},Xb=(e,n,o)=>Tr(o)&&f2(n,o.inline)||Kc(o)&&f2(n,o.block)?!0:di(o)?Bt(n)&&e.is(n,o.selector):!1,Of=(e,n,o,r,l,u)=>{const m=o[r],b=r==="attributes";if(re(o.onmatch))return o.onmatch(n,o,r);if(m){if(eg(m)){for(let w=0;w<m.length;w++)if(b?e.getAttrib(n,m[w]):zs(e,n,m[w]))return!0}else for(const w in m)if(Cn(m,w)){const k=b?e.getAttrib(n,w):zs(e,n,w),B=At(m[w],u),M=ft(k)||Al(k);if(M&&ft(B))continue;if(l&&M&&!o.exact||(!l||o.exact)&&!f2(k,oh(B,w)))return!1}}return!0},kd=(e,n,o,r,l)=>{const u=e.formatter.get(o),m=e.dom;if(u&&Bt(n))for(let b=0;b<u.length;b++){const w=u[b];if(Xb(e.dom,n,w)&&Of(m,n,w,"attributes",l,r)&&Of(m,n,w,"styles",l,r)){const k=w.classes;if(k){for(let B=0;B<k.length;B++)if(!e.dom.hasClass(n,At(k[B],r)))return}return w}}},SE=(e,n,o,r,l)=>{if(r)return m2(e,r,n,o,l);if(r=e.selection.getNode(),m2(e,r,n,o,l))return!0;const u=e.selection.getStart();return!!(u!==r&&m2(e,u,n,o,l))},g2=(e,n,o)=>{const r=[],l={},u=e.selection.getStart();return e.dom.getParent(u,m=>{for(let b=0;b<n.length;b++){const w=n[b];!l[w]&&kd(e,m,w,o)&&(l[w]=!0,r.push(w))}},e.dom.getRoot()),r},Z8=(e,n)=>{const o=l=>Ao(l,de.fromDom(e.getBody())),r=(l,u)=>kd(e,l.dom,u)?z.some(u):z.none();return z.from(e.selection.getStart(!0)).bind(l=>M4(de.fromDom(l),u=>Ts(n,m=>r(u,m)),o)).getOrNull()},j8=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const l=e.selection.getStart(),u=Kp(r,l);for(let m=o.length-1;m>=0;m--){const b=o[m];if(!di(b))return!0;for(let w=u.length-1;w>=0;w--)if(r.is(u[w],b.selector))return!0}}return!1},Jb=(e,n,o)=>Vo(o,(r,l)=>{const u=_C(e,l);return e.formatter.matchNode(n,l,{},u)?r.concat([l]):r},[]),Qb=pa,p1=(e,n)=>e.importNode(n,!0),G8=e=>{const n=[];let o=e;for(;o;){if(ut(o)&&o.data!==Qb||o.childNodes.length>1)return[];Bt(o)&&n.push(o),o=o.firstChild}return n},Lm=e=>G8(e).length>0,pc=e=>{if(e){const n=new lr(e,e);for(let o=n.current();o;o=n.next())if(ut(o))return o}return null},e0=e=>{const n=de.fromTag("span");return gl(n,{id:jp,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ar(n,de.fromText(Qb)),n},B4=e=>{const n=pc(e);return n&&n.data.charAt(0)===Qb&&n.deleteData(0,1),n},$4=(e,n,o=!0)=>{const r=e.dom,l=e.selection;if(Lm(n))Vb(e,!1,de.fromDom(n),o);else{const u=l.getRng(),m=r.getParent(n,r.isBlock),b=u.startContainer,w=u.startOffset,k=u.endContainer,B=u.endOffset,M=B4(n);r.remove(n,!0),b===M&&w>0&&u.setStart(M,w-1),k===M&&B>0&&u.setEnd(M,B-1),m&&r.isEmpty(m)&&sf(de.fromDom(m)),l.setRng(u)}},P4=(e,n,o=!0)=>{const r=e.dom,l=e.selection;if(n)$4(e,n,o);else if(n=Cm(e.getBody(),l.getStart()),!n)for(;n=r.get(jp);)$4(e,n,o)},xE=(e,n,o)=>{var r,l;const u=e.dom,m=u.getParent(o,Fe(kC,e.schema));m&&u.isEmpty(m)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(zD(de.fromDom(o)),u.isEmpty(o)?(l=o.parentNode)===null||l===void 0||l.replaceChild(n,o):u.insertAfter(n,o))},NB=(e,n)=>(e.appendChild(n),n),Jc=(e,n)=>{var o;const r=_l(e,(u,m)=>NB(u,m.cloneNode(!1)),n),l=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return NB(r,l.createTextNode(Qb))},EE=(e,n,o,r,l,u)=>{const m=e.formatter,b=e.dom,w=Qt(Uo(m.get()),M=>M!==r&&!Mr(M,"removeformat")),k=Jb(e,o,w);if(Qt(k,M=>!kb(e,M,r)).length>0){const M=o.cloneNode(!1);return b.add(n,M),m.remove(r,l,M,u),b.remove(M),z.some(M)}else return z.none()},IB=(e,n,o)=>{let r;const l=e.selection,u=e.formatter.get(n);if(!u)return;const m=l.getRng();let b=m.startOffset;const k=m.startContainer.nodeValue;r=Cm(e.getBody(),l.getStart());const B=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&b>0&&b<k.length&&B.test(k.charAt(b))&&B.test(k.charAt(b-1))){const M=l.getBookmark();m.collapse(!0);let H=_m(e.dom,m,u);H=Tf(H),e.formatter.apply(n,o,H),l.moveToBookmark(M)}else{let M=r?pc(r):null;(!r||(M==null?void 0:M.data)!==Qb)&&(r=p1(e.getDoc(),e0(!0).dom),M=r.firstChild,m.insertNode(r),b=1),e.formatter.apply(n,o,r),l.setCursorLocation(M,b)}},N4=(e,n,o,r)=>{const l=e.dom,u=e.selection;let m=!1;const b=e.formatter.get(n);if(!b)return;const w=u.getRng(),k=w.startContainer,B=w.startOffset;let M=k;ut(k)&&(B!==k.data.length&&(m=!0),M=M.parentNode);const H=[];let Q;for(;M;){if(kd(e,M,n,o,r)){Q=M;break}M.nextSibling&&(m=!0),H.push(M),M=M.parentNode}if(!!Q)if(m){const se=u.getBookmark();w.collapse(!0);let X=_m(l,w,b,!0);X=Tf(X),e.formatter.remove(n,o,X,r),u.moveToBookmark(se)}else{const se=Cm(e.getBody(),Q),X=e0(!1).dom;xE(e,X,se!=null?se:Q);const oe=EE(e,X,Q,n,o,r),ye=Jc(H.concat(oe.toArray()),X);se&&$4(e,se,!1),u.setCursorLocation(ye,1),l.isEmpty(Q)&&l.remove(Q)}},I4=(e,n,o)=>{const r=e.selection,l=e.getBody();P4(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Qb&&P4(e,Cm(l,r.getStart())),(n===37||n===39)&&P4(e,Cm(l,r.getStart()))},v1=e=>ut(e)&&Ac(e.data,We),F4=e=>{e.on("mouseup keydown",n=>{I4(e,n.keyCode,v1(e.selection.getRng().endContainer))})},FB=e=>{const n=e0(!1),o=Jc(e,n.dom);return{caretContainer:n,caretPosition:He(o,0)}},L4=(e,n)=>{const{caretContainer:o,caretPosition:r}=FB(n);return Nl(de.fromDom(e),o),Ro(de.fromDom(e)),r},K8=(e,n)=>{const{caretContainer:o,caretPosition:r}=FB(n);return e.insertNode(o.dom),r},LB=(e,n)=>{const o=e.schema.getTextInlineElements();return Cn(o,gs(n))&&!Ni(n.dom)&&!Ai(n.dom)},HB=e=>Ni(e.dom)&&Lm(e.dom),h2={},t0=_i(["pre"]),q8=(e,n)=>{h2[e]||(h2[e]=[]),h2[e].push(n)},zB=(e,n)=>{Cn(h2,e)&&Ge(h2[e],o=>{o(n)})};q8("pre",e=>{const n=e.selection.getRng(),o=l=>u=>{const m=u.previousSibling;return t0(m)&&dn(l,m)},r=(l,u)=>{const m=de.fromDom(u),b=Ku(m).dom;Ro(m),Xo(de.fromDom(l),[de.fromTag("br",b),de.fromTag("br",b),...Qr(m)])};if(!n.collapsed){const l=e.selection.getSelectedBlocks(),u=Qt(Qt(l,t0),o(l));Ge(u,m=>{r(m.previousSibling,m)})}});const kE=["fontWeight","fontStyle","color","fontSize","fontFamily"],Y8=e=>he(e.styles)&&$o(Uo(e.styles),n=>dn(kE,n)),VB=e=>ns(e,n=>Tr(n)&&n.inline==="span"&&Y8(n)),H4=(e,n)=>{const o=e.get(n);return Me(o)?VB(o):z.none()},UB=(e,n)=>oa(n,He.fromRangeStart(e)).isNone(),WB=(e,n)=>Ca(n,He.fromRangeEnd(e)).exists(o=>!bs(o.getNode())||Ca(n,o).isSome())===!1,ZB=e=>n=>Jf(n)&&e.isEditable(n),X8=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return UB(o,n[0])&&WB(o,n[0])?n:[];{const r=en(n).filter(m=>UB(o,m)).toArray(),l=hn(n).filter(m=>WB(o,m)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(l)}},J8=e=>Qt(X8(e),ZB(e.dom)),jB=e=>Qt(e.getSelectedBlocks(),ZB(e.dom)),z4=et.each,V4=e=>Bt(e)&&!ui(e)&&!Ni(e)&&!Ai(e),GB=(e,n)=>{for(let o=e;o;o=o[n]){if(ut(o)&&Oo(o.data))return e;if(Bt(o)&&!ui(o))return o}return e},KB=(e,n,o)=>{const r=a2(e),l=Bt(n)&&Ou(n),u=Bt(o)&&Ou(o);if(l&&u){const m=GB(n,"previousSibling"),b=GB(o,"nextSibling");if(r.compare(m,b)){for(let w=m.nextSibling;w&&w!==b;){const k=w;w=w.nextSibling,m.appendChild(k)}return e.dom.remove(b),et.each(et.grep(b.childNodes),w=>{m.appendChild(w)}),m}}return o},qB=(e,n,o,r)=>{var l;if(r&&n.merge_siblings!==!1){const u=(l=KB(e,Sx(r),r))!==null&&l!==void 0?l:r;KB(e,u,Sx(u,!0))}},Q8=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";z4(e.select(r,o),l=>{V4(l)&&Ou(l)&&z4(n.styles,(u,m)=>{e.setStyle(l,m,"")})})}},U4=(e,n,o)=>{z4(e.childNodes,r=>{V4(r)&&(n(r)&&o(r),r.hasChildNodes()&&U4(r,n,o))})},YB=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},XB=(e,n)=>o=>!!(o&&zs(e,o,n)),b1=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),YB(e,r)},y1=Wc.generate([{keep:[]},{rename:["name"]},{removed:[]}]),eH=/^(src|href|style)$/,W4=et.each,TE=dr,JB=e=>/^(TR|TH|TD)$/.test(e.nodeName),QB=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),e$=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],l=n[o?"startOffset":"endOffset"];if(Bt(r)){const u=r.childNodes.length-1;!o&&l&&l--,r=r.childNodes[l>u?u:l]}return ut(r)&&o&&l>=r.data.length&&(r=new lr(r,e.getBody()).next()||r),ut(r)&&!o&&l===0&&(r=new lr(r,e.getBody()).prev()||r),r},t$=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return JB(e)&&r?e.nodeName==="TR"&&r[o]||r:e},Z4=(e,n,o,r)=>{var l;const u=e.create(o,r);return(l=n.parentNode)===null||l===void 0||l.insertBefore(u,n),u.appendChild(n),u},n$=(e,n,o,r,l)=>{const u=de.fromDom(n),m=de.fromDom(e.create(r,l)),b=o?ni(u):jw(u);return Xo(m,b),o?(Nl(u,m),gg(m,u)):(oi(u,m),ar(m,u)),m.dom},tH=(e,n)=>n.links&&e.nodeName==="A",o$=(e,n,o)=>{const r=n.parentNode;let l;const u=e.dom,m=Ps(e);Kc(o)&&r===u.getRoot()&&(!o.list_block||!TE(n,o.list_block))&&Ge(vo(n.childNodes),b=>{th(e,m,b.nodeName.toLowerCase())?l?l.appendChild(b):(l=Z4(u,b,m),u.setAttribs(l,vf(e))):l=null}),!(OC(o)&&!TE(o.inline,n))&&u.remove(n,!0)},s$=(e,n,o)=>Nt(e)?{name:n,value:null}:{name:e,value:At(n,o)},r$=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},a$=(e,n,o,r,l)=>{let u=!1;W4(o.styles,(m,b)=>{const{name:w,value:k}=s$(b,m,r),B=oh(k,w);(o.remove_similar||K(k)||!Bt(l)||TE(zs(e,l,w),B))&&e.setStyle(n,w,""),u=!0}),u&&r$(e,n)},j4=(e,n,o)=>{n==="removeformat"?Ge(jB(e.selection),r=>{Ge(kE,l=>e.dom.setStyle(r,l,"")),r$(e.dom,r)}):H4(e.formatter,n).each(r=>{Ge(jB(e.selection),l=>a$(e.dom,l,r,o,null))})},G4=(e,n,o,r,l)=>{const u=e.dom,m=a2(e),b=e.schema;if(Tr(n)&&Ev(b,n.inline)&&cf(b,r)&&r.parentElement===e.getBody())return o$(e,r,n),y1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Xb(u,r,n)&&!tH(r,n))return y1.keep();const w=r,k=n.preserve_attributes;if(Tr(n)&&n.remove==="all"&&Me(k)){const B=Qt(u.getAttribs(w),M=>dn(k,M.name.toLowerCase()));if(u.removeAllAttribs(w),Ge(B,M=>u.setAttrib(w,M.name,M.value)),B.length>0)return y1.rename("span")}if(n.remove!=="all"){a$(u,w,n,o,l),W4(n.attributes,(M,H)=>{const{name:Q,value:se}=s$(H,M,o);if(n.remove_similar||K(se)||!Bt(l)||TE(u.getAttrib(l,Q),se)){if(Q==="class"){const X=u.getAttrib(w,Q);if(X){let oe="";if(Ge(X.split(/\s+/),ye=>{/mce\-\w+/.test(ye)&&(oe+=(oe?" ":"")+ye)}),oe){u.setAttrib(w,Q,oe);return}}}if(eH.test(Q)&&w.removeAttribute("data-mce-"+Q),Q==="style"&&_i(["li"])(w)&&u.getStyle(w,"list-style-type")==="none"){w.removeAttribute(Q),u.setStyle(w,"list-style-type","none");return}Q==="class"&&w.removeAttribute("className"),w.removeAttribute(Q)}}),W4(n.classes,M=>{M=At(M,o),(!Bt(l)||u.hasClass(l,M))&&u.removeClass(w,M)});const B=u.getAttribs(w);for(let M=0;M<B.length;M++){const H=B[M].nodeName;if(!m.isAttributeInternal(H))return y1.keep()}}return n.remove!=="none"?(o$(e,w,n),y1.removed()):y1.keep()},JG=(e,n,o,r,l)=>{let u;return n.parentNode&&Ge(Kp(e.dom,n.parentNode).reverse(),m=>{if(!u&&Bt(m)&&m.id!=="_start"&&m.id!=="_end"){const b=kd(e,m,o,r,l);b&&b.split!==!1&&(u=m)}}),u},p2=(e,n,o,r)=>G4(e,n,o,r,r).fold(we(r),l=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,l)),we(null)),l$=(e,n,o,r,l,u,m,b)=>{var w,k;let B,M;const H=e.dom;if(o){const Q=o.parentNode;for(let se=r.parentNode;se&&se!==Q;se=se.parentNode){let X=H.clone(se,!1);for(let oe=0;oe<n.length&&(X=p2(e,n[oe],b,X),X!==null);oe++);X&&(B&&X.appendChild(B),M||(M=X),B=X)}u&&(!m.mixed||!H.isBlock(o))&&(r=(w=H.split(o,r))!==null&&w!==void 0?w:r),B&&M&&((k=l.parentNode)===null||k===void 0||k.insertBefore(B,l),M.appendChild(l),Tr(m)&&qB(e,m,b,B))}return r},v2=(e,n,o,r,l)=>{const u=e.formatter.get(n),m=u[0],b=e.dom,w=e.selection,k=X=>{const oe=JG(e,X,n,o,l);return l$(e,u,oe,X,X,!0,m,o)},B=X=>ui(X)&&Bt(X)&&(X.id==="_start"||X.id==="_end"),M=X=>$o(u,oe=>o0(e,oe,o,X,X)),H=X=>{const oe=vo(X.childNodes),xe=M(X)||$o(u,tt=>Xb(b,X,tt)),Ee=X.parentNode;if(!xe&&Oe(Ee)&&_b(m)&&M(Ee),m.deep&&oe.length)for(let tt=0;tt<oe.length;tt++)H(oe[tt]);Ge(["underline","line-through","overline"],tt=>{Bt(X)&&e.dom.getStyle(X,"text-decoration")===tt&&X.parentNode&&Ii(b,X.parentNode)===tt&&o0(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:tt}},void 0,X)})},Q=X=>{const oe=b.get(X?"_start":"_end");if(oe){let ye=oe[X?"firstChild":"lastChild"];return B(ye)&&(ye=ye[X?"firstChild":"lastChild"]),ut(ye)&&ye.data.length===0&&(ye=X?oe.previousSibling||oe.nextSibling:oe.nextSibling||oe.previousSibling),b.remove(oe,!0),ye}else return null},se=X=>{let oe,ye,xe=_m(b,X,u,X.collapsed);if(m.split){if(xe=Tf(xe),oe=e$(e,xe,!0),ye=e$(e,xe),oe!==ye){if(oe=t$(oe,!0),ye=t$(ye,!1),QB(b,oe,ye)){const De=z.from(oe.firstChild).getOr(oe);k(n$(b,De,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Q(!0);return}if(QB(b,ye,oe)){const De=z.from(ye.lastChild).getOr(ye);k(n$(b,De,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Q(!1);return}oe=Z4(b,oe,"span",{id:"_start","data-mce-type":"bookmark"}),ye=Z4(b,ye,"span",{id:"_end","data-mce-type":"bookmark"});const Ee=b.createRng();Ee.setStartAfter(oe),Ee.setEndBefore(ye),xf(b,Ee,De=>{Ge(De,tt=>{!ui(tt)&&!ui(tt.parentNode)&&k(tt)})}),k(oe),k(ye),oe=Q(!0),ye=Q()}else oe=ye=k(oe);xe.startContainer=oe.parentNode?oe.parentNode:oe,xe.startOffset=b.nodeIndex(oe),xe.endContainer=ye.parentNode?ye.parentNode:ye,xe.endOffset=b.nodeIndex(ye)+1}xf(b,xe,Ee=>{Ge(Ee,H)})};if(r){if(Gp(r)){const X=b.createRng();X.setStartBefore(r),X.setEndAfter(r),se(X)}else se(r);IC(e,n,r,o);return}!w.isCollapsed()||!Tr(m)||Sf(e).length?(wx(e,()=>yd(e,se),X=>Tr(m)&&SE(e,n,o,X)),e.nodeChanged()):N4(e,n,o,l),j4(e,n,o),IC(e,n,r,o)},n0=(e,n,o,r,l)=>{(r||e.selection.isEditable())&&v2(e,n,o,r,l)},o0=(e,n,o,r,l)=>G4(e,n,o,r,l).fold(Pe,u=>(e.dom.rename(r,u),!0),St),nH=et.each,oH=(e,n,o,r)=>{const l=u=>{if(Bt(u)&&Bt(u.parentNode)&&Ou(u)){const m=Ii(e,u.parentNode);e.getStyle(u,"color")&&m?e.setStyle(u,"text-decoration",m):e.getStyle(u,"text-decoration")===m&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(et.walk(r,l,"childNodes"),l(r))},QG=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const l=XB(e,"fontSize");U4(r,u=>l(u)&&Ou(u),b1(e,"backgroundColor",At(n.styles.backgroundColor,o)))}},sH=(e,n,o,r)=>{if(Tr(n)&&(n.inline==="sub"||n.inline==="sup")){const l=XB(e,"fontSize");U4(r,m=>l(m)&&Ou(m),b1(e,"fontSize",""));const u=Qt(e.select(n.inline==="sup"?"sub":"sup",r),Ou);e.remove(u,!0)}},rH=(e,n,o,r)=>{nH(n,l=>{Tr(l)&&nH(e.dom.select(l.inline,r),u=>{V4(u)&&o0(e,l,o,u,l.exact?u:null)}),Q8(e.dom,l,r)})},eK=(e,n,o,r,l)=>{const u=l.parentNode;kd(e,u,o,r)&&o0(e,n,r,l)||n.merge_with_parents&&u&&e.dom.getParent(u,m=>kd(e,m,o,r)?(o0(e,n,r,l),!0):!1)},_E=et.each,i$=(e,n,o,r)=>{if(rb(e)&&Tr(n)&&o.parentNode){const l=ac(e.schema),u=W8(de.fromDom(o),m=>Ni(m.dom));return Ta(l,r)&&ir(de.fromDom(o.parentNode),!1)&&!u}else return!1},c$=(e,n,o,r)=>{if(_E(o.styles,(l,u)=>{e.setStyle(n,u,At(l,r))}),o.styles){const l=e.getAttrib(n,"style");l&&e.setAttrib(n,"data-mce-style",l)}},u$=(e,n,o,r)=>{const l=e.formatter.get(n),u=l[0],m=!r&&e.selection.isCollapsed(),b=e.dom,w=e.selection,k=(se,X=u)=>{re(X.onformat)&&X.onformat(se,X,o,r),c$(b,se,X,o),_E(X.attributes,(oe,ye)=>{b.setAttrib(se,ye,At(oe,o))}),_E(X.classes,oe=>{const ye=At(oe,o);b.hasClass(se,ye)||b.addClass(se,ye)})},B=(se,X)=>{let oe=!1;return _E(se,ye=>di(ye)?b.getContentEditable(X)==="false"&&!ye.ceFalseOverride||Oe(ye.collapsed)&&ye.collapsed!==m?!0:b.is(X,ye.selector)&&!Ni(X)?(k(X,ye),oe=!0,!1):!0:!1),oe},M=se=>{if(P(se)){const X=b.create(se);return k(X),X}else return null},H=(se,X,oe)=>{const ye=[];let xe=!0;const Ee=u.inline||u.block,De=M(Ee),tt=ze=>Tb(u)&&kd(e,ze,n,o),Gt=(ze,Ze,Et)=>{const _t=_O(u)&&kC(e.schema,ze)&&th(e,Ze,Ee);return Et&&_t},at=(ze,Ze,Et,_t)=>{const Ht=ze.nodeName.toLowerCase(),mn=th(e,Ee,Ht)&&th(e,Ze,Ee),gn=!oe&&ut(ze)&&yv(ze.data),uo=Ni(ze),yo=!Tr(u)||!se.isBlock(ze);return(Et||_t)&&mn&&!gn&&!uo&&yo};xf(se,X,ze=>{let Ze;const Et=_t=>{let Ht=!1,mn=xe,gn=!1;const uo=_t.parentNode,yo=uo.nodeName.toLowerCase(),Io=se.getContentEditable(_t);Oe(Io)&&(mn=xe,xe=Io==="true",Ht=!0,gn=xx(e,_t));const Ia=xe&&!Ht;if(bs(_t)&&!i$(e,u,_t,yo)){Ze=null,Kc(u)&&se.remove(_t);return}if(tt(_t)){Ze=null;return}if(Gt(_t,yo,Ia)){const Fr=se.rename(_t,Ee);k(Fr),ye.push(Fr),Ze=null;return}if(di(u)){let Fr=B(l,_t);if(!Fr&&Oe(uo)&&_b(u)&&(Fr=B(l,uo)),!Tr(u)||Fr){Ze=null;return}}Oe(De)&&at(_t,yo,Ia,gn)?(Ze||(Ze=se.clone(De,!1),uo.insertBefore(Ze,_t),ye.push(Ze)),gn&&Ht&&(xe=mn),Ze.appendChild(_t)):(Ze=null,Ge(vo(_t.childNodes),Et),Ht&&(xe=mn),Ze=null)};Ge(ze,Et)}),u.links===!0&&Ge(ye,ze=>{const Ze=Et=>{Et.nodeName==="A"&&k(Et,u),Ge(vo(Et.childNodes),Ze)};Ze(ze)}),Ge(ye,ze=>{const Ze=Ht=>{let mn=0;return Ge(Ht.childNodes,gn=>{!TO(gn)&&!ui(gn)&&mn++}),mn},Et=Ht=>ns(Ht.childNodes,EC).filter(gn=>se.getContentEditable(gn)!=="false"&&Xb(se,gn,u)).map(gn=>{const uo=se.clone(gn,!1);return k(uo),se.replace(uo,Ht,!0),se.remove(gn,!0),uo}).getOr(Ht),_t=Ze(ze);if((ye.length>1||!se.isBlock(ze))&&_t===0){se.remove(ze,!0);return}(Tr(u)||Kc(u)&&u.wrapper)&&(!u.exact&&_t===1&&(ze=Et(ze)),rH(e,l,o,ze),eK(e,u,n,o,ze),QG(se,u,o,ze),oH(se,u,o,ze),sH(se,u,o,ze),qB(e,u,o,ze))})},Q=Gp(r)?r:w.getNode();if(b.getContentEditable(Q)==="false"&&!xx(e,Q)){r=Q,B(l,r),Bx(e,n,r,o);return}if(u){if(r)if(Gp(r)){if(!B(l,r)){const se=b.createRng();se.setStartBefore(r),se.setEndAfter(r),H(b,_m(b,se,l),!0)}}else H(b,r,!0);else!m||!Tr(u)||Sf(e).length?(w.setRng(c2(w.getRng())),wx(e,()=>{yd(e,(se,X)=>{const oe=X?se:_m(b,se,l);H(b,oe,!1)})},St),e.nodeChanged()):IB(e,n,o),H4(e.formatter,n).each(se=>{Ge(J8(e.selection),X=>c$(b,X,se,o))});zB(n,e)}Bx(e,n,r,o)},d$=(e,n,o,r)=>{(r||e.selection.isEditable())&&u$(e,n,o,r)},b2=e=>Cn(e,"vars"),f$=(e,n)=>{e.set({}),n.on("NodeChange",o=>{iH(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=z.from(o.node).map(l=>Gp(l)?l:l.startContainer).bind(l=>Bt(l)?z.some(l):z.from(l.parentElement)).getOrThunk(()=>_r(n));iH(n,r,e.get())})},_r=e=>e.selection.getStart(),aH=(e,n,o,r,l)=>Xi(n,b=>{const w=e.formatter.matchNode(b,o,l!=null?l:{},r);return!pt(w)},b=>Ks(e,b,o)?!0:r?!1:Oe(e.formatter.matchNode(b,o,l,!0))),lH=(e,n)=>{const o=n!=null?n:_r(e);return Qt(Kp(e.dom,o),r=>Bt(r)&&!Ai(r))},iH=(e,n,o)=>{const r=lH(e,n);xt(o,(l,u)=>{const m=b=>{const w=aH(e,r,u,b.similar,b2(b)?b.vars:void 0),k=w.isSome();if(b.state.get()!==k){b.state.set(k);const B=w.getOr(n);b2(b)?b.callback(k,{node:B,format:u,parents:r}):Ge(b.callbacks,M=>M(k,{node:B,format:u,parents:r}))}};Ge([l.withSimilar,l.withoutSimilar],m),Ge(l.withVars,m)})},tK=(e,n,o,r,l,u)=>{const m=n.get();Ge(o.split(","),b=>{const w=Ko(m,b).getOrThunk(()=>{const B={withSimilar:{state:wr(!1),similar:!0,callbacks:[]},withoutSimilar:{state:wr(!1),similar:!1,callbacks:[]},withVars:[]};return m[b]=B,B}),k=()=>{const B=lH(e);return aH(e,B,b,l,u).isSome()};if(pt(u)){const B=l?w.withSimilar:w.withoutSimilar;B.callbacks.push(r),B.callbacks.length===1&&B.state.set(k())}else w.withVars.push({state:wr(k()),similar:l,vars:u,callback:r})}),n.set(m)},Au=(e,n,o)=>{const r=e.get();Ge(n.split(","),l=>Ko(r,l).each(u=>{r[l]={withSimilar:{...u.withSimilar,callbacks:Qt(u.withSimilar.callbacks,m=>m!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Qt(u.withoutSimilar.callbacks,m=>m!==o)},withVars:Qt(u.withVars,m=>m.callback!==o)}})),e.set(r)},OE=(e,n,o,r,l,u)=>(tK(e,n,o,r,l,u),{unbind:()=>Au(n,o,r)}),vh=(e,n,o,r)=>{const l=e.formatter.get(n);l&&(SE(e,n,o,r)&&(!("toggle"in l[0])||l[0].toggle)?n0(e,n,o,r):d$(e,n,o,r))},Hm=et.explode,m$=()=>{const e={};return{addFilter:(l,u)=>{Ge(Hm(l),m=>{Cn(e,m)||(e[m]={name:m,callbacks:[]}),e[m].callbacks.push(u)})},getFilters:()=>Uu(e),removeFilter:(l,u)=>{Ge(Hm(l),m=>{if(Cn(e,m))if(Oe(u)){const b=e[m],w=Qt(b.callbacks,k=>k!==u);w.length>0?b.callbacks=w:delete e[m]}else delete e[m]})}}},cH=(e,n)=>{Ge(n,o=>{e.attr(o,null)})},s0=(e,n,o)=>{e.addNodeFilter("font",r=>{Ge(r,l=>{const u=n.parse(l.attr("style")),m=l.attr("color"),b=l.attr("face"),w=l.attr("size");m&&(u.color=m),b&&(u["font-family"]=b),w&&Kd(w).each(k=>{u["font-size"]=o[k-1]}),l.name="span",l.attr("style",n.serialize(u)),cH(l,["color","face","size"])})})},r0=(e,n,o)=>{e.addNodeFilter("strike",r=>{const l=n.type!=="html4";Ge(r,u=>{if(l)u.name="s";else{const m=o.parse(u.attr("style"));m["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(m))}})})},a0=(e,n,o)=>{var r;const l=Sy();n.convert_fonts_to_spans&&s0(e,l,et.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),r0(e,o,l)},uH=(e,n,o)=>{n.inline_styles&&a0(e,n,o)},AE=(e,n,o)=>{n.addNodeFilter("br",(r,l,u)=>{const m=et.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),w=o.getWhitespaceElements();m.body=1;const k=B=>B.name in m||hp(o,B);for(let B=0,M=r.length;B<M;B++){let H=r[B],Q=H.parent;if(Q&&k(Q)&&H===Q.lastChild){let se=H.prev;for(;se;){const X=se.name;if(X!=="span"||se.attr("data-mce-type")!=="bookmark"){X==="br"&&(H=null);break}se=se.prev}if(H&&(H.remove(),m1(o,b,w,Q))){const X=o.getElementRule(Q.name);X&&(X.removeEmpty?Q.remove():X.paddEmpty&&hE(e,u,k,Q))}}else{let se=H;for(;Q&&Q.firstChild===se&&Q.lastChild===se&&(se=Q,!m[Q.name]);)Q=Q.parent;if(se===Q){const X=new mi("#text",3);X.value=We,H.replace(X)}}}})},g$=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),h$=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},K4=e=>{const[n,...o]=e.split(","),r=o.join(","),l=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(l){const u=l[2]===";base64",m=u?h$(r):decodeURIComponent(r);return z.some({type:l[1],data:m,base64Encoded:u})}else return z.none()},p$=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return z.none()}const l=new Uint8Array(r.length);for(let u=0;u<l.length;u++)l[u]=r.charCodeAt(u);return z.some(new Blob([l],{type:e}))},v$=e=>new Promise((n,o)=>{K4(e).bind(({type:r,data:l,base64Encoded:u})=>p$(r,l,u)).fold(()=>o("Invalid data URI"),n)}),dH=e=>or(e,"blob:")?g$(e):or(e,"data:")?v$(e):Promise.reject("Unknown URI format"),b$=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var l;o((l=r.error)===null||l===void 0?void 0:l.message)},r.readAsDataURL(e)});let fH=0;const mH=e=>(e||"blobid")+fH++,y$=(e,n,o)=>K4(e).bind(({data:r,type:l,base64Encoded:u})=>{if(n&&!u)return z.none();{const m=u?r:btoa(r);return o(m,l)}}),q4=(e,n,o)=>{const r=e.create(mH(),n,o);return e.add(r),r},C$=(e,n,o=!1)=>y$(n,o,(r,l)=>z.from(e.getByData(r,l)).orThunk(()=>p$(l,r).map(u=>q4(e,u,r)))),y2=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(or(n,"blob:")){const r=e.getByUri(n);return Oe(r)?Promise.resolve(r):dH(n).then(l=>b$(l).then(u=>y$(u,!1,m=>z.some(q4(e,l,m))).getOrThunk(o)))}else return or(n,"data:")?C$(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},w$=e=>Oe(e.attr("data-mce-bogus")),gH=e=>e.attr("src")===co.transparentSrc||Oe(e.attr("data-mce-placeholder")),S$=(e,n)=>{const{blob_cache:o}=n;if(o){const r=l=>{const u=l.attr("src");gH(l)||w$(l)||ft(u)||C$(o,u,!0).each(m=>{l.attr("src",m.blobUri())})};e.addAttributeFilter("src",l=>Ge(l,r))}},hH=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&AE(n,e,o),e.addAttributeFilter("href",l=>{let u=l.length;const m=w=>w.split(" ").filter(B=>B.length>0).concat(["noopener"]).sort().join(" "),b=w=>{const k=w?et.trim(w):"";return/\b(noopener)\b/g.test(k)?k:m(k)};if(!n.allow_unsafe_link_target)for(;u--;){const w=l[u];w.name==="a"&&w.attr("target")==="_blank"&&w.attr("rel",b(w.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",l=>{let u=l.length,m,b,w,k;for(;u--;)if(k=l[u],k.name==="a"&&k.firstChild&&!k.attr("href"))for(w=k.parent,m=k.lastChild;m&&w;)b=m.prev,w.insert(m,k),m=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",l=>{let u=l.length,m,b;for(;u--;)if(m=l[u],b=m.parent,b&&(b.name==="ul"||b.name==="ol"))if(m.prev&&m.prev.name==="li")m.prev.append(m);else{const w=new mi("li",1);w.attr("style","list-style-type: none"),m.wrap(w)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",l=>{var u;let m=l.length;for(;m--;){const b=l[m],w=(u=b.attr("class"))!==null&&u!==void 0?u:"",k=et.explode(w," ");let B="";for(let M=0;M<k.length;M++){const H=k[M];let Q=!1,se=r["*"];se&&se[H]&&(Q=!0),se=r[b.name],!Q&&se&&se[H]&&(Q=!0),Q&&(B&&(B+=" "),B+=H)}B.length||(B=null),b.attr("class",B)}}),S$(e,n)};function bh(e){return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bh(e)}function Y4(e,n){return Y4=Object.setPrototypeOf||function(r,l){return r.__proto__=l,r},Y4(e,n)}function pH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C2(e,n,o){return pH()?C2=Reflect.construct:C2=function(l,u,m){var b=[null];b.push.apply(b,u);var w=Function.bind.apply(l,b),k=new w;return m&&Y4(k,m.prototype),k},C2.apply(null,arguments)}function Ru(e){return x$(e)||E$(e)||k$(e)||vH()}function x$(e){if(Array.isArray(e))return RE(e)}function E$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function k$(e,n){if(!!e){if(typeof e=="string")return RE(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return RE(e,n)}}function RE(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function vH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bH=Object.hasOwnProperty,T$=Object.setPrototypeOf,X4=Object.isFrozen,w2=Object.getPrototypeOf,_$=Object.getOwnPropertyDescriptor,gi=Object.freeze,Qc=Object.seal,yH=Object.create,O$=typeof Reflect<"u"&&Reflect,Td=O$.apply,S2=O$.construct;Td||(Td=function(n,o,r){return n.apply(o,r)}),gi||(gi=function(n){return n}),Qc||(Qc=function(n){return n}),S2||(S2=function(n,o){return C2(n,Ru(o))});var A$=_d(Array.prototype.forEach),x2=_d(Array.prototype.pop),l0=_d(Array.prototype.push),i0=_d(String.prototype.toLowerCase),R$=_d(String.prototype.match),zm=_d(String.prototype.replace),CH=_d(String.prototype.indexOf),wH=_d(String.prototype.trim),Vi=_d(RegExp.prototype.test),E2=D$(TypeError);function _d(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),l=1;l<o;l++)r[l-1]=arguments[l];return Td(e,n,r)}}function D$(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return S2(e,o)}}function Ho(e,n){T$&&T$(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var l=i0(r);l!==r&&(X4(n)||(n[o]=l),r=l)}e[r]=!0}return e}function C1(e){var n=yH(null),o;for(o in e)Td(bH,e,[o])&&(n[o]=e[o]);return n}function DE(e,n){for(;e!==null;){var o=_$(e,n);if(o){if(o.get)return _d(o.get);if(typeof o.value=="function")return _d(o.value)}e=w2(e)}function r(l){return console.warn("fallback value for",l),null}return r}var ME=gi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Na=gi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),J4=gi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),BE=gi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vm=gi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),M$=gi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hi=gi(["#text"]),yh=gi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$E=gi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B$=gi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),k2=gi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),SH=Qc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$$=Qc(/<%[\w\W]*|[\w\W]*%>/gm),T2=Qc(/^data-[\-\w.\u00B7-\uFFFF]/),Q4=Qc(/^aria-[\-\w]+$/),xH=Qc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),P$=Qc(/^(?:\w+script|data):/i),EH=Qc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eA=Qc(/^html$/i),tA=function(){return typeof window>"u"?null:window},nA=function(n,o){if(bh(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,l="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(l)&&(r=o.currentScript.getAttribute(l));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function oA(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tA(),n=function(Ve){return oA(Ve)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,l=e.DocumentFragment,u=e.HTMLTemplateElement,m=e.Node,b=e.Element,w=e.NodeFilter,k=e.NamedNodeMap,B=k===void 0?e.NamedNodeMap||e.MozNamedAttrMap:k,M=e.HTMLFormElement,H=e.DOMParser,Q=e.trustedTypes,se=b.prototype,X=DE(se,"cloneNode"),oe=DE(se,"nextSibling"),ye=DE(se,"childNodes"),xe=DE(se,"parentNode");if(typeof u=="function"){var Ee=r.createElement("template");Ee.content&&Ee.content.ownerDocument&&(r=Ee.content.ownerDocument)}var De=nA(Q,o),tt=De?De.createHTML(""):"",Gt=r,at=Gt.implementation,ze=Gt.createNodeIterator,Ze=Gt.createDocumentFragment,Et=Gt.getElementsByTagName,_t=o.importNode,Ht={};try{Ht=C1(r).documentMode?r.documentMode:{}}catch{}var mn={};n.isSupported=typeof xe=="function"&&at&&typeof at.createHTMLDocument<"u"&&Ht!==9;var gn=SH,uo=$$,yo=T2,Io=Q4,Ia=P$,Fr=EH,vt=xH,Wt=null,ho=Ho({},[].concat(Ru(ME),Ru(Na),Ru(J4),Ru(Vm),Ru(hi))),ao=null,Kt=Ho({},[].concat(Ru(yh),Ru($E),Ru(B$),Ru(k2))),Jt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),mt=null,bn=null,On=!0,fo=!0,ds=!1,En=!1,lo=!1,Us=!1,Go=!1,Is=!1,ws=!1,ts=!1,mr=!0,Fa=!0,La=!1,Ld={},Ys=null,Km=Ho({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Yl=null,Hd=Ho({},["audio","video","img","source","image","track"]),mo=null,Ds=Ho({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bi="http://www.w3.org/1998/Math/MathML",$u="http://www.w3.org/2000/svg",ji="http://www.w3.org/1999/xhtml",Gi=ji,If=!1,xa,qm=["application/xhtml+xml","text/html"],zd="text/html",tu,Ff=null,ww=r.createElement("form"),M0=function(Ve){return Ve instanceof RegExp||Ve instanceof Function},OT=function(Ve){Ff&&Ff===Ve||((!Ve||bh(Ve)!=="object")&&(Ve={}),Ve=C1(Ve),Wt="ALLOWED_TAGS"in Ve?Ho({},Ve.ALLOWED_TAGS):ho,ao="ALLOWED_ATTR"in Ve?Ho({},Ve.ALLOWED_ATTR):Kt,mo="ADD_URI_SAFE_ATTR"in Ve?Ho(C1(Ds),Ve.ADD_URI_SAFE_ATTR):Ds,Yl="ADD_DATA_URI_TAGS"in Ve?Ho(C1(Hd),Ve.ADD_DATA_URI_TAGS):Hd,Ys="FORBID_CONTENTS"in Ve?Ho({},Ve.FORBID_CONTENTS):Km,mt="FORBID_TAGS"in Ve?Ho({},Ve.FORBID_TAGS):{},bn="FORBID_ATTR"in Ve?Ho({},Ve.FORBID_ATTR):{},Ld="USE_PROFILES"in Ve?Ve.USE_PROFILES:!1,On=Ve.ALLOW_ARIA_ATTR!==!1,fo=Ve.ALLOW_DATA_ATTR!==!1,ds=Ve.ALLOW_UNKNOWN_PROTOCOLS||!1,En=Ve.SAFE_FOR_TEMPLATES||!1,lo=Ve.WHOLE_DOCUMENT||!1,Is=Ve.RETURN_DOM||!1,ws=Ve.RETURN_DOM_FRAGMENT||!1,ts=Ve.RETURN_TRUSTED_TYPE||!1,Go=Ve.FORCE_BODY||!1,mr=Ve.SANITIZE_DOM!==!1,Fa=Ve.KEEP_CONTENT!==!1,La=Ve.IN_PLACE||!1,vt=Ve.ALLOWED_URI_REGEXP||vt,Gi=Ve.NAMESPACE||ji,Ve.CUSTOM_ELEMENT_HANDLING&&M0(Ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Jt.tagNameCheck=Ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ve.CUSTOM_ELEMENT_HANDLING&&M0(Ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Jt.attributeNameCheck=Ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ve.CUSTOM_ELEMENT_HANDLING&&typeof Ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Jt.allowCustomizedBuiltInElements=Ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xa=qm.indexOf(Ve.PARSER_MEDIA_TYPE)===-1?xa=zd:xa=Ve.PARSER_MEDIA_TYPE,tu=xa==="application/xhtml+xml"?function(Zt){return Zt}:i0,En&&(fo=!1),ws&&(Is=!0),Ld&&(Wt=Ho({},Ru(hi)),ao=[],Ld.html===!0&&(Ho(Wt,ME),Ho(ao,yh)),Ld.svg===!0&&(Ho(Wt,Na),Ho(ao,$E),Ho(ao,k2)),Ld.svgFilters===!0&&(Ho(Wt,J4),Ho(ao,$E),Ho(ao,k2)),Ld.mathMl===!0&&(Ho(Wt,Vm),Ho(ao,B$),Ho(ao,k2))),Ve.ADD_TAGS&&(Wt===ho&&(Wt=C1(Wt)),Ho(Wt,Ve.ADD_TAGS)),Ve.ADD_ATTR&&(ao===Kt&&(ao=C1(ao)),Ho(ao,Ve.ADD_ATTR)),Ve.ADD_URI_SAFE_ATTR&&Ho(mo,Ve.ADD_URI_SAFE_ATTR),Ve.FORBID_CONTENTS&&(Ys===Km&&(Ys=C1(Ys)),Ho(Ys,Ve.FORBID_CONTENTS)),Fa&&(Wt["#text"]=!0),lo&&Ho(Wt,["html","head","body"]),Wt.table&&(Ho(Wt,["tbody"]),delete mt.tbody),gi&&gi(Ve),Ff=Ve)},pD=Ho({},["mi","mo","mn","ms","mtext"]),vD=Ho({},["foreignobject","desc","title","annotation-xml"]),$L=Ho({},["title","style","font","a","script"]),Vd=Ho({},Na);Ho(Vd,J4),Ho(Vd,BE);var B0=Ho({},Vm);Ho(B0,M$);var Be=function(Ve){var Zt=xe(Ve);(!Zt||!Zt.tagName)&&(Zt={namespaceURI:ji,tagName:"template"});var kn=i0(Ve.tagName),Ws=i0(Zt.tagName);return Ve.namespaceURI===$u?Zt.namespaceURI===ji?kn==="svg":Zt.namespaceURI===bi?kn==="svg"&&(Ws==="annotation-xml"||pD[Ws]):Boolean(Vd[kn]):Ve.namespaceURI===bi?Zt.namespaceURI===ji?kn==="math":Zt.namespaceURI===$u?kn==="math"&&vD[Ws]:Boolean(B0[kn]):Ve.namespaceURI===ji?Zt.namespaceURI===$u&&!vD[Ws]||Zt.namespaceURI===bi&&!pD[Ws]?!1:!B0[kn]&&($L[kn]||!Vd[kn]):!1},$e=function(Ve){l0(n.removed,{element:Ve});try{Ve.parentNode.removeChild(Ve)}catch{try{Ve.outerHTML=tt}catch{Ve.remove()}}},Ct=function(Ve,Zt){try{l0(n.removed,{attribute:Zt.getAttributeNode(Ve),from:Zt})}catch{l0(n.removed,{attribute:null,from:Zt})}if(Zt.removeAttribute(Ve),Ve==="is"&&!ao[Ve])if(Is||ws)try{$e(Zt)}catch{}else try{Zt.setAttribute(Ve,"")}catch{}},dt=function(Ve){var Zt,kn;if(Go)Ve="<remove></remove>"+Ve;else{var Ws=R$(Ve,/^[\r\n\t ]+/);kn=Ws&&Ws[0]}xa==="application/xhtml+xml"&&(Ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ve+"</body></html>");var Ec=De?De.createHTML(Ve):Ve;if(Gi===ji)try{Zt=new H().parseFromString(Ec,xa)}catch{}if(!Zt||!Zt.documentElement){Zt=at.createDocument(Gi,"template",null);try{Zt.documentElement.innerHTML=If?"":Ec}catch{}}var yi=Zt.body||Zt.documentElement;return Ve&&kn&&yi.insertBefore(r.createTextNode(kn),yi.childNodes[0]||null),Gi===ji?Et.call(Zt,lo?"html":"body")[0]:lo?Zt.documentElement:yi},on=function(Ve){return ze.call(Ve.ownerDocument||Ve,Ve,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT,null,!1)},io=function(Ve){return Ve instanceof M&&(typeof Ve.nodeName!="string"||typeof Ve.textContent!="string"||typeof Ve.removeChild!="function"||!(Ve.attributes instanceof B)||typeof Ve.removeAttribute!="function"||typeof Ve.setAttribute!="function"||typeof Ve.namespaceURI!="string"||typeof Ve.insertBefore!="function")},fs=function(Ve){return bh(m)==="object"?Ve instanceof m:Ve&&bh(Ve)==="object"&&typeof Ve.nodeType=="number"&&typeof Ve.nodeName=="string"},aa=function(Ve,Zt,kn){!mn[Ve]||A$(mn[Ve],function(Ws){Ws.call(n,Zt,kn,Ff)})},la=function(Ve){var Zt;if(aa("beforeSanitizeElements",Ve,null),io(Ve)||Vi(/[\u0080-\uFFFF]/,Ve.nodeName))return $e(Ve),!0;var kn=tu(Ve.nodeName);if(aa("uponSanitizeElement",Ve,{tagName:kn,allowedTags:Wt}),Ve.hasChildNodes()&&!fs(Ve.firstElementChild)&&(!fs(Ve.content)||!fs(Ve.content.firstElementChild))&&Vi(/<[/\w]/g,Ve.innerHTML)&&Vi(/<[/\w]/g,Ve.textContent)||kn==="select"&&Vi(/<template/i,Ve.innerHTML))return $e(Ve),!0;if(!Wt[kn]||mt[kn]){if(!mt[kn]&&P0(kn)&&(Jt.tagNameCheck instanceof RegExp&&Vi(Jt.tagNameCheck,kn)||Jt.tagNameCheck instanceof Function&&Jt.tagNameCheck(kn)))return!1;if(Fa&&!Ys[kn]){var Ws=xe(Ve)||Ve.parentNode,Ec=ye(Ve)||Ve.childNodes;if(Ec&&Ws)for(var yi=Ec.length,kl=yi-1;kl>=0;--kl)Ws.insertBefore(X(Ec[kl],!0),oe(Ve))}return $e(Ve),!0}return Ve instanceof b&&!Be(Ve)||(kn==="noscript"||kn==="noembed")&&Vi(/<\/no(script|embed)/i,Ve.innerHTML)?($e(Ve),!0):(En&&Ve.nodeType===3&&(Zt=Ve.textContent,Zt=zm(Zt,gn," "),Zt=zm(Zt,uo," "),Ve.textContent!==Zt&&(l0(n.removed,{element:Ve.cloneNode()}),Ve.textContent=Zt)),aa("afterSanitizeElements",Ve,null),!1)},$0=function(Ve,Zt,kn){if(mr&&(Zt==="id"||Zt==="name")&&(kn in r||kn in ww))return!1;if(!(fo&&!bn[Zt]&&Vi(yo,Zt))){if(!(On&&Vi(Io,Zt))){if(!ao[Zt]||bn[Zt]){if(!(P0(Ve)&&(Jt.tagNameCheck instanceof RegExp&&Vi(Jt.tagNameCheck,Ve)||Jt.tagNameCheck instanceof Function&&Jt.tagNameCheck(Ve))&&(Jt.attributeNameCheck instanceof RegExp&&Vi(Jt.attributeNameCheck,Zt)||Jt.attributeNameCheck instanceof Function&&Jt.attributeNameCheck(Zt))||Zt==="is"&&Jt.allowCustomizedBuiltInElements&&(Jt.tagNameCheck instanceof RegExp&&Vi(Jt.tagNameCheck,kn)||Jt.tagNameCheck instanceof Function&&Jt.tagNameCheck(kn))))return!1}else if(!mo[Zt]){if(!Vi(vt,zm(kn,Fr,""))){if(!((Zt==="src"||Zt==="xlink:href"||Zt==="href")&&Ve!=="script"&&CH(kn,"data:")===0&&Yl[Ve])){if(!(ds&&!Vi(Ia,zm(kn,Fr,"")))){if(kn)return!1}}}}}}return!0},P0=function(Ve){return Ve.indexOf("-")>0},bD=function(Ve){var Zt,kn,Ws,Ec;aa("beforeSanitizeAttributes",Ve,null);var yi=Ve.attributes;if(!!yi){var kl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ao};for(Ec=yi.length;Ec--;){Zt=yi[Ec];var Sw=Zt,Tl=Sw.name,yD=Sw.namespaceURI;kn=Tl==="value"?Zt.value:wH(Zt.value),Ws=tu(Tl);var CD=kn;if(kl.attrName=Ws,kl.attrValue=kn,kl.keepAttr=!0,kl.forceKeepAttr=void 0,aa("uponSanitizeAttribute",Ve,kl),kn=kl.attrValue,!kl.forceKeepAttr){if(!kl.keepAttr){Ct(Tl,Ve);continue}if(Vi(/\/>/i,kn)){Ct(Tl,Ve);continue}En&&(kn=zm(kn,gn," "),kn=zm(kn,uo," "));var NL=tu(Ve.nodeName);if(!$0(NL,Ws,kn)){Ct(Tl,Ve);continue}if(kn!==CD)try{yD?Ve.setAttributeNS(yD,Tl,kn):Ve.setAttribute(Tl,kn)}catch{Ct(Tl,Ve)}}}aa("afterSanitizeAttributes",Ve,null)}},PL=function Un(Ve){var Zt,kn=on(Ve);for(aa("beforeSanitizeShadowDOM",Ve,null);Zt=kn.nextNode();)aa("uponSanitizeShadowNode",Zt,null),!la(Zt)&&(Zt.content instanceof l&&Un(Zt.content),bD(Zt));aa("afterSanitizeShadowDOM",Ve,null)};return n.sanitize=function(Un,Ve){var Zt,kn,Ws,Ec,yi;if(If=!Un,If&&(Un="<!-->"),typeof Un!="string"&&!fs(Un)){if(typeof Un.toString!="function")throw E2("toString is not a function");if(Un=Un.toString(),typeof Un!="string")throw E2("dirty is not a string, aborting")}if(!n.isSupported){if(bh(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Un=="string")return e.toStaticHTML(Un);if(fs(Un))return e.toStaticHTML(Un.outerHTML)}return Un}if(Us||OT(Ve),n.removed=[],typeof Un=="string"&&(La=!1),La){if(Un.nodeName){var kl=tu(Un.nodeName);if(!Wt[kl]||mt[kl])throw E2("root node is forbidden and cannot be sanitized in-place")}}else if(Un instanceof m)Zt=dt("<!---->"),kn=Zt.ownerDocument.importNode(Un,!0),kn.nodeType===1&&kn.nodeName==="BODY"||kn.nodeName==="HTML"?Zt=kn:Zt.appendChild(kn);else{if(!Is&&!En&&!lo&&Un.indexOf("<")===-1)return De&&ts?De.createHTML(Un):Un;if(Zt=dt(Un),!Zt)return Is?null:ts?tt:""}Zt&&Go&&$e(Zt.firstChild);for(var Sw=on(La?Un:Zt);Ws=Sw.nextNode();)Ws.nodeType===3&&Ws===Ec||la(Ws)||(Ws.content instanceof l&&PL(Ws.content),bD(Ws),Ec=Ws);if(Ec=null,La)return Un;if(Is){if(ws)for(yi=Ze.call(Zt.ownerDocument);Zt.firstChild;)yi.appendChild(Zt.firstChild);else yi=Zt;return ao.shadowroot&&(yi=_t.call(o,yi,!0)),yi}var Tl=lo?Zt.outerHTML:Zt.innerHTML;return lo&&Wt["!doctype"]&&Zt.ownerDocument&&Zt.ownerDocument.doctype&&Zt.ownerDocument.doctype.name&&Vi(eA,Zt.ownerDocument.doctype.name)&&(Tl="<!DOCTYPE "+Zt.ownerDocument.doctype.name+`>
`+Tl),En&&(Tl=zm(Tl,gn," "),Tl=zm(Tl,uo," ")),De&&ts?De.createHTML(Tl):Tl},n.setConfig=function(Un){OT(Un),Us=!0},n.clearConfig=function(){Ff=null,Us=!1},n.isValidAttribute=function(Un,Ve,Zt){Ff||OT({});var kn=tu(Un),Ws=tu(Ve);return $0(kn,Ws,Zt)},n.addHook=function(Un,Ve){typeof Ve=="function"&&(mn[Un]=mn[Un]||[],l0(mn[Un],Ve))},n.removeHook=function(Un){if(mn[Un])return x2(mn[Un])},n.removeHooks=function(Un){mn[Un]&&(mn[Un]=[])},n.removeAllHooks=function(){mn={}},n}var N$=oA();const I$=et.each,Af=et.trim,sA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],kH={ftp:21,http:80,https:443,mailto:25},TH=["img","video"],F$=(e,n)=>Oe(e)?!e:Oe(n)?!dn(TH,n):!0,L$=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},c0=(e,n,o)=>{const r=L$(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?F$(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Od{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),l=/data:([^;]+)/.exec(r[0]);return l&&(o=l[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const l=sd.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!c0(r,l,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Af(n),this.settings=o;const r=o.base_uri,l=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){l.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Od(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+l.toAbsPath(b,n);else{const w=/([^#?]*)([#?]?.*)/.exec(n);w&&(n=(r&&r.protocol||"http")+"://mce_host"+l.toAbsPath(b,w[1])+w[2])}}n=n.replace(/@@/g,"(mce_at)");const m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);m&&I$(sA,(b,w)=>{let k=m[w];k&&(k=k.replace(/\(mce_at\)/g,"@@")),l[b]=k}),r&&(l.protocol||(l.protocol=r.protocol),l.userInfo||(l.userInfo=r.userInfo),!l.port&&l.host==="mce_host"&&(l.port=r.port),(!l.host||l.host==="mce_host")&&(l.host=r.host),l.source=""),u&&(l.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Od(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),l=o.getURI();if(r===l||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===l)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Od(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?kH[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,l="",u,m;const b=n.substring(0,n.lastIndexOf("/")).split("/"),w=o.split("/");if(b.length>=w.length){for(u=0,m=b.length;u<m;u++)if(u>=w.length||b[u]!==w[u]){r=u+1;break}}if(b.length<w.length){for(u=0,m=w.length;u<m;u++)if(u>=b.length||b[u]!==w[u]){r=u+1;break}}if(r===1)return o;for(u=0,m=b.length-(r-1);u<m;u++)l+="../";for(u=r-1,m=w.length;u<m;u++)u!==r-1?l+="/"+w[u]:l+=w[u];return l}toAbsPath(n,o){let r=0;const l=/\/$/.test(o)?"/":"",u=n.split("/"),m=o.split("/"),b=[];I$(u,M=>{M&&b.push(M)});const w=[];for(let M=m.length-1;M>=0;M--)if(!(m[M].length===0||m[M]===".")){if(m[M]===".."){r++;continue}if(r>0){r--;continue}w.push(m[M])}const k=b.length-r;let B;return k<=0?B=It(w).join("/"):B=b.slice(0,k).join("/")+"/"+It(w).join("/"),B.indexOf("/")!==0&&(B="/"+B),l&&B.lastIndexOf("/")!==B.length-1&&(B+=l),B}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const _H=et.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),rA="data-mce-type";let H$=0;const z$=(e,n,o,r)=>{var l,u,m,b;const w=n.validate,k=o.getSpecialElements();e.nodeType===Bl&&!n.allow_conditional_comments&&/^\[if/i.test((l=e.nodeValue)!==null&&l!==void 0?l:"")&&(e.nodeValue=" "+e.nodeValue);const B=(u=r==null?void 0:r.tagName)!==null&&u!==void 0?u:e.nodeName.toLowerCase();if(e.nodeType!==ag||B==="body")return;const M=de.fromDom(e),H=np(M,rA),Q=hl(M,"data-mce-bogus");if(!H&&P(Q)){Q==="all"?Ro(M):Pc(M);return}const se=o.getElementRule(B);if(w&&!se){Cn(k,B)?Ro(M):Pc(M);return}else Oe(r)&&(r.allowedTags[B]=!0);if(w&&se&&!H){if(Ge((m=se.attributesForced)!==null&&m!==void 0?m:[],X=>{sr(M,X.name,X.value==="{$uid}"?`mce_${H$++}`:X.value)}),Ge((b=se.attributesDefault)!==null&&b!==void 0?b:[],X=>{np(M,X.name)||sr(M,X.name,X.value==="{$uid}"?`mce_${H$++}`:X.value)}),se.attributesRequired&&!$o(se.attributesRequired,X=>np(M,X))){Pc(M);return}if(se.removeEmptyAttrs&&Ei(M)){Pc(M);return}se.outputName&&se.outputName!==B&&Hs(M,se.outputName)}},aA=(e,n,o,r,l)=>!(r in _H&&c0(e,l,o))&&(!e.validate||n.isValid(o,r)||or(r,"data-")||or(r,"aria-")),V$=(e,n)=>e.hasAttribute(rA)&&(n==="id"||n==="class"||n==="style"),U$=(e,n)=>e in n.getBoolAttrs(),OH=(e,n,o)=>{const{attributes:r}=e;for(let l=r.length-1;l>=0;l--){const u=r[l],m=u.name,b=u.value;!aA(n,o,e.tagName.toLowerCase(),m,b)&&!V$(e,m)?e.removeAttribute(m):U$(m,o)&&e.setAttribute(m,m)}},W$=(e,n)=>{const o=N$();return o.addHook("uponSanitizeElement",(r,l)=>{z$(r,e,n,l)}),o.addHook("uponSanitizeAttribute",(r,l)=>{const u=r.tagName.toLowerCase(),{attrName:m,attrValue:b}=l;l.keepAttr=aA(e,n,u,m,b),l.keepAttr?(l.allowedAttributes[m]=!0,U$(m,n)&&(l.attrValue=m),e.allow_svg_data_urls&&or(b,"data:image/svg+xml")&&(l.forceKeepAttr=!0)):V$(r,m)&&(l.forceKeepAttr=!0)}),o},lA=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},Z$=(e,n)=>{if(e.sanitize){const o=W$(e,n);return(r,l)=>{o.sanitize(r,lA(e,l)),o.removed=[]}}else return(o,r)=>{const l=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let u;for(;u=l.nextNode();)z$(u,e,n),Bt(u)&&OH(u,e,n)}},iA=et.makeMap,PE=et.extend,cA=(e,n,o)=>{const r=e.name,l=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let m=0,b=u.length;m<b;m++){const w=u[m],k=new mi(w.nodeName.toLowerCase(),w.nodeType);if(Bt(w)){const B=w.attributes;for(let M=0,H=B.length;M<H;M++){const Q=B[M];k.attr(Q.name,Q.value)}}else ut(w)?(k.value=w.data,l&&(k.raw=!0)):(si(w)||QT(w)||e_(w))&&(k.value=w.data);cA(k,w,o),e.append(k)}},j$=(e,n,o)=>{const r=[];for(let l=e,u=l;l;u=l,l=l.walk()){const m=l;Ge(n,b=>b(m)),ft(m.parent)&&m!==e?l=u:r.push(m)}for(let l=r.length-1;l>=0;l--){const u=r[l];Ge(o,m=>m(u))}},G$=(e,n,o,r)=>{const l=o.validate,u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),b=PE(iA("script,style,head,html,body,title,meta,param"),n.getBlockElements()),w=ac(n),k=/[ \t\r\n]+/g,B=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,H=xe=>{let Ee=xe.parent;for(;Oe(Ee);){if(Ee.name in m)return!0;Ee=Ee.parent}return!1},Q=xe=>{let Ee=xe;for(;Oe(Ee);){if(Ee.name in w)return m1(n,u,m,Ee);Ee=Ee.parent}return!1},se=xe=>xe.name in b||hp(n,xe),X=(xe,Ee)=>{const De=Ee?xe.prev:xe.next;return Oe(De)||ft(xe.parent)?!1:se(xe.parent)&&(xe.parent!==e||r.isRootContent===!0)};return[xe=>{var Ee;if(xe.type===3&&!H(xe)){let De=(Ee=xe.value)!==null&&Ee!==void 0?Ee:"";De=De.replace(k," "),(Ed(xe.prev,se)||X(xe,!0))&&(De=De.replace(B,"")),De.length===0?xe.remove():xe.value=De}},xe=>{var Ee;if(xe.type===1){const De=n.getElementRule(xe.name);if(l&&De){const tt=m1(n,u,m,xe);De.paddInEmptyBlock&&tt&&Q(xe)?hE(o,r,se,xe):De.removeEmpty&&tt?se(xe)?xe.remove():xe.unwrap():De.paddEmpty&&(tt||S8(xe))&&hE(o,r,se,xe)}}else if(xe.type===3&&!H(xe)){let De=(Ee=xe.value)!==null&&Ee!==void 0?Ee:"";(xe.next&&se(xe.next)||X(xe,!1))&&(De=De.replace(M,"")),De.length===0?xe.remove():xe.value=De}}]},K$=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},u0=(e={},n=zc())=>{const o=m$(),r=m$(),l={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,m=Z$(l,n),b=(Ee,De,tt="html")=>{const Gt=tt==="xhtml"?"application/xhtml+xml":"text/html",at=Cn(n.getSpecialElements(),De.toLowerCase()),ze=at?`<${De}>${Ee}</${De}>`:Ee,Ze=tt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ze}</body></html>`:`<body>${ze}</body>`,Et=u.parseFromString(Ze,Gt).body;return m(Et,Gt),at?Et.firstChild:Et},w=o.addFilter,k=o.getFilters,B=o.removeFilter,M=r.addFilter,H=r.getFilters,Q=r.removeFilter,se=(Ee,De)=>{_4(n,Ee)&&De.push(Ee)},X=(Ee,De)=>{const tt=P(De.attr(rA)),Gt=De.type===1&&!Cn(Ee,De.name)&&!hp(n,De);return De.type===3||Gt&&!tt},oe=(Ee,De)=>{const tt=PE(iA("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Gt=/^[ \t\r\n]+/,at=/[ \t\r\n]+$/;let ze=Ee.firstChild,Ze=null;const Et=_t=>{var Ht,mn;_t&&(ze=_t.firstChild,ze&&ze.type===3&&(ze.value=(Ht=ze.value)===null||Ht===void 0?void 0:Ht.replace(Gt,"")),ze=_t.lastChild,ze&&ze.type===3&&(ze.value=(mn=ze.value)===null||mn===void 0?void 0:mn.replace(at,"")))};if(!!n.isValidChild(Ee.name,De.toLowerCase())){for(;ze;){const _t=ze.next;X(tt,ze)?(Ze||(Ze=new mi(De,1),Ze.attr(l.forced_root_block_attrs),Ee.insert(Ze,ze)),Ze.append(ze)):(Et(Ze),Ze=null),ze=_t}Et(Ze)}},xe={schema:n,addAttributeFilter:M,getAttributeFilters:H,removeAttributeFilter:Q,addNodeFilter:w,getNodeFilters:k,removeNodeFilter:B,parse:(Ee,De={})=>{var tt;const Gt=l.validate,at=(tt=De.context)!==null&&tt!==void 0?tt:l.root_name,ze=b(Ee,at,De.format);vu(n,ze);const Ze=new mi(at,11);cA(Ze,ze,n.getSpecialElements()),ze.innerHTML="";const[Et,_t]=G$(Ze,n,l,De),Ht=[],mn=Gt?Io=>se(Io,Ht):ot,gn={nodes:{},attributes:{}},uo=Io=>Im(k(),H(),Io,gn);if(j$(Ze,[Et,uo],[_t,mn]),Ht.reverse(),Gt&&Ht.length>0)if(De.context){const{pass:Io,fail:Ia}=ps(Ht,Fr=>Fr.parent===Ze);i2(Ia,n,Ze,uo),De.invalid=Io.length>0}else i2(Ht,n,Ze,uo);const yo=K$(l,De);return yo&&(Ze.name==="body"||De.isRootContent)&&oe(Ze,yo),De.invalid||CB(gn,De),Ze}};return hH(xe,l),uH(xe,l,n),xe},uA=e=>CE(e)?mh({validate:!1}).serialize(e):e,q$=(e,n,o)=>{const r=uA(e),l=n(r);if(l.isDefaultPrevented())return l;if(CE(e))if(l.content!==r){const u=u0({validate:!1,forced_root_block:!1,sanitize:o}).parse(l.content,{context:e.name});return{...l,content:u}}else return{...l,content:e};else return l},_2=(e,n)=>{if(n.no_events)return $a.value(n);{const o=DO(e,n);return o.isDefaultPrevented()?$a.error(kf(e,{content:"",...o}).content):$a.value(o)}},Y$=(e,n,o)=>o.no_events?n:q$(n,l=>kf(e,{...o,content:l}),db(e)).content,dA=(e,n)=>{if(n.no_events)return $a.value(n);{const o=q$(n.content,r=>RO(e,{...n,content:r}),db(e));return o.isDefaultPrevented()?($b(e,o),$a.error(void 0)):$a.value(o)}},fA=(e,n,o)=>{o.no_events||$b(e,{...o,content:n})},NE=(e,n,o)=>({element:e,width:n,rows:o}),mA=(e,n)=>({element:e,cells:n}),AH=(e,n)=>({x:e,y:n}),X$=(e,n)=>Bc(e,n).bind(Kd).getOr(1),RH=(e,n,o,r,l)=>{const u=X$(l,"rowspan"),m=X$(l,"colspan"),b=e.rows;for(let w=o;w<o+u;w++){b[w]||(b[w]=mA(p_(r),[]));for(let k=n;k<n+m;k++){const B=b[w].cells;B[k]=w===o&&k===n?l:mf(l)}}},DH=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},J$=(e,n,o)=>{for(;DH(e,n,o);)n++;return n},MH=e=>Vo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),Q$=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const l=o[r].cells;for(let u=0;u<l.length;u++)if(Ao(l[u],n))return z.some(AH(u,r))}return z.none()},eP=(e,n,o,r,l)=>{const u=[],m=e.rows;for(let b=o;b<=l;b++){const w=m[b].cells,k=n<r?w.slice(n,r+1):w.slice(r,n+1);u.push(mA(m[b].element,k))}return u},BH=(e,n,o)=>{const r=n.x,l=n.y,u=o.x,m=o.y,b=l<m?eP(e,r,l,u,m):eP(e,r,m,u,l);return NE(e.element,MH(b),b)},$H=(e,n)=>{const o=mf(e.element),r=de.fromTag("tbody");return Xo(r,n),ar(o,r),o},PH=e=>pn(e.rows,n=>{const o=pn(n.cells,l=>{const u=p_(l);return rr(u,"colspan"),rr(u,"rowspan"),u}),r=mf(n.element);return Xo(r,o),r}),NH=e=>{const n=NE(mf(e),0,[]);return Ge(fa(e,"tr"),(o,r)=>{Ge(fa(o,"td,th"),(l,u)=>{RH(n,J$(n,u,r),r,o,l)})}),NE(n.element,MH(n.rows),n.rows)},IH=e=>$H(e,PH(e)),tP=(e,n,o)=>Q$(e,n).bind(r=>Q$(e,o).map(l=>BH(e,r,l))),FH=e=>ns(e,n=>gs(n)==="ul"||gs(n)==="ol"),LH=(e,n)=>ns(e,o=>gs(o)==="li"&&bd(o,n)).fold(we([]),o=>FH(e).map(r=>{const l=de.fromTag(gs(r)),u=os(da(r),(m,b)=>or(b,"list-style"));return uv(l,u),[de.fromTag("li"),l]}).getOr([])),HH=(e,n)=>{const o=Vo(n,(r,l)=>(ar(l,r),l),e);return n.length>0?mc([o]):o},zH=e=>Il(e)?ti(e).filter(ai).fold(we([]),n=>[e,n]):ai(e)?[e]:[],VH=(e,n)=>{const o=de.fromDom(n.commonAncestorContainer),r=Pm(o,e),l=Qt(r,of),u=LH(r,n),m=l.concat(u.length?u:zH(o));return pn(m,mf)},UH=()=>mc([]),nK=(e,n)=>HH(de.fromDom(n.cloneContents()),VH(e,n)),WH=(e,n)=>rp(n,"table",Fe(Ao,e)),ZH=(e,n)=>WH(e,n[0]).bind(o=>{const r=n[0],l=n[n.length-1],u=NH(o);return tP(u,r,l).map(m=>mc([IH(m)]))}).getOrThunk(UH),oK=(e,n)=>n.length>0&&n[0].collapsed?UH():nK(e,n[0]),jH=(e,n)=>{const o=SO(n,e);return o.length>0?ZH(e,o):oK(e,n)},Cs=(e,n)=>n>=0&&n<e.length&&Qg(e.charAt(n)),IE=e=>Qu(e.innerText),sK=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),GH=e=>z.from(e.selection.getRng()).map(n=>{var o;const r=z.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),l=e.getBody(),u=sK(r),m=de.fromDom(n.cloneContents());xM(m),EM(m);const b=e.dom.add(l,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},m.dom),w=IE(b),k=Qu((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),Cs(k,0)||Cs(k,k.length-1)){const B=r.getOr(l),M=IE(B),H=M.indexOf(w);if(H===-1)return w;{const Q=Cs(M,H-1),se=Cs(M,H+w.length);return(Q?" ":"")+w+(se?" ":"")}}else return w}).getOr(""),KH=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),l=e.selection.getSel(),u=YO(e,wb(l)),m=n.contextual?jH(de.fromDom(e.getBody()),u).dom:o.cloneContents();return m&&r.appendChild(m),e.selection.serializer.serialize(r,n)},d0=(e,n)=>{if(n.format==="text")return GH(e);{const o=KH(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},rK=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),aK=(e,n,o={})=>{const r=rK(o,n);return _2(e,r).fold(Qe,l=>{const u=d0(e,l);return Y$(e,u,l)})},ra=0,gA=1,hA=2,nP=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),l=new Array(o),u=(B,M,H)=>({start:B,end:M,diag:H}),m=(B,M,H,Q,se)=>{const X=w(B,M,H,Q);if(X===null||X.start===M&&X.diag===M-Q||X.end===B&&X.diag===B-H){let oe=B,ye=H;for(;oe<M||ye<Q;)oe<M&&ye<Q&&e[oe]===n[ye]?(se.push([ra,e[oe]]),++oe,++ye):M-B>Q-H?(se.push([hA,e[oe]]),++oe):(se.push([gA,n[ye]]),++ye)}else{m(B,X.start,H,X.start-X.diag,se);for(let oe=X.start;oe<X.end;++oe)se.push([ra,e[oe]]);m(X.end,M,X.end-X.diag,Q,se)}},b=(B,M,H,Q)=>{let se=B;for(;se-M<Q&&se<H&&e[se]===n[se-M];)++se;return u(B,se,M)},w=(B,M,H,Q)=>{const se=M-B,X=Q-H;if(se===0||X===0)return null;const oe=se-X,ye=X+se,xe=(ye%2===0?ye:ye+1)/2;r[1+xe]=B,l[1+xe]=M+1;let Ee,De,tt,Gt,at;for(Ee=0;Ee<=xe;++Ee){for(De=-Ee;De<=Ee;De+=2){for(tt=De+xe,De===-Ee||De!==Ee&&r[tt-1]<r[tt+1]?r[tt]=r[tt+1]:r[tt]=r[tt-1]+1,Gt=r[tt],at=Gt-B+H-De;Gt<M&&at<Q&&e[Gt]===n[at];)r[tt]=++Gt,++at;if(oe%2!==0&&oe-Ee<=De&&De<=oe+Ee&&l[tt-oe]<=r[tt])return b(l[tt-oe],De+B-H,M,Q)}for(De=oe-Ee;De<=oe+Ee;De+=2){for(tt=De+xe-oe,De===oe-Ee||De!==oe+Ee&&l[tt+1]<=l[tt-1]?l[tt]=l[tt+1]-1:l[tt]=l[tt-1],Gt=l[tt]-1,at=Gt-B+H-De;Gt>=B&&at>=H&&e[Gt]===n[at];)l[tt]=Gt--,at--;if(oe%2===0&&-Ee<=De&&De<=Ee&&l[tt]<=r[tt+oe])return b(l[tt],De+B-H,M,Q)}}return null},k=[];return m(0,e.length,0,n.length,k),k},oP=e=>Bt(e)?e.outerHTML:ut(e)?sd.encodeRaw(e.data,!1):si(e)?"<!--"+e.data+"-->":"",qH=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},FE=(e,n,o)=>{const r=qH(n);if(e.hasChildNodes()&&o<e.childNodes.length){const l=e.childNodes[o];e.insertBefore(r,l)}else e.appendChild(r)},YH=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},pA=(e,n)=>{let o=0;Ge(e,r=>{r[0]===ra?o++:r[0]===gA?(FE(n,r[1],o),o++):r[0]===hA&&YH(n,o)})},XH=e=>Qt(pn(vo(e.childNodes),oP),n=>n.length>0),sP=(e,n)=>{const o=pn(vo(n.childNodes),oP);return pA(nP(o,e),n),n},rP=au(()=>document.implementation.createHTMLDocument("undo")),vA=e=>e.indexOf("</iframe>")!==-1,aP=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),bA=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),LE=e=>{const n=XH(e.getBody()),o=Dr(n,l=>{const u=SM(e.serializer,l);return u.length>0?[u]:[]}),r=o.join("");return vA(r)?aP(o):bA(r)},yA=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?sP(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Oe(r)&&bb(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},CA=e=>e.type==="fragmented"?e.fragments.join(""):e.content,vc=e=>{const n=de.fromTag("body",rP());return Yn(n,CA(e)),Ge(fa(n,"*[data-mce-bogus]"),Pc),ty(n)},JH=(e,n)=>CA(e)===CA(n),QH=(e,n)=>vc(e)===vc(n),wA=(e,n)=>!e||!n?!1:JH(e,n)?!0:QH(e,n),SA=e=>e.get()===0,HE=(e,n,o)=>{SA(o)&&(e.typing=n)},xA=(e,n)=>{e.typing&&(HE(e,!1,n),e.add())},e7=e=>{e.typing&&(e.typing=!1,e.add())},t7=(e,n,o)=>{SA(n)&&o.set(Ba(e.selection))},n7=(e,n,o,r,l,u,m)=>{const b=LE(e),w=et.extend(u||{},b);if(!SA(r)||e.removed)return null;const k=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:w,lastLevel:k,originalEvent:m}).isDefaultPrevented()||k&&wA(k,w))return null;n.data[o.get()]&&l.get().each(H=>{n.data[o.get()].beforeBookmark=H});const B=U_(e);if(B&&n.data.length>B){for(let H=0;H<n.data.length-1;H++)n.data[H]=n.data[H+1];n.data.length--,o.set(n.data.length)}w.bookmark=Ba(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(w),o.set(n.data.length-1);const M={level:w,lastLevel:k,originalEvent:m};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",M),e.dispatch("change",M)):e.dispatch("AddUndo",M),w},zE=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},o7=(e,n,o,r,l)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,m=n.data[o.get()-1];yA(e,m,!0),n.transact(l)&&(n.data[o.get()-1].beforeBookmark=u)}},s7=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],yA(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},lP=(e,n,o,r)=>{let l;return n.typing&&(n.add(),n.typing=!1,HE(n,!1,o)),r.get()>0&&(r.set(r.get()-1),l=n.data[r.get()],yA(e,l,!0),e.setDirty(!0),e.dispatch("Undo",{level:l})),l},EA=e=>{e.clear(),e.add()},r7=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!wA(LE(e),n.data[0]),a7=(e,n)=>n.get()<e.data.length-1&&!e.typing,lK=(e,n,o)=>(xA(e,n),e.beforeChange(),e.ignore(o),e.add()),l7=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},i7=(e,n)=>{const o=e.dom,r=Oe(n)?n:e.getBody();Ge(o.select("table,a",r),l=>{switch(l.nodeName){case"TABLE":const u=gm(e),m=o.getAttrib(l,"border");(!m||m==="0")&&e.hasVisual?o.addClass(l,u):o.removeClass(l,u);break;case"A":if(!o.getAttrib(l,"href")){const b=o.getAttrib(l,"name")||l.id,w=$p(e);b&&e.hasVisual?o.addClass(l,w):o.removeClass(l,w)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},kA=e=>({init:{bindEvents:ot},undoManager:{beforeChange:(n,o)=>t7(e,n,o),add:(n,o,r,l,u,m)=>n7(e,n,o,r,l,u,m),undo:(n,o,r)=>lP(e,n,o,r),redo:(n,o)=>s7(e,n,o),clear:(n,o)=>zE(e,n,o),reset:n=>EA(n),hasUndo:(n,o)=>r7(e,n,o),hasRedo:(n,o)=>a7(n,o),transact:(n,o,r)=>lK(n,o,r),ignore:(n,o)=>l7(n,o),extra:(n,o,r,l)=>o7(e,n,o,r,l)},formatter:{match:(n,o,r,l)=>SE(e,n,o,r,l),matchAll:(n,o)=>g2(e,n,o),matchNode:(n,o,r,l)=>kd(e,n,o,r,l),canApply:n=>j8(e,n),closest:n=>Z8(e,n),apply:(n,o,r)=>d$(e,n,o,r),remove:(n,o,r,l)=>n0(e,n,o,r,l),toggle:(n,o,r)=>vh(e,n,o,r),formatChanged:(n,o,r,l,u)=>OE(e,n,o,r,l,u)},editor:{getContent:n=>TM(e,n),setContent:(n,o)=>V8(e,n,o),insertContent:(n,o)=>R4(e,n,o),addVisual:n=>i7(e,n)},selection:{getContent:(n,o)=>aK(e,n,o)},autocompleter:{addDecoration:n=>P6(e,n),removeDecoration:()=>I6(e,de.fromDom(e.getBody()))},raw:{getModel:()=>z.none()}}),c7=e=>{const n=k=>he(k)?k:{},{init:o,undoManager:r,formatter:l,editor:u,selection:m,autocompleter:b,raw:w}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(k,B,M)=>r.transact(M),ignore:(k,B)=>r.ignore(B),extra:(k,B,M,H)=>r.extra(M,H)},formatter:{match:(k,B,M,H)=>l.match(k,n(B),H),matchAll:l.matchAll,matchNode:l.matchNode,canApply:k=>l.canApply(k),closest:k=>l.closest(k),apply:(k,B,M)=>l.apply(k,n(B)),remove:(k,B,M,H)=>l.remove(k,n(B)),toggle:(k,B,M)=>l.toggle(k,n(B)),formatChanged:(k,B,M,H,Q)=>l.formatChanged(B,M,H,Q)},editor:{getContent:k=>u.getContent(k),setContent:(k,B)=>({content:u.setContent(k,B),html:""}),insertContent:(k,B)=>(u.insertContent(k),""),addVisual:u.addVisual},selection:{getContent:(k,B)=>m.getContent(B)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>z.some(w.getRawModel())}}},w1=()=>{const e=we(null),n=we("");return{init:{bindEvents:ot},undoManager:{beforeChange:ot,add:e,undo:e,redo:e,clear:ot,reset:ot,hasUndo:Pe,hasRedo:Pe,transact:e,ignore:ot,extra:ot},formatter:{match:Pe,matchAll:we([]),matchNode:we(void 0),canApply:Pe,closest:n,apply:ot,remove:ot,toggle:ot,formatChanged:we({unbind:ot})},editor:{getContent:n,setContent:we({content:"",html:""}),insertContent:we(""),addVisual:ot},selection:{getContent:n},autocompleter:{addDecoration:ot,removeDecoration:ot},raw:{getModel:we(z.none())}}},Ui=e=>Cn(e.plugins,"rtc"),O2=e=>Ko(e.plugins,"rtc").bind(n=>z.from(n.setup)),iP=e=>{const n=e;return O2(e).fold(()=>(n.rtcInstance=kA(e),z.none()),o=>(n.rtcInstance=w1(),z.some(()=>o().then(r=>(n.rtcInstance=c7(r),r.rtc.isRemote)))))},VE=e=>e.rtcInstance?e.rtcInstance:kA(e),Or=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},cP=(e,n,o)=>{Or(e).undoManager.beforeChange(n,o)},u7=(e,n,o,r,l,u,m)=>Or(e).undoManager.add(n,o,r,l,u,m),d7=(e,n,o,r)=>Or(e).undoManager.undo(n,o,r),f7=(e,n,o)=>Or(e).undoManager.redo(n,o),m7=(e,n,o)=>{Or(e).undoManager.clear(n,o)},uP=(e,n)=>{Or(e).undoManager.reset(n)},g7=(e,n,o)=>Or(e).undoManager.hasUndo(n,o),h7=(e,n,o)=>Or(e).undoManager.hasRedo(n,o),A2=(e,n,o,r)=>Or(e).undoManager.transact(n,o,r),dP=(e,n,o)=>{Or(e).undoManager.ignore(n,o)},fP=(e,n,o,r,l)=>{Or(e).undoManager.extra(n,o,r,l)},p7=(e,n,o,r,l)=>Or(e).formatter.match(n,o,r,l),v7=(e,n,o)=>Or(e).formatter.matchAll(n,o),b7=(e,n,o,r,l)=>Or(e).formatter.matchNode(n,o,r,l),mP=(e,n)=>Or(e).formatter.canApply(n),y7=(e,n)=>Or(e).formatter.closest(n),C7=(e,n,o,r)=>{Or(e).formatter.apply(n,o,r)},w7=(e,n,o,r,l)=>{Or(e).formatter.remove(n,o,r,l)},S7=(e,n,o,r)=>{Or(e).formatter.toggle(n,o,r)},iK=(e,n,o,r,l,u)=>Or(e).formatter.formatChanged(n,o,r,l,u),Ad=(e,n)=>VE(e).editor.getContent(n),TA=(e,n,o)=>VE(e).editor.setContent(n,o),x7=(e,n,o)=>VE(e).editor.insertContent(n,o),E7=(e,n,o)=>Or(e).selection.getContent(n,o),k7=(e,n)=>Or(e).editor.addVisual(n),gP=e=>Or(e).init.bindEvents(),To=(e,n)=>Or(e).autocompleter.addDecoration(n),cK=e=>Or(e).autocompleter.removeDecoration(),T7=(e,n={})=>{const o=n.format?n.format:"html";return E7(e,o,n)},hP=e=>e.dom.length===0?(Ro(e),z.none()):z.some(e),Ns=(e,n)=>e.filter(o=>Om.isBookmarkNode(o.dom)).bind(n?fg:nc),_7=(e,n,o,r)=>{const l=e.dom,u=n.dom,m=r?l.length:u.length;r?(l4(l,u,!1,!r),o.setStart(u,m)):(l4(u,l,!1,!r),o.setEnd(u,m))},R2=(e,n)=>{ti(e).each(o=>{const r=e.dom;n&&e2(o,He(r,0))?sE(r,0):!n&&i1(o,He(r,r.length))&&Nm(r,r.length)})},pP=(e,n,o,r)=>{e.bind(l=>((r?Nm:sE)(l.dom,r?l.dom.length:0),n.filter(ja).map(m=>_7(l,m,o,r)))).orThunk(()=>Ns(n,r).or(n).filter(ja).map(u=>R2(u,r)))},O7=(e,n)=>{const o=z.from(n.firstChild).map(de.fromDom),r=z.from(n.lastChild).map(de.fromDom);e.deleteContents(),e.insertNode(n);const l=o.bind(nc).filter(ja).bind(hP),u=r.bind(fg).filter(ja).bind(hP);pP(l,o,e,!0),pP(u,r,e,!1),e.collapse(!1)},A7=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),vP=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),l=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...l,...n});return mh({validate:!1},e.schema).serialize(u)}else return n.content},Ch=(e,n,o={})=>{const r=A7(o,n);dA(e,r).each(l=>{const u=vP(e,l),m=e.selection.getRng();O7(m,m.createContextualFragment(u)),e.selection.setRng(m),Yc(e,m),fA(e,u,l)})},pi=(e,n,o)=>{if(Cn(e,n)){const r=Qt(e[n],l=>l!==o);r.length===0?delete e[n]:e[n]=r}};var D2=(e,n)=>{let o,r;const l=(b,w)=>ns(w,k=>e.is(k,b)),u=b=>e.getParents(b,void 0,e.getRoot()),m=()=>{o={},r={},n.on("NodeChange",b=>{const w=b.element,k=u(w),B={};xt(o,(M,H)=>{l(H,k).each(Q=>{r[H]||(Ge(M,se=>{se(!0,{node:Q,selector:H,parents:k})}),r[H]=M),B[H]=M})}),xt(r,(M,H)=>{B[H]||(delete r[H],Ge(M,Q=>{Q(!1,{node:w,selector:H,parents:k})}))})})};return{selectorChangedWithUnbind:(b,w)=>(o||m(),o[b]||(o[b]=[]),o[b].push(w),l(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{pi(o,b,w),pi(r,b,w)}})}};const Um=e=>!!(e&&e.ownerDocument)&&$c(de.fromDom(e.ownerDocument),de.fromDom(e)),Rf=e=>e?Um(e.startContainer)&&Um(e.endContainer):!1,f0=(e,n,o,r)=>{let l,u;const{selectorChangedWithUnbind:m}=D2(e,r),b=(vt,Wt)=>{const ho=e.createRng();Oe(vt)&&Oe(Wt)?(ho.setStart(vt,Wt),ho.setEnd(vt,Wt),De(ho),ye(!1)):(Eb(e,ho,r.getBody(),!0),De(ho))},w=vt=>T7(r,vt),k=(vt,Wt)=>Ch(r,vt,Wt),B=vt=>fM(r.getBody(),Ee(),vt),M=vt=>mM(r.getBody(),Ee(),vt),H=(vt,Wt)=>Ia.getBookmark(vt,Wt),Q=vt=>Ia.moveToBookmark(vt),se=(vt,Wt)=>(A6(e,vt,Wt).each(De),vt),X=()=>{const vt=Ee(),Wt=xe();return!vt||vt.item?!1:vt.compareEndPoints?vt.compareEndPoints("StartToEnd",vt)===0:!Wt||vt.collapsed},oe=()=>{const vt=Ee(),Wt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Wt.length>0?ks(Wt,ho=>e.isEditable(ho.parentElement)):vt.startContainer===vt.endContainer?e.isEditable(vt.startContainer):e.isEditable(vt.startContainer)&&e.isEditable(vt.endContainer)},ye=vt=>{const Wt=Ee();Wt.collapse(!!vt),De(Wt)},xe=()=>n.getSelection?n.getSelection():n.document.selection,Ee=()=>{let vt;const Wt=(ao,Kt,Jt)=>{try{return Kt.compareBoundaryPoints(ao,Jt)}catch{return-1}},ho=n.document;if(Oe(r.bookmark)&&!l1(r)){const ao=zb(r);if(ao.isSome())return ao.map(Kt=>YO(r,[Kt])[0]).getOr(ho.createRange())}try{const ao=xe();ao&&!rn(ao.anchorNode)&&(ao.rangeCount>0?vt=ao.getRangeAt(0):vt=ho.createRange(),vt=YO(r,[vt])[0])}catch{}if(vt||(vt=ho.createRange()),pg(vt.startContainer)&&vt.collapsed){const ao=e.getRoot();vt.setStart(ao,0),vt.setEnd(ao,0)}return l&&u&&(Wt(vt.START_TO_START,vt,l)===0&&Wt(vt.END_TO_END,vt,l)===0?vt=u:(l=null,u=null)),vt},De=(vt,Wt)=>{if(!Rf(vt))return;const ho=xe();if(vt=r.dispatch("SetSelectionRange",{range:vt,forward:Wt}).range,ho){u=vt;try{ho.removeAllRanges(),ho.addRange(vt)}catch{}Wt===!1&&ho.extend&&(ho.collapse(vt.endContainer,vt.endOffset),ho.extend(vt.startContainer,vt.startOffset)),l=ho.rangeCount>0?ho.getRangeAt(0):null}if(!vt.collapsed&&vt.startContainer===vt.endContainer&&(ho==null?void 0:ho.setBaseAndExtent)&&vt.endOffset-vt.startOffset<2&&vt.startContainer.hasChildNodes()){const Kt=vt.startContainer.childNodes[vt.startOffset];Kt&&Kt.nodeName==="IMG"&&(ho.setBaseAndExtent(vt.startContainer,vt.startOffset,vt.endContainer,vt.endOffset),(ho.anchorNode!==vt.startContainer||ho.focusNode!==vt.endContainer)&&ho.setBaseAndExtent(Kt,0,Kt,1))}r.dispatch("AfterSetSelectionRange",{range:vt,forward:Wt})},tt=vt=>(k(e.getOuterHTML(vt)),vt),Gt=()=>gM(r.getBody(),Ee()),at=(vt,Wt)=>hM(e,Ee(),vt,Wt),ze=()=>{const vt=xe(),Wt=vt==null?void 0:vt.anchorNode,ho=vt==null?void 0:vt.focusNode;if(!vt||!Wt||!ho||rn(Wt)||rn(ho))return!0;const ao=e.createRng(),Kt=e.createRng();try{ao.setStart(Wt,vt.anchorOffset),ao.collapse(!0),Kt.setStart(ho,vt.focusOffset),Kt.collapse(!0)}catch{return!0}return ao.compareBoundaryPoints(ao.START_TO_START,Kt)<=0},Io={dom:e,win:n,serializer:o,editor:r,expand:(vt={type:"word"})=>De(jn(e).expand(Ee(),vt)),collapse:ye,setCursorLocation:b,getContent:w,setContent:k,getBookmark:H,moveToBookmark:Q,select:se,isCollapsed:X,isEditable:oe,isForward:ze,setNode:tt,getNode:Gt,getSel:xe,setRng:De,getRng:Ee,getStart:B,getEnd:M,getSelectedBlocks:at,normalize:()=>{const vt=Ee(),Wt=xe();if(!SC(Wt)&&km(r)){const ho=xd(e,vt);return ho.each(ao=>{De(ao,ze())}),ho.getOr(vt)}return vt},selectorChanged:(vt,Wt)=>(m(vt,Wt),Io),selectorChangedWithUnbind:m,getScrollContainer:()=>{let vt,Wt=e.getRoot();for(;Wt&&Wt.nodeName!=="BODY";){if(Wt.scrollHeight>Wt.clientHeight){vt=Wt;break}Wt=Wt.parentNode}return vt},scrollIntoView:(vt,Wt)=>{Oe(vt)?Zl(r,vt,Wt):Yc(r,Ee(),Wt)},placeCaretAt:(vt,Wt)=>De(El(vt,Wt,r.getDoc())),getBoundingClientRect:()=>{const vt=Ee();return vt.collapsed?He.fromRangeStart(vt).getClientRects()[0]:vt.getBoundingClientRect()},destroy:()=>{n=l=u=null,Fr.destroy()}},Ia=Om(Io),Fr=Px(Io,r);return Io.bookmarkManager=Ia,Io.controlSelection=Fr,Io},_A=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,l)=>{let u=r.length;for(;u--;){const m=r[u];m.attr("tabindex",m.attr("data-mce-tabindex")),m.attr(l,null)}}),e.addAttributeFilter("src,href,style",(r,l)=>{const u="data-mce-"+l,m=n.url_converter,b=n.url_converter_scope;let w=r.length;for(;w--;){const k=r[w];let B=k.attr(u);B!==void 0?(k.attr(l,B.length>0?B:null),k.attr(u,null)):(B=k.attr(l),l==="style"?B=o.serializeStyle(o.parseStyle(B),k.name):m&&(B=m.call(b,B,l,k.name)),k.attr(l,B.length>0?B:null))}}),e.addAttributeFilter("class",r=>{let l=r.length;for(;l--;){const u=r[l];let m=u.attr("class");m&&(m=m.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",m.length>0?m:null))}}),e.addAttributeFilter("data-mce-type",(r,l,u)=>{let m=r.length;for(;m--;){const b=r[m];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(z.from(b.firstChild).exists(k=>{var B;return!yv((B=k.value)!==null&&B!==void 0?B:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var l;let u=r.length;for(;u--;){const m=r[u].firstChild;m&&(m.value=sd.decode((l=m.value)!==null&&l!==void 0?l:""))}}),e.addNodeFilter("script,style",(r,l)=>{var u;const m=w=>w.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const w=r[b],k=w.firstChild,B=(u=k==null?void 0:k.value)!==null&&u!==void 0?u:"";if(l==="script"){const M=w.attr("type");M&&w.attr("type",M==="mce-no/type"?null:M.replace(/^mce\-/,"")),n.element_format==="xhtml"&&k&&B.length>0&&(k.value=`// <![CDATA[
`+m(B)+`
// ]]>`)}else n.element_format==="xhtml"&&k&&B.length>0&&(k.value=`<!--
`+m(B)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let l=r.length;for(;l--;){const u=r[l],m=u.value;n.preserve_cdata&&(m==null?void 0:m.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(m.replace(/^\[CDATA\[|\]\]$/g,""))):(m==null?void 0:m.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(m).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,l)=>{let u=r.length;for(;u--;){const m=r[u];m.type===7?m.remove():m.type===1&&l==="input"&&!m.attr("type")&&m.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Ge(r,l=>{l.attr("data-mce-type")==="format-caret"&&(l.isEmpty(e.schema.getNonEmptyElements())?l.remove():l.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,l)=>{let u=r.length;for(;u--;)r[u].attr(l,null)}),n.remove_trailing_brs&&AE(n,e,e.schema)},OA=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},bP=(e,n,o)=>{let r;const l=e.dom;let u=n.cloneNode(!0);const m=document.implementation;if(m.createHTMLDocument){const b=m.createHTMLDocument("");et.each(u.nodeName==="BODY"?u.childNodes:[u],w=>{b.body.appendChild(b.importNode(w,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=l.doc,l.doc=b}return AO(e,{...o,node:u}),r&&(l.doc=r),u},yP=(e,n)=>Oe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,R7=(e,n,o)=>yP(e,o)?bP(e,n,o):n,D7=(e,n,o)=>{et.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,l)=>{let u=r.length;for(;u--;)r[u].attr(l,null)}),n.push(o))},CP=(e,n,o)=>!n.no_events&&e?MC(e,{...n,content:o}).content:o,wP=(e,n,o)=>{const r=Qu(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||bv(de.fromDom(n))?r:et.trim(r)},SP=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,l=e.parse(n,r);return OA(l),l},xP=(e,n,o)=>mh(e,n).serialize(o),AA=(e,n,o,r,l)=>{const u=xP(n,o,r);return CP(e,l,u)},uK=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},l=n&&n.dom?n.dom:Po.DOM,u=n&&n.schema?n.schema:zc(r),m=u0(r,u);_A(m,r,l);const b=(w,k={})=>{const B={format:"html",...k},M=R7(n,w,B),H=wP(l,M,B),Q=SP(m,H,B);return B.format==="tree"?Q:AA(n,r,u,Q,B)};return{schema:u,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Fe(D7,m,o),getTempAttrs:we(o),getNodeFilters:m.getNodeFilters,getAttributeFilters:m.getAttributeFilters,removeNodeFilter:m.removeNodeFilter,removeAttributeFilter:m.removeAttributeFilter}},EP=(e,n)=>{const o=uK(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},dK="html",M7=(e,n)=>({...e,format:n,get:!0,getInner:!0}),B7=(e,n={})=>{const o=n.format?n.format:dK,r=M7(n,o);return _2(e,r).fold(Qe,l=>{const u=Ad(e,l);return Y$(e,u,l)})},Df="html",fK=(e,n)=>({format:Df,...e,set:!0,content:n}),kP=(e,n,o={})=>{const r=fK(o,n);return dA(e,r).map(l=>{const u=TA(e,l.content,l);return fA(e,u.html,l),u.content}).getOr(n)},$7="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),M2="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),P7="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),RA=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],DA=(e,n)=>{const o=Qt(n,r=>Cn(e,r));return Re(o)},TP=e=>{const n=DA(e,$7),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Re(n)},N7=e=>DA(e,M2),_P=(e,n)=>{const o=et.makeMap(e.plugins," "),l=Qt(n,u=>Cn(o,u));return Re(l)},wh=e=>_P(e,P7),I7=e=>_P(e,RA.map(n=>n.name)),F7=(e,n)=>{const o=TP(e),r=wh(n),l=r.length>0,u=o.length>0,m=n.theme==="mobile";if(l||u||m){const b=`
- `,w=m?`

Themes:${b}mobile`:"",k=l?`

Plugins:${b}${r.join(b)}`:"",B=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+w+k+B)}},L7=e=>ns(RA,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),H7=(e,n)=>{const o=N7(e),r=I7(n),l=r.length>0,u=o.length>0;if(l||u){const m=`
- `,b=l?`

Plugins:${m}${r.map(L7).join(m)}`:"",w=u?`

Options:${m}${o.join(m)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+w)}},z7=(e,n)=>{F7(e,n),H7(e,n)},UE=Po.DOM,V7=e=>{UE.setStyle(e.id,"display",e.orgDisplay)},WE=e=>z.from(e).each(n=>n.destroy()),U7=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},W7=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),UE.unbind(n,"submit reset",e.formEventDelegate))},Z7=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),l=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Oe(l==null?void 0:l.nextSibling)&&UE.remove(l.nextSibling),BC(e),e.editorManager.remove(e),!e.inline&&r&&V7(e),No(e),UE.remove(e.getContainer()),WE(n),WE(o),e.destroy()}},mK=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),WE(o),WE(r)),W7(e),U7(e),e.destroyed=!0}},jE=(()=>{const e={};return{add:(l,u)=>{e[l]=u},get:l=>e[l]?e[l]:{icons:{}},has:l=>Cn(e,l)}})(),Sh=bo.ModelManager,OP=(e,n)=>n.dom[e],AP=(e,n)=>parseInt(Ur(n,e),10),j7=Fe(OP,"clientWidth"),G7=Fe(OP,"clientHeight"),S1=Fe(AP,"margin-top"),x1=Fe(AP,"margin-left"),GE=e=>e.dom.getBoundingClientRect(),KE=(e,n,o)=>{const r=j7(e),l=G7(e);return n>=0&&o>=0&&n<=r&&o<=l},E1=(e,n,o,r)=>{const l=GE(n),u=e?l.left+n.dom.clientLeft+x1(n):0,m=e?l.top+n.dom.clientTop+S1(n):0,b=o-u,w=r-m;return{x:b,y:w}},k1=(e,n,o)=>{const r=de.fromDom(e.getBody()),l=e.inline?r:Ww(r),u=E1(e.inline,l,n,o);return KE(l,u.x,u.y)},qE=e=>z.from(e).map(de.fromDom),YE=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return qE(n).map(Gf).getOr(!1)};var RP=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const XE=e=>{const n=[],o=()=>{const H=e.theme;return H&&H.getNotificationManagerImpl?H.getNotificationManagerImpl():RP()},r=()=>z.from(n[0]),l=(H,Q)=>H.type===Q.type&&H.text===Q.text&&!H.progressBar&&!H.timeout&&!Q.progressBar&&!Q.timeout,u=()=>{Ge(n,H=>{H.reposition()})},m=H=>{n.push(H)},b=H=>{Js(n,Q=>Q===H).each(Q=>{n.splice(Q,1)})},w=(H,Q=!0)=>e.removed||!YE(e)?{}:(Q&&e.dispatch("BeforeOpenNotification",{notification:H}),ns(n,se=>l(o().getArgs(se),H)).getOrThunk(()=>{e.editorManager.setActive(e);const se=o().open(H,()=>{b(se),u(),r().fold(()=>e.focus(),X=>r1(de.fromDom(X.getEl())))});return m(se),u(),e.dispatch("OpenNotification",{notification:{...se}}),se})),k=()=>{r().each(H=>{o().close(H),b(H),u()})},B=we(n);return(H=>{H.on("SkinLoaded",()=>{const Q=WS(H);Q&&w({text:Q,type:"warning",timeout:0},!1),u()}),H.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),H.on("remove",()=>{Ge(n.slice(),Q=>{o().close(Q)})})})(e),{open:w,close:k,getNotifications:B}},xh=bo.PluginManager,Eh=bo.ThemeManager;var DP=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const T1=e=>{let n=[];const o=()=>{const X=e.theme;return X&&X.getWindowManagerImpl?X.getWindowManagerImpl():DP()},r=(X,oe)=>(...ye)=>oe?oe.apply(X,ye):void 0,l=X=>{e.dispatch("OpenWindow",{dialog:X})},u=X=>{e.dispatch("CloseWindow",{dialog:X})},m=X=>{n.push(X),l(X)},b=X=>{u(X),n=Qt(n,oe=>oe!==X),n.length===0&&e.focus()},w=()=>z.from(n[n.length-1]),k=X=>{e.editorManager.setActive(e),GC(e),e.ui.show();const oe=X();return m(oe),oe},B=(X,oe)=>k(()=>o().open(X,oe,b)),M=X=>k(()=>o().openUrl(X,b)),H=(X,oe,ye)=>{const xe=o();xe.alert(X,r(ye||xe,oe))},Q=(X,oe,ye)=>{const xe=o();xe.confirm(X,r(ye||xe,oe))},se=()=>{w().each(X=>{o().close(X),b(X)})};return e.on("remove",()=>{Ge(n,X=>{o().close(X)})}),{open:B,openUrl:M,alert:H,confirm:Q,close:se}},MA=(e,n)=>{e.notificationManager.open({type:"error",text:n})},B2=(e,n)=>{e._skinLoaded?MA(e,n):e.on("SkinLoaded",()=>{MA(e,n)})},MP=(e,n)=>{B2(e,Vc.translate(["Failed to upload image: {0}",n]))},kh=(e,n,o)=>{NC(e,n,{message:o}),console.error(o)},m0=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,BP=(e,n,o)=>{kh(e,"PluginLoadError",m0("plugin",n,o))},$P=(e,n,o)=>{kh(e,"IconsLoadError",m0("icons",n,o))},PP=(e,n,o)=>{kh(e,"LanguageLoadError",m0("language",n,o))},Wm=(e,n,o)=>{kh(e,"ThemeLoadError",m0("theme",n,o))},Th=(e,n,o)=>{kh(e,"ModelLoadError",m0("model",n,o))},Du=(e,n,o)=>{const r=Vc.translate(["Failed to initialize plugin: {0}",n]);NC(e,"PluginLoadError",{message:r}),JE(r,o),B2(e,r)},JE=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},K7=e=>/^[a-z0-9\-]+$/i.test(e),q7=e=>NP(e,VS(e)),Y7=e=>NP(e,Rp(e)),NP=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",l=`content${e.editorManager.suffix}.css`;return pn(n,u=>K7(u)&&!e.inline?`${o}/${u}/${l}`:e.documentBaseURI.toAbsolute(u))},X7=e=>{e.contentCSS=e.contentCSS.concat(q7(e),Y7(e))},J7=e=>e?vo(e.getElementsByTagName("img")):[],Q7=(e,n)=>{const o={};return{findAll:(l,u=St)=>{const m=Qt(J7(l),w=>{const k=w.src;return w.hasAttribute("data-mce-bogus")||w.hasAttribute("data-mce-placeholder")||!k||k===co.transparentSrc?!1:or(k,"blob:")?!e.isUploaded(k)&&u(w):or(k,"data:")?u(w):!1}),b=pn(m,w=>{const k=w.src;if(Cn(o,k))return o[k].then(B=>P(B)?B:{image:w,blobInfo:B.blobInfo});{const B=y2(n,k).then(M=>(delete o[k],{image:w,blobInfo:M})).catch(M=>(delete o[k],M));return o[k]=B,B}});return Promise.all(b)}}},IP=()=>{let o={};const r=(H,Q)=>({status:H,resultUri:Q}),l=H=>H in o;return{hasBlobUri:l,getResultUri:H=>{const Q=o[H];return Q?Q.resultUri:null},isPending:H=>l(H)?o[H].status===1:!1,isUploaded:H=>l(H)?o[H].status===2:!1,markPending:H=>{o[H]=r(1,null)},markUploaded:(H,Q)=>{o[H]=r(2,Q)},removeFailed:H=>{delete o[H]},destroy:()=>{o={}}}};let ez=0;const tz=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},nz=e=>e+ez+++tz(),BA=()=>{let e=[];const n=M=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[M.toLowerCase()]||"dat",o=(M,H,Q,se,X)=>{if(P(M))return r({id:M,name:se,filename:X,blob:H,base64:Q});if(he(M))return r(M);throw new Error("Unknown input type")},r=M=>{if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const H=M.id||nz("blobid"),Q=M.name||H,se=M.blob;return{id:we(H),name:we(Q),filename:we(M.filename||Q+"."+n(se.type)),blob:we(se),base64:we(M.base64),blobUri:we(M.blobUri||URL.createObjectURL(se)),uri:we(M.uri)}},l=M=>{m(M.id())||e.push(M)},u=M=>ns(e,M).getOrUndefined(),m=M=>u(H=>H.id()===M);return{create:o,add:l,get:m,getByUri:M=>u(H=>H.blobUri()===M),getByData:(M,H)=>u(Q=>Q.base64()===M&&Q.blob().type===H),findFirst:u,removeByUri:M=>{e=Qt(e,H=>H.blobUri()===M?(URL.revokeObjectURL(H.blobUri()),!1):!0)},destroy:()=>{Ge(e,M=>{URL.revokeObjectURL(M.blobUri())}),e=[]}}},$A=(e,n)=>{const o={},r=(X,oe)=>X?X.replace(/\/$/,"")+"/"+oe.replace(/^\//,""):oe,l=(X,oe)=>new Promise((ye,xe)=>{const Ee=new XMLHttpRequest;Ee.open("POST",n.url),Ee.withCredentials=n.credentials,Ee.upload.onprogress=tt=>{oe(tt.loaded/tt.total*100)},Ee.onerror=()=>{xe("Image upload failed due to a XHR Transport error. Code: "+Ee.status)},Ee.onload=()=>{if(Ee.status<200||Ee.status>=300){xe("HTTP Error: "+Ee.status);return}const tt=JSON.parse(Ee.responseText);if(!tt||!P(tt.location)){xe("Invalid JSON: "+Ee.responseText);return}ye(r(n.basePath,tt.location))};const De=new FormData;De.append("file",X.blob(),X.filename()),Ee.send(De)}),u=re(n.handler)?n.handler:l,m=()=>new Promise(X=>{X([])}),b=(X,oe)=>({url:oe,blobInfo:X,status:!0}),w=(X,oe)=>({url:"",blobInfo:X,status:!1,error:oe}),k=(X,oe)=>{et.each(o[X],ye=>{ye(oe)}),delete o[X]},B=(X,oe,ye)=>(e.markPending(X.blobUri()),new Promise(xe=>{let Ee,De;try{const tt=()=>{Ee&&(Ee.close(),De=ot)},Gt=ze=>{tt(),e.markUploaded(X.blobUri(),ze),k(X.blobUri(),b(X,ze)),xe(b(X,ze))},at=ze=>{tt(),e.removeFailed(X.blobUri()),k(X.blobUri(),w(X,ze)),xe(w(X,ze))};De=ze=>{ze<0||ze>100||z.from(Ee).orThunk(()=>z.from(ye).map(Pn)).each(Ze=>{Ee=Ze,Ze.progressBar.value(ze)})},oe(X,De).then(Gt,ze=>{at(P(ze)?{message:ze}:ze)})}catch(tt){xe(w(X,tt))}})),M=X=>X===l,H=X=>{const oe=X.blobUri();return new Promise(ye=>{o[oe]=o[oe]||[],o[oe].push(ye)})},Q=(X,oe)=>(X=et.grep(X,ye=>!e.isUploaded(ye.blobUri())),Promise.all(et.map(X,ye=>e.isPending(ye.blobUri())?H(ye):B(ye,u,oe))));return{upload:(X,oe)=>!n.url&&M(u)?m():Q(X,oe)}},PA=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),FP=(e,n)=>$A(n,{url:Xy(e),basePath:A_(e),credentials:HS(e),handler:R_(e)}),oz=e=>{const n=IP(),o=FP(e,n);return{upload:(r,l=!0)=>o.upload(r,l?PA(e):void 0)}},LP=(e,n)=>e.dom.isEmpty(n.dom)&&Oe(e.schema.getTextBlockElements()[gs(n)]),HP=e=>n=>{LP(e,n)&&ar(n,de.fromHtml('<br data-mce-bogus="1" />'))},NA=e=>{const n=BA();let o,r;const l=IP(),u=[],m=Ee=>De=>e.selection?Ee(De):[],b=Ee=>Ee+(Ee.indexOf("?")===-1?"?":"&")+new Date().getTime(),w=(Ee,De,tt)=>{let Gt=0;do Gt=Ee.indexOf(De,Gt),Gt!==-1&&(Ee=Ee.substring(0,Gt)+tt+Ee.substr(Gt+De.length),Gt+=tt.length-De.length+1);while(Gt!==-1);return Ee},k=(Ee,De,tt)=>{const Gt=`src="${tt}"${tt===co.transparentSrc?' data-mce-placeholder="1"':""}`;return Ee=w(Ee,`src="${De}"`,Gt),Ee=w(Ee,'data-mce-src="'+De+'"','data-mce-src="'+tt+'"'),Ee},B=(Ee,De)=>{Ge(e.undoManager.data,tt=>{tt.type==="fragmented"?tt.fragments=pn(tt.fragments,Gt=>k(Gt,Ee,De)):tt.content=k(tt.content,Ee,De)})},M=(Ee,De)=>{const tt=e.convertURL(De,"src");B(Ee.src,De),gl(de.fromDom(Ee),{src:Ky(e)?b(De):De,"data-mce-src":tt})},H=()=>(o||(o=FP(e,l)),oe().then(m(Ee=>{const De=pn(Ee,tt=>tt.blobInfo);return o.upload(De,PA(e)).then(m(tt=>{const Gt=[];let at=!1;const ze=pn(tt,(Ze,Et)=>{const{blobInfo:_t,image:Ht}=Ee[Et];let mn=!1;return Ze.status&&qy(e)?(Ze.url&&!Mr(Ht.src,Ze.url)&&(at=!0),n.removeByUri(Ht.src),Ui(e)||M(Ht,Ze.url)):Ze.error&&(Ze.error.remove&&(B(Ht.src,co.transparentSrc),Gt.push(Ht),mn=!0),MP(e,Ze.error.message)),{element:Ht,status:Ze.status,uploadUri:Ze.url,blobInfo:_t,removed:mn}});return Gt.length>0&&!Ui(e)?e.undoManager.transact(()=>{Ge(dv(Gt),Ze=>{const Et=ti(Ze);Ro(Ze),Et.each(HP(e)),n.removeByUri(Ze.dom.src)})}):at&&e.undoManager.dispatchChange(),ze}))}))),Q=()=>FS(e)?H():Promise.resolve([]),se=Ee=>ks(u,De=>De(Ee)),X=Ee=>{u.push(Ee)},oe=()=>(r||(r=Q7(l,n)),r.findAll(e.getBody(),se).then(m(Ee=>{const De=Qt(Ee,tt=>P(tt)?(B2(e,tt),!1):tt.uriType!=="blob");return Ui(e)||Ge(De,tt=>{B(tt.image.src,tt.blobInfo.blobUri()),tt.image.src=tt.blobInfo.blobUri(),tt.image.removeAttribute("data-mce-src")}),De}))),ye=()=>{n.destroy(),l.destroy(),r=o=null},xe=Ee=>Ee.replace(/src="(blob:[^"]+)"/g,(De,tt)=>{const Gt=l.getResultUri(tt);if(Gt)return'src="'+Gt+'"';let at=n.getByUri(tt);return at||(at=Vo(e.editorManager.get(),(ze,Ze)=>ze||Ze.editorUpload&&Ze.editorUpload.blobCache.getByUri(tt),void 0)),at?'src="data:'+at.blob().type+";base64,"+at.base64()+'"':De});return e.on("SetContent",()=>{FS(e)?Q():oe()}),e.on("RawSaveContent",Ee=>{Ee.content=xe(Ee.content)}),e.on("GetContent",Ee=>{Ee.source_view||Ee.format==="raw"||Ee.format==="tree"||(Ee.content=xe(Ee.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Ee=>{Ge(Ee,De=>{const tt=De.attr("src");if(!tt||n.getByUri(tt))return;const Gt=l.getResultUri(tt);Gt&&De.attr("src",Gt)})})}),{blobCache:n,addFilter:X,uploadImages:H,uploadImagesAuto:Q,scanForImages:oe,destroy:ye}},zP=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:l=>{n.setStyle(l,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:l=>{n.setStyle(l,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const l={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[m,l,u]:[l,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(l,u,m)=>Bt(l)&&l.hasAttribute("href"),onformat:(l,u,m)=>{et.each(m,(b,w)=>{n.setAttrib(l,w,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":l=>{var u;return(u=l==null?void 0:l.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return et.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),l=>{r[l]={block:l,remove:"all"}}),r},IA={remove_similar:!0,inherit:!1},_h={selector:"td,th",...IA},sz={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},..._h},tablecellverticalalign:{styles:{"vertical-align":"%value"},..._h},tablecellbordercolor:{styles:{borderColor:"%value"},..._h},tablecellclass:{classes:["%value"],..._h},tableclass:{selector:"table",classes:["%value"],...IA},tablecellborderstyle:{styles:{borderStyle:"%value"},..._h},tablecellborderwidth:{styles:{borderWidth:"%value"},..._h}},rz=we(sz),Mf=e=>{const n={},o=m=>Oe(m)?n[m]:n,r=m=>Cn(n,m),l=(m,b)=>{m&&(P(m)?(Me(b)||(b=[b]),Ge(b,w=>{pt(w.deep)&&(w.deep=!di(w)),pt(w.split)&&(w.split=!di(w)||Tr(w)),pt(w.remove)&&di(w)&&!Tr(w)&&(w.remove="none"),di(w)&&Tr(w)&&(w.mixed=!0,w.block_expand=!0),P(w.classes)&&(w.classes=w.classes.split(/\s+/))}),n[m]=b):xt(m,(w,k)=>{l(k,w)}))},u=m=>(m&&n[m]&&delete n[m],n);return l(zP(e)),l(rz()),l(Mp(e)),{get:o,has:r,register:l,unregister:u}},Wi=et.each,vi=Po.DOM,QE=e=>Oe(e)&&he(e),$2=(e,n)=>{const o=n&&n.schema||zc({}),r=(w,k)=>{k.classes.length>0&&vi.addClass(w,k.classes.join(" ")),vi.setAttribs(w,k.attrs)},l=w=>{const k=P(w)?{name:w,classes:[],attrs:{}}:w,B=vi.create(k.name);return r(B,k),B},u=(w,k)=>{const B=o.getElementRule(w.nodeName.toLowerCase()),M=B==null?void 0:B.parentsRequired;return M&&M.length?k&&dn(M,k)?k:M[0]:!1},m=(w,k,B)=>{let M;const H=k[0],Q=QE(H)?H.name:void 0,se=u(w,Q);if(se)Q===se?(M=H,k=k.slice(1)):M=se;else if(H)M=H,k=k.slice(1);else if(!B)return w;const X=M?l(M):vi.create("div");X.appendChild(w),B&&et.each(B,ye=>{const xe=l(ye);X.insertBefore(xe,w)});const oe=QE(M)?M.siblings:void 0;return m(X,k,oe)},b=vi.create("div");if(e.length>0){const w=e[0],k=l(w),B=QE(w)?w.siblings:void 0;b.appendChild(m(k,e.slice(1),B))}return b},VP=e=>{e=et.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,l,u,m,b)=>{switch(l){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":et.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(m==="["){const w=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);w&&(o.attrs[w[1]]=w[2])}return""})),o.name=n||"div",o},UP=e=>P(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),et.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=et.map(n.split(/(?:~\+|~|\+)/),VP),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],WP=(e,n)=>{let o="",r=Pr(e);if(r==="")return"";const l=H=>P(H)?H.replace(/%(\w+)/g,""):"",u=(H,Q)=>vi.getStyle(Q!=null?Q:e.getBody(),H,!0);if(P(n)){const H=e.formatter.get(n);if(!H)return"";n=H[0]}if("preview"in n){const H=n.preview;if(H===!1)return"";r=H||r}let m=n.block||n.inline||"span",b;const w=UP(n.selector);w.length>0?(w[0].name||(w[0].name=m),m=n.selector,b=$2(w,e)):b=$2([m],e);const k=vi.select(m,b)[0]||b.firstChild;Wi(n.styles,(H,Q)=>{const se=l(H);se&&vi.setStyle(k,Q,se)}),Wi(n.attributes,(H,Q)=>{const se=l(H);se&&vi.setAttrib(k,Q,se)}),Wi(n.classes,H=>{const Q=l(H);vi.hasClass(k,Q)||vi.addClass(k,Q)}),e.dispatch("PreviewFormats"),vi.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const B=u("fontSize"),M=/px$/.test(B)?parseInt(B,10):0;return Wi(r.split(" "),H=>{let Q=u(H,k);if(!(H==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Q)&&(Q=u(H),Em(Q).toLowerCase()==="#ffffff"))&&!(H==="color"&&Em(Q).toLowerCase()==="#000000")){if(H==="font-size"&&/em|%$/.test(Q)){if(M===0)return;Q=parseFloat(Q)/(/%$/.test(Q)?100:1)*M+"px"}H==="border"&&Q&&(o+="padding:0 2px;"),o+=H+":"+Q+";"}}),e.dispatch("AfterPreviewFormats"),vi.remove(b),o},ZP=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},FA=e=>{const n=Mf(e),o=wr({});return ZP(e),F4(e),Ui(e)||f$(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,l,u)=>{C7(e,r,l,u)},remove:(r,l,u,m)=>{w7(e,r,l,u,m)},toggle:(r,l,u)=>{S7(e,r,l,u)},match:(r,l,u,m)=>p7(e,r,l,u,m),closest:r=>y7(e,r),matchAll:(r,l)=>v7(e,r,l),matchNode:(r,l,u,m)=>b7(e,r,l,u,m),canApply:r=>mP(e,r),formatChanged:(r,l,u,m)=>iK(e,o,r,l,u,m),getCssText:Fe(WP,e)}},LA=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},ek=(e,n,o)=>{const r=wr(!1),l=w=>{HE(n,!1,o),n.add({},w)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",w=>{const k=w.command;LA(k)||(xA(n,o),n.beforeChange())}),e.on("ExecCommand",w=>{const k=w.command;LA(k)||l(w)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",l),e.on("dragend",l),e.on("keyup",w=>{const k=w.keyCode;if(w.isDefaultPrevented())return;const B=co.os.isMacOS()&&w.key==="Meta";(k>=33&&k<=36||k>=37&&k<=40||k===45||w.ctrlKey||B)&&(l(),e.nodeChanged()),(k===46||k===8)&&e.nodeChanged(),r.get()&&n.typing&&!wA(LE(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",w=>{const k=w.keyCode;if(w.isDefaultPrevented())return;if(k>=33&&k<=36||k>=37&&k<=40||k===45){n.typing&&l(w);return}const B=w.ctrlKey&&!w.altKey||w.metaKey;if((k<16||k>20)&&k!==224&&k!==91&&!n.typing&&!B){n.beforeChange(),HE(n,!0,o),n.add({},w),r.set(!0);return}(co.os.isMacOS()?w.metaKey:w.ctrlKey&&!w.altKey)&&n.beforeChange()}),e.on("mousedown",w=>{n.typing&&l(w)});const u=w=>w.inputType==="insertReplacementText",m=w=>w.inputType==="insertText"&&w.data===null,b=w=>w.inputType==="insertFromPaste"||w.inputType==="insertFromDrop";e.on("input",w=>{w.inputType&&(u(w)||m(w)||b(w))&&l(w)}),e.on("AddUndo Undo Redo ClearUndos",w=>{w.isDefaultPrevented()||e.nodeChanged()})},HA=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},jP=e=>{const n=Zr(),o=wr(0),r=wr(0),l={data:[],typing:!1,beforeChange:()=>{cP(e,o,n)},add:(u,m)=>u7(e,l,r,o,n,u,m),dispatchChange:()=>{e.setDirty(!0);const u=LE(e);u.bookmark=Ba(e.selection),e.dispatch("change",{level:u,lastLevel:yt(l.data,r.get()).getOrUndefined()})},undo:()=>d7(e,l,o,r),redo:()=>f7(e,r,l.data),clear:()=>{m7(e,l,r)},reset:()=>{uP(e,l)},hasUndo:()=>g7(e,l,r),hasRedo:()=>h7(e,l,r),transact:u=>A2(e,l,o,u),ignore:u=>{dP(e,o,u)},extra:(u,m)=>{fP(e,l,r,u,m)}};return Ui(e)||ek(e,l,o),HA(e),l},az=[9,27,Ft.HOME,Ft.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ft.DOWN,Ft.UP,Ft.LEFT,Ft.RIGHT].concat(co.browser.isFirefox()?[224]:[]),GP="data-mce-placeholder",KP=e=>e.type==="keydown"||e.type==="keyup",zA=e=>{const n=e.keyCode;return n===Ft.BACKSPACE||n===Ft.DELETE},lz=e=>{if(KP(e)){const n=e.keyCode;return!zA(e)&&(Ft.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||dn(az,n))}else return!1},iz=e=>KP(e)&&!(zA(e)||e.type==="keyup"&&e.keyCode===229),VA=(e,n,o)=>{if(ir(de.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},cz=e=>{var n;const o=e.dom,r=Ps(e),l=(n=F_(e))!==null&&n!==void 0?n:"",u=(m,b)=>{if(lz(m))return;const w=e.getBody(),k=iz(m)?!1:VA(o,w,r);(o.getAttrib(w,GP)!==""!==k||b)&&(o.setAttrib(w,GP,k?l:null),o.setAttrib(w,"aria-placeholder",k?l:null),PC(e,k),e.on(k?"keydown":"keyup",u),e.off(k?"keyup":"keydown",u))};Oo(l)&&e.on("init",m=>{u(m,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>sl.setEditorTimeout(e,()=>u(b)))})},uz=(e,n)=>({block:e,position:n}),dz=(e,n)=>({from:e,to:n}),UA=(e,n)=>{const o=de.fromDom(e),r=de.fromDom(n.container());return Ub(o,r).map(l=>uz(l,n))},fz=e=>!Ao(e.from.block,e.to.block),qP=(e,n)=>ki(n,l=>Ls(l)||Do(l.dom),l=>Ao(l,e)).filter(rs).getOr(e),mz=(e,n)=>{const o=de.fromDom(e);return Ao(qP(o,n.from.block),qP(o,n.to.block))},tk=e=>Eo(e.from.block.dom)===!1&&Eo(e.to.block.dom)===!1,WA=e=>{const n=o=>vv(o)||gp(o.dom);return n(e.from.block)&&n(e.to.block)},gz=(e,n,o)=>bs(o.position.getNode())&&!ir(o.block)?Er(!1,o.block.dom).bind(r=>r.isEqual(o.position)?cc(n,e,r).bind(l=>UA(e,l)):z.some(o)).getOr(o):o,hz=(e,n,o)=>{const r=UA(e,He.fromRangeStart(o)),l=r.bind(u=>cc(n,e,u.position).bind(m=>UA(e,m).map(b=>gz(e,n,b))));return vr(r,l,dz).filter(u=>fz(u)&&mz(e,u)&&tk(u)&&WA(u))},pz=(e,n,o)=>o.collapsed?hz(e,n,o):z.none(),vz=e=>{const n=Qr(e);return Js(n,Gs).fold(we(n),o=>n.slice(0,o))},ZA=e=>{const n=vz(e);return Ge(n,Ro),n},YP=(e,n)=>{const o=Pm(n,e);return ns(o.reverse(),r=>ir(r)).each(Ro)},bz=e=>Qt(jw(e),n=>!ir(n)).length===0,jA=(e,n,o,r)=>{if(ir(o))return sf(o),kr(o.dom);bz(r)&&ir(n)&&Nl(r,de.fromTag("br"));const l=oa(o.dom,He.before(r.dom));return Ge(ZA(n),u=>{Nl(r,u)}),YP(e,n),l},yz=(e,n,o)=>{if(ir(o)){if(ir(n)){const u=_l((m=>{const b=(w,k)=>mg(w).fold(()=>k,B=>Ae(B)?b(B,k.concat(mf(B))):k);return b(m,[])})(o),(m,b)=>(Xw(m,b),b),Fl());Jd(n),ar(n,u)}return Ro(o),kr(n.dom)}const r=Wl(o.dom);return Ge(ZA(n),l=>{ar(o,l)}),YP(e,n),r},Cz=(e,n)=>{const o=Pm(n,e);return z.from(o[o.length-1])},wz=(e,n)=>$c(n,e)?Cz(n,e):z.none(),XP=(e,n)=>{Er(e,n.dom).bind(o=>z.from(o.getNode())).map(de.fromDom).filter(ha).each(Ro)},JP=(e,n,o)=>(XP(!0,n),XP(!1,o),wz(n,o).fold(Fe(yz,e,n,o),Fe(jA,e,n,o))),QP=(e,n,o,r)=>n?JP(e,r,o):JP(e,o,r),GA=(e,n)=>{const o=de.fromDom(e.getBody());return pz(o.dom,n,e.selection.getRng()).map(l=>()=>{QP(o,n,l.from.block,l.to.block).each(u=>{e.selection.setRng(u.toRange())})})},nk=(e,n)=>{const o=n.getRng();return vr(Ub(e,de.fromDom(o.startContainer)),Ub(e,de.fromDom(o.endContainer)),(r,l)=>Ao(r,l)?z.none():z.some(()=>{o.deleteContents(),QP(e,!0,r,l).each(u=>{n.setRng(u.toRange())})})).getOr(z.none())},P2=(e,n)=>{const o=de.fromDom(n),r=Fe(Ao,e);return us(o,Ls,r).isSome()},Sz=(e,n)=>P2(e,n.startContainer)||P2(e,n.endContainer),xz=(e,n)=>{const o=oa(e.dom,He.fromRangeStart(n)).isNone(),r=Ca(e.dom,He.fromRangeEnd(n)).isNone();return!Sz(e,n)&&o&&r},ok=e=>z.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Ez=e=>{const n=de.fromDom(e.getBody()),o=e.selection.getRng();return xz(n,o)?ok(e):nk(n,e.selection)},KA=(e,n)=>e.selection.isCollapsed()?z.none():Ez(e),Zm=(e,n,o,r,l)=>z.from(n._selectionOverrides.showCaret(e,o,r,l)),kz=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},N2=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?z.none():z.some(kz(n)),Tz=(e,n,o)=>{const r=Gg(1,e.getBody(),n),l=He.fromRangeStart(r),u=l.getNode();if(mb(u))return Zm(1,e,u,!l.isAtEnd(),!1);const m=l.getNode(!0);if(mb(m))return Zm(1,e,m,!1,!1);const b=ph(e.dom.getRoot(),l.getNode());return mb(b)?Zm(1,e,b,!1,o):z.none()},qA=(e,n,o)=>n.collapsed?Tz(e,n,o).getOr(n):n,_z=e=>gh(e)||eE(e),Oz=e=>hh(e)||XC(e),Az=(e,n)=>{ut(n)&&n.data.length===0&&e.remove(n)},eN=(e,n,o,r,l,u)=>{Zm(r,e,u.getNode(!l),l,!0).each(m=>{if(n.collapsed){const b=n.cloneRange();l?b.setEnd(m.startContainer,m.startOffset):b.setStart(m.endContainer,m.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(m)}),Az(e.dom,o)},gK=(e,n)=>{const o=e.selection.getRng();if(!ut(o.commonAncestorContainer))return z.none();const r=n?xr.Forwards:xr.Backwards,l=jc(e.getBody()),u=Fe(wf,n?l.next:l.prev),m=n?_z:Oz,b=vm(r,e.getBody(),o),w=u(b),k=w&&gc(n,w);if(!k||!Zp(b,k))return z.none();if(m(k))return z.some(()=>eN(e,o,b.getNode(),r,n,k));const B=u(k);return B&&m(B)&&Zp(k,B)?z.some(()=>eN(e,o,b.getNode(),r,n,B)):z.none()},bc=(e,n)=>gK(e,n),I2=(e,n)=>{const o=e.getBody();return n?kr(o).filter(gh):Wl(o).filter(hh)},sk=e=>{const n=e.selection.getRng();return!n.collapsed&&(I2(e,!0).exists(o=>o.isEqual(He.fromRangeStart(n)))||I2(e,!1).exists(o=>o.isEqual(He.fromRangeEnd(n))))},tN=e=>Oe(e)&&(Ls(de.fromDom(e))||Il(de.fromDom(e))),yc=Wc.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),nN=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Bt(o)&&o.getAttribute("data-mce-caret")===r},Rz=(e,n,o,r)=>{const l=u=>Ae(de.fromDom(u))&&!gd(o,r,e);return cC(!n,o).fold(()=>cC(n,r).fold(Pe,l),l)},YA=(e,n,o,r)=>{const l=r.getNode(!n);return Ub(de.fromDom(e),de.fromDom(o.getNode())).map(u=>ir(u)?yc.remove(u.dom):yc.moveToElement(l)).orThunk(()=>z.some(yc.moveToElement(l)))},oN=(e,n,o)=>cc(n,e,o).bind(r=>tN(r.getNode())||Rz(e,n,o,r)?z.none():n&&Eo(r.getNode())||!n&&Eo(r.getNode(!0))?YA(e,n,o,r):n&&hh(o)||!n&&gh(o)?z.some(yc.moveToPosition(r)):z.none()),Dz=(e,n)=>ft(n)?z.none():e&&Eo(n.nextSibling)?z.some(yc.moveToElement(n.nextSibling)):!e&&Eo(n.previousSibling)?z.some(yc.moveToElement(n.previousSibling)):z.none(),Mz=(e,n,o)=>o.fold(r=>z.some(yc.remove(r)),r=>z.some(yc.moveToElement(r)),r=>gd(n,r,e)?z.none():z.some(yc.moveToPosition(r))),g0=(e,n,o)=>nN(n,o)?Dz(n,o.getNode(!n)).orThunk(()=>oN(e,n,o)):oN(e,n,o).bind(r=>Mz(e,o,r)),sN=(e,n,o)=>{const r=Gg(n?1:-1,e,o),l=He.fromRangeStart(r),u=de.fromDom(e);return!n&&hh(l)?z.some(yc.remove(l.getNode(!0))):n&&gh(l)?z.some(yc.remove(l.getNode())):!n&&gh(l)&&o4(u,l)?Fn(u,l).map(m=>yc.remove(m.getNode())):n&&hh(l)&&nE(u,l)?NM(u,l).map(m=>yc.remove(m.getNode())):g0(e,n,l)},rN=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Vb(e,n,de.fromDom(o)),!0),aN=(e,n)=>o=>{const r=n?He.before(o):He.after(o);return e.selection.setRng(r.toRange()),!0},XA=e=>n=>(e.selection.setRng(n.toRange()),!0),lN=(e,n)=>z.from(ph(e.getBody(),n)),Bz=(e,n)=>{const o=e.selection.getNode();return lN(e,o).filter(Eo).fold(()=>sN(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(rN(e,n),aN(e,n),XA(e))),()=>z.some(ot))},$z=e=>{Ge(fa(e,".mce-offscreen-selection"),Ro)},hK=(e,n)=>{const o=e.selection.getNode();return Eo(o)&&!ma(o)?lN(e,o.parentNode).filter(Eo).fold(()=>z.some(()=>{$z(de.fromDom(e.getBody())),Vb(e,n,de.fromDom(e.selection.getNode())),d4(e)}),()=>z.some(ot)):sk(e)?z.some(()=>{u1(e,e.selection.getRng(),de.fromDom(e.getBody()))}):z.none()},Pz=e=>{const n=e.dom,o=e.selection,r=ph(e.getBody(),o.getNode());if(Do(r)&&n.isBlock(r)&&n.isEmpty(r)){const l=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(l),o.setRng(He.before(l).toRange())}return!0},iN=(e,n)=>e.selection.isCollapsed()?Bz(e,n):hK(e,n),Mu=(e,n)=>{const o=He.fromRangeStart(e.selection.getRng());return cc(n,e.getBody(),o).filter(r=>n?K6(r):YG(r)).bind(r=>Wg(n?0:-1,r)).map(r=>()=>e.selection.select(r))},JA=(e,n)=>e.selection.isCollapsed()?Mu(e,n):z.none(),h0=ut,Oh=e=>h0(e)&&e.data[0]===pa,QA=e=>h0(e)&&e.data[e.data.length-1]===pa,cN=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(pa)},rk=e=>{var n;if(h0(e.previousSibling))return QA(e.previousSibling)||e.previousSibling.appendData(pa),e.previousSibling;if(h0(e))return Oh(e)||e.insertData(0,pa),e;{const o=cN(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},Nz=e=>{var n,o;if(h0(e.nextSibling))return Oh(e.nextSibling)||e.nextSibling.insertData(0,pa),e.nextSibling;if(h0(e))return QA(e)||e.appendData(pa),e;{const r=cN(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},ak=(e,n)=>e?rk(n):Nz(n),Iz=Fe(ak,!0),Fz=Fe(ak,!1),uN=(e,n)=>ut(e.container())?ak(n,e.container()):ak(n,e.getNode()),dN=(e,n)=>{const o=n.get();return o&&e.container()===o&&ed(o)},Rd=(e,n)=>n.fold(o=>{pm(e.get());const r=Iz(o);return e.set(r),z.some(He(r,r.length-1))},o=>kr(o).map(r=>{if(dN(r,e)){const l=e.get();return He(l,1)}else{pm(e.get());const l=uN(r,!0);return e.set(l),He(l,1)}}),o=>Wl(o).map(r=>{if(dN(r,e)){const l=e.get();return He(l,l.length-1)}else{pm(e.get());const l=uN(r,!1);return e.set(l),He(l,l.length-1)}}),o=>{pm(e.get());const r=Fz(o);return e.set(r),z.some(He(r,1))}),fN=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return z.none()},Gl=Wc.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),mN=(e,n)=>{const o=Zc(n,e);return o||e},Lz=(e,n,o)=>{const r=eB(o),l=mN(n,r.container());return _f(e,l,r).fold(()=>Ca(l,r).bind(Fe(_f,e,l)).map(u=>Gl.before(u)),z.none)},Hz=(e,n)=>Cm(e,n)===null,lk=(e,n,o)=>_f(e,n,o).filter(Fe(Hz,n)),e3=(e,n,o)=>{const r=tB(o);return lk(e,n,r).bind(l=>oa(l,r).isNone()?z.some(Gl.start(l)):z.none())},t3=(e,n,o)=>{const r=eB(o);return lk(e,n,r).bind(l=>Ca(l,r).isNone()?z.some(Gl.end(l)):z.none())},gN=(e,n,o)=>{const r=tB(o),l=mN(n,r.container());return _f(e,l,r).fold(()=>oa(l,r).bind(Fe(_f,e,l)).map(u=>Gl.after(u)),z.none)},n3=e=>!XM(o3(e)),Dd=(e,n,o)=>fN([Lz,e3,t3,gN],[e,n,o]).filter(n3),o3=e=>e.fold(Qe,Qe,Qe,Qe),p0=e=>e.fold(we("before"),we("start"),we("end"),we("after")),v0=e=>e.fold(Gl.before,Gl.before,Gl.after,Gl.after),ik=e=>e.fold(Gl.start,Gl.start,Gl.end,Gl.end),hN=(e,n)=>p0(e)===p0(n)&&o3(e)===o3(n),pN=(e,n,o,r,l,u)=>vr(_f(n,o,r),_f(n,o,l),(m,b)=>m!==b&&u4(o,m,b)?Gl.after(e?m:b):u).getOr(u),vN=(e,n)=>e.fold(St,o=>!hN(o,n)),ck=(e,n,o,r,l)=>{const u=gc(e,l);return cc(e,o,u).map(Fe(gc,e)).fold(()=>r.map(v0),w=>Dd(n,o,w).map(Fe(pN,e,n,o,u,w)).filter(Fe(vN,r))).filter(n3)},s3=(e,n)=>e?n.fold(O(z.some,Gl.start),z.none,O(z.some,Gl.after),z.none):n.fold(z.none,O(z.some,Gl.before),z.none,O(z.some,Gl.end)),F2=(e,n,o,r)=>{const l=gc(e,r),u=Dd(n,o,l);return Dd(n,o,l).bind(Fe(s3,e)).orThunk(()=>ck(e,n,o,u,r))},zz=e=>re(e.selection.getSel().modify),r3=(e,n,o)=>{const r=e?1:-1;return n.setRng(He(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},Vz=(e,n)=>{const o=n.selection.getRng(),r=e?He.fromRangeEnd(o):He.fromRangeStart(o);return zz(n)?e&&Cg(r)?r3(!0,n.selection,r):!e&&Cv(r)?r3(!1,n.selection,r):!1:!1};var Bf;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Bf||(Bf={}));const L2=(e,n)=>e===xr.Backwards?It(n):n,Uz=(e,n,o)=>e===xr.Forwards?n.next(o):n.prev(o),bN=(e,n,o,r)=>bs(r.getNode(n===xr.Forwards))?Bf.Br:gd(o,r)===!1?Bf.Block:Bf.Wrap,Wz=(e,n,o,r)=>{const l=jc(o);let u=r;const m=[];for(;u;){const b=Uz(n,l,u);if(!b)break;if(bs(b.getNode(!1)))return n===xr.Forwards?{positions:L2(n,m).concat([b]),breakType:Bf.Br,breakAt:z.some(b)}:{positions:L2(n,m),breakType:Bf.Br,breakAt:z.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const w=bN(o,n,u,b);return{positions:L2(n,m),breakType:w,breakAt:z.some(b)}}m.push(b),u=b}return{positions:L2(n,m),breakType:Bf.Eol,breakAt:z.none()}},yN=(e,n,o,r)=>n(o,r).breakAt.map(l=>{const u=n(o,l).positions;return e===xr.Backwards?u.concat(l):[l].concat(u)}).getOr([]),a3=(e,n)=>Vo(e,(o,r)=>o.fold(()=>z.some(r),l=>vr(en(l.getClientRects()),en(r.getClientRects()),(u,m)=>{const b=Math.abs(n-u.left);return Math.abs(n-m.left)<=b?r:l}).or(o)),z.none()),uk=(e,n)=>en(n.getClientRects()).bind(o=>a3(e,o.left)),H2=Fe(Wz,He.isAbove,-1),z2=Fe(Wz,He.isBelow,1),CN=Fe(yN,-1,H2),wN=Fe(yN,1,z2),Zz=(e,n)=>H2(e,n).breakAt.isNone(),SN=(e,n)=>z2(e,n).breakAt.isNone(),jz=e=>kr(e).map(n=>[n].concat(z2(e,n).positions)).getOr([]),_1=e=>Wl(e).map(n=>H2(e,n).positions.concat(n)).getOr([]),xN=(e,n)=>uk(CN(e,n),n),l3=(e,n)=>uk(wN(e,n),n),EN=Eo,dk=(e,n)=>Math.abs(e.left-n),jm=(e,n)=>Math.abs(e.right-n),kN=e=>Ta(e,"node"),Cc=(e,n)=>dl(e,(o,r)=>{const l=Math.min(dk(o,n),jm(o,n)),u=Math.min(dk(r,n),jm(r,n));return u===l&&kN(r)&&EN(r.node)||u<l?r:o}),O1=e=>{const n=o=>pn(o,r=>{const l=cd(r);return l.node=e,l});if(Bt(e))return n(e.getClientRects());if(ut(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},fk=e=>Dr(e,O1);var V2;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(V2||(V2={}));const TN=(e,n,o,r)=>{let l=r;for(;l=Up(l,e,lf,n);)if(o(l))return},_N=(e,n,o,r,l,u)=>{let m=0;const b=[],w=M=>{let H=fk([M]);e===-1&&(H=H.reverse());for(let Q=0;Q<H.length;Q++){const se=H[Q];if(!o(se,k)){if(b.length>0&&n(se,_a(b))&&m++,se.line=m,l(se))return!0;b.push(se)}}return!1},k=_a(u.getClientRects());if(!k)return b;const B=u.getNode();return B&&(w(B),TN(e,r,w,B)),b},Gz=(e,n)=>n.line>e,Kz=(e,n)=>n.line===e,qz=Fe(_N,V2.Up,Ig,Fg),Yz=Fe(_N,V2.Down,Fg,Ig),i3=e=>_a(e.getClientRects()),Xz=(e,n,o,r)=>{const l=jc(n);let u,m,b,w;const k=[];let B=0;e===1?(u=l.next,m=Fg,b=Ig,w=He.after(r)):(u=l.prev,m=Ig,b=Fg,w=He.before(r));const M=i3(w);do{if(!w.isVisible())continue;const H=i3(w);if(b(H,M))continue;k.length>0&&m(H,_a(k))&&B++;const Q=cd(H);if(Q.position=w,Q.line=B,o(Q))return k;k.push(Q)}while(w=u(w));return k},ON=e=>n=>Gz(e,n),Ah=e=>n=>Kz(e,n),Md=(e,n)=>{e.selection.setRng(n),Yc(e,e.selection.getRng())},mk=(e,n,o)=>z.some(qA(e,n,o)),c3=(e,n,o,r,l,u)=>{const m=n===xr.Forwards,b=jc(e.getBody()),w=Fe(wf,m?b.next:b.prev),k=m?r:l;if(!o.collapsed){const se=As(o);if(u(se))return Zm(n,e,se,n===xr.Backwards,!1);if(sk(e)){const X=o.cloneRange();return X.collapse(n===xr.Backwards),z.from(X)}}const B=vm(n,e.getBody(),o);if(k(B))return N2(e,B.getNode(!m));let M=w(B);const H=wv(o);if(M)M=gc(m,M);else return H?z.some(o):z.none();if(k(M))return Zm(n,e,M.getNode(!m),m,!1);const Q=w(M);return Q&&k(Q)&&Zp(M,Q)?Zm(n,e,Q.getNode(!m),m,!1):H?mk(e,M.toRange(),!1):z.none()},gk=(e,n,o,r,l,u)=>{const m=vm(n,e.getBody(),o),b=_a(m.getClientRects()),w=n===V2.Down,k=e.getBody();if(!b)return z.none();if(sk(e)){const oe=w?He.fromRangeEnd(o):He.fromRangeStart(o);return(w?l3:xN)(k,oe).orThunk(()=>z.from(oe)).map(xe=>xe.toRange())}const M=(w?Yz:qz)(k,ON(1),m),H=Qt(M,Ah(1)),Q=b.left,se=Cc(H,Q);if(se&&u(se.node)){const oe=Math.abs(Q-se.left),ye=Math.abs(Q-se.right);return Zm(n,e,se.node,oe<ye,!1)}let X;if(r(m)?X=m.getNode():l(m)?X=m.getNode(!0):X=As(o),X){const oe=Xz(n,k,ON(1),X);let ye=Cc(Qt(oe,Ah(1)),Q);if(ye||(ye=_a(Qt(oe,Ah(0))),ye))return mk(e,ye.position.toRange(),!1)}return H.length===0?u3(e,w).filter(w?l:r).map(oe=>qA(e,oe.toRange(),!1)):z.none()},u3=(e,n)=>{const o=e.selection.getRng(),r=n?He.fromRangeEnd(o):He.fromRangeStart(o),l=cx(r.container(),e.getBody());if(n){const u=z2(l,r);return hn(u.positions)}else{const u=H2(l,r);return en(u.positions)}},AN=(e,n,o)=>u3(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),hk=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},RN=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},DN=(e,n,o)=>Rd(n,o).map(r=>(hk(e,r),o)),Jz=(e,n,o)=>{const r=He.fromRangeStart(e);if(e.collapsed)return r;{const l=He.fromRangeEnd(e);return o?oa(n,l).getOr(l):Ca(n,r).getOr(r)}},Qz=(e,n,o)=>{const r=e.getBody(),l=Jz(e.selection.getRng(),r,o),u=Fe(rl,e);return F2(o,u,r,l).bind(b=>DN(e,n,b))},MN=(e,n,o)=>{const r=pn(fa(de.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),m=>m.dom),l=Qt(r,e),u=Qt(o,e);Ge(Zn(l,u),Fe(RN,!1)),Ge(Zn(u,l),Fe(RN,!0))},eV=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=He.fromRangeStart(e.selection.getRng());He.isTextPosition(r)&&!QM(r)&&(hk(e,aO(o,r)),n.set(null))}},tV=(e,n,o,r)=>{if(n.selection.isCollapsed()){const l=Qt(r,e);Ge(l,u=>{const m=He.fromRangeStart(n.selection.getRng());Dd(e,n.getBody(),m).bind(b=>DN(n,o,b))})}},Zi=(e,n,o)=>mm(e)?Qz(e,n,o).isSome():!1,BN=(e,n,o)=>mm(n)?Vz(e,n):!1,d3=e=>{const n=wr(null),o=Fe(rl,e);return e.on("NodeChange",r=>{mm(e)&&(MN(o,e.dom,r.parents),eV(e,n),tV(o,e,n,r.parents))}),n},$N=Fe(BN,!0),f3=Fe(BN,!1),pk=(e,n,o)=>{if(mm(e)){const r=u3(e,n).getOrThunk(()=>{const l=e.selection.getRng();return n?He.fromRangeEnd(l):He.fromRangeStart(l)});return Dd(Fe(rl,e),e.getBody(),r).exists(l=>{const u=v0(l);return Rd(o,u).exists(m=>(hk(e,m),!0))})}else return!1},nV=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},oV=e=>vr(kr(e),Wl(e),(n,o)=>{const r=gc(!0,n),l=gc(!1,o);return Ca(e,r).forall(u=>u.isEqual(l))}).getOr(!0),PN=(e,n)=>o=>Rd(n,o).map(r=>()=>hk(e,r)),NN=(e,n,o,r)=>{const l=e.getBody(),u=Fe(rl,e);e.undoManager.ignore(()=>{e.selection.setRng(nV(o,r)),hc(e),Dd(u,l,He.fromRangeStart(e.selection.getRng())).map(ik).bind(PN(e,n)).each(Jn)}),e.nodeChanged()},IN=(e,n)=>{const o=Zc(n,e);return o||e},sV=(e,n,o,r)=>{const l=IN(e.getBody(),r.container()),u=Fe(rl,e),m=Dd(u,l,r);return m.bind(w=>o?w.fold(we(z.some(ik(w))),z.none,we(z.some(v0(w))),z.none):w.fold(z.none,we(z.some(v0(w))),z.none,we(z.some(ik(w))))).map(PN(e,n)).getOrThunk(()=>{const w=fC(o,l,r),k=w.bind(B=>Dd(u,l,B));return vr(m,k,()=>_f(u,l,r).bind(B=>oV(B)?z.some(()=>{Vb(e,o,de.fromDom(B))}):z.none())).getOrThunk(()=>k.bind(()=>w.map(B=>()=>{o?NN(e,n,r,B):NN(e,n,B,r)})))})},m3=(e,n,o)=>{if(e.selection.isCollapsed()&&mm(e)){const r=He.fromRangeStart(e.selection.getRng());return sV(e,n,o,r)}return z.none()},U2=e=>Pl(e)>1,$f=(e,n)=>{const o=de.fromDom(e.getBody()),r=de.fromDom(e.selection.getStart()),l=Pm(r,o);return Js(l,n).fold(we(l),u=>l.slice(0,u))},A1=e=>Pl(e)===1,vk=e=>$f(e,n=>Gs(n)||U2(n)),g3=e=>$f(e,Gs),bk=(e,n)=>{const o=Fe(LB,e);return Dr(n,r=>o(r)?[r.dom]:[])},h3=e=>{const n=g3(e);return bk(e,n)},rV=(e,n,o,r)=>{const l=bk(n,r);if(l.length===0)Vb(n,e,o);else{const u=L4(o.dom,l);n.selection.setRng(u.toRange())}},FN=(e,n)=>{const o=Qt(vk(e),A1);return hn(o).bind(r=>{const l=He.fromRangeStart(e.selection.getRng());return Wb(n,l,r.dom)&&!HB(r)?z.some(()=>rV(n,e,r,o)):z.none()})},LN=(e,n)=>{const o=n.parentElement;return bs(n)&&!K(o)&&e.dom.isEmpty(o)},aV=e=>HB(de.fromDom(e)),HN=(e,n)=>{const o=e.selection.getStart(),r=LN(e,o)||aV(o)?L4(o,n):K8(e.selection.getRng(),n);e.selection.setRng(r.toRange())},lV=(e,n)=>{const o=Zn(n,h3(e));o.length>0&&HN(e,o)},zN=e=>ut(e.startContainer),iV=e=>e.startOffset===0&&zN(e),cV=(e,n)=>{const o=n.startContainer.parentElement;return!K(o)&&LB(e,de.fromDom(o))},VN=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!K(n)&&!K(o)&&n.isEqualNode(o)},UN=e=>{const n=e.endContainer;return e.endOffset===(ut(n)?n.length:n.childNodes.length)},pK=e=>VN(e)&&UN(e),vK=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),bK=e=>pK(e)||vK(e),uV=e=>{const n=e.selection.getRng();return iV(n)&&cV(e,n)&&bK(n)},yK=e=>{if(uV(e)){const n=h3(e);return z.some(()=>{hc(e),lV(e,n)})}else return z.none()},WN=(e,n)=>e.selection.isCollapsed()?FN(e,n):yK(e),dV=e=>U8(e,n=>Ni(n.dom),Gs),fV=e=>dV(de.fromDom(e.selection.getStart())),CK=e=>{const n=e.selection.getRng();return n.collapsed&&(zN(n)||e.dom.isEmpty(n.startContainer))&&!fV(e)},W2=e=>(CK(e)&&HN(e,[]),!0),Kl=(e,n,o)=>Oe(o)?z.some(()=>{e._selectionOverrides.hideFakeCaret(),Vb(e,n,de.fromDom(o))}):z.none(),ZN=(e,n)=>{const o=n?eE:XC,r=n?xr.Forwards:xr.Backwards,l=vm(r,e.getBody(),e.selection.getRng());return o(l)?Kl(e,n,l.getNode(!n)):z.from(gc(n,l)).filter(u=>o(u)&&Zp(l,u)).bind(u=>Kl(e,n,u.getNode(!n)))},Z2=(e,n)=>{const o=e.selection.getNode();return er(o)?Kl(e,n,o):z.none()},p3=(e,n)=>e.selection.isCollapsed()?ZN(e,n):Z2(e,n),jN=e=>ki(e,n=>Do(n.dom)||Eo(n.dom)).exists(n=>Do(n.dom)),yk=e=>Kd(e!=null?e:"").getOr(0),Ck=(e,n)=>{const o=e||dy(n)?"margin":"padding",r=Ur(n,"direction")==="rtl"?"-right":"-left";return o+r},mV=(e,n,o,r,l,u)=>{const m=Ck(o,de.fromDom(u)),b=yk(e.getStyle(u,m));if(n==="outdent"){const w=Math.max(0,b-r);e.setStyle(u,m,w?w+l:"")}else{const w=b+r+l;e.setStyle(u,m,w)}},gV=(e,n)=>ks(n,o=>{const r=Ck(ob(e),o),l=Cl(o,r).map(yk).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&l>0}),v3=e=>{const n=KN(e);return!e.mode.isReadOnly()&&(n.length>1||gV(e,n))},GN=e=>ai(e)||Il(e),hV=e=>ti(e).exists(GN),KN=e=>Qt(dv(e.selection.getSelectedBlocks()),n=>!GN(n)&&!hV(n)&&jN(n)),wk=(e,n)=>{var o,r;const{dom:l}=e,u=B_(e),m=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=yk(u),w=ob(e);Ge(KN(e),k=>{mV(l,n,w,b,m,k.dom)})},pV=e=>wk(e,"indent"),qN=e=>wk(e,"outdent"),vV=e=>{if(e.selection.isCollapsed()&&v3(e)){const n=e.dom,o=e.selection.getRng(),r=He.fromRangeStart(o),l=n.getParent(o.startContainer,n.isBlock);if(l!==null&&PM(de.fromDom(l),r))return z.some(()=>qN(e))}return z.none()},YN=(e,n,o)=>Ts([vV,iN,bc,(r,l)=>m3(r,n,l),GA,r2,JA,p3,KA,WN],r=>r(e,o)).filter(r=>e.selection.isEditable()),XN=(e,n)=>{YN(e,n,!1).fold(()=>{hc(e),d4(e)},Jn)},wK=(e,n)=>{YN(e,n,!0).fold(()=>b8(e),Jn)},bV=(e,n)=>{e.addCommand("delete",()=>{XN(e,n)}),e.addCommand("forwardDelete",()=>{wK(e,n)})},JN=5,yV=400,Sk=e=>e.touches===void 0||e.touches.length!==1?z.none():z.some(e.touches[0]),xk=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>JN||r>JN},QN=e=>{const n=Zr(),o=wr(!1),r=Ay(l=>{e.dispatch("longpress",{...l,type:"longpress"}),o.set(!0)},yV);e.on("touchstart",l=>{Sk(l).each(u=>{r.cancel();const m={x:u.clientX,y:u.clientY,target:l.target};r.throttle(l),o.set(!1),n.set(m)})},!0),e.on("touchmove",l=>{r.cancel(),Sk(l).each(u=>{n.on(m=>{xk(u,m)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",l=>{r.cancel(),l.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(l.target)).each(()=>{o.get()?l.preventDefault():e.dispatch("tap",{...l,type:"tap"})})},!0)},Ek=(e,n)=>Cn(e,n.nodeName),CV=(e,n)=>ut(n)?!0:Bt(n)?!Ek(e.getBlockElements(),n)&&!ui(n)&&!cf(e,n):!1,wV=(e,n,o)=>$o(e4(de.fromDom(o),de.fromDom(n)),r=>Ek(e,r.dom)),b3=(e,n)=>{if(ut(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||Ek(e,n.nextSibling)))return!0}return!1},eI=e=>e.dom.create(Ps(e),vf(e)),SV=e=>{const n=e.dom,o=e.selection,r=e.schema,l=r.getBlockElements(),u=o.getStart(),m=e.getBody();let b,w,k=!1;const B=Ps(e);if(!u||!Bt(u))return;const M=m.nodeName.toLowerCase();if(!r.isValidChild(M,B.toLowerCase())||wV(l,m,u))return;const H=o.getRng(),{startContainer:Q,startOffset:se,endContainer:X,endOffset:oe}=H,ye=l1(e);let xe=m.firstChild;for(;xe;)if(Bt(xe)&&vy(r,xe),CV(r,xe)){if(b3(l,xe)){w=xe,xe=xe.nextSibling,n.remove(w);continue}b||(b=eI(e),m.insertBefore(b,xe),k=!0),w=xe,xe=xe.nextSibling,b.appendChild(w)}else b=null,xe=xe.nextSibling;k&&ye&&(H.setStart(Q,se),H.setEnd(X,oe),o.setRng(H),e.nodeChanged())},tI=(e,n,o)=>{const r=de.fromDom(eI(e)),l=Fl();ar(r,l),o(n,r);const u=document.createRange();return u.setStartBefore(l.dom),u.setEndBefore(l.dom),u},xV=e=>{e.on("NodeChange",Fe(SV,e))},eu=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,nI=(e,n,o)=>function(r){const l=arguments,u=l[l.length-2],m=u>0?n.charAt(u-1):"";if(m==='"')return r;if(m===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(l[0])+'">'+e.dom.encode(typeof l[1]=="string"?l[1]:l[0])+"</span>"},oI=(e,n,o)=>{let r=n.length,l=o.content;if(o.format!=="raw"){for(;r--;)l=l.replace(n[r],nI(e,l,QS(e)));o.content=l}},SK=e=>{const n="contenteditable",o=" "+et.trim(nC(e))+" ",r=" "+et.trim(QS(e))+" ",l=eu(o),u=eu(r),m=J_(e);m.length>0&&e.on("BeforeSetContent",b=>{oI(e,m,b)}),e.parser.addAttributeFilter("class",b=>{let w=b.length;for(;w--;){const k=b[w];l(k)?k.attr(n,"true"):u(k)&&k.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let w=b.length;for(;w--;){const k=b[w];!l(k)&&!u(k)||(m.length>0&&k.attr("data-mce-content")?(k.name="#text",k.type=3,k.raw=!0,k.value=k.attr("data-mce-content")):k.attr(n,null))}})},xK=e=>Kf(de.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),EV=(e,n)=>{n.hasAttribute("data-mce-caret")&&(fy(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},EK=(e,n)=>{const o=xK(e);if(!!o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),EV(e,o);return}mu(o)&&(EV(e,o),e.undoManager.add())}},kV=e=>{e.on("keyup compositionstart",Fe(EK,e))},j2=Eo,TV=(e,n,o)=>c3(n,e,o,gh,hh,j2),y3=(e,n,o)=>gk(n,e,o,u=>gh(u)||MM(u),u=>hh(u)||fn(u),j2),sI=e=>{const n=e.dom.create(Ps(e));return n.innerHTML='<br data-mce-bogus="1">',n},C3=(e,n,o)=>{const r=jc(e.getBody()),l=Fe(wf,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!l(He.fromRangeStart(o))){const b=de.fromDom(sI(e));n===1?oi(de.fromDom(u),b):Nl(de.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},rI=(e,n)=>{const o=n?xr.Forwards:xr.Backwards,r=e.selection.getRng();return TV(o,e,r).orThunk(()=>(C3(e,o,r),z.none()))},_V=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return y3(o,e,r).orThunk(()=>(C3(e,o,r),z.none()))},OV=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return XM(o)?!n:n},aI=(e,n)=>rI(e,OV(e.selection,n)).exists(o=>(Md(e,o),!0)),lI=(e,n)=>_V(e,n).exists(o=>(Md(e,o),!0)),G2=(e,n)=>AN(e,n,n?hh:gh),kk=(e,n)=>I2(e,!n).map(o=>{const r=o.toRange(),l=e.selection.getRng();return n?r.setStart(l.startContainer,l.startOffset):r.setEnd(l.endContainer,l.endOffset),r}).exists(o=>(Md(e,o),!0)),AV=e=>dn(["figcaption"],gs(e)),RV=(e,n)=>{const o=Fe(Ao,n);return ki(de.fromDom(e.container()),Gs,o).filter(AV)},w3=(e,n,o)=>n?SN(e.dom,o):Zz(e.dom,o),DV=(e,n)=>{const o=de.fromDom(e.getBody()),r=He.fromRangeStart(e.selection.getRng());return RV(r,o).exists(()=>{if(w3(o,n,r)){const u=tI(e,o,n?ar:gg);return e.selection.setRng(u),!0}else return!1})},iI=(e,n)=>e.selection.isCollapsed()?DV(e,n):!1,S3={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},MV=e=>pn(e,n=>({...S3,...n})),BV=e=>pn(e,n=>({...S3,...n})),cI=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,$V=(e,n)=>Dr(MV(e),o=>cI(o,n)?[o]:[]),PV=(e,n)=>Dr(BV(e),o=>cI(o,n)?[o]:[]),Ln=(e,...n)=>()=>e.apply(null,n),R1=(e,n)=>ns($V(e,n),o=>o.action()),uI=(e,n)=>Ts(PV(e,n),o=>o.action()),x3=(e,n)=>{const o=n?xr.Forwards:xr.Backwards,r=e.selection.getRng();return c3(e,o,r,eE,XC,er).exists(l=>(Md(e,l),!0))},dI=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return gk(e,o,r,eE,XC,er).exists(l=>(Md(e,l),!0))},fI=(e,n)=>AN(e,n,n?XC:eE),mI=Wc.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),K2={...mI,none:e=>mI.none(e)},NV=(e,n)=>Ar(e,n,St),Ar=(e,n,o)=>Dr(Qr(e),r=>vl(r,n)?o(r)?[r]:[]:Ar(r,n,o)),IV=(e,n,o=Pe)=>{if(o(n))return z.none();if(dn(e,gs(n)))return z.some(n);const r=l=>vl(l,"table")||o(l);return rp(n,e.join(","),r)},FV=(e,n)=>IV(["td","th"],e,n),LV=e=>NV(e,"th,td"),E3=(e,n)=>bl(e,"table",n),q2=(e,n,o,r,l=St)=>{const u=r===1;if(!u&&o<=0)return K2.first(e[0]);if(u&&o>=e.length-1)return K2.last(e[e.length-1]);{const m=o+r,b=e[m];return l(b)?K2.middle(n,b):q2(e,n,m,r,l)}},k3=(e,n)=>E3(e,n).bind(o=>{const r=LV(o);return Js(r,u=>Ao(e,u)).map(u=>({index:u,all:r}))}),Rh=(e,n,o)=>k3(e,o).fold(()=>K2.none(e),l=>q2(l.all,e,l.index,1,n)),T3=(e,n,o)=>k3(e,o).fold(()=>K2.none(),l=>q2(l.all,e,l.index,-1,n)),gI=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),_3=(e,n)=>Dr(n,o=>{const r=gI(cd(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),O3=(e,n,o)=>Vo(e,(r,l)=>r.fold(()=>z.some(l),u=>{const m=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(l.x-n)+Math.abs(l.y-o));return z.some(b<m?l:u)}),z.none()),Tk=(e,n,o,r,l)=>{const u=fa(de.fromDom(o),"td,th,caption").map(b=>b.dom),m=Qt(_3(e,u),b=>n(b,l));return O3(m,r,l).map(b=>b.cell)},hI=e=>e.bottom,_k=e=>e.top,Ok=(e,n)=>e.y<n,Y2=(e,n)=>e.y>n,X2=Fe(Tk,hI,Ok),Bu=Fe(Tk,_k,Y2),J2=(e,n)=>en(n.getClientRects()).bind(o=>X2(e,o.left,o.top)).bind(o=>uk(_1(o),n)),pI=(e,n)=>hn(n.getClientRects()).bind(o=>Bu(e,o.left,o.top)).bind(o=>uk(jz(o),n)),vI=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),HV=e=>e.breakType===Bf.Wrap&&e.positions.length===0,bI=e=>e.breakType===Bf.Br&&e.positions.length===1,yI=(e,n,o)=>{const r=e(n,o);return HV(r)||!bs(o.getNode())&&bI(r)?!vI(e,n,r):r.breakAt.isNone()},zV=Fe(yI,H2),Q2=Fe(yI,z2),VV=(e,n,o)=>{const r=He.fromRangeStart(n);return Er(!e,o).exists(l=>l.isEqual(r))},UV=(e,n,o,r)=>{const l=e.selection.getRng(),u=n?1:-1;return ya()&&VV(n,l,o)?(Zm(u,e,o,!n,!1).each(m=>{Md(e,m)}),!0):!1},WV=(e,n,o)=>J2(n,o).orThunk(()=>en(o.getClientRects()).bind(r=>a3(CN(e,He.before(n)),r.left))).getOr(He.before(n)),ZV=(e,n,o)=>pI(n,o).orThunk(()=>en(o.getClientRects()).bind(r=>a3(wN(e,He.after(n)),r.left))).getOr(He.after(n)),CI=(e,n)=>{const o=n.getNode(e);return Os(o)?z.some(o):z.none()},jV=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?oi:Nl,l=tI(n,de.fromDom(o),r);Md(n,l)})},wI=(e,n,o)=>{const r=CI(!!n,o),l=n===!1;r.fold(()=>Md(e,o.toRange()),u=>Er(l,e.getBody()).filter(m=>m.isEqual(o)).fold(()=>Md(e,o.toRange()),m=>jV(n,e,u)))},GV=(e,n,o,r)=>{const l=e.selection.getRng(),u=He.fromRangeStart(l),m=e.getBody();if(!n&&zV(r,u)){const b=WV(m,o,u);return wI(e,n,b),!0}else if(n&&Q2(r,u)){const b=ZV(m,o,u);return wI(e,n,b),!0}else return!1},SI=(e,n,o)=>z.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>z.from(e.dom.getParent(r,"table")).map(l=>o(e,n,l,r))).getOr(!1),xI=(e,n)=>SI(e,n,UV),EI=(e,n)=>SI(e,n,GV),KV=e=>{const n=Sd.exact(e,0,e,0);return qc(n)},kI=(e,n,o)=>o.fold(z.none,z.none,(r,l)=>$6(l).map(u=>KV(u)),r=>(e.execCommand("mceTableInsertRowAfter"),TI(e,n,r))),TI=(e,n,o)=>kI(e,n,Rh(o,Mn)),_I=(e,n,o)=>kI(e,n,T3(o,Mn)),A3=(e,n)=>{const o=["table","li","dl"],r=de.fromDom(e.getBody()),l=b=>{const w=gs(b);return Ao(b,r)||dn(o,w)},u=e.selection.getRng(),m=de.fromDom(n?u.endContainer:u.startContainer);return FV(m,l).map(b=>(E3(b,l).each(B=>{e.model.table.clearSelectedCells(B.dom)}),e.selection.collapse(!n),(n?TI:_I)(e,l,b).each(B=>{e.selection.setRng(B)}),!0)).getOr(!1)},OI=(e,n,o)=>{const r=co.os.isMacOS()||co.os.isiOS();R1([{keyCode:Ft.RIGHT,action:Ln(aI,e,!0)},{keyCode:Ft.LEFT,action:Ln(aI,e,!1)},{keyCode:Ft.UP,action:Ln(lI,e,!1)},{keyCode:Ft.DOWN,action:Ln(lI,e,!0)},...r?[{keyCode:Ft.UP,action:Ln(kk,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Ft.DOWN,action:Ln(kk,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ft.RIGHT,action:Ln(xI,e,!0)},{keyCode:Ft.LEFT,action:Ln(xI,e,!1)},{keyCode:Ft.UP,action:Ln(EI,e,!1)},{keyCode:Ft.DOWN,action:Ln(EI,e,!0)},{keyCode:Ft.RIGHT,action:Ln(x3,e,!0)},{keyCode:Ft.LEFT,action:Ln(x3,e,!1)},{keyCode:Ft.UP,action:Ln(dI,e,!1)},{keyCode:Ft.DOWN,action:Ln(dI,e,!0)},{keyCode:Ft.RIGHT,action:Ln(Zi,e,n,!0)},{keyCode:Ft.LEFT,action:Ln(Zi,e,n,!1)},{keyCode:Ft.RIGHT,ctrlKey:!r,altKey:r,action:Ln($N,e,n)},{keyCode:Ft.LEFT,ctrlKey:!r,altKey:r,action:Ln(f3,e,n)},{keyCode:Ft.UP,action:Ln(iI,e,!1)},{keyCode:Ft.DOWN,action:Ln(iI,e,!0)}],o).each(l=>{o.preventDefault()})},qV=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||OI(e,n,o)})},Bd=(e,n)=>({container:e,offset:n}),Ak=Po.DOM,Rk=e=>n=>e===n?-1:0,AI=e=>n=>e.isBlock(n)||dn(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",R3=(e,n,o)=>{if(ut(e)&&n>=0)return z.some(Bd(e,n));{const r=gf(Ak);return z.from(r.backwards(e,n,Rk(e),o)).map(l=>Bd(l.container,l.container.data.length))}},RI=(e,n,o)=>{if(ut(e)&&n>=e.length)return z.some(Bd(e,n));{const r=gf(Ak);return z.from(r.forwards(e,n,Rk(e),o)).map(l=>Bd(l.container,0))}},D3=(e,n,o)=>{if(!ut(e))return z.none();const r=e.data;if(n>=0&&n<=r.length)return z.some(Bd(e,n));{const l=gf(Ak);return z.from(l.backwards(e,n,Rk(e),o)).bind(u=>{const m=u.container.data;return D3(u.container,n+m.length,o)})}},M3=(e,n,o)=>{if(!ut(e))return z.none();const r=e.data;if(n<=r.length)return z.some(Bd(e,n));{const l=gf(Ak);return z.from(l.forwards(e,n,Rk(e),o)).bind(u=>M3(u.container,n-r.length,o))}},Dk=(e,n,o,r,l)=>{const u=gf(e,AI(e));return z.from(u.backwards(n,o,r,l))},YV=e=>e.collapsed&&ut(e.startContainer),DI=e=>Qu(e.toString().replace(/\u00A0/g," ")),MI=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,Mk=(e,n)=>e.substring(n.length),XV=(e,n,o)=>{let r;const l=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(MI(u))return z.none();if(l===u&&Mr(e,o,r,n))break}return z.some(r)},JV=(e,n,o,r=0)=>{if(!YV(n))return z.none();const l={text:"",offset:0},u=(b,w,k)=>(l.text=k+l.text,l.offset+=w,XV(l.text,l.offset,o).getOr(w)),m=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Dk(e,n.startContainer,n.startOffset,u,m).bind(b=>{const w=n.cloneRange();if(w.setStart(b.container,b.offset),w.setEnd(n.endContainer,n.endOffset),w.collapsed)return z.none();const k=DI(w);return k.lastIndexOf(o)!==0||Mk(k,o).length<r?z.none():z.some({text:Mk(k,o),range:w,trigger:o})})},B3=(e,n,o,r=0)=>N6(de.fromDom(n.startContainer)).fold(()=>JV(e,n,o,r),l=>{const u=e.createRng();u.selectNode(l.dom);const m=DI(u);return z.some({range:u,text:Mk(m,o),trigger:o})}),QV=e=>e.nodeType===tp,e9=e=>e.nodeType===ag,$3=e=>{if(QV(e))return Bd(e,e.data.length);{const n=e.childNodes;return n.length>0?$3(n[n.length-1]):Bd(e,n.length)}},BI=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?BI(o[n],0):o.length>0&&e9(e)&&o.length===n?$3(o[o.length-1]):Bd(e,n)},t9=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return Dk(e,n.container,n.offset,(l,u)=>u===0?-1:u,r).filter(l=>{const u=l.container.data.charAt(l.offset-1);return!MI(u)}).isSome()},n9=e=>n=>{const o=BI(n.startContainer,n.startOffset);return!t9(e,o)},$I=(e,n,o)=>Ts(o.triggers,r=>B3(e,n,r)),PI=(e,n)=>{const o=n(),r=e.selection.getRng();return $I(e.dom,r,o).bind(l=>NI(e,n,l))},NI=(e,n,o,r={})=>{var l;const u=n(),b=(l=e.selection.getRng().startContainer.nodeValue)!==null&&l!==void 0?l:"",w=Qt(u.lookupByTrigger(o.trigger),B=>o.text.length>=B.minChars&&B.matches.getOrThunk(()=>n9(e.dom))(o.range,b,o.text));if(w.length===0)return z.none();const k=Promise.all(pn(w,B=>B.fetch(o.text,B.maxResults,r).then(H=>({matchText:o.text,items:H,columns:B.columns,onAction:B.onAction,highlightOn:B.highlightOn}))));return z.some({lookupData:k,context:o})};var $d;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})($d||($d={}));const P3=(e,n,o)=>e.stype===$d.Error?n(e.serror):o(e.svalue),o9=e=>{const n=[],o=[];return Ge(e,r=>{P3(r,l=>o.push(l),l=>n.push(l))}),{values:n,errors:o}},s9=(e,n)=>e.stype===$d.Error?{stype:$d.Error,serror:n(e.serror)}:e,r9=(e,n)=>e.stype===$d.Value?{stype:$d.Value,svalue:n(e.svalue)}:e,a9=(e,n)=>e.stype===$d.Value?n(e.svalue):e,l9=(e,n)=>e.stype===$d.Error?n(e.serror):e,i9=e=>({stype:$d.Value,svalue:e}),II=e=>({stype:$d.Error,serror:e}),Sa={fromResult:e=>e.fold(II,i9),toResult:e=>P3(e,$a.error,$a.value),svalue:i9,partition:o9,serror:II,bind:a9,bindError:l9,map:r9,mapError:s9,fold:P3},I3=e=>he(e)&&Uo(e).length>100?" removed due to size":JSON.stringify(e,null,2),FI=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:we("... (only showing first ten failures)")}]):e;return pn(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},ew=(e,n)=>Sa.serror([{path:e,getErrorInfo:n}]),u9=(e,n,o)=>ew(e,()=>'Could not find valid *required* value for "'+n+'" in '+I3(o)),d9=(e,n)=>ew(e,()=>'Choice schema did not contain choice key: "'+n+'"'),f9=(e,n,o)=>ew(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+I3(n)),LI=(e,n)=>ew(e,we(n)),m9=(e,n,o,r)=>Ko(o,r).fold(()=>f9(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),F3=(e,n)=>({extract:(l,u)=>Ko(u,e).fold(()=>d9(l,e),b=>m9(l,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Uo(n)}),g9=(e,n)=>n,h9=(e,n)=>Ye(e)&&Ye(n)?tw(e,n):n,HI=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const l=n[r];for(const u in l)Cn(l,u)&&(o[u]=e(o[u],l[u]))}return o},tw=HI(h9),p9=HI(g9),zI=()=>({tag:"required",process:{}}),v9=e=>({tag:"defaultedThunk",process:e}),VI=e=>v9(we(e)),b9=()=>({tag:"option",process:{}}),Kr=(e,n)=>e.length>0?Sa.svalue(tw(n,p9.apply(void 0,e))):Sa.svalue(n),Pd=e=>O(Sa.serror,Si)(e),y9={consolidateObj:(e,n)=>{const o=Sa.partition(e);return o.errors.length>0?Pd(o.errors):Kr(o.values,n)},consolidateArr:e=>{const n=Sa.partition(e);return n.errors.length>0?Pd(n.errors):Sa.svalue(n.values)}},C9=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),w9=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),UI=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},Bk=e=>{const n=(r,l)=>Sa.bindError(e(l),u=>LI(r,u)),o=we("val");return{extract:n,toString:o}},b0=Bk(Sa.svalue),_K=(e,n,o,r)=>Ko(n,o).fold(()=>u9(e,o,n),r),WI=(e,n,o,r)=>{const l=Ko(e,n).getOrThunk(()=>o(e));return r(l)},S9=(e,n,o)=>o(Ko(e,n)),Nd=(e,n,o,r)=>{const l=Ko(e,n).map(u=>u===!0?o(e):u);return r(l)},x9=(e,n,o,r,l)=>{const u=b=>l.extract(n.concat([r]),b),m=b=>b.fold(()=>Sa.svalue(z.none()),w=>{const k=l.extract(n.concat([r]),w);return Sa.map(k,z.some)});switch(e.tag){case"required":return _K(n,o,r,u);case"defaultedThunk":return WI(o,r,e.process,u);case"option":return S9(o,r,m);case"defaultedOptionThunk":return Nd(o,r,e.process,m);case"mergeWithThunk":return WI(o,r,we({}),b=>{const w=tw(e.process(o),b);return u(w)})}},E9=(e,n,o)=>{const r={},l=[];for(const u of o)UI(u,(m,b,w,k)=>{const B=x9(w,e,n,m,k);Sa.fold(B,M=>{l.push(...M)},M=>{r[b]=M})},(m,b)=>{r[m]=b(n)});return l.length>0?Sa.serror(l):Sa.svalue(r)},$k=e=>({extract:(r,l)=>E9(r,l,e),toString:()=>`obj{
`+pn(e,l=>UI(l,(u,m,b,w)=>u+" -> "+w.toString(),(u,m)=>"state("+u+")")).join(`
`)+"}"}),ZI=e=>({extract:(r,l)=>{const u=pn(l,(m,b)=>e.extract(r.concat(["["+b+"]"]),m));return y9.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),L3=e=>Bk(n=>e(n).fold(Sa.serror,Sa.svalue)),jI=(e,n,o)=>{const r=n.extract([e],o);return Sa.mapError(r,l=>({input:o,errors:l}))},k9=(e,n,o)=>Sa.toResult(jI(e,n,o)),T9=e=>`Errors: 
`+FI(e.errors).join(`
`)+`

Input object: `+I3(e.input),GI=(e,n)=>F3(e,Hn(n,$k)),KI=we(b0),nw=(e,n)=>Bk(o=>{const r=typeof o;return e(o)?Sa.svalue(o):Sa.serror(`Expected type: ${n} but got: ${r}`)}),H3=nw(Nt,"number"),y0=nw(P,"string"),z3=nw(Ie,"boolean"),V3=nw(re,"function"),ow=C9,qI=w9,_9=e=>L3(n=>dn(e,n)?$a.value(n):$a.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),Pk=(e,n)=>ow(e,e,zI(),n),U3=e=>Pk(e,y0),YI=e=>Pk(e,V3),XI=(e,n)=>ow(e,e,zI(),ZI(n)),W3=(e,n)=>ow(e,e,b9(),n),C0=e=>W3(e,y0),O9=e=>W3(e,V3),A9=(e,n)=>ow(e,e,VI(n),KI()),w0=(e,n,o)=>ow(e,e,VI(n),o),JI=(e,n)=>w0(e,n,H3),R9=(e,n)=>w0(e,n,y0),Z3=(e,n,o)=>w0(e,n,_9(o)),sw=(e,n)=>w0(e,n,z3),Nk=(e,n)=>w0(e,n,V3),QI=(e,n,o)=>w0(e,n,ZI(o)),D9=U3("type"),M9=YI("fetch"),j3=YI("onAction"),Ik=Nk("onSetup",()=>ot),e5=C0("text"),t5=C0("icon"),B9=C0("tooltip"),$9=C0("label"),OK=sw("active",!1),AK=sw("enabled",!0),P9=sw("primary",!1),N9=e=>A9("columns",e),Fk=e=>R9("type",e),I9=$k([D9,U3("trigger"),JI("minChars",1),N9(1),JI("maxResults",10),O9("matches"),M9,j3,QI("highlightOn",[],y0)]),F9=e=>k9("Autocompleter",I9,{trigger:e.ch,...e}),n5=[AK,B9,t5,e5,Ik],o5=[OK].concat(n5),qs=[Nk("predicate",Pe),Z3("scope","node",["node","editor"]),Z3("position","selection",["node","selection","line"])],G3=n5.concat([Fk("contextformbutton"),P9,j3,qI("original",Qe)]),Pf=o5.concat([Fk("contextformbutton"),P9,j3,qI("original",Qe)]),s5=n5.concat([Fk("contextformbutton")]),r5=o5.concat([Fk("contextformtogglebutton")]),L9=GI("type",{contextformbutton:G3,contextformtogglebutton:Pf});$k([Fk("contextform"),Nk("initValue",we("")),$9,XI("commands",L9),W3("launch",GI("type",{contextformbutton:s5,contextformtogglebutton:r5}))].concat(qs));const Lk=e=>{const n=e.ui.registry.getAll().popups,o=Hn(n,m=>F9(m).fold(b=>{throw new Error(T9(b))},Qe)),r=Qm(ru(o,m=>m.trigger)),l=Uu(o);return{dataset:o,triggers:r,lookupByTrigger:m=>Qt(l,b=>b.trigger===m)}},K3=(e,n)=>{const o=Ay(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const l=r.which;l===8?o.throttle():l===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},a5=e=>{const n=Zr(),o=wr(!1),r=n.isSet,l=()=>{r()&&(cK(e),MO(e),o.set(!1),n.clear())},u=k=>{r()||(To(e,k.range),n.set({trigger:k.trigger,matchLength:k.text.length}))},m=au(()=>Lk(e)),b=k=>n.get().map(B=>B3(e.dom,e.selection.getRng(),B.trigger).bind(M=>NI(e,m,M,k))).getOrThunk(()=>PI(e,m)),w=k=>{b(k).fold(l,B=>{u(B.context),B.lookupData.then(M=>{n.get().map(H=>{const Q=B.context;H.trigger===Q.trigger&&(Q.text.length-H.matchLength>=10?l():(n.set({...H,matchLength:Q.text.length}),o.get()?FC(e,{lookupData:M}):(o.set(!0),Jp(e,{lookupData:M}))))})})})};e.addCommand("mceAutocompleterReload",(k,B)=>{const M=he(B)?B.fetchOptions:{};w(M)}),e.addCommand("mceAutocompleterClose",l),K3(e,{cancelIfNecessary:l,load:w})},q3=e=>(n,o,r={})=>{const l=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:l,currentTarget:l,eventPhase:Event.AT_TARGET,originalTarget:l,explicitOriginalTarget:l,isTrusted:!1,srcElement:l,cancelable:!1,preventDefault:ot,inputType:o},m=wp(new InputEvent(e));return n.dispatch(e,{...m,...u,...r})},Hk=q3("input"),zk=q3("beforeinput"),H9=(e,n,o)=>{const r=o.keyCode===Ft.BACKSPACE?"deleteContentBackward":"deleteContentForward";uI([{keyCode:Ft.BACKSPACE,action:Ln(vV,e)},{keyCode:Ft.BACKSPACE,action:Ln(iN,e,!1)},{keyCode:Ft.DELETE,action:Ln(iN,e,!0)},{keyCode:Ft.BACKSPACE,action:Ln(bc,e,!1)},{keyCode:Ft.DELETE,action:Ln(bc,e,!0)},{keyCode:Ft.BACKSPACE,action:Ln(m3,e,n,!1)},{keyCode:Ft.DELETE,action:Ln(m3,e,n,!0)},{keyCode:Ft.BACKSPACE,action:Ln(r2,e,!1)},{keyCode:Ft.DELETE,action:Ln(r2,e,!0)},{keyCode:Ft.BACKSPACE,action:Ln(JA,e,!1)},{keyCode:Ft.DELETE,action:Ln(JA,e,!0)},{keyCode:Ft.BACKSPACE,action:Ln(p3,e,!1)},{keyCode:Ft.DELETE,action:Ln(p3,e,!0)},{keyCode:Ft.BACKSPACE,action:Ln(KA,e,!1)},{keyCode:Ft.DELETE,action:Ln(KA,e,!0)},{keyCode:Ft.BACKSPACE,action:Ln(GA,e,!1)},{keyCode:Ft.DELETE,action:Ln(GA,e,!0)},{keyCode:Ft.BACKSPACE,action:Ln(WN,e,!1)},{keyCode:Ft.DELETE,action:Ln(WN,e,!0)}],o).filter(l=>e.selection.isEditable()).each(l=>{o.preventDefault(),zk(e,r).isDefaultPrevented()||(l(),Hk(e,r))})},z9=(e,n,o)=>{const r=ec(),l=r.os,u=r.browser,m=l.isMacOS()?[{keyCode:Ft.BACKSPACE,altKey:!0,action:Ln(W2,e)},{keyCode:Ft.DELETE,altKey:!0,action:Ln(W2,e)}]:[{keyCode:Ft.BACKSPACE,ctrlKey:!0,action:Ln(W2,e)},{keyCode:Ft.DELETE,ctrlKey:!0,action:Ln(W2,e)}];l.isMacOS()&&o&&m.push({keyCode:u.isFirefox()?224:91,action:Ln(W2,e)}),R1([{keyCode:Ft.BACKSPACE,action:Ln(Pz,e)},{keyCode:Ft.DELETE,action:Ln(Pz,e)},...m],n)},V9=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Ft.BACKSPACE,r.isDefaultPrevented()||H9(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||z9(e,r,o),o=!1})},l5=e=>{for(;e;){if(Bt(e)||ut(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},S0=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=l5(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(We),n.firstChild)}const l=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new lr(n,n);let m=n,b;for(;b=u.current();){if(ut(b)){l.setStart(b,0),l.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){l.setStartBefore(b),l.setEndBefore(b);break}m=b,b=u.next()}b||(l.setStart(m,0),l.setEnd(m,0))}else bs(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(l.setStartBefore(n),l.setEndBefore(n)):(l.setStartAfter(n),l.setEndAfter(n)):(l.setStart(n,0),l.setEnd(n,0));e.selection.setRng(l),Yc(e,l)},Vk=(e,n)=>{const o=e.getRoot();let r,l=n;for(;l!==o&&l&&e.getContentEditable(l)!=="false";)e.getContentEditable(l)==="true"&&(r=l),l=l.parentNode;return l!==o?r:o},Y3=e=>z.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),U9=e=>Y3(e).fold(we(""),n=>n.nodeName.toUpperCase()),W9=e=>Y3(e).filter(n=>Il(de.fromDom(n))).isSome(),i5=(e,n)=>e.dom.getParent(n,Wr),c5=(e,n,o)=>{let r=n;for(;r&&r!==e&&K(r.nextSibling);){const l=r.parentElement;if(!l||!o(l))return Wr(l);r=l}return!1},Z9=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Ps(e)&&e.dom.isEmpty(o)&&c5(e.getBody(),o,r=>Cn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),j9=(e,n,o)=>{var r,l,u;const m=n(Ps(e)),b=i5(e,o);!b||(e.dom.insertAfter(m,b),S0(e,m),((u=(l=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||l===void 0?void 0:l.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},RK=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,X3=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},u5=(e,n)=>{const o=e==null?void 0:e.parentNode;return Oe(o)&&o.nodeName===n},d5=e=>Oe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),G9=e=>Oe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),f5=e=>d5(e)&&d5(e.parentNode),Uk=e=>{const n=e.parentNode;return G9(n)?n:e},rw=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Bt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},K9=(e,n,o,r,l)=>{const u=e.dom,m=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;f5(o)&&(l="LI");let w=n(l);if(rw(o,r,!0)&&rw(o,r,!1))if(u5(o,"LI")){const k=Uk(o);u.insertAfter(w,k),X3(o)?u.remove(k):u.remove(o)}else u.replace(w,o);else if(rw(o,r,!0))u5(o,"LI")?(u.insertAfter(w,Uk(o)),w.appendChild(u.doc.createTextNode(" ")),w.appendChild(o)):b.insertBefore(w,o),u.remove(r);else if(rw(o,r,!1))u.insertAfter(w,Uk(o)),u.remove(r);else{o=Uk(o);const k=m.cloneRange();k.setStartAfter(r),k.setEndAfter(o);const B=k.extractContents();l==="LI"&&RK(B,"LI")?(w=B.firstChild,u.insertAfter(B,o)):(u.insertAfter(B,o),u.insertAfter(w,o)),u.remove(r)}S0(e,w)},q9=e=>{Ge(iy(de.fromDom(e),ja),n=>{const o=n.dom;o.nodeValue=Qu(o.data)})},DK=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},al=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),J3=e=>{e.innerHTML='<br data-mce-bogus="1">'},Q3=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,eR=(e,n)=>Oe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",Y9=(e,n,o)=>{var r;const l=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Bt(u)&&!n[u.nodeName.toLowerCase()]&&l.push(u)}let m=l.length;for(;m--;)u=l[m],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||al(e,u))&&e.remove(u)},tR=(e,n,o)=>ut(n)?e?o===1&&n.data.charAt(o-1)===pa?0:o:o===n.data.length-1&&n.data.charAt(o)===pa?n.data.length:o:o,X9=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,tR(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,tR(!1,e.endContainer,e.endOffset)),n},J9=e=>{let n=e;do ut(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},Wk=(e,n,o)=>{const r=e.dom;z.from(o.style).map(r.parseStyle).each(w=>{const B={...da(de.fromDom(n)),...w};r.setStyles(n,B)});const l=z.from(o.class).map(w=>w.split(/\s+/)),u=z.from(n.className).map(w=>Qt(w.split(/\s+/),k=>k!==""));vr(l,u,(w,k)=>{const B=Qt(k,H=>!dn(w,H)),M=[...w,...B];r.setAttrib(n,"class",M.join(" "))});const m=["style","class"],b=os(o,(w,k)=>!dn(m,k));r.setAttribs(n,b)},aw=(e,n)=>{if(Ps(e).toLowerCase()===n.tagName.toLowerCase()){const r=vf(e);Wk(e,n,r)}},Q9=(e,n,o,r,l)=>{var u,m;const b=e.dom,w=(u=Vk(b,r))!==null&&u!==void 0?u:b.getRoot();let k=b.getParent(r,b.isBlock);if(!k||!eR(b,k)){if(k=k||w,!k.hasChildNodes()){const Q=b.create(n);return aw(e,Q),k.appendChild(Q),o.setStart(Q,0),o.setEnd(Q,0),Q}let B=r;for(;B&&B.parentNode!==k;)B=B.parentNode;let M;for(;B&&!b.isBlock(B);)M=B,B=B.previousSibling;const H=(m=M==null?void 0:M.parentElement)===null||m===void 0?void 0:m.nodeName;if(M&&H&&e.schema.isValidChild(H,n.toLowerCase())){const Q=M.parentNode,se=b.create(n);for(aw(e,se),Q.insertBefore(se,M),B=M;B&&!b.isBlock(B);){const X=B.nextSibling;se.appendChild(B),B=X}o.setStart(r,l),o.setEnd(r,l)}}return r},nR=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Bt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},oR=(e,n)=>{const o=Ul(e);return ft(n)?!1:P(o)?dn(et.explode(o),n.nodeName.toLowerCase()):o},eU={insert:(e,n)=>{let o,r,l,u,m=!1;const b=e.dom,w=e.schema,k=w.getNonEmptyElements(),B=e.selection.getRng(),M=Ps(e),H=B.collapsed&&B.startContainer===e.dom.getRoot(),Q=de.fromDom(B.startContainer),se=Xd(Q,B.startOffset),X=se.exists(_t=>uu(_t)&&!Mn(_t)),oe=H&&X,ye=_t=>{let Ht=o;const mn=w.getTextInlineElements();let gn;_t||l==="TABLE"||l==="HR"?gn=b.create(_t||M):gn=at.cloneNode(!1);let uo=gn;if(Ap(e)===!1)b.setAttrib(gn,"style",null),b.setAttrib(gn,"class",null);else do if(mn[Ht.nodeName]){if(Ni(Ht)||ui(Ht))continue;const yo=Ht.cloneNode(!1);b.setAttrib(yo,"id",""),gn.hasChildNodes()?(yo.appendChild(gn.firstChild),gn.appendChild(yo)):(uo=yo,gn.appendChild(yo))}while((Ht=Ht.parentNode)&&Ht!==Gt);return aw(e,gn),J3(uo),gn},xe=_t=>{const Ht=tR(_t,o,r);if(ut(o)&&(_t?Ht>0:Ht<o.data.length))return!1;if(o.parentNode===at&&m&&!_t||_t&&Bt(o)&&o===at.firstChild)return!0;if(Q3(o,"TABLE")||Q3(o,"HR"))return m&&!_t||!m&&_t;const mn=new lr(o,at);ut(o)&&(_t&&Ht===0?mn.prev():!_t&&Ht===o.data.length&&mn.next());let gn;for(;gn=mn.current();){if(Bt(gn)){if(!gn.getAttribute("data-mce-bogus")){const uo=gn.nodeName.toLowerCase();if(k[uo]&&uo!=="br")return!1}}else if(ut(gn)&&!Bi(gn.data))return!1;_t?mn.prev():mn.next()}return!0},Ee=()=>{let _t;return/^(H[1-6]|PRE|FIGURE)$/.test(l)&&ze!=="HGROUP"?_t=ye(M):_t=ye(),oR(e,u)&&eR(b,u)&&b.isEmpty(at,void 0,{includeZwsp:!0})?_t=b.split(u,at):b.insertAfter(_t,at),S0(e,_t),_t};xd(b,B).each(_t=>{B.setStart(_t.startContainer,_t.startOffset),B.setEnd(_t.endContainer,_t.endOffset)}),o=B.startContainer,r=B.startOffset;const De=!!(n&&n.shiftKey),tt=!!(n&&n.ctrlKey);Bt(o)&&o.hasChildNodes()&&!oe&&(m=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,m&&ut(o)?r=o.data.length:r=0);const Gt=Vk(b,o);if(!Gt||DK(e,o))return;De||(o=Q9(e,M,B,o,r));let at=b.getParent(o,b.isBlock)||b.getRoot();u=Oe(at==null?void 0:at.parentNode)?b.getParent(at.parentNode,b.isBlock):null,l=at?at.nodeName.toUpperCase():"";const ze=u?u.nodeName.toUpperCase():"";if(ze==="LI"&&!tt){const _t=u;at=_t,u=_t.parentNode,l=ze}if(Bt(u)&&Z9(e,De,at))return j9(e,ye,at);if(/^(LI|DT|DD)$/.test(l)&&Bt(u)&&b.isEmpty(at)){K9(e,ye,u,at,M);return}if(!oe&&(at===e.getBody()||!eR(b,at)))return;const Ze=at.parentNode;let Et;if(oe)Et=ye(M),se.fold(()=>{ar(Q,de.fromDom(Et))},_t=>{Nl(_t,de.fromDom(Et))}),e.selection.setCursorLocation(Et,0);else if(rf(at))Et=fy(at),b.isEmpty(at)&&J3(at),aw(e,Et),S0(e,Et);else if(xe(!1))Et=Ee();else if(xe(!0)&&Ze){Et=Ze.insertBefore(ye(),at);const _t=K0(de.fromDom(B.startContainer))&&B.collapsed;S0(e,Q3(at,"HR")||_t?Et:at)}else{const _t=X9(B).cloneRange();_t.setEndAfter(at);const Ht=_t.extractContents();q9(Ht),J9(Ht),Et=Ht.firstChild,b.insertAfter(Ht,at),Y9(b,k,Et),nR(b,at),b.isEmpty(at)&&J3(at),Et.normalize(),b.isEmpty(Et)?(b.remove(Et),Ee()):(aw(e,Et),S0(e,Et))}b.setAttrib(Et,"id",""),e.dispatch("NewBlock",{newBlock:Et})},fakeEventName:"insertParagraph"},BK=(e,n,o)=>{const r=new lr(n,o);let l;const u=e.getNonEmptyElements();for(;l=r.next();)if(u[l.nodeName.toLowerCase()]||ut(l)&&l.length>0)return!0;return!1},m5=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Yc(e,r)},tU=(e,n)=>{const o=e.selection,r=e.dom,l=o.getRng();let u,m=!1;xd(r,l).each(Q=>{l.setStart(Q.startContainer,Q.startOffset),l.setEnd(Q.endContainer,Q.endOffset)});let b=l.startOffset,w=l.startContainer;if(Bt(w)&&w.hasChildNodes()){const Q=b>w.childNodes.length-1;w=w.childNodes[Math.min(b,w.childNodes.length-1)]||w,Q&&ut(w)?b=w.data.length:b=0}let k=r.getParent(w,r.isBlock);const B=k&&k.parentNode?r.getParent(k.parentNode,r.isBlock):null,M=B?B.nodeName.toUpperCase():"",H=!!(n&&n.ctrlKey);M==="LI"&&!H&&(k=B),ut(w)&&b>=w.data.length&&(BK(e.schema,w,k||r.getRoot())||(u=r.create("br"),l.insertNode(u),l.setStartAfter(u),l.setEndAfter(u),m=!0)),u=r.create("br"),Kv(r,l,u),m5(e,u,m),e.undoManager.add()},$K=(e,n)=>{const o=de.fromTag("br");Nl(de.fromDom(n),o),e.undoManager.add()},nU=(e,n)=>{oU(e.getBody(),n)||oi(de.fromDom(n),de.fromTag("br"));const o=de.fromTag("br");oi(de.fromDom(n),o),m5(e,o.dom,!1),e.undoManager.add()},Id=e=>bs(e.getNode()),oU=(e,n)=>Id(He.after(n))?!0:Ca(e,He.after(n)).map(o=>bs(o.getNode())).getOr(!1),g5=e=>e&&e.nodeName==="A"&&"href"in e,Dh=e=>e.fold(Pe,g5,g5,Pe),sU=e=>{const n=Fe(rl,e),o=He.fromRangeStart(e.selection.getRng());return Dd(n,e.getBody(),o).filter(Dh)},h5=(e,n)=>{n.fold(ot,Fe($K,e),Fe(nU,e),ot)},p5={insert:(e,n)=>{const o=sU(e);o.isSome()?o.each(Fe(h5,e)):tU(e,n)},fakeEventName:"insertLineBreak"},v5=(e,n)=>Y3(e).filter(o=>n.length>0&&vl(de.fromDom(o),n)).isSome(),rU=e=>v5(e,xu(e)),aU=e=>v5(e,ic(e)),wc=Wc.generate([{br:[]},{block:[]},{none:[]}]),sR=(e,n)=>aU(e),rR=e=>(n,o)=>W9(n)===e,lw=(e,n)=>(o,r)=>U9(o)===e.toUpperCase()===n,lU=e=>{const n=Vk(e.dom,e.selection.getStart());return ft(n)},iw=e=>lw("pre",e),iU=()=>lw("summary",!0),Zk=e=>(n,o)=>IS(n)===e,cU=(e,n)=>rU(e),cw=(e,n)=>n,uU=e=>{const n=Ps(e),o=Vk(e.dom,e.selection.getStart());return Oe(o)&&e.schema.isValidChild(o.nodeName,n)},b5=e=>{const n=e.selection.getRng(),o=n.collapsed&&n.startContainer===e.dom.getRoot(),r=de.fromDom(n.startContainer),u=Xd(r,n.startOffset).map(m=>uu(m)&&!Mn(m));return o&&u.getOr(!0)},Sc=(e,n)=>(o,r)=>Vo(e,(u,m)=>u&&m(o,r),!0)?z.some(n):z.none(),dU=(e,n)=>fN([Sc([sR],wc.none()),Sc([iw(!0),lU],wc.none()),Sc([iU()],wc.br()),Sc([iw(!0),Zk(!1),cw],wc.br()),Sc([iw(!0),Zk(!1)],wc.block()),Sc([iw(!0),Zk(!0),cw],wc.block()),Sc([iw(!0),Zk(!0)],wc.br()),Sc([rR(!0),cw],wc.br()),Sc([rR(!0)],wc.block()),Sc([cU],wc.br()),Sc([cw],wc.br()),Sc([uU],wc.block()),Sc([b5],wc.block())],[e,!!(n&&n.shiftKey)]).getOr(wc.none()),jk=(e,n,o)=>{n.selection.isCollapsed()||nB(n),!(Oe(o)&&zk(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Oe(o)&&Hk(n,e.fakeEventName))},Gk=(e,n)=>{const o=()=>jk(p5,e,n),r=()=>jk(eU,e,n),l=dU(e,n);switch(Ug(e)){case"linebreak":l.fold(o,o,ot);break;case"block":l.fold(r,r,ot);break;case"invert":l.fold(r,o,ot);break;default:l.fold(o,r,ot);break}},y5=ec(),fU=y5.os.isiOS()&&y5.browser.isSafari(),uw=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),e7(e.undoManager),e.undoManager.transact(()=>{Gk(e,n)}))},mU=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(ut(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},aR=e=>{let n=z.none();const o=l=>{n=z.some(l.selection.getBookmark()),l.undoManager.add()},r=(l,u)=>{l.undoManager.undo(),n.fold(ot,m=>l.selection.moveToBookmark(m)),uw(l,u),n=z.none()};e.on("keydown",l=>{l.keyCode===Ft.ENTER&&(fU&&mU(e.selection.getRng())?o(e):uw(e,l))}),e.on("keyup",l=>{l.keyCode===Ft.ENTER&&n.each(()=>r(e,l))})},lR=(e,n,o)=>{const r=co.os.isMacOS()||co.os.isiOS();R1([{keyCode:Ft.END,action:Ln(G2,e,!0)},{keyCode:Ft.HOME,action:Ln(G2,e,!1)},...r?[]:[{keyCode:Ft.HOME,action:Ln(kk,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ft.END,action:Ln(kk,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ft.END,action:Ln(fI,e,!0)},{keyCode:Ft.HOME,action:Ln(fI,e,!1)},{keyCode:Ft.END,action:Ln(pk,e,!0,n)},{keyCode:Ft.HOME,action:Ln(pk,e,!1,n)}],o).each(l=>{o.preventDefault()})},C5=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||lR(e,n,o)})},gU=e=>{e.on("input",n=>{n.isComposing||ZM(e)})},IK=ec(),Mh=(e,n,o)=>{R1([{keyCode:Ft.PAGE_UP,action:Ln(pk,e,!1,n)},{keyCode:Ft.PAGE_DOWN,action:Ln(pk,e,!0,n)}],o)},w5=e=>e.stopImmediatePropagation(),S5=e=>e.keyCode===Ft.PAGE_UP||e.keyCode===Ft.PAGE_DOWN,x5=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",w5,!0):!o&&e.get()&&n.off("NodeChange",w5),e.set(o)},Kk=(e,n)=>{if(IK.os.isMacOS())return;const o=wr(!1);e.on("keydown",r=>{S5(r)&&x5(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||Mh(e,n,r),S5(r)&&o.get()&&(x5(o,e,!1),e.nodeChanged())})},iR=(e,n)=>{const o=n.container(),r=n.offset();return ut(o)?(o.insertData(r,e),z.some(He(o,r+e.length))):Wp(n).map(l=>{const u=de.fromText(e);return n.isAtEnd()?oi(l,u):Nl(l,u),He(u.dom,e.length)})},cR=Fe(iR,We),E5=Fe(iR," "),k5=(e,n)=>HM(e,n)?cR(n):E5(n),hU=e=>n=>n.fold(o=>oa(e.dom,He.before(o)),o=>kr(o),o=>Wl(o),o=>Ca(e.dom,He.after(o))),pU=(e,n)=>o=>HM(e,o)?cR(n):E5(n),T5=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},_5=(e,n)=>e.isEditable(e.getParent(n,"summary")),uR=e=>{const n=He.fromRangeStart(e.selection.getRng()),o=de.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Fe(rl,e),l=He.fromRangeStart(e.selection.getRng());return Dd(r,e.getBody(),l).bind(hU(o)).map(u=>()=>pU(o,n)(u).each(T5(e)))}else return z.none()},vU=e=>{const n=()=>{const o=de.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=He.fromRangeStart(e.selection.getRng());k5(o,r).each(T5(e))};return so(co.browser.isFirefox()&&e.selection.isEditable()&&_5(e.dom,e.selection.getRng().startContainer),n)},dR=(e,n)=>{uI([{keyCode:Ft.SPACEBAR,action:Ln(uR,e)},{keyCode:Ft.SPACEBAR,action:Ln(vU,e)}],n).each(o=>{n.preventDefault(),zk(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Hk(e,"insertText",{data:" "}))})},O5=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||dR(e,n)})},qk=e=>sO(e)?[{keyCode:Ft.TAB,action:Ln(A3,e,!0)},{keyCode:Ft.TAB,shiftKey:!0,action:Ln(A3,e,!1)}]:[],A5=(e,n)=>{R1([...qk(e)],n).each(o=>{n.preventDefault()})},R5=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||A5(e,n)})},bU=e=>{if(e.addShortcut("Meta+P","","mcePrint"),a5(e),Ui(e))return wr(null);{const n=d3(e);return kV(e),qV(e,n),V9(e,n),aR(e),O5(e),gU(e),R5(e),C5(e,n),Kk(e,n),n}};class yU{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",l=>{const u=n.selection.getRng(),m={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(l.type==="nodechange"||!ih(m,o))&&n.dispatch("SelectionChange"),o=m}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const l=n.selection.getStart(!0);!l||km(n)&&!r.isSameElementPath(l)&&n.dom.isChildOf(l,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",l=>{!l.isDefaultPrevented()&&km(n)&&(n.selection.getNode().nodeName==="IMG"?sl.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!Bp(this.editor)&&!this.editor.mode.isReadOnly()){const l=this.editor.getBody();r=o.getStart(!0)||l,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,l))&&(r=l);const u=[];this.editor.dom.getParent(r,m=>m===l?!0:(u.push(m),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,l=It(r.dom.getParents(n,St,r.getBody()));if(l.length===this.lastPath.length){for(o=l.length;o>=0&&l[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=l,!0}return this.lastPath=l,!1}}const dw=Sp("image"),D5=e=>{const n=e;return z.from(n[dw])},CU=(e,n)=>{const o=e;o[dw]=n},fR=Sp("event"),M5=e=>{const n=e;return z.from(n[fR])},Yk=e=>n=>{const o=n;o[fR]=e},wU=(e,n)=>Yk(n)(e),B5=Yk(0),SU=Yk(2),xU=Yk(1),kU=(e=>n=>{const o=n;return z.from(o[fR]).exists(r=>r===e)})(0),$5=()=>Object.freeze({length:0,item:e=>null}),mR=Sp("mode"),TU=e=>{const n=e;return z.from(n[mR])},Xk=e=>n=>{const o=n;o[mR]=e},P5=(e,n)=>Xk(n)(e),N5=Xk(0),Bh=Xk(2),_U=Xk(1),I5=e=>n=>{const o=n;return z.from(o[mR]).exists(r=>r===e)},D1=I5(0),F5=I5(1),OU=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(D1(e))if(P(o)){if(!pt(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{D1(e)&&n.remove(o)},clear:()=>{D1(e)&&n.clear()}}),AU=["none","copy","link","move"],L5=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],gR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(l){dn(AU,l)&&(n=l)},get effectAllowed(){return o},set effectAllowed(l){kU(r)&&dn(L5,l)&&(o=l)},get items(){return OU(r,e.items)},get files(){return F5(r)?$5():e.files},get types(){return e.types},setDragImage:(l,u,m)=>{D1(r)&&(CU(r,{image:l,x:u,y:m}),e.setDragImage(l,u,m))},getData:l=>F5(r)?"":e.getData(l),setData:(l,u)=>{D1(r)&&e.setData(l,u)},clearData:l=>{D1(r)&&e.clearData(l)}};return N5(r),r},RU=e=>{const n=gR(),o=TU(e);return Bh(e),B5(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,D5(e).each(r=>n.setDragImage(r.image,r.x,r.y)),Ge(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),Ge(e.files,r=>n.items.add(r)),M5(e).each(r=>{wU(n,r)}),o.each(r=>{P5(e,r),P5(n,r)}),n},FK=e=>{const n=e.getData("text/html");return n===""?z.none():z.some(n)},fw=(e,n)=>e.setData("text/html",n),H5="x-tinymce/html",Jk=we(H5),hR="<!-- "+H5+" -->",DU=e=>hR+e,MU=e=>e.replace(hR,""),z5=e=>e.indexOf(hR)!==-1,BU=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),$U=(e,n)=>{let o="<"+e;const r=ru(n,(l,u)=>u+'="'+sd.encodeAllRaw(l)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},PU=(e,n,o)=>{const r=e.split(/\n\n/),l=$U(n,o),u="</"+n+">",m=pn(r,w=>w.split(/\n/).join("<br />")),b=w=>l+w+u;return m.length===1?m[0]:pn(m,b).join("")},V5="%MCEPASTEBIN%",NU=(e,n)=>{const{dom:o,selection:r}=e,l=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},V5);co.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(l,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),r.select(u,!0)},IU=(e,n)=>{const o=e.dom;if(pR(e)){let r;const l=n.get();for(;r=pR(e);)o.remove(r),o.unbind(r);l&&e.selection.setRng(l)}n.set(null)},pR=e=>e.dom.get("mcepastebin"),jo=e=>Oe(e)&&e.id==="mcepastebin",FU=e=>{const n=e.dom,o=(m,b)=>{m.appendChild(b),n.remove(b,!0)},[r,...l]=Qt(e.getBody().childNodes,jo);Ge(l,m=>{o(r,m)});const u=n.select("div[id=mcepastebin]",r);for(let m=u.length-1;m>=0;m--){const b=n.create("div");r.insertBefore(b,u[m]),o(b,u[m])}return r?r.innerHTML:""},vR=e=>e===V5,LU=e=>{const n=wr(null);return{create:()=>NU(e,n),remove:()=>IU(e,n),getEl:()=>pR(e),getHtml:()=>FU(e),getLastRng:n.get}},Qk=(e,n)=>(et.each(n,o=>{Ce(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),U5=e=>{const n=zc(),o=u0({},n);let r="";const l=n.getVoidElements(),u=et.makeMap("script noscript style textarea video audio iframe object"," "),m=n.getBlockElements(),b=w=>{const k=w.name,B=w;if(k==="br"){r+=`
`;return}if(k!=="wbr"){if(l[k]&&(r+=" "),u[k]){r+=" ";return}if(w.type===3&&(r+=w.value),!(w.name in n.getVoidElements())){let M=w.firstChild;if(M)do b(M);while(M=M.next)}m[k]&&B.next&&(r+=`
`,k==="p"&&(r+=`
`))}};return e=Qk(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},bR=e=>(e=Qk(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,l)=>!r&&!l?" ":We],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),HU=e=>{let n=0;return()=>e+n++},W5=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return et.hasOwn(o,n)?"image/"+o[n]:"image/"+n},zU=(e,n)=>{const o=u0({sanitize:db(e)},e.schema);o.addNodeFilter("meta",l=>{et.each(l,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return mh({validate:!0},e.schema).serialize(r)},Z5=(e,n)=>({content:e,cancelled:n}),j5=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),l=fr(e,r,o);return Z5(l.node.innerHTML,l.isDefaultPrevented())},VU=(e,n,o)=>{const r=nr(e,n,o),l=zU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?j5(e,l,o):Z5(l,r.isDefaultPrevented())},UU=(e,n,o)=>VU(e,n,o),yR=(e,n)=>(e.insertContent(n,{merge:tC(e),paste:!0}),!0),$h=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),mw=(e,n)=>$h(n)&&$o(Np(e),o=>Ac(n.toLowerCase(),`.${o.toLowerCase()}`)),WU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),ZU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),x0=(e,n,o)=>!e.selection.isCollapsed()&&$h(n)?ZU(e,n,o):!1,jU=(e,n,o)=>mw(e,n)?WU(e,n,o):!1,CR=(e,n)=>{et.each([x0,jU,yR],o=>!o(e,n,yR))},wR=(e,n,o)=>{o||!YS(e)?yR(e,n):CR(e,n)},G5=HU("mceclip"),GU=e=>{const n=gR();return fw(n,e),Bh(n),n},K5=(e,n,o,r,l)=>{const u=UU(e,n,o);if(!u.cancelled){const m=u.content,b=()=>wR(e,m,r);l?zk(e,"insertFromPaste",{dataTransfer:GU(m)}).isDefaultPrevented()||(b(),Hk(e,"insertFromPaste")):b()}},gw=(e,n,o,r)=>{const l=o||z5(n);K5(e,MU(n),l,!1,r)},eT=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),l=$s(r,XS(e)),u=PU(l,Ps(e),vf(e));K5(e,u,!1,!0,o)},q5=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Ph=(e,n)=>n in e&&e[n].length>0,Y5=e=>Ph(e,"text/html")||Ph(e,"text/plain"),X5=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Oe(o)?e.dom.encode(o[1]):void 0},KU=(e,n,o,r)=>{const l=G5(),u=Ky(e)&&Oe(o.name),m=u?X5(e,o.name):l,b=u?o.name:void 0,w=n.create(l,o,r,m,b);return n.add(w),w},J5=(e,n)=>{K4(n.uri).each(({data:o,type:r,base64Encoded:l})=>{const u=l?o:btoa(o),m=n.file,b=e.editorUpload.blobCache,w=b.getByData(u,r),k=w!=null?w:KU(e,b,m,u);gw(e,`<img src="${k.blobUri()}">`,!1,!0)})},qU=e=>e.type==="paste",YU=e=>Promise.all(pn(e,n=>b$(n).then(o=>({file:n,uri:o})))),XU=e=>{const n=Np(e);return o=>or(o.type,"image/")&&$o(n,r=>W5(r)===o.type)},JU=(e,n)=>{const o=n.items?Dr(vo(n.items),l=>l.kind==="file"?[l.getAsFile()]:[]):[],r=n.files?vo(n.files):[];return Qt(o.length>0?o:r,XU(e))},Q5=(e,n,o)=>{const r=qU(n)?n.clipboardData:n.dataTransfer;if(Pi(e)&&r){const l=JU(e,r);if(l.length>0)return n.preventDefault(),YU(l).then(u=>{o&&e.selection.setRng(o),Ge(u,m=>{J5(e,m)})}),!0}return!1},tT=e=>{var n,o;return co.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},QU=e=>Ft.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,nT=(e,n,o,r,l)=>{let u=bR(o);const m=Ph(n,Jk())||z5(o),b=!m&&BU(u),w=$h(u);(vR(u)||!u.length||b&&!w)&&(r=!0),(r||w)&&(Ph(n,"text/plain")&&b?u=n["text/plain"]:u=U5(u)),!vR(u)&&(r?eT(e,u,l):gw(e,u,m,l))},eW=(e,n,o)=>{let r;const l=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{QU(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||tT(u))return;const m=o.get()==="text"||r;r=!1;const b=q5(u.clipboardData);!Y5(b)&&Q5(e,u,l())||(Ph(b,"text/html")?(u.preventDefault(),nT(e,b,b["text/html"],m,!0)):Ph(b,"text/plain")&&Ph(b,"text/uri-list")?(u.preventDefault(),nT(e,b,b["text/plain"],m,!0)):(n.create(),sl.setEditorTimeout(e,()=>{const w=n.getHtml();n.remove(),nT(e,b,w,m,!1)},0)))})},tW=e=>{const n=l=>or(l,"webkit-fake-url"),o=l=>or(l,"data:"),r=l=>{var u;return((u=l.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(l,u,m)=>{if(!Pi(e)&&r(m))for(const b of l){const w=b.attr("src");P(w)&&!b.attr("data-mce-object")&&w!==co.transparentSrc&&(n(w)||!Y_(e)&&o(w))&&b.remove()}})},nW=(e,n,o)=>{eW(e,n,o),tW(e)},oW=(e,n)=>{n.get()==="text"?(n.set("html"),Am(e,!1)):(n.set("text"),Am(e,!0)),e.focus()},sW=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{oW(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&gw(e,r.html,r.internal,!1),r.text&&eT(e,r.text,!1)})},rW=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(Jk(),n),!0}catch{return!1}else return!1},SR=(e,n,o,r)=>{rW(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},eF=e=>(n,o)=>{const{dom:r,selection:l}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),m=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(m),r.add(e.getBody(),u);const b=l.getRng();m.focus();const w=r.createRng();w.selectNodeContents(m),l.setRng(w),sl.setEditorTimeout(e,()=>{l.setRng(b),r.remove(u),o()},0)},tF=e=>({html:DU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),aW=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),nF=e=>!e.selection.isCollapsed()||aW(e),lW=e=>n=>{!n.isDefaultPrevented()&&nF(e)&&SR(n,tF(e),eF(e),()=>{if(co.browser.isChromium()||co.browser.isFirefox()){const o=e.selection.getRng();sl.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},iW=e=>n=>{!n.isDefaultPrevented()&&nF(e)&&SR(n,tF(e),eF(e),ot)},cW=e=>{e.on("cut",lW(e)),e.on("copy",iW(e))},xR=(e,n)=>{var o,r;return jn.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},uW=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},oF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},dW=e=>$o(e.files,n=>/^image\//.test(n.type)),fW=(e,n,o,r)=>{const l=e.getParent(o,u=>cf(n,u));if(l&&Cn(r,"text/html")){const u=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!K(u.querySelector(l.nodeName.toLowerCase()))}else return!1},mW=(e,n)=>{KS(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Pi(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&dW(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=xR(e,o);if(ft(r))return;const l=q5(o.dataTransfer),u=Ph(l,Jk());if((!Y5(l)||uW(l))&&Q5(e,o,r))return;const m=l[Jk()],b=m||l["text/html"]||l["text/plain"],w=fW(e.dom,e.schema,r.startContainer,l);n.get()&&!w||b&&(o.preventDefault(),sl.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{m&&e.execCommand("Delete"),oF(e,r);const k=bR(b);l["text/html"]?gw(e,k,u,!0):eT(e,k,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Pi(e)&&!n.get()&&(o.preventDefault(),oF(e,xR(e,o))),o.type==="dragend"&&n.set(!1)})},gW=e=>{const n=l=>u=>{l(e,u)},o=ub(e);re(o)&&e.on("PastePreProcess",n(o));const r=qS(e);re(r)&&e.on("PastePostProcess",n(r))},hW=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},oT=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,ER=e=>et.trim(e).replace(oT,Em).toLowerCase(),pW=(e,n,o)=>{const r=hm(e);if(o||r==="all"||!Pp(e))return n;const l=r?r.split(/[, ]/):[];if(l&&r!=="none"){const u=e.dom,m=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,w,k,B)=>{const M=u.parseStyle(u.decode(k)),H={};for(let se=0;se<l.length;se++){const X=M[l[se]];let oe=X,ye=u.getStyle(m,l[se],!0);/color/.test(l[se])&&(oe=ER(oe),ye=ER(ye)),ye!==oe&&(H[l[se]]=X)}const Q=u.serializeStyle(H,"span");return Q?w+' style="'+Q+'"'+B:w+B})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,m,b,w)=>m+' style="'+b+'"'+w),n},sF=e=>{(co.browser.isChromium()||co.browser.isSafari())&&hW(e,pW)},rF=e=>{const n=wr(!1),o=wr(q_(e)?"text":"html"),r=LU(e);sF(e),sW(e,o),gW(e),e.on("PreInit",()=>{cW(e),mW(e,n),nW(e,r,o)})},kR=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},vW=e=>{e.parser.addNodeFilter("details",n=>{const o=Ip(e);Ge(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Fp(e);Ge(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},TR=e=>sf(de.fromDom(e)),aF=(e,n)=>{const o=n.getNode();pt(o)||e.selection.setCursorLocation(o,n.offset())},_R=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},lF=ec(),iF=lF.browser,cF=lF.os,bW=iF.isSafari(),uF=cF.isMacOS()||cF.isiOS(),hw=(e,n)=>kr(n).exists(o=>o.isEqual(e)),yW=(e,n)=>Wl(n).exists(o=>bs(o.getNode())&&oa(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),CW=(e,n)=>{const o=z.from(e.getParent(n.startContainer,"details")),r=z.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const l=o.bind(u=>z.from(e.select("summary",u)[0]));return z.some({startSummary:l,startDetails:o,endDetails:r})}else return z.none()},dF=(e,n)=>{const o=w=>w.contains(e.startContainer),r=w=>w.contains(e.endContainer),l=n.startSummary.exists(o),u=n.startSummary.exists(r),m=n.startDetails.forall(w=>n.endDetails.forall(k=>w!==k));return(l||u)&&!(l&&u)||m},wW=(e,n)=>n.startSummary.exists(o=>hw(e,o)),SW=(e,n)=>n.startSummary.exists(o=>yW(e,o)),xW=(e,n)=>n.startDetails.exists(o=>oa(o,e).forall(r=>n.startSummary.exists(l=>!l.contains(e.container())&&l.contains(r.container())))),EW=(e,n,o)=>o.startDetails.exists(r=>Ca(e,n).forall(l=>!r.contains(l.container()))),OR=(e,n)=>Oe(e.getParent(n.container(),"details")),pw=(e,n)=>{const o=e.dom.getParent(n.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&Wl(r).each(l=>aF(e,l))}else aF(e,n)},fF=(e,n)=>{const{dom:o,selection:r}=e,l=e.getBody();if(e.selection.isCollapsed()){const u=He.fromRangeStart(r.getRng()),m=o.getParent(u.container(),o.isBlock);if(m&&o.isEmpty(m)){if(K(m.nextSibling)){const b=oa(l,u).filter(w=>OR(o,w));if(b.isSome())return b.each(w=>{n||pw(e,w)}),!0}else if(K(m.previousSibling)&&Ca(l,u).filter(w=>OR(o,w)))return!0}return fC(n,l,u).fold(Pe,b=>OR(o,b)?(m&&o.isEmpty(m)&&e.dom.remove(m),n||pw(e,b),!0):!1)}else return!1},mF=(e,n,o)=>{const r=e.selection,l=r.getNode(),u=r.getRng(),m=o.keyCode===Ft.BACKSPACE,b=o.keyCode===Ft.DELETE,w=e.selection.isCollapsed(),k=He.fromRangeStart(u),B=e.getBody();return!w&&dF(u,n)||w&&m&&wW(k,n)||w&&b&&SW(k,n)||w&&m&&xW(k,n)||w&&b&&EW(B,k,n)?!0:bW&&Ka(l)?(!w&&_R(u,l)||Wb(b,k,l)?TR(l):e.undoManager.transact(()=>{const M=r.getSel();let{anchorNode:H,anchorOffset:Q,focusNode:se,focusOffset:X}=M!=null?M:{};const oe=()=>{Oe(H)&&Oe(Q)&&Oe(se)&&Oe(X)&&(M==null||M.setBaseAndExtent(H,Q,se,X))},ye=()=>{H=M==null?void 0:M.anchorNode,Q=M==null?void 0:M.anchorOffset,se=M==null?void 0:M.focusNode,X=M==null?void 0:M.focusOffset},xe=(De,tt)=>{Ge(De.childNodes,Gt=>{Gp(Gt)&&tt.appendChild(Gt)})},Ee=e.dom.create("span",{"data-mce-bogus":"all"});xe(l,Ee),l.appendChild(Ee),oe(),w&&(uF&&(o.altKey||m&&o.metaKey)||!uF&&o.ctrlKey)&&(M==null||M.modify("extend",m?"left":"right",o.metaKey?"line":"word")),!r.isCollapsed()&&_R(r.getRng(),Ee)?TR(l):(e.execCommand(m?"Delete":"ForwardDelete"),ye(),xe(Ee,l),oe()),e.dom.remove(Ee)}),!0):!1},kW=e=>{e.on("keydown",n=>{(n.keyCode===Ft.BACKSPACE||n.keyCode===Ft.DELETE)&&CW(e.dom,e.selection.getRng()).fold(()=>{fF(e,n.keyCode===Ft.DELETE)&&n.preventDefault()},o=>{mF(e,o,n)&&n.preventDefault()})})},TW=e=>{kR(e),vW(e),kW(e)},_W=bs,OW=ut,AW=e=>Eo(e.dom),AR=e=>Do(e.dom),sT=e=>n=>Ao(de.fromDom(e),n),rT=(e,n)=>ki(de.fromDom(e),o=>AR(o)||Gs(o),sT(n)).getOr(de.fromDom(n)).dom,gF=(e,n)=>ki(de.fromDom(e),AW,sT(n)),hF=(e,n,o)=>{const r=new lr(e,n),l=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let m=o?e:l();m&&!_W(m);m=l())Ll(m)&&(u=m);return u},pF=(e,n)=>{const r=He.fromRangeStart(e).getNode(),l=rT(r,n),u=hF(r,l,!1),m=hF(r,l,!0),b=document.createRange();return gF(u,l).fold(()=>{OW(u)?b.setStart(u,0):b.setStartBefore(u)},w=>b.setStartBefore(w.dom)),gF(m,l).fold(()=>{OW(m)?b.setEnd(m,m.data.length):b.setEndAfter(m)},w=>b.setEndAfter(w.dom)),b},RW=e=>{const n=pF(e.selection.getRng(),e.getBody());e.selection.setRng(c2(n))},RR=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),RW(e))})};var M1;(function(e){e.Before="before",e.After="after"})(M1||(M1={}));const DW=(e,n)=>Math.abs(e.left-n),MW=(e,n)=>Math.abs(e.right-n),vF=(e,n)=>e>=n.top&&e<=n.bottom,BW=(e,n)=>e.top<n.bottom&&e.bottom>n.top,LK=(e,n)=>{const o=ud(e,n)/Math.min(e.height,n.height);return BW(e,n)&&o>.5},$W=(e,n)=>{const o=Qt(e,r=>vF(n,r));return ES(o).fold(()=>[[],e],r=>{const{pass:l,fail:u}=ps(e,m=>LK(m,r));return[l,u]})},PW=(e,n)=>({node:e.node,position:DW(e,n)<MW(e,n)?M1.Before:M1.After}),NW=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),aT=(e,n,o)=>{const r=B=>Ll(B.node)?z.some(B):Bt(B.node)?aT(vo(B.node.childNodes),n,o):z.none(),l=(B,M)=>{if(B.length>=2){const H=r(B[0]).getOr(B[0]),Q=r(B[1]).getOr(B[1]);if(Math.abs(M(H,n,o)-M(Q,n,o))<2){if(ut(H.node))return z.some(H);if(ut(Q.node))return z.some(Q)}}return z.none()},u=(B,M)=>{const H=Re(B,(Q,se)=>M(Q,n,o)-M(se,n,o));return l(H,M).orThunk(()=>Ts(H,r))},[m,b]=$W(fk(e),o),{pass:w,fail:k}=ps(b,B=>B.top<o);return u(m,NW).orThunk(()=>u(k,$y)).orThunk(()=>u(w,$y))},IW=(e,n,o,r)=>{const l=(u,m)=>{const b=k=>Bt(k)&&k.classList.contains("mce-drag-container"),w=Qt(u.dom.childNodes,_n(b));return m.fold(()=>aT(w,o,r),k=>{const B=Qt(w,M=>M!==k.dom);return aT(B,o,r)}).orThunk(()=>(Ao(u,e)?z.none():av(u)).bind(B=>l(B,z.some(u))))};return l(n,z.none())},bF=(e,n,o)=>{const r=de.fromDom(e),l=Ku(r),m=de.fromPoint(l,n,o).filter(b=>$c(r,b)).getOr(r);return IW(r,m,n,o)},yF=(e,n,o)=>bF(e,n,o).filter(r=>Eu(r.node)).map(r=>PW(r,n)),CF=e=>{var n,o;const r=e.getBoundingClientRect(),l=e.ownerDocument,u=l.documentElement,m=l.defaultView;return{top:r.top+((n=m==null?void 0:m.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=m==null?void 0:m.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},FW=e=>e.inline?CF(e.getBody()):{left:0,top:0},LW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},HW=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},l={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:l},wF=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=CF(e.getContentAreaContainer()),r=HW(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},HK=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),zW=(e,n)=>HK(FW(e),LW(e),wF(e,n)),DR=e=>({target:e,srcElement:e}),VW=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...DR(o)}),MR=(e,n,o)=>{const r=Kn("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:ot,stopImmediatePropagation:ot,stopPropagation:ot,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...DR(n)}},UW=(e,n)=>{const o=RU(e);return n==="dragstart"?(B5(o),N5(o)):n==="drop"?(SU(o),Bh(o)):(xU(o),_U(o)),o},WW=(e,n,o,r)=>{const l=UW(o,e);return pt(r)?MR(e,n,l):VW(e,r,n,l)},lT=32,SF=100,B1=8,vw=16,BR=Eo,ZW=b_(BR,Do),jW=(e,n,o)=>BR(o)&&o!==n&&e.isEditable(o.parentElement),xF=(e,n,o)=>ft(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),GW=(e,n,o,r)=>{const l=e.dom,u=n.cloneNode(!0);l.setStyles(u,{width:o,height:r}),l.setAttrib(u,"data-mce-selected",null);const m=l.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return l.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),l.setStyles(u,{margin:0,boxSizing:"border-box"}),m.appendChild(u),m},KW=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},iT=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},cT=iT("left",-lT),EF=iT("left",lT),kF=iT("top",-lT),TF=iT("top",lT),qW=(e,n,o,r,l,u,m,b,w,k,B,M)=>{let H=0,Q=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>l&&(H=n.pageX+o-l),n.pageY+r>u&&(Q=n.pageY+r-u),e.style.width=o-H+"px",e.style.height=r-Q+"px";const se=w.clientHeight,X=w.clientWidth,oe=m+w.getBoundingClientRect().top,ye=b+w.getBoundingClientRect().left;B.on(xe=>{xe.intervalId.clear(),xe.dragging&&M&&(m+B1>=se?xe.intervalId.set(TF(k)):m-B1<=0?xe.intervalId.set(kF(k)):b+B1>=X?xe.intervalId.set(EF(k)):b-B1<=0?xe.intervalId.set(cT(k)):oe+vw>=window.innerHeight?xe.intervalId.set(TF(window)):oe-vw<=0?xe.intervalId.set(kF(window)):ye+vw>=window.innerWidth?xe.intervalId.set(EF(window)):ye-vw<=0&&xe.intervalId.set(cT(window)))})},_F=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},YW=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);_F(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&sf(de.fromDom(o))},OF=e=>e.button===0,AF=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),$R=(e,n)=>o=>{if(OF(o)){const r=ns(n.dom.getParents(o.target),ZW).getOr(null);if(Oe(r)&&jW(n.dom,n.getBody(),r)){const l=n.dom.getPos(r),u=n.getBody(),m=n.getDoc().documentElement;e.set({element:r,dataTransfer:gR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:m.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:m.offsetHeight)-2,relX:o.pageX-l.x,relY:o.pageY-l.y,width:r.offsetWidth,height:r.offsetHeight,ghost:GW(n,r,r.offsetWidth,r.offsetHeight),intervalId:Cu(SF)})}}},PR=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),yF(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const l=e._selectionOverrides.showCaret(1,r.node,r.position===M1.Before,!1);l?e.selection.setRng(l):e.selection.placeCaretAt(n,o)})},bw=(e,n,o,r,l)=>{n==="dragstart"&&fw(r,e.dom.getOuterHTML(o));const u=WW(n,o,r,l);return e.dispatch(n,u)},NR=(e,n)=>{const o=ld((l,u)=>PR(n,l,u),0);n.on("remove",o.cancel);const r=e;return l=>e.on(u=>{const m=Math.max(Math.abs(l.screenX-u.screenX),Math.abs(l.screenY-u.screenY));if(!u.dragging&&m>10){const b=bw(n,"dragstart",u.element,u.dataTransfer,l);if(Oe(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=l.currentTarget===n.getDoc().documentElement,w=AF(u,zW(n,l));KW(u.ghost,n.getBody()),qW(u.ghost,w,u.width,u.height,u.maxX,u.maxY,l.clientY,l.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(l.clientX,l.clientY)}})},XW=e=>{const n=e.getSel();if(Oe(n)){const r=n.getRangeAt(0).startContainer;return ut(r)?r.parentNode:r}else return null},JW=(e,n)=>o=>{e.on(r=>{var l;if(r.intervalId.clear(),r.dragging){if(xF(n,XW(n.selection),r.element)){const u=(l=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&l!==void 0?l:n.getBody();bw(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{YW(n.dom,r.element),FK(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}bw(n,"dragend",n.getBody(),r.dataTransfer,o)}}),RF(e)},IR=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>bw(n,"dragend",r.element,r.dataTransfer),l=>bw(n,"dragend",r.element,r.dataTransfer,l))}),RF(e)},QW=(e,n)=>o=>IR(e,n,z.some(o)),RF=e=>{e.on(n=>{n.intervalId.clear(),_F(n.ghost)}),e.clear()},eZ=e=>{const n=Zr(),o=Po.DOM,r=document,l=$R(n,e),u=NR(n,e),m=JW(n,e),b=QW(n,e);e.on("mousedown",l),e.on("mousemove",u),e.on("mouseup",m),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",w=>{w.keyCode===Ft.ESC&&IR(n,e,z.none())})},tZ=e=>{const n=l=>{if(!l.isDefaultPrevented()){const u=l.dataTransfer;u&&(dn(u.types,"Files")||u.files.length>0)&&(l.preventDefault(),l.type==="drop"&&B2(e,"Dropped file type is not supported"))}},o=l=>{qC(e,l.target)&&n(l)},r=()=>{const l=Po.DOM,u=e.dom,m=document,b=e.inline?e.getBody():e.getDoc(),w=["drop","dragover"];Ge(w,k=>{l.bind(m,k,o),u.bind(b,k,n)}),e.on("remove",()=>{Ge(w,k=>{l.unbind(m,k,o),u.unbind(b,k,n)})})};e.on("init",()=>{sl.setEditorTimeout(e,r,0)})},nZ=e=>{eZ(e),GS(e)&&tZ(e)},oZ=e=>{const n=ld(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=qA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},sZ=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(er(o)){const r=ph(e.getBody(),o),l=Eo(r)?r:o;e.selection.getNode()!==l&&N2(e,l).each(u=>e.selection.setRng(u))}})})},E0=Eo,DF=(e,n)=>ph(e.getBody(),n),FR=e=>{const n=e.selection,o=e.dom,r=e.getBody(),l=ax(e,r,o.isBlock,()=>l1(e)),u="sel-"+o.uniqueId(),m="data-mce-selected";let b;const w=at=>Oe(at)&&o.hasClass(at,"mce-offscreen-selection"),k=at=>at!==r&&(E0(at)||er(at))&&o.isChildOf(at,r)&&o.isEditable(at.parentNode),B=at=>{at&&n.setRng(at)},M=(at,ze,Ze,Et=!0)=>e.dispatch("ShowCaret",{target:ze,direction:at,before:Ze}).isDefaultPrevented()?null:(Et&&n.scrollIntoView(ze,at===-1),l.show(Ze,ze)),H=at=>{at.hasAttribute("data-mce-caret")&&(fy(at),n.scrollIntoView(at))},Q=()=>{e.on("click",ze=>{o.isEditable(ze.target)||(ze.preventDefault(),e.focus())}),e.on("blur NewBlock",De),e.on("ResizeWindow FullscreenStateChanged",l.reposition),e.on("tap",ze=>{const Ze=ze.target,Et=DF(e,Ze);E0(Et)?(ze.preventDefault(),N2(e,Et).each(Ee)):k(Ze)&&N2(e,Ze).each(Ee)},!0),e.on("mousedown",ze=>{const Ze=ze.target;if(Ze!==r&&Ze.nodeName!=="HTML"&&!o.isChildOf(Ze,r)||!k1(e,ze.clientX,ze.clientY))return;De(),Gt();const Et=DF(e,Ze);E0(Et)?(ze.preventDefault(),N2(e,Et).each(Ee)):yF(r,ze.clientX,ze.clientY).each(_t=>{ze.preventDefault();const Ht=M(1,_t.node,_t.position===M1.Before,!1);B(Ht),Bt(Et)?Et.focus():e.getBody().focus()})}),e.on("keypress",ze=>{Ft.modifierPressed(ze)||E0(n.getNode())&&ze.preventDefault()}),e.on("GetSelectionRange",ze=>{let Ze=ze.range;if(b){if(!b.parentNode){b=null;return}Ze=Ze.cloneRange(),Ze.selectNode(b),ze.range=Ze}}),e.on("SetSelectionRange",ze=>{ze.range=oe(ze.range);const Ze=Ee(ze.range,ze.forward);Ze&&(ze.range=Ze)});const at=ze=>Bt(ze)&&ze.id==="mcepastebin";e.on("AfterSetSelectionRange",ze=>{const Ze=ze.range,Et=Ze.startContainer.parentElement;!X(Ze)&&!at(Et)&&Gt(),w(Et)||De()}),nZ(e),oZ(e),sZ(e)},se=at=>Mi(at)||gu(at)||up(at),X=at=>se(at.startContainer)||se(at.endContainer),oe=at=>{const ze=e.schema.getVoidElements(),Ze=o.createRng(),Et=at.startContainer,_t=at.startOffset,Ht=at.endContainer,mn=at.endOffset;return Cn(ze,Et.nodeName.toLowerCase())?_t===0?Ze.setStartBefore(Et):Ze.setStartAfter(Et):Ze.setStart(Et,_t),Cn(ze,Ht.nodeName.toLowerCase())?mn===0?Ze.setEndBefore(Ht):Ze.setEndAfter(Ht):Ze.setEnd(Ht,mn),Ze},ye=(at,ze)=>{const Ze=de.fromDom(e.getBody()),Et=e.getDoc(),_t=Kf(Ze,"#"+u).getOrThunk(()=>{const gn=de.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Et);return sr(gn,"id",u),ar(Ze,gn),gn}),Ht=o.createRng();Jd(_t),Xo(_t,[de.fromText(We,Et),de.fromDom(ze),de.fromText(We,Et)]),Ht.setStart(_t.dom.firstChild,1),Ht.setEnd(_t.dom.lastChild,0),uv(_t,{top:o.getPos(at,e.getBody()).y+"px"}),r1(_t);const mn=n.getSel();return mn&&(mn.removeAllRanges(),mn.addRange(Ht)),Ht},xe=at=>{const ze=at.cloneNode(!0),Ze=e.dispatch("ObjectSelected",{target:at,targetClone:ze});if(Ze.isDefaultPrevented())return null;const Et=ye(at,Ze.targetClone),_t=de.fromDom(at);return Ge(fa(de.fromDom(e.getBody()),`*[${m}]`),Ht=>{Ao(_t,Ht)||rr(Ht,m)}),o.getAttrib(at,m)||at.setAttribute(m,"1"),b=at,Gt(),Et},Ee=(at,ze)=>{if(!at)return null;if(at.collapsed){if(!X(at)){const Ht=ze?1:-1,mn=vm(Ht,r,at),gn=mn.getNode(!ze);if(Oe(gn)){if(Eu(gn))return M(Ht,gn,ze?!mn.isAtEnd():!1,!1);if(ed(gn)&&Eo(gn.nextSibling)){const yo=o.createRng();return yo.setStart(gn,0),yo.setEnd(gn,0),yo}}const uo=mn.getNode(ze);if(Oe(uo)){if(Eu(uo))return M(Ht,uo,ze?!1:!mn.isAtEnd(),!1);if(ed(uo)&&Eo(uo.previousSibling)){const yo=o.createRng();return yo.setStart(uo,1),yo.setEnd(uo,1),yo}}}return null}let Ze=at.startContainer,Et=at.startOffset;const _t=at.endOffset;if(ut(Ze)&&Et===0&&E0(Ze.parentNode)&&(Ze=Ze.parentNode,Et=o.nodeIndex(Ze),Ze=Ze.parentNode),!Bt(Ze))return null;if(_t===Et+1&&Ze===at.endContainer){const Ht=Ze.childNodes[Et];if(k(Ht))return xe(Ht)}return null},De=()=>{b&&b.removeAttribute(m),Kf(de.fromDom(e.getBody()),"#"+u).each(Ro),b=null},tt=()=>{l.destroy(),b=null},Gt=()=>{l.hide()};return Ui(e)||Q(),{showCaret:M,showBlockCaretContainer:H,hideFakeCaret:Gt,destroy:tt}},rZ=(e,n)=>{let o=n;for(let r=e.previousSibling;ut(r);r=r.previousSibling)o+=r.data.length;return o},MF=(e,n,o,r,l)=>{if(ut(o)&&(r<0||r>o.data.length))return[];const u=l&&ut(o)?[rZ(o,r)]:[r];let m=o;for(;m!==n&&m.parentNode;)u.push(e.nodeIndex(m,l)),m=m.parentNode;return m===n?u.reverse():[]},LR=(e,n,o,r,l,u,m=!1)=>{const b=MF(e,n,o,r,m),w=MF(e,n,l,u,m);return{start:b,end:w}},BF=(e,n)=>{const o=n.slice(),r=o.pop();return Nt(r)?Vo(o,(u,m)=>u.bind(b=>z.from(b.childNodes[m])),z.some(e)).bind(u=>ut(u)&&(r<0||r>u.data.length)?z.none():z.some({node:u,offset:r})):z.none()},$F=(e,n)=>BF(e,n.start).bind(({node:o,offset:r})=>BF(e,n.end).map(({node:l,offset:u})=>{const m=document.createRange();return m.setStart(o,r),m.setEnd(l,u),m})),aZ=(e,n,o,r=!1)=>LR(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Gm=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),Gm(e,r,o)}},uT=(e,n,o,r=!0)=>{const l=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(ut(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),ut(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Gm(e,l,o),l!==u&&Gm(e,u,o))},HR=(e,n)=>z.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),PF=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:eb(r).concat(e.blockPatterns),inlinePatterns:tb(r).concat(e.inlinePatterns)}},NF=(e,n,o,r)=>{const l=e.createRng();return l.setStart(n,0),l.setEnd(o,r),l.toString()},lZ=e=>/^\s[^\s]/.test(e),IF=(e,n,o)=>{RI(n,0,n).each(l=>{const u=l.container;M3(u,o.start.length,n).each(w=>{const k=e.createRng();k.setStart(u,0),k.setEnd(w.container,w.offset),uT(e,k,B=>B===n)});const m=de.fromDom(u),b=hv(m);lZ(b)&&t_(m,b.slice(1))})},iZ=(e,n)=>{const o=e.dom,r=n.pattern,l=$F(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(m,b)=>{const w=b.get(m);return Me(w)&&en(w).exists(k=>Cn(k,"block"))};return HR(e,l).each(m=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{IF(e.dom,m,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{IF(e.dom,m,r),e.execCommand(r.cmd,!1,r.value)})}),!0},cZ=e=>Re(e,(n,o)=>o.start.length-n.start.length),uZ=(e,n)=>{const o=cZ(e),r=n.replace(We," ");return ns(o,l=>n.indexOf(l.start)===0||r.indexOf(l.start)===0)},FF=(e,n,o,r)=>{var l;const u=e.dom,m=Ps(e);if(!u.is(n,m))return[];const b=(l=n.textContent)!==null&&l!==void 0?l:"";return uZ(o.blockPatterns,b).map(w=>et.trim(b).length===w.start.length?[]:[{pattern:w,range:LR(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},dZ=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();Ge(n,r=>iZ(e,r)),e.selection.moveToBookmark(o)},zR=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),dT=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},LF=(e,n,o)=>{const r=$F(e.getRoot(),o).getOrDie("Unable to resolve path range"),l=r.startContainer,u=r.endContainer,m=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?l:l.splitText(r.startOffset),w=b.parentNode,k=m.parentNode;return{prefix:n,end:k.insertBefore(zR(e,n+"-end"),m),start:w.insertBefore(zR(e,n+"-start"),b)}},VR=(e,n,o)=>{Gm(e,e.get(n.prefix+"-end"),o),Gm(e,e.get(n.prefix+"-start"),o)},$1=e=>e.start.length===0,fZ=e=>(n,o)=>{const l=n.data.substring(0,o),u=l.lastIndexOf(e.charAt(e.length-1)),m=l.lastIndexOf(e);return m!==-1?m+e.length:u!==-1?u+1:-1},UR=(e,n,o,r)=>{const l=n.start;return Dk(e,r.container,r.offset,fZ(l),o).bind(m=>{var b,w;const k=(w=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(l))!==null&&w!==void 0?w:-1;if(k!==-1&&m.offset>=k+l.length){const M=e.createRng();return M.setStart(m.container,m.offset-l.length),M.setEnd(m.container,m.offset),z.some(M)}else{const M=m.offset-l.length;return D3(m.container,M,o).map(H=>{const Q=e.createRng();return Q.setStart(H.container,H.offset),Q.setEnd(m.container,m.offset),Q}).filter(H=>H.toString()===l).orThunk(()=>UR(e,n,o,Bd(m.container,0)))}})},mZ=(e,n,o,r,l,u=!1)=>{if(n.start.length===0&&!u){const m=e.createRng();return m.setStart(o,r),m.setEnd(o,r),z.some(m)}return R3(o,r,l).bind(m=>UR(e,n,l,m).bind(w=>{var k;if(u){if(w.endContainer===m.container&&w.endOffset===m.offset)return z.none();if(m.offset===0&&((k=w.endContainer.textContent)===null||k===void 0?void 0:k.length)===w.endOffset)return z.none()}return z.some(w)}))},gZ=(e,n,o,r)=>{const l=e.dom,u=l.getRoot(),m=o.pattern,b=o.position.container,w=o.position.offset;return D3(b,w-o.pattern.end.length,n).bind(k=>{const B=LR(l,u,k.container,k.offset,b,w,r);if($1(m))return z.some({matches:[{pattern:m,startRng:B,endRng:B}],position:k});{const M=fT(e,o.remainingPatterns,k.container,k.offset,n,r),H=M.getOr({matches:[],position:k}),Q=H.position;return mZ(l,m,Q.container,Q.offset,n,M.isNone()).map(X=>{const oe=aZ(l,u,X,r);return{matches:H.matches.concat([{pattern:m,startRng:oe,endRng:B}]),position:Bd(X.startContainer,X.startOffset)}})}})},fT=(e,n,o,r,l,u)=>{const m=e.dom;return R3(o,r,m.getRoot()).bind(b=>{const w=NF(m,l,o,r);for(let k=0;k<n.length;k++){const B=n[k];if(!Ac(w,B.end))continue;const M=n.slice();M.splice(k,1);const H=gZ(e,l,{pattern:B,remainingPatterns:M,position:b},u);if(H.isNone()&&r>0)return fT(e,n,o,r-1,l,u);if(H.isSome())return H}return z.none()})},HF=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?Ge(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},zF=(e,n,o,r)=>{const l=dT(e.dom,o);uT(e.dom,l,r),HF(e,n,l)},hZ=(e,n,o,r,l)=>{const u=e.dom,m=dT(u,r),b=dT(u,o);uT(u,b,l),uT(u,m,l);const w={prefix:o.prefix,start:o.end,end:r.start},k=dT(u,w);HF(e,n,k)},VF=(e,n)=>{const o=Sp("mce_textpattern"),r=_l(n,(l,u)=>{const m=LF(e,o+`_end${l.length}`,u.endRng);return l.concat([{...u,endMarker:m}])},[]);return _l(r,(l,u)=>{const m=r.length-l.length-1,b=$1(u.pattern)?u.endMarker:LF(e,o+`_start${m}`,u.startRng);return l.concat([{...u,startMarker:b}])},[])},pZ=e=>Re(e,(n,o)=>o.end.length-n.end.length),vZ=(e,n)=>{const o=ks(e,r=>$o(n,l=>r.pattern.start===l.pattern.start&&r.pattern.end===l.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},UF=(e,n,o,r,l,u)=>{const m=fT(e,l.inlinePatterns,o,r,n,u).fold(()=>[],w=>w.matches),b=fT(e,pZ(l.inlinePatterns),o,r,n,u).fold(()=>[],w=>w.matches);return vZ(m,b)},WF=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),l=VF(o,n);Ge(l,u=>{const m=o.getParent(u.startMarker.start,o.isBlock),b=w=>w===m;$1(u.pattern)?zF(e,u.pattern,u.endMarker,b):hZ(e,u.pattern,u.startMarker,u.endMarker,b),VR(o,u.endMarker,b),VR(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},bZ=(e,n)=>{const o=e.selection.getRng();return HR(e,o).map(r=>{var l;const u=Math.max(0,o.startOffset),m=PF(n,r,(l=r.textContent)!==null&&l!==void 0?l:""),b=UF(e,r,o.startContainer,u,m,!0),w=FF(e,r,m,!0);return w.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Xu),WF(e,b),dZ(e,w);const k=e.selection.getRng(),B=R3(k.startContainer,k.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),B.each(M=>{const H=M.container;H.data.charAt(M.offset-1)===Xu&&(H.deleteData(M.offset-1,1),Gm(e.dom,H.parentNode,Q=>Q===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},yZ=(e,n)=>{const o=e.selection.getRng();HR(e,o).map(r=>{const l=Math.max(0,o.startOffset-1),u=NF(e.dom,r,o.startContainer,l),m=PF(n,r,u),b=UF(e,r,o.startContainer,l,m,!1);b.length>0&&e.undoManager.transact(()=>{WF(e,b)})})},ZF=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},CZ=(e,n)=>ZF(e,n,(o,r)=>o===r.keyCode&&!Ft.modifierPressed(r)),wZ=(e,n)=>ZF(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),jF=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>jD(X_(e),JS(e)),l=()=>ex(e);e.on("keydown",m=>{if(m.keyCode===13&&!Ft.modifierPressed(m)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||l())&&bZ(e,b)&&m.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const m=r();(m.inlinePatterns.length>0||l())&&yZ(e,m)}};e.on("keyup",m=>{CZ(o,m)&&u()}),e.on("keypress",m=>{wZ(n,m)&&sl.setEditorTimeout(e,u)})},WR=e=>{jF(e)},GF=e=>{const n=et.each,o=Ft.BACKSPACE,r=Ft.DELETE,l=e.dom,u=e.selection,m=e.parser,b=co.browser,w=b.isFirefox(),k=b.isChromium()||b.isSafari(),B=co.deviceType.isiPhone()||co.deviceType.isiPad(),M=co.os.isMacOS()||co.os.isiOS(),H=(Kt,Jt)=>{try{e.getDoc().execCommand(Kt,!1,String(Jt))}catch{}},Q=Kt=>Kt.isDefaultPrevented(),se=()=>{const Kt=mt=>{const bn=l.create("body"),On=mt.cloneContents();return bn.appendChild(On),u.serializer.serialize(bn,{format:"html"})},Jt=mt=>{const bn=Kt(mt),On=l.createRng();On.selectNode(e.getBody());const fo=Kt(On);return bn===fo};e.on("keydown",mt=>{const bn=mt.keyCode;if(!Q(mt)&&(bn===r||bn===o)&&e.selection.isEditable()){const On=e.selection.isCollapsed(),fo=e.getBody();if(On&&!l.isEmpty(fo)||!On&&!Jt(e.selection.getRng()))return;mt.preventDefault(),e.setContent(""),fo.firstChild&&l.isBlock(fo.firstChild)?e.selection.setCursorLocation(fo.firstChild,0):e.selection.setCursorLocation(fo,0),e.nodeChanged()}})},X=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},oe=()=>{e.inline||l.bind(e.getDoc(),"mousedown mouseup",Kt=>{let Jt;if(Kt.target===e.getDoc().documentElement)if(Jt=u.getRng(),e.getBody().focus(),Kt.type==="mousedown"){if(Mi(Jt.startContainer))return;u.placeCaretAt(Kt.clientX,Kt.clientY)}else u.setRng(Jt)})},ye=()=>{e.on("keydown",Kt=>{if(!Q(Kt)&&Kt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Jt=u.getNode(),mt=Jt.previousSibling;if(Jt.nodeName==="HR"){l.remove(Jt),Kt.preventDefault();return}mt&&mt.nodeName&&mt.nodeName.toLowerCase()==="hr"&&(l.remove(mt),Kt.preventDefault())}}})},xe=()=>{Range.prototype.getClientRects||e.on("mousedown",Kt=>{if(!Q(Kt)&&Kt.target.nodeName==="HTML"){const Jt=e.getBody();Jt.blur(),sl.setEditorTimeout(e,()=>{Jt.focus()})}})},Ee=()=>{const Kt=$p(e);e.on("click",Jt=>{const mt=Jt.target;/^(IMG|HR)$/.test(mt.nodeName)&&l.isEditable(mt.parentNode)&&(Jt.preventDefault(),e.selection.select(mt),e.nodeChanged()),mt.nodeName==="A"&&l.hasClass(mt,Kt)&&mt.childNodes.length===0&&l.isEditable(mt.parentNode)&&(Jt.preventDefault(),u.select(mt))})},De=()=>{const Kt=()=>{const mt=l.getAttribs(u.getStart().cloneNode(!1));return()=>{const bn=u.getStart();bn!==e.getBody()&&(l.setAttrib(bn,"style",null),n(mt,On=>{bn.setAttributeNode(On.cloneNode(!0))}))}},Jt=()=>!u.isCollapsed()&&l.getParent(u.getStart(),l.isBlock)!==l.getParent(u.getEnd(),l.isBlock);e.on("keypress",mt=>{let bn;return!Q(mt)&&(mt.keyCode===8||mt.keyCode===46)&&Jt()?(bn=Kt(),e.getDoc().execCommand("delete",!1),bn(),mt.preventDefault(),!1):!0}),l.bind(e.getDoc(),"cut",mt=>{if(!Q(mt)&&Jt()){const bn=Kt();sl.setEditorTimeout(e,()=>{bn()})}})},tt=()=>{e.on("keydown",Kt=>{if(!Q(Kt)&&Kt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Jt=u.getNode().previousSibling;if(Jt&&Jt.nodeName&&Jt.nodeName.toLowerCase()==="table")return Kt.preventDefault(),!1}return!0})},Gt=()=>{e.on("keydown",Kt=>{if(Q(Kt)||Kt.keyCode!==Ft.BACKSPACE)return;let Jt=u.getRng();const mt=Jt.startContainer,bn=Jt.startOffset,On=l.getRoot();let fo=mt;if(!(!Jt.collapsed||bn!==0)){for(;fo.parentNode&&fo.parentNode.firstChild===fo&&fo.parentNode!==On;)fo=fo.parentNode;fo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,fo),Jt=l.createRng(),Jt.setStart(mt,0),Jt.setEnd(mt,0),u.setRng(Jt))}})},at=()=>{const Kt=()=>{H("StyleWithCSS",!1),H("enableInlineTableEditing",!1),US(e)||H("enableObjectResizing",!1)};Qy(e)||e.on("BeforeExecCommand mousedown",Kt)},ze=()=>{const Kt=()=>{n(l.select("a:not([data-mce-block])"),Jt=>{var mt;let bn=Jt.parentNode;const On=l.getRoot();if((bn==null?void 0:bn.lastChild)===Jt){for(;bn&&!l.isBlock(bn);){if(((mt=bn.parentNode)===null||mt===void 0?void 0:mt.lastChild)!==bn||bn===On)return;bn=bn.parentNode}l.add(bn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Jt=>{(Jt.type==="setcontent"||Jt.command==="mceInsertLink")&&Kt()})},Ze=()=>{e.on("init",()=>{H("DefaultParagraphSeparator",Ps(e))})},Et=Kt=>{const Jt=Kt.getBody(),mt=Kt.selection.getRng();return mt.startContainer===mt.endContainer&&mt.startContainer===Jt&&mt.startOffset===0&&mt.endOffset===Jt.childNodes.length},_t=()=>{e.on("keyup focusin mouseup",Kt=>{!Ft.modifierPressed(Kt)&&!Et(e)&&u.normalize()},!0)},Ht=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},mn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},gn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Kt=>{let Jt;Kt.target.nodeName==="HTML"&&(Jt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Jt),e.selection.normalize(),e.nodeChanged())}))},uo=()=>{M&&e.on("keydown",Kt=>{Ft.metaKeyPressed(Kt)&&!Kt.shiftKey&&(Kt.keyCode===37||Kt.keyCode===39)&&(Kt.preventDefault(),e.selection.getSel().modify("move",Kt.keyCode===37?"backward":"forward","lineboundary"))})},yo=()=>{e.on("click",Kt=>{let Jt=Kt.target;do if(Jt.tagName==="A"){Kt.preventDefault();return}while(Jt=Jt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Io=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Kt=>{Kt.preventDefault()})})},Ia=()=>{m.addNodeFilter("br",Kt=>{let Jt=Kt.length;for(;Jt--;)Kt[Jt].attr("class")==="Apple-interchange-newline"&&Kt[Jt].remove()})},Fr=ot,vt=()=>{if(!w||e.removed)return!1;const Kt=e.selection.getSel();return!Kt||!Kt.rangeCount||Kt.rangeCount===0},Wt=()=>{k&&(oe(),Ee(),Io(),X(),B&&(mn(),gn(),yo())),w&&(xe(),at(),Ht(),uo())},ho=()=>{e.on("drop",Kt=>{var Jt;const mt=(Jt=Kt.dataTransfer)===null||Jt===void 0?void 0:Jt.getData("text/html");P(mt)&&/^<img[^>]*>$/.test(mt)&&e.dispatch("dragend",new window.DragEvent("dragend",Kt))})},ao=()=>{Gt(),se(),co.windowsPhone||_t(),k&&(oe(),Ee(),Ze(),Io(),tt(),Ia(),B?(mn(),gn(),yo()):X()),w&&(ye(),xe(),De(),at(),ze(),Ht(),uo(),tt(),ho())};return Ui(e)?Wt():ao(),{refreshContentEditable:Fr,isHidden:vt}},mT=Po.DOM,SZ=(e,n)=>{const o=de.fromDom(e.getBody()),r=iv(du(o)),l=de.fromTag("style");sr(l,"type","text/css"),ar(l,de.fromText(n)),ar(r,l),e.on("remove",()=>{Ro(l)})},xZ=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,ZR=e=>os(e,n=>pt(n)===!1),jR=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return ZR({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:xZ(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},GR=e=>{const n=e.options.get;return ZR({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},EZ=e=>{const n=e.options.get;return{...jR(e),...GR(e),...ZR({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},kZ=e=>{const n=u0(jR(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const l=e.dom,u="data-mce-"+r;let m=o.length;for(;m--;){const b=o[m];let w=b.attr(r);if(w&&!b.attr(u)){if(w.indexOf("data:")===0||w.indexOf("blob:")===0)continue;r==="style"?(w=l.serializeStyle(l.parseStyle(w),b.name),w.length||(w=null),b.attr(u,w),b.attr(r,w)):r==="tabindex"?(b.attr(u,w),b.attr(r,null)):b.attr(u,e.convertURL(w,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const l=o[r],u=l.attr("type")||"no/type";u.indexOf("mce-")!==0&&l.attr("type","mce-"+u)}}),Q_(e)&&n.addNodeFilter("#cdata",o=>{var r;let l=o.length;for(;l--;){const u=o[l];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const l=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(l)&&u.getAll("br").length===0&&u.append(new mi("br",1))}}),n},KR=e=>{const n=ib(e);n&&sl.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},gT=e=>{const n=e.dom.getRoot();!e.inline&&(!km(e)||e.selection.getStart(!0)===n)&&kr(n).each(o=>{const r=o.getNode(),l=Os(r)?kr(r).getOr(o):o;e.selection.setRng(l.toRange())})},hT=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Mx(e),e.focus(!0),gT(e),e.nodeChanged({initial:!0});const n=K_(e);re(n)&&n.call(e,e),KR(e)},Nf=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,pT=(e,n,o)=>{const r=[Nf(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},P1=e=>{const n=Nf(e),o=Rp(e),r=e.contentCSS,l=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?l():e.on("remove",l)};if(e.contentStyles.length>0){let w="";et.each(e.contentStyles,k=>{w+=k+`\r
`}),e.dom.addStyle(w)}const m=Promise.all(pT(e,r,o)).then(u).catch(u),b=$_(e);return b&&SZ(e,b),m},KF=e=>{const n=e.getDoc(),o=e.getBody();Dx(e),cb(e)||(n.body.spellcheck=!1,mT.setAttrib(o,"spellcheck","false")),e.quirks=GF(e),$C(e);const r=P_(e);r!==void 0&&(o.dir=r);const l=eC(e);l&&e.on("BeforeSetContent",u=>{et.each(l,m=>{u.content=u.content.replace(m,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},TZ=e=>{Ui(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},qR=e=>{e.removed!==!0&&(TZ(e),hT(e))},YR=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(mT.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Qy(e),e._editableRoot=GD(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&mT.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=NA(e),e.schema=zc(GR(e)),e.dom=Po(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:D_(e),referrerPolicy:Jy(e),onSetAttrib:m=>{e.dispatch("SetAttrib",m)}}),e.parser=kZ(e),e.serializer=EP(EZ(e),e),e.selection=f0(e.dom,e.getWin(),e.serializer,e),e.annotator=_x(e),e.formatter=FA(e),e.undoManager=jP(e),e._nodeChangeDispatcher=new yU(e),e._selectionOverrides=FR(e),QN(e),TW(e),SK(e),Ui(e)||(RR(e),WR(e));const l=bU(e);bV(e,l),xV(e),cz(e),rF(e);const u=iP(e);KF(e),u.fold(()=>{P1(e).then(()=>qR(e))},m=>{e.setProgressState(!0),P1(e).then(()=>{m().then(b=>{e.setProgressState(!1),qR(e),gP(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),qR(e),gP(e)})})})},_Z=St,XR=(e,n,o)=>ry(e,n,_Z,o),k0=Po.DOM,Nh=(e,n,o,r)=>{const l=de.fromTag("iframe");return r.each(u=>sr(l,"tabindex",u)),gl(l,o),gl(l,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Zf(l,"tox-edit-area__iframe"),l},N1=e=>{let n=__(e)+"<html><head>";jy(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=O_(e),r=Ja(e),l=e.translate(j_(e));return Gy(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Gy(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${l}"><br></body></html>`,n},qF=(e,n)=>{const o=e.translate("Rich Text Area"),r=Bc(de.fromDom(e.getElement()),"tabindex").bind(Kd),l=Nh(e.id,o,jr(e),r).dom;l.onload=()=>{l.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=l,e.iframeHTML=N1(e),k0.add(n.iframeContainer,l)},OZ=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,YR(e)};if(oC(e)||co.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=XR(de.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},AZ=(e,n)=>{qF(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=k0.isHidden(n.editorContainer)),e.getElement().style.display="none",k0.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,OZ(e)},YF=Po.DOM,RZ=(e,n,o)=>{const r=xh.get(o),l=xh.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=et.trim(o),r&&et.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,l)||{};e.plugins[o]=u,re(u.init)&&(u.init(e,l),n.push(o))}catch(u){Du(e,o,u)}}},DZ=e=>e.replace(/^\-/,""),MZ=e=>{const n=[];Ge(lb(e),o=>{RZ(e,n,DZ(o))})},XF=e=>{const n=et.trim(Yy(e)),o=e.ui.registry.getAll().icons,r={...jE.get("default").icons,...jE.get(n).icons};xt(r,(l,u)=>{Cn(o,u)||e.ui.registry.addIcon(u,l)})},BZ=e=>{const n=Qa(e);if(P(n)){const o=Eh.get(n);e.theme=o(e,Eh.urls[n])||{},re(e.theme.init)&&e.theme.init(e,Eh.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},$Z=e=>{const n=sb(e),o=Sh.get(n);e.model=o(e,Sh.urls[n])},PZ=e=>{const n=e.theme.renderUI;return n?n():QF(e)},zK=e=>{const n=e.getElement(),r=Qa(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},JF=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),JR=e=>{const n=YF.create("div");return YF.insertAfter(n,e),JF(n,n)},QF=e=>{const n=e.getElement();return e.inline?JF(null):JR(n)},NZ=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,P(Qa(e))?PZ(e):re(Qa(e))?zK(e):QF(e)},eL=(e,n)=>{const o={show:z.from(n.show).getOr(ot),hide:z.from(n.hide).getOr(ot),isEnabled:z.from(n.isEnabled).getOr(St),setEnabled:r=>{e.mode.isReadOnly()||z.from(n.setEnabled).each(l=>l(r))}};e.ui={...e.ui,...o}},IZ=async e=>{e.dispatch("ScriptsLoaded"),XF(e),BZ(e),$Z(e),MZ(e);const n=await NZ(e);eL(e,z.from(n.api).getOr({})),e.editorContainer=n.editorContainer,X7(e),e.inline?YR(e):AZ(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Ih=Po.DOM,tL=e=>e.charAt(0)==="-",QR=(e,n)=>{const o=zS(n),r=M_(n);if(!Vc.hasCode(o)&&o!=="en"){const l=Oo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(l).catch(()=>{PP(n,l,o)})}},FZ=(e,n)=>{const o=Qa(e);if(P(o)&&!tL(o)&&!Cn(Eh.urls,o)){const r=is(e),l=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Eh.load(o,l).catch(()=>{Wm(e,l,o)})}},LZ=(e,n)=>{const o=sb(e);if(o!=="plugin"&&!Cn(Sh.urls,o)){const r=el(e),l=P(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Sh.load(o,l).catch(()=>{Th(e,l,o)})}},HZ=e=>z.from(LS(e)).filter(Oo).map(n=>({url:n,name:z.none()})),nL=(e,n,o)=>z.from(n).filter(r=>Oo(r)&&!jE.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:z.some(r)})),oL=(e,n,o)=>{const r=nL(n,"default",o),l=HZ(n).orThunk(()=>nL(n,Yy(n),""));Ge(Yo([r,l]),u=>{e.add(u.url).catch(()=>{$P(n,u.url,u.name.getOrUndefined())})})},eD=(e,n)=>{const o=(r,l)=>{xh.load(r,l).catch(()=>{BP(e,l,r)})};xt(W_(e),(r,l)=>{o(l,r),e.options.set("plugins",lb(e).concat(l))}),Ge(lb(e),r=>{r=et.trim(r),r&&!xh.urls[r]&&!tL(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},sL=e=>{const n=Qa(e);return!P(n)||Oe(Eh.get(n))},tD=e=>{const n=sb(e);return Oe(Sh.get(n))},zZ=(e,n)=>{const o=zl.ScriptLoader,r=()=>{!e.removed&&sL(e)&&tD(e)&&IZ(e)};FZ(e,n),LZ(e,n),QR(o,e),oL(o,e,n),eD(e,n),o.loadQueue().then(r,r)},VK=(e,n)=>Wo.forElement(e,{contentCssCors:bf(n),referrerPolicy:Jy(n)}),UK=e=>{const n=e.id;Vc.setCode(zS(e));const o=()=>{Ih.unbind(window,"ready",o),e.render()};if(!lm.Event.domLoaded){Ih.bind(window,"ready",o);return}if(!e.getElement())return;const r=de.fromDom(e.getElement()),l=tv(r);e.on("remove",()=>{cl(r.dom.attributes,m=>rr(r,m.name)),gl(r,l)}),e.ui.styleSheetLoader=VK(r,e),ab(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Ih.getParent(n,"form");u&&(e.formElement=u,jS(e)&&!ip(e.getElement())&&(Ih.insertAfter(Ih.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=m=>{e.dispatch(m.type,m)},Ih.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),H_(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=T1(e),e.notificationManager=XE(e),oO(e)&&e.on("GetContent",m=>{m.save&&(m.content=Ih.encode(m.content))}),z_(e)&&e.on("submit",()=>{e.initialized&&e.save()}),V_(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),zZ(e,e.suffix)},VZ=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Pb(e,n))},rL=e=>e._editableRoot,UZ=(e,n)=>({sections:we(e),options:we(n)}),aL=ec().deviceType,lL=aL.isPhone(),WK=aL.isTablet(),vT=e=>{if(ft(e))return[];{const n=Me(e)?e:e.split(/[ ,]/),o=pn(n,lu);return Qt(o,Oo)}},iL=(e,n)=>{const o=su(n,(r,l)=>dn(e,l));return UZ(o.t,o.f)},cL=(e,n,o={})=>{const r=e.sections(),l=Ko(r,n).getOr({});return et.extend({},o,l)},nD=(e,n)=>Cn(e.sections(),n),WZ=(e,n)=>nD(e,n)?e.sections()[n]:{},ZZ=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ko(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),ZK=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?et.extend({},e.external_plugins,r):r},jK=(e,n)=>[...vT(e),...vT(n)],GK=(e,n,o,r)=>e&&nD(n,"mobile")?r:o,jZ=(e,n,o,r)=>{const l=vT(o.forced_plugins),u=vT(r.plugins),m=WZ(n,"mobile"),b=m.plugins?vT(m.plugins):u,w=GK(e,n,u,b),k=jK(l,w);return et.extend(r,{forced_plugins:l,plugins:k})},KK=(e,n)=>e&&nD(n,"mobile"),GZ=(e,n,o,r,l)=>{var u;const m=e?{mobile:ZZ((u=l.mobile)!==null&&u!==void 0?u:{},n)}:{},b=iL(["mobile"],tw(m,l)),w=et.extend(o,r,b.options(),KK(e,b)?cL(b,"mobile"):{},{external_plugins:ZK(r,b.options())});return jZ(e,b,r,w)},I1=(e,n)=>GZ(lL||WK,lL,n,e,n),oD=(e,n)=>k7(e,n),bT=e=>{const n=(r,l)=>{e.formatter.toggle(r,l),e.nodeChanged()},o=r=>()=>{Ge("left,center,right,justify".split(","),l=>{r!==l&&e.formatter.remove("align"+l)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},uL=e=>{const n=o=>()=>{const r=e.selection,l=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return $o(l,u=>Oe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},dL=e=>{bT(e),uL(e)},fL=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let l=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(co.os.isMacOS()||co.os.isiOS())&&(l=l.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:l,type:"error"})}}})},KZ=(e,n,o)=>{const r=de.fromDom(e.getRoot());return e2(r,He.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),i1(r,He.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},qZ=e=>{if(typeof e!="string"){const n=et.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},YZ=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?KZ(r,o.getRng(),n):n},yT=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=qZ(n);dA(e,{...r,content:YZ(e,o),format:"html",set:!1,selection:!0}).each(l=>{const u=x7(e,l.content,r);fA(e,u,l),e.addVisual()})}},Fh=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{yT(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{yT(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{yT(e,r)},mceInsertContent:(n,o,r)=>{yT(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(md(e))}})},XZ={"font-size":"size","font-family":"face"},mL=lg("font"),JZ=(e,n,o)=>{const r=u=>Cl(u,e).orThunk(()=>mL(u)?Ko(XZ,e).bind(m=>Bc(u,m)):z.none()),l=u=>Ao(de.fromDom(n),u);return M4(de.fromDom(o),u=>r(u),l)},CT=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),QZ=(e,n)=>z.from(Po.DOM.getStyle(n,e,!0)),gL=e=>(n,o)=>z.from(o).map(de.fromDom).filter(rs).bind(r=>JZ(e,n,r.dom).or(QZ(e,r.dom))).getOr(""),ej=gL("font-size"),hL=O(CT,gL("font-family")),tj=e=>kr(e.getBody()).bind(n=>{const o=n.container();return z.from(ut(o)?o.parentNode:o)}),nj=e=>z.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?z.none():z.from(e.selection.getStart(!0))}),oj=(e,n)=>nj(e).orThunk(Fe(tj,e)).map(de.fromDom).filter(rs).bind(n),yw=(e,n)=>oj(e,Ut(z.some,n)),pL=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=tO(e),l=nO(e);return l.length>0?l[o-1]||n:r[o-1]||n}else return n}else return n},sj=e=>{const n=e.split(/\s*,\s*/);return pn(n,o=>o.indexOf(" ")!==-1&&!(or(o,'"')||or(o,"'"))?`'${o}'`:o).join(",")},Ir=(e,n)=>{const o=pL(e,n);e.formatter.toggle("fontname",{value:sj(o)}),e.nodeChanged()},rj=e=>yw(e,n=>hL(e.getBody(),n.dom)).getOr(""),aj=(e,n)=>{e.formatter.toggle("fontsize",{value:pL(e,n)}),e.nodeChanged()},sD=e=>yw(e,n=>ej(e.getBody(),n.dom)).getOr(""),vL=e=>yw(e,n=>{const o=de.fromDom(e.getBody()),r=M4(n,u=>Cl(u,"line-height"),Fe(Ao,o)),l=()=>{const u=parseFloat(Ur(n,"line-height")),m=parseFloat(Ur(n,"font-size"));return String(u/m)};return r.getOrThunk(l)}).getOr(""),rD=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},lj=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,l)=>{n(o,{value:l})},BackColor:(o,r,l)=>{n("hilitecolor",{value:l})},FontName:(o,r,l)=>{Ir(e,l)},FontSize:(o,r,l)=>{aj(e,l)},LineHeight:(o,r,l)=>{rD(e,l)},Lang:(o,r,l)=>{var u;n(o,{value:l.code,customValue:(u=l.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,l)=>{n(P(l)?l:"p")},mceToggleFormat:(o,r,l)=>{n(l)}})},ij=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>rj(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>sD(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>vL(e))},cj=e=>{lj(e),ij(e)},uj=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},dj=e=>{e.editorCommands.addCommands({Indent:()=>{pV(e)},Outdent:()=>{qN(e)}}),e.editorCommands.addCommands({Outdent:()=>v3(e)},"state")},fj=e=>{const n=(o,r,l)=>{const u=P(l)?{href:l}:l,m=e.dom.getParent(e.selection.getNode(),"a");he(u)&&P(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!m||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,m))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},mj=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const l=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(l)}}}})},gj=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},T0=e=>{mj(e),gj(e)},Fd=e=>{e.editorCommands.addCommands({insertParagraph:()=>{jk(eU,e)},mceInsertNewLine:(n,o,r)=>{Gk(e,r)},InsertLineBreak:(n,o,r)=>{jk(p5,e)}})},hj=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let l=0;e.dom.getParent(e.selection.getNode(),u=>Bt(u)&&l++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Do);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},pj=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const l=r!=null?r:e.selection.getNode();if(l!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(l,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{O6(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},vj=e=>{dL(e),fL(e),uj(e),hj(e),Fh(e),fj(e),dj(e),Fd(e),T0(e),cj(e),pj(e)},bj=["toggleview"],bL=e=>dn(bj,e.toLowerCase());class yL{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,l){const u=this.editor,m=n.toLowerCase(),b=l==null?void 0:l.skip_focus;if(u.removed||(m!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(m)&&!b?u.focus():Zx(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const k=this.commands.exec[m];return re(k)?(k(m,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!bL(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return re(r)?r(o):!1}queryCommandValue(n){if(!bL(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return re(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;xt(n,(l,u)=>{Ge(u.toLowerCase().split(","),m=>{r[o][m]=l})})}addCommand(n,o,r){const l=n.toLowerCase();this.commands.exec[l]=(u,m,b)=>o.call(r!=null?r:this.editor,m,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}}const F1="data-mce-contenteditable",yj=(e,n,o)=>{sv(e,n)&&!o?jf(e,n):o&&Zf(e,n)},aD=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},lD=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Cj=e=>{Ge(fa(e,'*[contenteditable="true"]'),n=>{sr(n,F1,"true"),lD(n,!1)})},wj=e=>{Ge(fa(e,`*[${F1}="true"]`),n=>{rr(n,F1),lD(n,!0)})},Sj=e=>{z.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},xj=e=>{e.selection.setRng(e.selection.getRng())},Ej=(e,n)=>{const o=de.fromDom(e.getBody());yj(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),Sj(e),e.readonly=!0,lD(o,!1),Cj(o)):(e.readonly=!1,e.hasEditableRoot()&&lD(o,!0),wj(o),aD(e,"StyleWithCSS",!1),aD(e,"enableInlineTableEditing",!1),aD(e,"enableObjectResizing",!1),T6(e)&&e.focus(),xj(e),e.nodeChanged())},L1=e=>e.readonly,kj=e=>{e.parser.addAttributeFilter("contenteditable",n=>{L1(e)&&Ge(n,o=>{o.attr(F1,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(F1,n=>{L1(e)&&Ge(n,o=>{o.attr("contenteditable",o.attr(F1))})}),e.serializer.addTempAttr(F1)},Tj=e=>{e.serializer?kj(e):e.on("PreInit",()=>{kj(e)})},_j=e=>e.type==="click",Oj=["copy"],Aj=e=>dn(Oj,e.type),Rj=(e,n)=>bl(n,"a",r=>Ao(r,de.fromDom(e.getBody()))).bind(r=>Bc(r,"href")),Dj=(e,n)=>{if(_j(n)&&!Ft.metaKeyPressed(n)){const o=de.fromDom(n.target);Rj(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const l=e.dom.select(`${r},[name="${Zd(r,"#")}"]`);l.length&&e.selection.scrollIntoView(l[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Aj(n)&&e.dispatch(n.type,n)},Mj=e=>{e.on("ShowCaret",n=>{L1(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{L1(e)&&n.preventDefault()})},Bj=et.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class iD{static isNative(n){return!!Bj[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Pe}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),l=Bv(r,o!=null?o:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(l);const u=this.bindings[r];if(u)for(let m=0,b=u.length;m<b;m++){const w=u[m];if(!w.removed){if(w.once&&this.off(r,w.func),l.isImmediatePropagationStopped())return l;if(w.func.call(this.scope,l)===!1)return l.preventDefault(),l}}return l}on(n,o,r,l){if(o===!1&&(o=Pe),o){const u={func:o,removed:!1};l&&et.extend(u,l);const m=n.toLowerCase().split(" ");let b=m.length;for(;b--;){const w=m[b];let k=this.bindings[w];k||(k=[],this.toggleEvent(w,!0)),r?k=[u,...k]:k=[...k,u],this.bindings[w]=k}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let l=r.length;for(;l--;){const u=r[l];let m=this.bindings[u];if(!u)return xt(this.bindings,(b,w)=>{this.toggleEvent(w,!1),delete this.bindings[w]}),this;if(m){if(!o)m.length=0;else{const b=ps(m,w=>w.func===o);m=b.fail,this.bindings[u]=m,Ge(b.pass,w=>{w.removed=!0})}m.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else xt(this.bindings,(r,l)=>{this.toggleEvent(l,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const Cw=e=>(e._eventDispatcher||(e._eventDispatcher=new iD({scope:e,toggleEvent:(n,o)=>{iD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),cD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Bv(e.toLowerCase(),n!=null?n:{},r);const l=Cw(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!l.isPropagationStopped();)u.dispatch(e,l,!1),u=u.parent?u.parent():void 0}return l},on(e,n,o){return Cw(this).on(e,n,o)},off(e,n){return Cw(this).off(e,n)},once(e,n){return Cw(this).once(e,n)},hasEventListeners(e){return Cw(this).has(e)}},wT=Po.DOM;let H1;const ST=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Dp(e);return o?(e.eventRoot||(e.eventRoot=wT.select(o)[0]),e.eventRoot):e.getBody()},$j=e=>!e.hidden&&!L1(e),CL=(e,n,o)=>{$j(e)?e.dispatch(n,o):L1(e)&&Dj(e,o)},uD=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=ST(e,n);if(Dp(e)){if(H1||(H1={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||H1&&(xt(H1,(l,u)=>{e.dom.unbind(ST(e,u))}),H1=null)})),H1[n])return;const r=l=>{const u=l.target,m=e.editorManager.get();let b=m.length;for(;b--;){const w=m[b].getBody();(w===u||wT.isChildOf(u,w))&&CL(m[b],n,l)}};H1[n]=r,wT.bind(o,n,r)}else{const r=l=>{CL(e,n,l)};wT.bind(o,n,r),e.delegates[n]=r}},wL={...cD,bindPendingEventDelegates(){const e=this;et.each(e._pendingNativeEvents,n=>{uD(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?uD(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(ST(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(xt(e.delegates,(r,l)=>{e.dom.unbind(ST(e,l),l,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},Pj=e=>P(e)?{value:e.split(/[ ,]/),valid:!0}:Je(e,P)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Nj=e=>{const n=(()=>{switch(e){case"array":return Me;case"boolean":return Ie;case"function":return re;case"number":return Nt;case"object":return he;case"string":return P;case"string[]":return Pj;case"object[]":return o=>Je(o,he);case"regexp":return o=>Ce(o,RegExp);default:return St}})();return o=>dD(o,n,`The value must be a ${e}.`)},Ij=e=>P(e.processor),SL=(e,n)=>{const o=Al(n.message)?"":`. ${n.message}`;return e+o},xL=e=>e.valid,dD=(e,n,o="")=>{const r=n(e);return Ie(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Fj=(e,n,o)=>{if(!pt(n)){const r=dD(n,o);if(xL(r))return r.value;console.error(SL(`Invalid default value passed for the "${e}" option`,r))}},EL=(e,n)=>{const o={},r={},l=(M,H,Q)=>{const se=dD(H,Q);return xL(se)?(r[M]=se.value,!0):(console.warn(SL(`Invalid value passed for the ${M} option`,se)),!1)},u=(M,H)=>{const Q=Ij(H)?Nj(H.processor):H.processor,se=Fj(M,H.default,Q);o[M]={...H,default:se,processor:Q},Ko(r,M).orThunk(()=>Ko(n,M)).each(oe=>l(M,oe,Q))},m=M=>Cn(o,M);return{register:u,isRegistered:m,get:M=>Ko(r,M).orThunk(()=>Ko(o,M).map(H=>H.default)).getOrUndefined(),set:(M,H)=>{if(m(M)){const Q=o[M];return Q.immutable?(console.error(`"${M}" is an immutable option and cannot be updated`),!1):l(M,H,Q.processor)}else return console.warn(`"${M}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:M=>{const H=m(M);return H&&delete r[M],H},isSet:M=>Cn(r,M)}},Lj=["design","readonly"],kL=(e,n,o,r)=>{const l=o[n.get()],u=o[r];try{u.activate()}catch(m){console.error(`problem while activating editor mode ${r}:`,m);return}l.deactivate(),l.editorReadOnly!==u.editorReadOnly&&Ej(e,u.editorReadOnly),n.set(r),Ef(e,r)},Hj=(e,n,o,r)=>{if(r!==o.get()){if(!Cn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?kL(e,o,n,r):e.on("init",()=>kL(e,o,n,r))}},zj=(e,n,o)=>{if(dn(Lj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Vj=e=>{const n=wr("design"),o=wr({design:{activate:ot,deactivate:ot,editorReadOnly:!1},readonly:{activate:ot,deactivate:ot,editorReadOnly:!0}});return Tj(e),Mj(e),{isReadOnly:()=>L1(e),set:r=>Hj(e,o.get(),n,r),get:()=>n.get(),register:(r,l)=>{o.set(zj(o.get(),r,l))}}},fD=et.each,mD=et.explode,Uj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},gD=et.makeMap("alt,ctrl,shift,meta,access"),qK=e=>e in gD,TL=e=>{const n={},o=co.os.isMacOS()||co.os.isiOS();fD(mD(e.toLowerCase(),"+"),u=>{qK(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=Uj[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let l;for(l in gD)n[l]?r.push(l):n[l]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class _L{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(fD(o.shortcuts,l=>{o.matchShortcut(r,l)&&(o.pendingPatterns=l.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(l))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,l){const u=this,m=u.normalizeCommandFunc(r);return fD(mD(et.trim(n)),b=>{const w=u.createShortcut(b,o,m,l);u.shortcuts[w.id]=w}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:et.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,l){const u=et.map(mD(n,">"),TL);return u[u.length-1]=et.extend(u[u.length-1],{func:r,scope:l||this.editor}),et.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const OL=()=>{const e={},n={},o={},r={},l={},u={},m={},b={},w=(B,M)=>(H,Q)=>{B[H.toLowerCase()]={...Q,type:M}},k=(B,M)=>r[B.toLowerCase()]=M;return{addButton:w(e,"button"),addGroupToolbarButton:w(e,"grouptoolbarbutton"),addToggleButton:w(e,"togglebutton"),addMenuButton:w(e,"menubutton"),addSplitButton:w(e,"splitbutton"),addMenuItem:w(n,"menuitem"),addNestedMenuItem:w(n,"nestedmenuitem"),addToggleMenuItem:w(n,"togglemenuitem"),addAutocompleter:w(o,"autocompleter"),addContextMenu:w(l,"contextmenu"),addContextToolbar:w(u,"contexttoolbar"),addContextForm:w(u,"contextform"),addSidebar:w(m,"sidebar"),addView:w(b,"views"),addIcon:k,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:l,contextToolbars:u,sidebars:m,views:b})}},Wj=()=>{const e=OL();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},z1=Po.DOM,AL=et.extend,Zj=et.each;class xT{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,AL(this,wL);const l=this;this.id=n,this.hidden=!1;const u=I1(r.defaultOptions,o);this.options=EL(l,u),T_(l);const m=this.options.get;m("deprecation_warnings")&&z7(o,u);const b=m("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const w=m("base_url");w&&r._setBaseUrl(w),this.baseUri=r.baseURI;const k=Jy(l);k&&(zl.ScriptLoader._setReferrerPolicy(k),Po.DOM.styleSheetLoader._setReferrerPolicy(k));const B=bf(l);Oe(B)&&Po.DOM.styleSheetLoader._setContentCssCors(B),bo.languageLoad=m("language_load"),bo.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Od(jy(l),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ab(l),this.hasVisual=Z_(l),this.shortcuts=new _L(this),this.editorCommands=new yL(this),vj(this);const M=m("cache_suffix");M&&(co.cacheSuffix=M.replace(/^[\?\&]+/,"")),this.ui={registry:Wj(),styleSheetLoader:void 0,show:ot,hide:ot,setEnabled:ot,isEnabled:St},this.mode=Vj(l),r.dispatch("SetupEditor",{editor:this});const H=G_(l);re(H)&&H.call(l,l)}render(){UK(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return l1(this)}translate(n){return Vc.translate(n)}getParam(n,o,r){const l=this.options;return l.isRegistered(n)||(Oe(r)?l.register(n,{processor:r,default:o}):l.register(n,{processor:St,default:o})),!l.isSet(n)&&!pt(o)?o:l.get(n)}hasPlugin(n,o){return dn(lb(this),n)?o?xh.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,l){this.shortcuts.add(n,o,r,l)}execCommand(n,o,r,l){return this.editorCommands.execCommand(n,o,r,l)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(z1.show(n.getContainer()),z1.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(z1.hide(n.getContainer()),z1.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const l={...n,load:!0},u=ip(r)?r.value:r.innerHTML,m=o.setContent(u,l);return l.no_events||o.dispatch("LoadContent",{...l,element:r}),m}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const l={...n,save:!0,element:r};let u=o.getContent(l);const m={...l,content:u};if(m.no_events||o.dispatch("SaveContent",m),m.format==="raw"&&o.dispatch("RawSaveContent",m),u=m.content,ip(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=z1.getParent(o.id,"form");b&&Zj(b.elements,w=>w.name===o.id?(w.value=u,!1):!0)}return m.element=l.element=r=null,m.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return kP(this,n,o)}getContent(n){return B7(this,n)}insertContent(n,o){o&&(n=AL({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?kP(this,this.startContent,{format:"raw"}):kP(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||z1.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=z1.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const l=this,u=l.options.get,m=fd(l);return re(m)?m.call(l,n,r,!0,o):!u("convert_urls")||r==="link"||he(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?l.documentBaseURI.toRelative(n):(n=l.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){oD(this,n)}setEditableRoot(n){VZ(this,n)}hasEditableRoot(){return rL(this)}remove(){Z7(this)}destroy(n){mK(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const _0=Po.DOM,O0=et.each;let ET=!1,kT,ql=[];const TT=e=>{const n=e.type;O0(Lh.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},RL=e=>{if(e!==ET){const n=Po.DOM;e?(n.bind(window,"resize",TT),n.bind(window,"scroll",TT)):(n.unbind(window,"resize",TT),n.unbind(window,"scroll",TT)),ET=e}},DL=e=>{const n=ql;return ql=Qt(ql,o=>e!==o),Lh.activeEditor===e&&(Lh.activeEditor=ql.length>0?ql[0]:null),Lh.focusedEditor===e&&(Lh.focusedEditor=null),n.length!==ql.length},jj=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(DL(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Gj=document.compatMode!=="CSS1Compat",Lh={...cD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"6.2",releaseDate:"2023-08-09",i18n:Vc,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Od.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const l=window.tinymce||window.tinyMCEPreInit;if(l)n=l.base||l.baseURL,o=l.suffix;else{const u=document.getElementsByTagName("script");for(let m=0;m<u.length;m++){const b=u[m].src||"";if(b==="")continue;const w=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){w.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const m=document.currentScript.src;m.indexOf(".min")!==-1&&(o=".min"),n=m.substring(0,m.lastIndexOf("/"))}}e.baseURL=new Od(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Od(e.baseURL),e.suffix=o,w6(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&xt(r,(l,u)=>{bo.PluginManager.urls[u]=l})},init(e){const n=this;let o;const r=et.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),l=(B,M)=>B.inline&&M.tagName.toLowerCase()in r,u=B=>{let M=B.id;return M||(M=Ko(B,"name").filter(H=>!_0.get(H)).getOrThunk(_0.uniqueId),B.setAttribute("id",M)),M},m=B=>{const M=e[B];if(!!M)return M.apply(n,[])},b=B=>co.browser.isIE()||co.browser.isEdge()?(JE("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Gj?(JE("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):P(B.selector)?_0.select(B.selector):Oe(B.target)?[B.target]:[];let w=B=>{o=B};const k=()=>{let B=0;const M=[];let H;const Q=(se,X,oe)=>{const ye=new xT(se,X,n);M.push(ye),ye.on("init",()=>{++B===H.length&&w(M)}),ye.targetElm=ye.targetElm||oe,ye.render()};_0.unbind(window,"ready",k),m("onpageload"),H=ka(b(e)),et.each(H,se=>{jj(n.get(se.id))}),H=et.grep(H,se=>!n.get(se.id)),H.length===0?w([]):O0(H,se=>{l(e,se)?JE("Could not initialize inline editor on invalid inline target element",se):Q(u(se),e,se)})};return _0.bind(window,"ready",k),new Promise(B=>{o?B(o):w=M=>{B(M)}})},get(e){return arguments.length===0?ql.slice(0):P(e)?ns(ql,n=>n.id===e).getOr(null):Nt(e)&&ql[e]?ql[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&ql.push(e),RL(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),kT||(kT=r=>{const l=n.dispatch("BeforeUnload");if(l.returnValue)return r.preventDefault(),r.returnValue=l.returnValue,l.returnValue},window.addEventListener("beforeunload",kT))),e},createEditor(e,n){return this.add(new xT(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=ql.length-1;r>=0;r--)n.remove(ql[r]);return}if(P(e)){O0(_0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,K(n.get(o.id))?null:(DL(o)&&n.dispatch("RemoveEditor",{editor:o}),ql.length===0&&window.removeEventListener("beforeunload",kT),o.remove(),RL(ql.length>0),o)},execCommand(e,n,o){var r;const l=this,u=he(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!l.get(u)){const m=o.options;new xT(u,m,l).render()}return!0}case"mceRemoveEditor":{const m=l.get(u);return m&&m.remove(),!0}case"mceToggleEditor":{const m=l.get(u);return m?(m.isHidden()?m.show():m.hide(),!0):(l.execCommand("mceAddEditor",!1,o),!0)}}return l.activeEditor?l.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{O0(ql,e=>{e.save()})},addI18n:(e,n)=>{Vc.add(e,n)},translate:e=>Vc.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Od(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Od(this.baseURL)}};Lh.setup();const Kj=(()=>{const e=Zr(),n=u=>({items:u,types:Uo(u),getType:m=>Ko(u,m).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),l=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:l}})(),ML=Math.min,A0=Math.max,R0=Math.round,BL=(e,n,o)=>{let r=n.x,l=n.y;const u=e.w,m=e.h,b=n.w,w=n.h,k=(o||"").split("");return k[0]==="b"&&(l+=w),k[1]==="r"&&(r+=b),k[0]==="c"&&(l+=R0(w/2)),k[1]==="c"&&(r+=R0(b/2)),k[3]==="b"&&(l-=m),k[4]==="r"&&(r-=u),k[3]==="c"&&(l-=R0(m/2)),k[4]==="c"&&(r-=R0(u/2)),V1(r,l,u,m)},qj=(e,n,o,r)=>{for(let l=0;l<r.length;l++){const u=BL(e,n,r[l]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[l]}return null},Yj=(e,n,o)=>V1(e.x-n,e.y-o,e.w+n*2,e.h+o*2),Xj=(e,n)=>{const o=A0(e.x,n.x),r=A0(e.y,n.y),l=ML(e.x+e.w,n.x+n.w),u=ML(e.y+e.h,n.y+n.h);return l-o<0||u-r<0?null:V1(o,r,l-o,u-r)},Jj=(e,n,o)=>{let r=e.x,l=e.y,u=e.x+e.w,m=e.y+e.h;const b=n.x+n.w,w=n.y+n.h,k=A0(0,n.x-r),B=A0(0,n.y-l),M=A0(0,u-b),H=A0(0,m-w);return r+=k,l+=B,o&&(u+=k,m+=B,r-=M,l-=H),u-=M,m-=H,V1(r,l,u-r,m-l)},V1=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),XK={inflate:Yj,relativePosition:BL,findBestRelativePosition:qj,intersect:Xj,clamp:Jj,create:V1,fromClientRect:e=>V1(e.left,e.top,e.width,e.height)},Qj=(e,n,o=1e3)=>{let r=!1,l=null;const u=k=>(...B)=>{r||(r=!0,l!==null&&(clearTimeout(l),l=null),k.apply(null,B))},m=u(e),b=u(n);return{start:(...k)=>{!r&&l===null&&(l=setTimeout(()=>b.apply(null,k),o))},resolve:m,reject:b}},eG=(()=>{const e={},n={};return{load:(u,m)=>{const b=`Script at URL "${m}" failed to load`,w=`Script at URL "${m}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const k=new Promise((B,M)=>{const H=Qj(B,M);n[u]=H.resolve,zl.ScriptLoader.loadScript(m).then(()=>H.start(w),()=>H.reject(b))});return e[u]=k,k}},add:(u,m)=>{n[u]!==void 0&&(n[u](m),delete n[u]),e[u]=Promise.resolve(m)},unload:u=>{delete e[u]}}})(),tG=()=>(()=>{let e={},n=[];const o={getItem:r=>{const l=e[r];return l||null},setItem:(r,l)=>{n.push(r),e[r]=String(l)},key:r=>n[r],removeItem:r=>{n=n.filter(l=>l===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let _T;try{const e="__storage_test__";_T=window.localStorage,_T.setItem(e,e),_T.removeItem(e)}catch{_T=tG()}var nG=_T;const xc={geom:{Rect:XK},util:{Delay:sl,Tools:et,VK:Ft,URI:Od,EventDispatcher:iD,Observable:cD,I18n:Vc,LocalStorage:nG,ImageUploader:oz},dom:{EventUtils:lm,TreeWalker:lr,TextSeeker:gf,DOMUtils:Po,ScriptLoader:zl,RangeUtils:jn,Serializer:EP,StyleSheetLoader:by,ControlSelection:Px,BookmarkManager:Om,Selection:f0,Event:lm.Event},html:{Styles:Sy,Entities:sd,Node:mi,Schema:zc,DomParser:u0,Writer:Jx,Serializer:mh},Env:co,AddOnManager:bo,Annotator:_x,Formatter:FA,UndoManager:jP,EditorCommands:yL,WindowManager:T1,NotificationManager:XE,EditorObservable:wL,Shortcuts:_L,Editor:xT,FocusManager:jx,EditorManager:Lh,DOM:Po.DOM,ScriptLoader:zl.ScriptLoader,PluginManager:xh,ThemeManager:Eh,ModelManager:Sh,IconManager:jE,Resource:eG,FakeClipboard:Kj,trim:et.trim,isArray:et.isArray,is:et.is,toArray:et.toArray,makeMap:et.makeMap,each:et.each,map:et.map,grep:et.grep,inArray:et.inArray,extend:et.extend,walk:et.walk,resolve:et.resolve,explode:et.explode,_addCacheSuffix:et._addCacheSuffix},hD=et.extend(Lh,xc),oG=e=>{try{g.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(hD),oG(hD)})()})(Gre);(function(){var g=tinymce.util.Tools.resolve("tinymce.ModelManager");const C=(c,f,p)=>{var y;return p(c,f.prototype)?!0:((y=c.constructor)===null||y===void 0?void 0:y.name)===f.name},_=c=>{const f=typeof c;return c===null?"null":f==="object"&&Array.isArray(c)?"array":f==="object"&&C(c,String,(p,y)=>y.isPrototypeOf(p))?"string":f},R=c=>f=>_(f)===c,V=c=>f=>typeof f===c,L=c=>f=>c===f,W=R("string"),U=R("object"),j=R("array"),Y=L(null),le=V("boolean"),ce=L(void 0),ne=c=>c==null,fe=c=>!ne(c),te=V("function"),ve=V("number"),ie=()=>{},pe=(c,f)=>(...p)=>c(f.apply(null,p)),Ce=(c,f)=>p=>c(f(p)),P=c=>()=>c,he=c=>c,Ye=(c,f)=>c===f;function Me(c,...f){return(...p)=>{const y=f.concat(p);return c.apply(null,y)}}const K=c=>f=>!c(f),Ie=c=>()=>{throw new Error(c)},pt=c=>c(),ft=P(!1),Oe=P(!0);class re{constructor(f,p){this.tag=f,this.value=p}static some(f){return new re(!0,f)}static none(){return re.singletonNone}fold(f,p){return this.tag?p(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?re.some(f(this.value)):re.none()}bind(f){return this.tag?f(this.value):re.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:re.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f!=null?f:"Called getOrDie on None")}static from(f){return fe(f)?re.some(f):re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}re.singletonNone=new re(!1);const Nt=Array.prototype.slice,Je=Array.prototype.indexOf,ot=Array.prototype.push,O=(c,f)=>Je.call(c,f),Ut=(c,f)=>O(c,f)>-1,we=(c,f)=>{for(let p=0,y=c.length;p<y;p++){const E=c[p];if(f(E,p))return!0}return!1},Qe=(c,f)=>{const p=[];for(let y=0;y<c;y++)p.push(f(y));return p},it=(c,f)=>{const p=c.length,y=new Array(p);for(let E=0;E<p;E++){const A=c[E];y[E]=f(A,E)}return y},Fe=(c,f)=>{for(let p=0,y=c.length;p<y;p++){const E=c[p];f(E,p)}},_n=(c,f)=>{for(let p=c.length-1;p>=0;p--){const y=c[p];f(y,p)}},Kn=(c,f)=>{const p=[],y=[];for(let E=0,A=c.length;E<A;E++){const N=c[E];(f(N,E)?p:y).push(N)}return{pass:p,fail:y}},Pn=(c,f)=>{const p=[];for(let y=0,E=c.length;y<E;y++){const A=c[y];f(A,y)&&p.push(A)}return p},Jn=(c,f,p)=>(_n(c,(y,E)=>{p=f(p,y,E)}),p),Pe=(c,f,p)=>(Fe(c,(y,E)=>{p=f(p,y,E)}),p),St=(c,f,p)=>{for(let y=0,E=c.length;y<E;y++){const A=c[y];if(f(A,y))return re.some(A);if(p(A,y))break}return re.none()},z=(c,f)=>St(c,f,ft),Rr=(c,f)=>{for(let p=0,y=c.length;p<y;p++){const E=c[p];if(f(E,p))return re.some(p)}return re.none()},Wn=c=>{const f=[];for(let p=0,y=c.length;p<y;++p){if(!j(c[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+c);ot.apply(f,c[p])}return f},ms=(c,f)=>Wn(it(c,f)),po=(c,f)=>{for(let p=0,y=c.length;p<y;++p){const E=c[p];if(f(E,p)!==!0)return!1}return!0},Vu=c=>{const f=Nt.call(c,0);return f.reverse(),f},dn=(c,f)=>{const p={};for(let y=0,E=c.length;y<E;y++){const A=c[y];p[String(A)]=f(A,y)}return p},$o=(c,f)=>{const p=Nt.call(c,0);return p.sort(f),p},pn=(c,f)=>f>=0&&f<c.length?re.some(c[f]):re.none(),Ge=c=>pn(c,0),cl=c=>pn(c,c.length-1),ps=(c,f)=>{for(let p=0;p<c.length;p++){const y=f(c[p],p);if(y.isSome())return y}return re.none()},Qt=Object.keys,_l=Object.hasOwnProperty,Vo=(c,f)=>{const p=Qt(c);for(let y=0,E=p.length;y<E;y++){const A=p[y],N=c[A];f(N,A)}},Xi=(c,f)=>ns(c,(p,y)=>({k:y,v:f(p,y)})),ns=(c,f)=>{const p={};return Vo(c,(y,E)=>{const A=f(y,E);p[A.k]=A.v}),p},Js=c=>(f,p)=>{c[p]=f},Si=(c,f,p,y)=>{Vo(c,(E,A)=>{(f(E,A)?p:y)(E,A)})},Dr=(c,f)=>{const p={};return Si(c,f,Js(p),ie),p},ks=(c,f)=>{const p=[];return Vo(c,(y,E)=>{p.push(f(y,E))}),p},It=c=>ks(c,he),Zn=(c,f)=>Dn(c,f)?re.from(c[f]):re.none(),Dn=(c,f)=>_l.call(c,f),Re=(c,f)=>Dn(c,f)&&c[f]!==void 0&&c[f]!==null,yt=c=>{for(const f in c)if(_l.call(c,f))return!1;return!0},en=typeof window<"u"?window:Function("return this;")(),hn=(c,f)=>{let p=f!=null?f:en;for(let y=0;y<c.length&&p!==void 0&&p!==null;++y)p=p[c[y]];return p},vo=(c,f)=>{const p=c.split(".");return hn(p,f)},Ts=(c,f)=>vo(c,f),ka=(c,f)=>{const p=Ts(c,f);if(p==null)throw new Error(c+" not available on this browser");return p},Uo=Object.getPrototypeOf,Lr=c=>ka("HTMLElement",c),xt=c=>{const f=vo("ownerDocument.defaultView",c);return U(c)&&(Lr(f).prototype.isPrototypeOf(c)||/^HTML\w*Element$/.test(Uo(c).constructor.name))},Hn=8,pr=9,ul=11,Lf=1,su=3,os=c=>c.dom.nodeName.toLowerCase(),ru=c=>c.dom.nodeType,Uu=c=>f=>ru(f)===c,Ko=c=>ru(c)===Hn||os(c)==="#comment",Cn=c=>Ta(c)&&xt(c.dom),Ta=Uu(Lf),Oc=Uu(su),Qm=Uu(pr),eg=Uu(ul),Va=c=>f=>Ta(f)&&os(f)===c,Hr=(c,f,p)=>{if(W(p)||le(p)||ve(p))c.setAttribute(f,p+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",p,":: Element ",c),new Error("Attribute value was not simple")},Qs=(c,f,p)=>{Hr(c.dom,f,p)},Ji=(c,f)=>{const p=c.dom;Vo(f,(y,E)=>{Hr(p,E,y)})},Ud=(c,f)=>{Vo(f,(p,y)=>{p.fold(()=>{Fs(c,y)},E=>{Hr(c.dom,y,E)})})},Yr=(c,f)=>{const p=c.dom.getAttribute(f);return p===null?void 0:p},dl=(c,f)=>re.from(Yr(c,f)),Fs=(c,f)=>{c.dom.removeAttribute(f)},_a=c=>Pe(c.dom.attributes,(f,p)=>(f[p.name]=p.value,f),{}),au=(c,f)=>{const y=(f||document).createElement("div");if(y.innerHTML=c,!y.hasChildNodes()||y.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,c),new Error(E)}return Qi(y.childNodes[0])},Hf=(c,f)=>{const y=(f||document).createElement(c);return Qi(y)},tg=(c,f)=>{const y=(f||document).createTextNode(c);return Qi(y)},Qi=c=>{if(c==null)throw new Error("Node cannot be null or undefined");return{dom:c}},Te={fromHtml:au,fromTag:Hf,fromText:tg,fromDom:Qi,fromPoint:(c,f,p)=>re.from(c.dom.elementFromPoint(f,p)).map(Qi)},Ua=(c,f)=>{const p=c.dom;if(p.nodeType!==Lf)return!1;{const y=p;if(y.matches!==void 0)return y.matches(f);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(f);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(f);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},Wd=c=>c.nodeType!==Lf&&c.nodeType!==pr&&c.nodeType!==ul||c.childElementCount===0,K1=(c,f)=>{const p=f===void 0?document:f.dom;return Wd(p)?[]:it(p.querySelectorAll(c),Te.fromDom)},Kh=(c,f)=>{const p=f===void 0?document:f.dom;return Wd(p)?re.none():re.from(p.querySelector(c)).map(Te.fromDom)},ss=(c,f)=>c.dom===f.dom,q1=(c,f)=>{const p=c.dom,y=f.dom;return p===y?!1:p.contains(y)},Iw=Ua,Wu=c=>Te.fromDom(c.dom.ownerDocument),Zd=c=>Qm(c)?c:Wu(c),Mr=c=>Te.fromDom(Zd(c).dom.documentElement),or=c=>Te.fromDom(Zd(c).dom.defaultView),Ac=c=>re.from(c.dom.parentNode).map(Te.fromDom),Ol=c=>re.from(c.dom.parentElement).map(Te.fromDom),lu=(c,f)=>{const p=te(f)?f:ft;let y=c.dom;const E=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const A=y.parentNode,N=Te.fromDom(A);if(E.push(N),p(N)===!0)break;y=A}return E},zf=c=>re.from(c.dom.previousSibling).map(Te.fromDom),jd=c=>re.from(c.dom.nextSibling).map(Te.fromDom),Oo=c=>it(c.dom.childNodes,Te.fromDom),Al=(c,f)=>{const p=c.dom.childNodes;return re.from(p[f]).map(Te.fromDom)},Gd=c=>Al(c,0),Kd=(c,f)=>{Ac(c).each(y=>{y.dom.insertBefore(f.dom,c.dom)})},iu=(c,f)=>{jd(c).fold(()=>{Ac(c).each(E=>{_s(E,f)})},y=>{Kd(y,f)})},Rl=(c,f)=>{Gd(c).fold(()=>{_s(c,f)},y=>{c.dom.insertBefore(f.dom,y.dom)})},_s=(c,f)=>{c.dom.appendChild(f.dom)},Fw=(c,f,p)=>{Al(c,p).fold(()=>{_s(c,f)},y=>{Kd(y,f)})},qh=(c,f)=>{Kd(c,f),_s(f,c)},Lo=(c,f)=>{Fe(f,(p,y)=>{const E=y===0?c:f[y-1];iu(E,p)})},Dl=(c,f)=>{Fe(f,p=>{_s(c,p)})},fl=c=>{c.dom.textContent="",Fe(Oo(c),f=>{Br(f)})},Br=c=>{const f=c.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},Vf=c=>{const f=Oo(c);f.length>0&&Lo(c,f),Br(c)},Zu=(c,f)=>Te.fromDom(c.dom.cloneNode(f)),xi=c=>Zu(c,!1),Wa=c=>Zu(c,!0),Yh=(c,f)=>{const p=Te.fromTag(f),y=_a(c);return Ji(p,y),p},Xh=(c,f)=>{const p=Yh(c,f),y=Oo(Wa(c));return Dl(p,y),p},Y1=(c,f)=>{const p=Yh(c,f);iu(c,p);const y=Oo(c);return Dl(p,y),Br(c),p},Ml=["tfoot","thead","tbody","colgroup"],cu=c=>Ut(Ml,c),Jh=(c,f)=>({rows:c,columns:f}),Qh=(c,f)=>({row:c,column:f}),ng=(c,f,p)=>({element:c,rowspan:f,colspan:p}),og=(c,f,p,y)=>({element:c,rowspan:f,colspan:p,isNew:y}),X1=(c,f,p,y,E,A)=>({element:c,rowspan:f,colspan:p,row:y,column:E,isLocked:A}),sg=(c,f,p)=>({element:c,cells:f,section:p}),Xr=(c,f,p,y)=>({element:c,cells:f,section:p,isNew:y}),zr=(c,f,p)=>({element:c,isNew:f,isLocked:p}),ju=(c,f,p,y)=>({element:c,cells:f,section:p,isNew:y}),ep=(c,f,p,y)=>({startRow:c,startCol:f,finishRow:p,finishCol:y}),J1=(c,f,p)=>({element:c,colspan:f,column:p}),ec=(c,f)=>({element:c,columns:f}),U0=c=>eg(c)&&fe(c.dom.host),ca=te(Element.prototype.attachShadow)&&te(Node.prototype.getRootNode),Vr=P(ca),tc=ca?c=>Te.fromDom(c.dom.getRootNode()):Zd,Rc=c=>{const f=tc(c);return U0(f)?re.some(f):re.none()},In=c=>Te.fromDom(c.dom.host),co=c=>{if(Vr()&&fe(c.target)){const f=Te.fromDom(c.target);if(Ta(f)&&Jr(f)&&c.composed&&c.composedPath){const p=c.composedPath();if(p)return Ge(p)}}return re.from(c.target)},Jr=c=>fe(c.dom.shadowRoot),Zs=c=>{const f=Oc(c)?c.dom.parentNode:c.dom;if(f==null||f.ownerDocument===null)return!1;const p=f.ownerDocument;return Rc(Te.fromDom(f)).fold(()=>p.body.contains(f),Ce(Zs,In))},F=()=>q(Te.fromDom(document)),q=c=>{const f=c.dom.body;if(f==null)throw new Error("Body is not available yet");return Te.fromDom(f)},me=(c,f,p)=>Pn(lu(c,p),f),Ne=(c,f)=>Pn(Oo(c),f),Lt=(c,f)=>{let p=[];return Fe(Oo(c),y=>{f(y)&&(p=p.concat([y])),p=p.concat(Lt(y,f))}),p},Rt=(c,f,p)=>me(c,y=>Ua(y,f),p),qo=(c,f)=>Ne(c,p=>Ua(p,f)),Ms=(c,f)=>K1(f,c);var et=(c,f,p,y,E)=>c(p,y)?re.some(p):te(E)&&E(p)?re.none():f(p,y,E);const ua=(c,f,p)=>{let y=c.dom;const E=te(p)?p:ft;for(;y.parentNode;){y=y.parentNode;const A=Te.fromDom(y);if(f(A))return re.some(A);if(E(A))break}return re.none()},Yo=(c,f,p)=>et((E,A)=>A(E),ua,c,f,p),vr=(c,f)=>{const p=E=>f(Te.fromDom(E));return z(c.dom.childNodes,p).map(Te.fromDom)},Q1=(c,f)=>{const p=y=>{for(let E=0;E<y.childNodes.length;E++){const A=Te.fromDom(y.childNodes[E]);if(f(A))return re.some(A);const N=p(y.childNodes[E]);if(N.isSome())return N}return re.none()};return p(c.dom)},so=(c,f,p)=>ua(c,y=>Ua(y,f),p),Gu=(c,f)=>vr(c,p=>Ua(p,f)),qd=(c,f)=>Kh(f,c),cs=(c,f,p)=>et((E,A)=>Ua(E,A),so,c,f,p),js=(c,f,p=Ye)=>c.exists(y=>p(y,f)),Dc=c=>{const f=[],p=y=>{f.push(y)};for(let y=0;y<c.length;y++)c[y].each(p);return f},WT=(c,f)=>c!=null?f(c):re.none(),ev=(c,f)=>c?re.some(f):re.none(),vs=(c,f,p)=>f===""||c.length>=f.length&&c.substr(p,p+f.length)===f,Bl=(c,f,p=0,y)=>{const E=c.indexOf(f,p);return E!==-1?ce(y)?!0:E+f.length<=y:!1},rg=(c,f)=>vs(c,f,0),ml=(c,f)=>vs(c,f,c.length-f.length),tp=(c=>f=>f.replace(c,""))(/^\s+|\s+$/g),gs=c=>c.length>0,Za=c=>{const f=parseFloat(c);return isNaN(f)?re.none():re.some(f)},$l=c=>c.style!==void 0&&te(c.style.getPropertyValue),Lw=(c,f,p)=>{if(!W(p))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",p,":: Element ",c),new Error("CSS value must be a string: "+p);$l(c)&&c.style.setProperty(f,p)},uu=(c,f)=>{$l(c)&&c.style.removeProperty(f)},rs=(c,f,p)=>{const y=c.dom;Lw(y,f,p)},ja=(c,f)=>{const p=c.dom;Vo(f,(y,E)=>{Lw(p,E,y)})},Uf=(c,f)=>{const p=c.dom,E=window.getComputedStyle(p).getPropertyValue(f);return E===""&&!Zs(c)?Hw(p,f):E},Hw=(c,f)=>$l(c)?c.style.getPropertyValue(f):"",lg=(c,f)=>{const p=c.dom,y=Hw(p,f);return re.from(y).filter(E=>E.length>0)},Mc=(c,f)=>{const p=c.dom;uu(p,f),js(dl(c,"style").map(tp),"")&&Fs(c,"style")},sr=(c,f)=>{const p=c.dom,y=f.dom;$l(p)&&$l(y)&&(y.style.cssText=p.style.cssText)},gl=(c,f,p=0)=>dl(c,f).map(y=>parseInt(y,10)).getOr(p),hl=(c,f)=>gl(c,f,1),Bc=c=>Va("col")(c)?gl(c,"span",1)>1:hl(c,"colspan")>1,np=c=>hl(c,"rowspan")>1,rr=(c,f)=>parseInt(Uf(c,f),10),Ei=P(10),tv=P(10),ig=(c,f)=>nv(c,f,Oe),nv=(c,f,p)=>ms(Oo(c),y=>Ua(y,f)?p(y)?[y]:[]:nv(y,f,p)),zw=(c,f,p=ft)=>{if(p(f))return re.none();if(Ut(c,os(f)))return re.some(f);const y=E=>Ua(E,"table")||p(E);return so(f,c.join(","),y)},Wf=(c,f)=>zw(["td","th"],c,f),Yd=c=>ig(c,"th,td"),op=c=>Ua(c,"colgroup")?qo(c,"col"):ms(Zf(c),f=>qo(f,"col")),pl=(c,f)=>cs(c,"table",f),W0=c=>ig(c,"tr"),Zf=c=>pl(c).fold(P([]),f=>qo(f,"colgroup")),ov=(c,f)=>it(c,p=>{if(os(p)==="colgroup"){const y=it(op(p),E=>{const A=gl(E,"span",1);return ng(E,1,A)});return sg(p,y,"colgroup")}else{const y=it(Yd(p),E=>{const A=gl(E,"rowspan",1),N=gl(E,"colspan",1);return ng(E,A,N)});return sg(p,y,f(p))}}),jf=c=>Ac(c).map(f=>{const p=os(f);return cu(p)?p:"tbody"}).getOr("tbody"),Z0=c=>{const f=W0(c),y=[...Zf(c),...f];return ov(y,jf)},sv=(c,f)=>ov(c,()=>f),cg=c=>{let f=!1,p;return(...y)=>(f||(f=!0,p=c.apply(null,y)),p)},Vw=(c,f,p,y)=>{const E=c.isiOS()&&/ipad/i.test(p)===!0,A=c.isiOS()&&!E,N=c.isiOS()||c.isAndroid(),G=N||y("(pointer:coarse)"),ee=E||!A&&N&&y("(min-device-width:768px)"),ge=A||N&&!ee,ke=f.isSafari()&&c.isiOS()&&/safari/i.test(p)===!1,st=!ge&&!ee&&!ke;return{isiPad:P(E),isiPhone:P(A),isTablet:P(ee),isPhone:P(ge),isTouch:P(G),isAndroid:c.isAndroid,isiOS:c.isiOS,isWebView:P(ke),isDesktop:P(st)}},Uw=(c,f)=>{for(let p=0;p<c.length;p++){const y=c[p];if(y.test(f))return y}},ug=(c,f)=>{const p=Uw(c,f);if(!p)return{major:0,minor:0};const y=E=>Number(f.replace(p,"$"+E));return rv(y(1),y(2))},ZT=(c,f)=>{const p=String(f).toLowerCase();return c.length===0?de():ug(c,p)},de=()=>rv(0,0),rv=(c,f)=>({major:c,minor:f}),vl={nu:rv,detect:ZT,unknown:de},j0=(c,f)=>ps(f.brands,p=>{const y=p.brand.toLowerCase();return z(c,E=>{var A;return y===((A=E.brand)===null||A===void 0?void 0:A.toLowerCase())}).map(E=>({current:E.name,version:vl.nu(parseInt(p.version,10),0)}))}),jT=(c,f)=>{const p=String(f).toLowerCase();return z(c,y=>y.search(p))},GT=(c,f)=>jT(c,f).map(p=>{const y=vl.detect(p.versionRegexes,f);return{current:p.name,version:y}}),Ao=(c,f)=>jT(c,f).map(p=>{const y=vl.detect(p.versionRegexes,f);return{current:p.name,version:y}}),$c=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Oa=c=>f=>Bl(f,c),Ku=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:c=>Bl(c,"edge/")&&Bl(c,"chrome")&&Bl(c,"safari")&&Bl(c,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$c],search:c=>Bl(c,"chrome")&&!Bl(c,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:c=>Bl(c,"msie")||Bl(c,"trident")},{name:"Opera",versionRegexes:[$c,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Oa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Oa("firefox")},{name:"Safari",versionRegexes:[$c,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:c=>(Bl(c,"safari")||Bl(c,"mobile/"))&&Bl(c,"applewebkit")}],Ww=[{name:"Windows",search:Oa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:c=>Bl(c,"iphone")||Bl(c,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Oa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Oa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Oa("linux"),versionRegexes:[]},{name:"Solaris",search:Oa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Oa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Oa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],dg={browsers:P(Ku),oses:P(Ww)},ti="Edge",av="Chromium",G0="IE",Zw="Opera",nc="Firefox",fg="Safari",jw=()=>ni({current:void 0,version:vl.unknown()}),ni=c=>{const f=c.current,p=c.version,y=E=>()=>f===E;return{current:f,version:p,isEdge:y(ti),isChromium:y(av),isIE:y(G0),isOpera:y(Zw),isFirefox:y(nc),isSafari:y(fg)}},Qr={unknown:jw,nu:ni,edge:P(ti),chromium:P(av),ie:P(G0),opera:P(Zw),firefox:P(nc),safari:P(fg)},Xd="Windows",mg="iOS",oc="Android",Pl="Linux",K0="macOS",Gw="Solaris",sp="FreeBSD",lv="ChromeOS",q0=()=>du({current:void 0,version:vl.unknown()}),du=c=>{const f=c.current,p=c.version,y=E=>()=>f===E;return{current:f,version:p,isWindows:y(Xd),isiOS:y(mg),isAndroid:y(oc),isMacOS:y(K0),isLinux:y(Pl),isSolaris:y(Gw),isFreeBSD:y(sp),isChromeOS:y(lv)}},iv={unknown:q0,nu:du,windows:P(Xd),ios:P(mg),android:P(oc),linux:P(Pl),macos:P(K0),solaris:P(Gw),freebsd:P(sp),chromeos:P(lv)},LD={detect:(c,f,p)=>{const y=dg.browsers(),E=dg.oses(),A=f.bind(ee=>j0(y,ee)).orThunk(()=>GT(y,c)).fold(Qr.unknown,Qr.nu),N=Ao(E,c).fold(iv.unknown,iv.nu),G=Vw(N,A,c,p);return{browser:A,os:N,deviceType:G}}},KT=c=>window.matchMedia(c).matches;let cv=cg(()=>LD.detect(navigator.userAgent,re.from(navigator.userAgentData),KT));const Kw=()=>cv(),Gf=(c,f)=>{const p=(G,ee)=>{if(!ve(ee)&&!ee.match(/^[0-9]+$/))throw new Error(c+".set accepts only positive integer values. Value was "+ee);const ge=G.dom;$l(ge)&&(ge.style[c]=ee+"px")},y=G=>{const ee=f(G);if(ee<=0||ee===null){const ge=Uf(G,c);return parseFloat(ge)||0}return ee},E=y,A=(G,ee)=>Pe(ee,(ge,ke)=>{const st=Uf(G,ke),Dt=st===void 0?0:parseInt(st,10);return isNaN(Dt)?ge:ge+Dt},0);return{set:p,get:y,getOuter:E,aggregate:A,max:(G,ee,ge)=>{const ke=A(G,ge);return ee>ke?ee-ke:0}}},br=(c,f)=>Za(c).getOr(f),us=(c,f,p)=>br(Uf(c,f),p),ki=(c,f,p,y)=>{const E=us(c,`padding-${p}`,0),A=us(c,`padding-${y}`,0),N=us(c,`border-${p}-width`,0),G=us(c,`border-${y}-width`,0);return f-E-A-N-G},Y0=(c,f)=>{const p=c.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return f==="border-box"?y:ki(c,y,"left","right")},qT=c=>us(c,"height",c.dom.offsetHeight),Ga=c=>us(c,"width",c.dom.offsetWidth),rp=c=>Y0(c,"content-box"),Kf=Gf("width",c=>c.dom.offsetWidth),bl=c=>Kf.get(c),qw=c=>Kf.getOuter(c),Mn=rp,Ti=Ga,qu=(c,f,p)=>{const y=c.cells,E=y.slice(0,f),A=y.slice(f),N=E.concat(p).concat(A);return J0(c,N)},X0=(c,f,p)=>qu(c,f,[p]),ap=(c,f,p)=>{const y=c.cells;y[f]=p},J0=(c,f)=>ju(c.element,f,c.section,c.isNew),uv=(c,f)=>{const p=c.cells,y=it(p,f);return ju(c.element,y,c.section,c.isNew)},Ur=(c,f)=>c.cells[f],yl=(c,f)=>Ur(c,f).element,Cl=c=>c.cells.length,da=c=>{const f=Kn(c,p=>p.section==="colgroup");return{rows:f.fail,cols:f.pass}},Yw=(c,f,p)=>{const y=it(c.cells,p);return ju(f(c.element),y,c.section,!0)},Bs="data-snooker-locked-cols",Nl=c=>dl(c,Bs).bind(f=>re.from(f.match(/\d+/g))).map(f=>dn(f,Oe)),oi=c=>{const f=Pe(da(c).rows,(y,E)=>(Fe(E.cells,(A,N)=>{A.isLocked&&(y[N]=!0)}),y),{}),p=ks(f,(y,E)=>parseInt(E,10));return $o(p)},gg=(c,f)=>c+","+f,ar=(c,f,p)=>re.from(c.access[gg(f,p)]),Xw=(c,f,p)=>{const y=Q0(c,E=>p(f,E.element));return y.length>0?re.some(y[0]):re.none()},Q0=(c,f)=>{const p=ms(c.all,y=>y.cells);return Pn(p,f)},Xo=c=>{const f={};let p=0;return Fe(c.cells,y=>{const E=y.colspan;Qe(E,A=>{const N=p+A;f[N]=J1(y.element,E,N)}),p+=E}),f},Jd=c=>{const f={},p=[],E=Ge(c).map(Tt=>Tt.element).bind(pl).bind(Nl).getOr({});let A=0,N=0,G=0;const{pass:ee,fail:ge}=Kn(c,Tt=>Tt.section==="colgroup");Fe(ge,Tt=>{const Ke=[];Fe(Tt.cells,Ot=>{let je=0;for(;f[gg(G,je)]!==void 0;)je++;const Vt=Re(E,je.toString()),vn=X1(Ot.element,Ot.rowspan,Ot.colspan,G,je,Vt);for(let Nn=0;Nn<Ot.colspan;Nn++)for(let Qo=0;Qo<Ot.rowspan;Qo++){const Gr=G+Qo,Vs=je+Nn,Zl=gg(Gr,Vs);f[Zl]=vn,N=Math.max(N,Vs+1)}Ke.push(vn)}),A++,p.push(sg(Tt.element,Ke,Tt.section)),G++});const{columns:ke,colgroups:st}=cl(ee).map(Tt=>{const Ke=Xo(Tt);return{colgroups:[ec(Tt.element,It(Ke))],columns:Ke}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Jh(A,N),access:f,all:p,columns:ke,colgroups:st}},Yn={fromTable:c=>{const f=Z0(c);return Jd(f)},generate:Jd,getAt:ar,findItem:Xw,filterItems:Q0,justCells:c=>ms(c.all,f=>f.cells),justColumns:c=>It(c.columns),hasColumns:c=>Qt(c.columns).length>0,getColumnAt:(c,f)=>re.from(c.columns[f])},ny=(c,f=Oe)=>{const p=c.grid,y=Qe(p.columns,he),E=Qe(p.rows,he);return it(y,A=>oy(()=>ms(E,ge=>Yn.getAt(c,ge,A).filter(ke=>ke.column===A).toArray()),ge=>ge.colspan===1&&f(ge.element),()=>Yn.getAt(c,0,A)))},oy=(c,f,p)=>{const y=c();return z(y,f).orThunk(()=>re.from(y[0]).orThunk(p)).map(N=>N.element)},YT=c=>{const f=c.grid,p=Qe(f.rows,he),y=Qe(f.columns,he);return it(p,E=>oy(()=>ms(y,ee=>Yn.getAt(c,E,ee).filter(ge=>ge.row===E).fold(P([]),ge=>[ge])),ee=>ee.rowspan===1,()=>Yn.getAt(c,E,0)))},HD=(c,f)=>{if(f<0||f>=c.length-1)return re.none();const p=c[f].fold(()=>{const E=Vu(c.slice(0,f));return ps(E,(A,N)=>A.map(G=>({value:G,delta:N+1})))},E=>re.some({value:E,delta:0})),y=c[f+1].fold(()=>{const E=c.slice(f+1);return ps(E,(A,N)=>A.map(G=>({value:G,delta:N+1})))},E=>re.some({value:E,delta:1}));return p.bind(E=>y.map(A=>{const N=A.delta+E.delta;return Math.abs(A.value-E.value)/N}))},sy=(c,f)=>p=>ry(p)==="rtl"?f:c,ry=c=>Uf(c,"direction")==="rtl"?"rtl":"ltr",Jw=Gf("height",c=>{const f=c.dom;return Zs(c)?f.getBoundingClientRect().height:f.offsetHeight}),Qd=c=>Jw.get(c),qf=c=>Jw.getOuter(c),XT=qT,lp=(c,f)=>({left:c,top:f,translate:(y,E)=>lp(c+y,f+E)}),Yu=lp,ay=c=>{const f=c.getBoundingClientRect();return Yu(f.left,f.top)},Nc=(c,f)=>c!==void 0?c:f!==void 0?f:0,Yf=c=>{const f=c.dom.ownerDocument,p=f.body,y=f.defaultView,E=f.documentElement;if(p===c.dom)return Yu(p.offsetLeft,p.offsetTop);const A=Nc(y==null?void 0:y.pageYOffset,E.scrollTop),N=Nc(y==null?void 0:y.pageXOffset,E.scrollLeft),G=Nc(E.clientTop,p.clientTop),ee=Nc(E.clientLeft,p.clientLeft);return JT(c).translate(N-ee,A-G)},JT=c=>{const f=c.dom,y=f.ownerDocument.body;return y===f?Yu(y.offsetLeft,y.offsetTop):Zs(c)?ay(f):Yu(0,0)},fv=(c,f)=>({row:c,y:f}),ly=(c,f)=>({col:c,x:f}),Qw=c=>Yf(c).left+qw(c),iy=c=>Yf(c).left,fa=(c,f)=>ly(c,iy(f)),mv=(c,f)=>ly(c,Qw(f)),lr=c=>Yf(c).top,ea=(c,f)=>fv(c,lr(f)),rn=(c,f)=>fv(c,lr(f)+qf(f)),Bt=(c,f,p)=>{if(p.length===0)return[];const y=it(p.slice(1),(A,N)=>A.map(G=>c(N,G))),E=p[p.length-1].map(A=>f(p.length-1,A));return y.concat([E])},Xf=c=>-c,_i={delta:he,positions:c=>Bt(ea,rn,c),edge:lr},Oi=sy({delta:he,edge:iy,positions:c=>Bt(fa,mv,c)},{delta:Xf,edge:Qw,positions:c=>Bt(mv,fa,c)}),Ai={delta:(c,f)=>Oi(f).delta(c,f),positions:(c,f)=>Oi(f).positions(c,f),edge:c=>Oi(c).edge(c)},gv={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Os=(()=>{const c="[0-9]+",p="[eE]"+("[+-]?"+c),y="\\.",E=G=>`(?:${G})?`,N=`[+-]?(?:${["Infinity",c+y+E(c)+E(p),y+c+E(p),c+E(p)].join("|")})`;return new RegExp(`^(${N})(.*)$`)})(),hg=(c,f)=>we(f,p=>we(gv[p],y=>c===y)),ip=(c,f)=>re.from(Os.exec(c)).bind(y=>{const E=Number(y[1]),A=y[2];return hg(A,f)?re.some({value:E,unit:A}):re.none()}),ut=/(\d+(\.\d+)?)%/,QT=/(\d+(\.\d+)?)px|em/,e_=Va("col"),si=(c,f,p)=>{const y=Ol(c).getOrThunk(()=>q(Wu(c)));return f(c)/p(y)*100},pg=(c,f)=>{rs(c,"width",f+"px")},ef=(c,f)=>{rs(c,"width",f+"%")},bs=(c,f)=>{rs(c,"height",f+"px")},eS=c=>XT(c)+"px",Do=(c,f,p,y)=>{const E=pl(c).map(A=>{const N=p(A);return Math.floor(f/100*N)}).getOr(f);return y(c,E),E},Eo=(c,f,p,y)=>{const E=parseFloat(c);return ml(c,"%")&&os(f)!=="table"?Do(f,E,p,y):E},ma=c=>{const f=eS(c);return f?Eo(f,c,Qd,bs):Qd(c)},vg=(c,f,p)=>{const y=p(c),E=hl(c,f);return y/E},er=(c,f)=>lg(c,f).orThunk(()=>dl(c,f).map(p=>p+"px")),Jf=c=>er(c,"width"),Wr=c=>er(c,"height"),Ka=c=>si(c,bl,Mn),Xu=c=>e_(c)?bl(c):Ti(c),We=c=>vg(c,"rowspan",ma),wl=c=>Jf(c).bind(p=>ip(p,["fixed","relative","empty"])),tS=(c,f,p)=>{rs(c,"width",f+p)},yr=c=>bl(c)+"px",sc=c=>si(c,bl,Mn)+"%",hv=c=>Jf(c).exists(f=>ut.test(f)),Ri=c=>Jf(c).exists(f=>QT.test(f)),t_=c=>Jf(c).isNone(),tf=P(ut),nS=Va("col"),ri=c=>Jf(c).getOrThunk(()=>Xu(c)+"px"),xo=c=>Wr(c).getOrThunk(()=>We(c)+"px"),fu=c=>it(Yn.justColumns(c),f=>re.from(f.element)),cp=c=>{const f=Kw().browser,p=f.isChromium()||f.isFirefox();return nS(c)?p:!0},ga=(c,f,p,y,E,A)=>c.filter(y).fold(()=>A(HD(p,f)),N=>E(N)),pv=(c,f,p,y)=>{const E=ny(c),A=Yn.hasColumns(c)?fu(c):E,N=[re.some(Ai.edge(f))].concat(it(Ai.positions(E,f),ee=>ee.map(ge=>ge.x))),G=K(Bc);return it(A,(ee,ge)=>ga(ee,ge,N,G,ke=>{if(cp(ke))return p(ke);{const st=WT(E[ge],he);return ga(st,ge,N,G,Dt=>y(re.some(bl(Dt))),y)}},y))},nf=c=>c.map(f=>f+"px").getOr(""),Ju=(c,f)=>pv(c,f,ri,nf),Gs=(c,f,p)=>pv(c,f,Ka,y=>y.fold(()=>p.minCellWidth(),E=>E/p.pixelWidth()*100)),dy=(c,f,p)=>pv(c,f,Xu,y=>y.getOrThunk(p.minCellWidth)),Ae=(c,f,p,y,E)=>{const A=YT(c),N=[re.some(p.edge(f))].concat(it(p.positions(A,f),G=>G.map(ee=>ee.y)));return it(A,(G,ee)=>ga(G,ee,N,K(np),y,E))},ha=(c,f,p)=>Ae(c,f,p,We,y=>y.getOrThunk(tv)),vv=(c,f,p)=>Ae(c,f,p,xo,nf),ai=(c,f)=>()=>Zs(c)?f(c):parseFloat(lg(c,"width").getOr("0")),Il=c=>{const f=ai(c,bl),p=P(0);return{width:f,pixelWidth:f,getWidths:(E,A)=>dy(E,c,A),getCellDelta:p,singleColumnWidth:P([0]),minCellWidth:p,setElementWidth:ie,adjustTableWidth:ie,isRelative:!0,label:"none"}},ta=c=>{const f=ai(c,ee=>parseFloat(sc(ee))),p=ai(c,bl);return{width:f,pixelWidth:p,getWidths:(ee,ge)=>Gs(ee,c,ge),getCellDelta:ee=>ee/p()*100,singleColumnWidth:(ee,ge)=>[100-ee],minCellWidth:()=>Ei()/p()*100,setElementWidth:ef,adjustTableWidth:ee=>{const ge=f(),ke=ee/100*ge,st=ge+ke;ef(c,st)},isRelative:!0,label:"percent"}},Ls=c=>{const f=ai(c,bl);return{width:f,pixelWidth:f,getWidths:(N,G)=>dy(N,c,G),getCellDelta:he,singleColumnWidth:(N,G)=>[Math.max(Ei(),N+G)-N],minCellWidth:Ei,setElementWidth:pg,adjustTableWidth:N=>{const G=f()+N;pg(c,G)},isRelative:!1,label:"pixel"}},bv=(c,f)=>tf().exec(f)!==null?ta(c):Ls(c),of={getTableSize:c=>Jf(c).fold(()=>Il(c),p=>bv(c,p)),pixelSize:Ls,percentageSize:ta,noneSize:Il},cn=(c,f,p,y,E,A)=>({minRow:c,minCol:f,maxRow:p,maxCol:y,allCells:E,selectedCells:A}),zD=(c,f)=>{const p=c.grid.columns;let E=c.grid.rows,A=p,N=0,G=0;const ee=[],ge=[];return Vo(c.access,ke=>{if(ee.push(ke),f(ke)){ge.push(ke);const st=ke.row,Dt=st+ke.rowspan-1,Tt=ke.column,Ke=Tt+ke.colspan-1;st<E?E=st:Dt>N&&(N=Dt),Tt<A?A=Tt:Ke>G&&(G=Ke)}}),cn(E,A,N,G,ee,ge)},Fl=(c,f,p)=>{const y=c[p].element,E=Te.fromTag("td");_s(E,Te.fromTag("br")),(f?_s:Rl)(y,E)},sf=(c,f,p,y)=>{const E=Pn(c,G=>G.section!=="colgroup"),A=f.grid.columns,N=f.grid.rows;for(let G=0;G<N;G++){let ee=!1;for(let ge=0;ge<A;ge++)G<p.minRow||G>p.maxRow||ge<p.minCol||ge>p.maxCol||(Yn.getAt(f,G,ge).filter(y).isNone()?Fl(E,ee,G):ee=!0)}},n_=(c,f,p,y)=>{Vo(p.columns,N=>{(N.column<f.minCol||N.column>f.maxCol)&&Br(N.element)});const E=Pn(ig(c,"tr"),N=>N.dom.childElementCount===0);Fe(E,Br),(f.minCol===f.maxCol||f.minRow===f.maxRow)&&Fe(ig(c,"th,td"),N=>{Fs(N,"rowspan"),Fs(N,"colspan")}),Fs(c,Bs),Fs(c,"data-snooker-col-series"),of.getTableSize(c).adjustTableWidth(y)},pa=(c,f,p,y)=>{if(y.minCol===0&&f.grid.columns===y.maxCol+1)return 0;const E=dy(f,c,p),A=Pe(E,(ge,ke)=>ge+ke,0),ee=Pe(E.slice(y.minCol,y.maxCol+1),(ge,ke)=>ge+ke,0)/A*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(ee)},yv=(c,f)=>{const p=Dt=>Ua(Dt.element,f),y=Wa(c),E=Z0(y),A=of.getTableSize(c),N=Yn.generate(E),G=zD(N,p),ee="th:not("+f+"),td:not("+f+")",ge=nv(y,"th,td",Dt=>Ua(Dt,ee));Fe(ge,Br),sf(E,N,G,p);const ke=Yn.fromTable(c),st=pa(c,ke,A,G);return n_(y,G,N,st),y},Qu="\xA0",Di=((c,f)=>{const p=A=>{if(!c(A))throw new Error("Can only get "+f+" value of a "+f+" node");return y(A).getOr("")},y=A=>c(A)?re.from(A.dom.nodeValue):re.none();return{get:p,getOption:y,set:(A,N)=>{if(!c(A))throw new Error("Can only set raw "+f+" value of a "+f+" node");A.dom.nodeValue=N}}})(Oc,"text"),rf=c=>Di.get(c),ed=c=>Di.getOption(c),Mi=(c,f)=>Di.set(c,f),mu=c=>os(c)==="img"?1:ed(c).fold(()=>Oo(c).length,f=>f.length),oS=c=>ed(c).filter(f=>f.trim().length!==0||f.indexOf(Qu)>-1).isSome(),Cg=c=>Cn(c)&&Yr(c,"contenteditable")==="false",Cv=["img","br"],sS=c=>oS(c)||Ut(Cv,os(c))||Cg(c),gu=c=>Q1(c,sS),up=c=>o_(c,sS),o_=(c,f)=>{const p=y=>{const E=Oo(y);for(let A=E.length-1;A>=0;A--){const N=E[A];if(f(N))return re.some(N);const G=p(N);if(G.isSome())return G}return re.none()};return p(c)},fy={scope:["row","col"]},wv=c=>()=>{const f=Te.fromTag("td",c.dom);return _s(f,Te.fromTag("br",c.dom)),f},Cr=c=>()=>Te.fromTag("col",c.dom),hu=c=>()=>Te.fromTag("colgroup",c.dom),wg=c=>()=>Te.fromTag("tr",c.dom),Qf=(c,f,p)=>{const y=Xh(c,f);return Vo(p,(E,A)=>{E===null?Fs(y,A):Qs(y,A,E)}),y},rS=c=>c,li=(c,f,p)=>gu(c).map(E=>{const A=p.join(","),N=Rt(E,A,G=>ss(G,c));return Jn(N,(G,ee)=>{const ge=xi(ee);return _s(G,ge),ge},f)}).getOr(f),Sv=(c,f)=>{Vo(fy,(p,y)=>dl(c,y).filter(E=>Ut(p,E)).each(E=>Qs(f,y,E)))},dp=(c,f,p)=>{const y=(N,G)=>{sr(N.element,G),Mc(G,"height"),N.colspan!==1&&Mc(G,"width")},E=N=>{const G=Te.fromTag(os(N.element),f.dom),ee=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ge=ee.length>0?li(N.element,G,ee):G;return _s(ge,Te.fromTag("br")),y(N,G),Sv(N.element,G),c(N.element,G),G};return{col:N=>{const G=Te.fromTag(os(N.element),f.dom);return y(N,G),c(N.element,G),G},colgroup:hu(f),row:wg(f),cell:E,replace:Qf,colGap:Cr(f),gap:wv(f)}},Ll=c=>({col:Cr(c),colgroup:hu(c),row:wg(c),cell:wv(c),replace:rS,colGap:Cr(c),gap:wv(c)}),td=(c,f)=>{const y=(f||document).createElement("div");return y.innerHTML=c,Oo(Te.fromDom(y))},Ic=c=>it(c,Te.fromDom),af=c=>f=>f.options.get(c),rc="100%",aS=c=>{var f;const p=c.dom,y=(f=p.getParent(c.selection.getStart(),p.isBlock))!==null&&f!==void 0?f:c.getBody();return Mn(Te.fromDom(y))+"px"},lf=(c,f)=>Lc(c)||!Eg(c)?f:Fc(c)?{...f,width:aS(c)}:{...f,width:rc},Sg=(c,f)=>Lc(c)||Eg(c)?f:Fc(c)?{...f,width:aS(c)}:{...f,width:rc},Bi=c=>{const f=c.options.register;f("table_clone_elements",{processor:"string[]"}),f("table_use_colgroups",{processor:"boolean",default:!0}),f("table_header_type",{processor:p=>{const y=Ut(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),f("table_sizing_mode",{processor:"string",default:"auto"}),f("table_default_attributes",{processor:"object",default:{border:"1"}}),f("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),f("table_column_resizing",{processor:p=>{const y=Ut(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),f("table_resize_bars",{processor:"boolean",default:!0}),f("table_style_by_css",{processor:"boolean",default:!0}),f("table_merge_content_on_paste",{processor:"boolean",default:!0})},lS=c=>re.from(c.options.get("table_clone_elements")),fp=c=>{const f=c.options.get("object_resizing");return Ut(f.split(","),"table")},my=af("table_header_type"),gy=af("table_column_resizing"),$s=c=>gy(c)==="preservetable",iS=c=>gy(c)==="resizetable",pu=af("table_sizing_mode"),xg=c=>pu(c)==="relative",Fc=c=>pu(c)==="fixed",Lc=c=>pu(c)==="responsive",ii=af("table_resize_bars"),Eg=af("table_style_by_css"),mp=af("table_merge_content_on_paste"),ir=c=>{const f=c.options,p=f.get("table_default_attributes");return f.isSet("table_default_attributes")?p:Sg(c,p)},em=c=>{const f=c.options,p=f.get("table_default_styles");return f.isSet("table_default_styles")?p:lf(c,p)},hy=af("table_use_colgroups"),tm=c=>cs(c,"[contenteditable]"),kg=(c,f=!1)=>Zs(c)?c.dom.isContentEditable:tm(c).fold(P(f),p=>py(p)==="true"),py=c=>c.dom.contentEditable,nm=c=>Te.fromDom(c.getBody()),nd=c=>f=>ss(f,nm(c)),Sl=c=>{Fs(c,"data-mce-style");const f=p=>Fs(p,"data-mce-style");Fe(Yd(c),f),Fe(op(c),f),Fe(W0(c),f)},od=c=>Te.fromDom(c.selection.getStart()),vu=c=>c.getBoundingClientRect().width,vy=c=>c.getBoundingClientRect().height,xv=(c,f)=>{const p=c.dom.getStyle(f,"width")||c.dom.getAttrib(f,"width");return re.from(p).filter(gs)},gp=c=>/^(\d+(\.\d+)?)%$/.test(c),Ev=c=>/^(\d+(\.\d+)?)px$/.test(c),Tg=c=>Yo(c,Va("table")).exists(kg),cf=(c,f)=>{const p=f.column,y=f.column+f.colspan-1,E=f.row,A=f.row+f.rowspan-1;return p<=c.finishCol&&y>=c.startCol&&E<=c.finishRow&&A>=c.startRow},cS=(c,f)=>f.column>=c.startCol&&f.column+f.colspan-1<=c.finishCol&&f.row>=c.startRow&&f.row+f.rowspan-1<=c.finishRow,hp=(c,f)=>{let p=!0;const y=Me(cS,f);for(let E=f.startRow;E<=f.finishRow;E++)for(let A=f.startCol;A<=f.finishCol;A++)p=p&&Yn.getAt(c,E,A).exists(y);return p?re.some(f):re.none()},Co=(c,f)=>ep(Math.min(c.row,f.row),Math.min(c.column,f.column),Math.max(c.row+c.rowspan-1,f.row+f.rowspan-1),Math.max(c.column+c.colspan-1,f.column+f.colspan-1)),tn=(c,f,p)=>{const y=Yn.findItem(c,f,ss),E=Yn.findItem(c,p,ss);return y.bind(A=>E.map(N=>Co(A,N)))},om=(c,f,p)=>tn(c,f,p).bind(y=>hp(c,y)),kv=(c,f,p,y)=>Yn.findItem(c,f,ss).bind(E=>{const A=p>0?E.row+E.rowspan-1:E.row,N=y>0?E.column+E.colspan-1:E.column;return Yn.getAt(c,A+p,N+y).map(ee=>ee.element)}),Tv=(c,f,p)=>tn(c,f,p).map(y=>{const E=Yn.filterItems(c,Me(cf,y));return it(E,A=>A.element)}),by=(c,f)=>{const p=(y,E)=>q1(E,y);return Yn.findItem(c,f,p).map(y=>y.element)},s_=(c,f,p)=>pl(c).bind(y=>{const E=pp(y);return kv(E,c,f,p)}),Wo=(c,f,p)=>{const y=pp(c);return Tv(y,f,p)},_v=(c,f,p,y,E)=>{const A=pp(c),N=ss(c,p)?re.some(f):by(A,f),G=ss(c,E)?re.some(y):by(A,y);return N.bind(ee=>G.bind(ge=>Tv(A,ee,ge)))},uS=(c,f,p)=>{const y=pp(c);return om(y,f,p)},pp=Yn.fromTable;var Xe=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],_g=()=>{const c=ge=>Te.fromDom(ge.dom.cloneNode(!1)),f=ge=>Zd(ge).dom,p=ge=>Ta(ge)?os(ge)==="body"?!0:Ut(Xe,os(ge)):!1,y=ge=>Ta(ge)?Ut(["br","img","hr","input"],os(ge)):!1,E=ge=>Ta(ge)&&Yr(ge,"contenteditable")==="false",A=(ge,ke)=>ge.dom.compareDocumentPosition(ke.dom),N=(ge,ke)=>{const st=_a(ge);Ji(ke,st)},G=ge=>{const ke=os(ge);return Ut(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ke)},ee=ge=>Ta(ge)?dl(ge,"lang"):re.none();return{up:P({selector:so,closest:cs,predicate:ua,all:lu}),down:P({selector:Ms,predicate:Lt}),styles:P({get:Uf,getRaw:lg,set:rs,remove:Mc}),attrs:P({get:Yr,set:Qs,remove:Fs,copyTo:N}),insert:P({before:Kd,after:iu,afterAll:Lo,append:_s,appendAll:Dl,prepend:Rl,wrap:qh}),remove:P({unwrap:Vf,remove:Br}),create:P({nu:Te.fromTag,clone:c,text:Te.fromText}),query:P({comparePosition:A,prevSibling:zf,nextSibling:jd}),property:P({children:Oo,name:os,parent:Ac,document:f,isText:Oc,isComment:Ko,isElement:Ta,isSpecial:G,getLanguage:ee,getText:rf,setText:Mi,isBoundary:p,isEmptyTag:y,isNonEditable:E}),eq:ss,is:Iw}};const r_=(c,f,p,y)=>{const E=p[0],A=p.slice(1);return y(c,f,E,A)},Ov=(c,f,p)=>p.length>0?r_(c,f,p,yy):re.none(),yy=(c,f,p,y)=>{const E=f(c,p);return Jn(y,(A,N)=>{const G=f(c,N);return Og(c,A,G)},E)},Og=(c,f,p)=>f.bind(y=>p.filter(Me(c.eq,y))),Ag=(c,f)=>Me(c.eq,f),bu=(c,f,p,y=ft)=>{const E=[f].concat(c.up().all(f)),A=[p].concat(c.up().all(p)),N=ke=>Rr(ke,y).fold(()=>ke,Dt=>ke.slice(0,Dt+1)),G=N(E),ee=N(A),ge=z(G,ke=>we(ee,Ag(c,ke)));return{firstpath:G,secondpath:ee,shared:ge}},a_=Ov,Rg=bu,as=_g(),Aa=(c,f)=>a_(as,(p,y)=>c(y),f),l_=(c,f,p)=>Rg(as,c,f,p),Hc=c=>so(c,"table"),vp=(c,f,p)=>{const y=E=>A=>p!==void 0&&p(A)||ss(A,E);return ss(c,f)?re.some({boxes:re.some([c]),start:c,finish:f}):Hc(c).bind(E=>Hc(f).bind(A=>{if(ss(E,A))return re.some({boxes:Wo(E,c,f),start:c,finish:f});if(q1(E,A)){const N=Rt(f,"td,th",y(E)),G=N.length>0?N[N.length-1]:f;return re.some({boxes:_v(E,c,E,f,A),start:c,finish:G})}else if(q1(A,E)){const N=Rt(c,"td,th",y(A)),G=N.length>0?N[N.length-1]:c;return re.some({boxes:_v(A,c,E,f,A),start:c,finish:G})}else return l_(c,f).shared.bind(N=>cs(N,"table",p).bind(G=>{const ee=Rt(f,"td,th",y(G)),ge=ee.length>0?ee[ee.length-1]:f,ke=Rt(c,"td,th",y(G)),st=ke.length>0?ke[ke.length-1]:c;return re.some({boxes:_v(G,c,E,f,A),start:st,finish:ge})}))}))},sm=(c,f)=>{const p=Ms(c,f);return p.length>0?re.some(p):re.none()},rm=(c,f)=>z(c,p=>Ua(p,f)),dS=(c,f,p)=>qd(c,f).bind(y=>qd(c,p).bind(E=>Aa(Hc,[y,E]).map(A=>({first:y,last:E,table:A})))),fS=(c,f)=>so(c,"table").bind(p=>qd(p,f).bind(y=>vp(y,c).bind(E=>E.boxes.map(A=>({boxes:A,start:E.start,finish:E.finish}))))),Cy=(c,f,p,y,E)=>rm(c,E).bind(A=>s_(A,f,p).bind(N=>fS(N,y))),i_=(c,f)=>sm(c,f),am=(c,f,p)=>dS(c,f,p).bind(y=>{const E=ee=>ss(c,ee),A="thead,tfoot,tbody,table",N=so(y.first,A,E),G=so(y.last,A,E);return N.bind(ee=>G.bind(ge=>ss(ee,ge)?uS(y.table,y.first,y.last):re.none()))}),sd=he,Av=c=>{const f=(y,E)=>dl(y,E).exists(A=>parseInt(A,10)>1),p=y=>f(y,"rowspan")||f(y,"colspan");return c.length>0&&po(c,p)?re.some(c):re.none()},Rv=(c,f,p)=>f.length<=1?re.none():am(c,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:f})),bp="data-mce-selected",$t="td["+bp+"],th["+bp+"]",Ra="["+bp+"]",yp="data-mce-first-selected",mS="td["+yp+"],th["+yp+"]",Dv="data-mce-last-selected",va="td["+Dv+"],th["+Dv+"]",Mv=Ra,ac={selected:bp,selectedSelector:$t,firstSelected:yp,firstSelectedSelector:mS,lastSelected:Dv,lastSelectedSelector:va},rd=(c,f,p)=>({element:p,mergable:Rv(f,c,ac),unmergable:Av(c),selection:sd(c)}),wy=(c,f,p)=>({element:c,clipboard:f,generators:p}),zc=(c,f,p,y)=>({selection:sd(c),clipboard:p,generators:y}),Sy=c=>pl(c).bind(f=>i_(f,ac.firstSelectedSelector)).fold(P(c),f=>f[0]),gS=c=>(f,p)=>{const y=os(f),E=y==="col"||y==="colgroup"?Sy(f):f;return cs(E,c,p)},xy=gS("th,td,caption"),Cp=gS("th,td"),yu=c=>Ic(c.model.table.getSelectedCells()),wp=c=>Pn(yu(c),f=>Ua(f,ac.selectedSelector)),Bv=c=>pl(c[0]).map(f=>{const p=yv(f,Mv);return Sl(p),[p]}),c_=(c,f)=>it(f,p=>c.selection.serializer.serialize(p.dom,{})).join(""),hS=c=>it(c,f=>f.dom.innerText).join(""),Dg=(c,f)=>{c.on("BeforeGetContent",p=>{const y=E=>{p.preventDefault(),Bv(E).each(A=>{p.content=p.format==="text"?hS(A):c_(c,A)})};if(p.selection===!0){const E=wp(c);E.length>=1&&y(E)}}),c.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=yu(c);Ge(y).each(E=>{pl(E).each(A=>{const N=Pn(td(p.content),ee=>os(ee)!=="meta"),G=Va("table");if(mp(c)&&N.length===1&&G(N[0])){p.preventDefault();const ee=Te.fromDom(c.getDoc()),ge=Ll(ee),ke=wy(E,N[0],ge);f.pasteCells(A,ke).each(()=>{c.focus()})}})})}})},Da=(c,f)=>({element:c,offset:f}),Hl=(c,f,p)=>c.property().isText(f)&&c.property().getText(f).trim().length===0||c.property().isComment(f)?p(f).bind(y=>Hl(c,y,p).orThunk(()=>re.some(y))):re.none(),Mg=(c,f)=>c.property().isText(f)?c.property().getText(f).length:c.property().children(f).length,pS=(c,f)=>{const p=Hl(c,f,c.query().prevSibling).getOr(f);if(c.property().isText(p))return Da(p,Mg(c,p));const y=c.property().children(p);return y.length>0?pS(c,y[y.length-1]):Da(p,Mg(c,p))},lm=pS,$v=_g(),lc=c=>lm($v,c),Ey=(c,f)=>{Bc(c)||wl(c).each(y=>{const E=y.value/2;tS(c,E,y.unit),tS(f,E,y.unit)})},Pv=c=>it(c,P(0)),Bg=(c,f,p,y,E)=>E(c.slice(0,f)).concat(y).concat(E(c.slice(p))),ky=c=>(f,p,y,E)=>{if(c(y)){const A=Math.max(E,f[p]-Math.abs(y)),N=Math.abs(A-f[p]);return y>=0?N:-N}else return y},ad=ky(c=>c<0),vS=ky(Oe),Nv=()=>{const c=(G,ee,ge,ke,st)=>{const Dt=ad(G,ee,ke,st);return Bg(G,ee,ge+1,[Dt,0],Pv)},f=(G,ee,ge,ke)=>{const st=(100+ge)/100,Dt=Math.max(ke,(G[ee]+ge)/st);return it(G,(Tt,Ke)=>(Ke===ee?Dt:Tt/st)-Tt)},p=(G,ee,ge,ke,st,Dt)=>Dt?f(G,ee,ke,st):c(G,ee,ge,ke,st);return{resizeTable:(G,ee)=>G(ee),clampTableDelta:ad,calcLeftEdgeDeltas:p,calcMiddleDeltas:(G,ee,ge,ke,st,Dt,Tt)=>p(G,ge,ke,st,Dt,Tt),calcRightEdgeDeltas:(G,ee,ge,ke,st,Dt)=>{if(Dt)return f(G,ge,ke,st);{const Tt=ad(G,ge,ke,st);return Pv(G.slice(0,ge)).concat([Tt])}},calcRedestributedWidths:(G,ee,ge,ke)=>{if(ke){const Dt=(ee+ge)/ee,Tt=it(G,Ke=>Ke/Dt);return{delta:Dt*100-100,newSizes:Tt}}else return{delta:ge,newSizes:G}}}},Iv=()=>{const c=(N,G,ee,ge,ke)=>{const st=ge>=0?ee:G,Dt=vS(N,st,ge,ke);return Bg(N,G,ee+1,[Dt,-Dt],Pv)};return{resizeTable:(N,G,ee)=>{ee&&N(G)},clampTableDelta:(N,G,ee,ge,ke)=>{if(ke){if(ee>=0)return ee;{const st=Pe(N,(Dt,Tt)=>Dt+Tt-ge,0);return Math.max(-st,ee)}}else return ad(N,G,ee,ge)},calcLeftEdgeDeltas:c,calcMiddleDeltas:(N,G,ee,ge,ke,st)=>c(N,ee,ge,ke,st),calcRightEdgeDeltas:(N,G,ee,ge,ke,st)=>{if(st)return Pv(N);{const Dt=ge/N.length;return it(N,P(Dt))}},calcRedestributedWidths:(N,G,ee,ge)=>({delta:0,newSizes:N})}},Ty=c=>Yn.fromTable(c).grid,Po=Va("th"),Fv=c=>po(c,f=>Po(f.element)),u_=(c,f)=>c&&f?"sectionCells":c?"section":"cells",bS=c=>{const f=c.section==="thead",p=js($g(c.cells),"th");return c.section==="tfoot"?{type:"footer"}:f||p?{type:"header",subType:u_(f,p)}:{type:"body"}},$g=c=>{const f=Pn(c,p=>Po(p.element));return f.length===0?re.some("td"):f.length===c.length?re.some("th"):re.none()},yS=c=>{const f=it(c,E=>bS(E).type),p=Ut(f,"header"),y=Ut(f,"footer");if(!p&&!y)return re.some("body");{const E=Ut(f,"body");return p&&!E&&!y?re.some("header"):!p&&!E&&y?re.some("footer"):re.none()}},zl=c=>ps(c.all,f=>{const p=bS(f);return p.type==="header"?re.from(p.subType):re.none()}),wr=(c,f,p)=>zr(p(c.element,f),!0,c.isLocked),_y=(c,f)=>c.section!==f?ju(c.element,c.cells,f,c.isNew):c,CS=()=>({transformRow:_y,transformCell:(c,f,p)=>{const y=p(c.element,f),E=os(y)!=="td"?Y1(y,"td"):y;return zr(E,c.isNew,c.isLocked)}}),Pg=()=>({transformRow:_y,transformCell:wr}),Lv=()=>({transformRow:(c,f)=>_y(c,f==="thead"?"tbody":f),transformCell:wr}),Hv={getTableSectionType:(c,f)=>{const p=Yn.fromTable(c);switch(zl(p).getOr(f)){case"section":return CS();case"sectionCells":return Pg();case"cells":return Lv()}},section:CS,sectionCells:Pg,cells:Lv,fallback:()=>({transformRow:he,transformCell:wr})},uf=(c,f,p,y)=>{p===y?Fs(c,f):Qs(c,f,p)},wS=(c,f,p)=>{cl(qo(c,f)).fold(()=>Rl(c,p),y=>iu(y,p))},VD=(c,f)=>{const p=Gu(c,f).getOrThunk(()=>{const y=Te.fromTag(f,Wu(c).dom);return f==="thead"?wS(c,"caption,colgroup",y):f==="colgroup"?wS(c,"caption",y):_s(c,y),y});return fl(p),p},UD=(c,f)=>{const p=[],y=[],E=Tt=>it(Tt,Ke=>{Ke.isNew&&p.push(Ke.element);const Ot=Ke.element;return fl(Ot),Fe(Ke.cells,je=>{je.isNew&&y.push(je.element),uf(je.element,"colspan",je.colspan,1),uf(je.element,"rowspan",je.rowspan,1),_s(Ot,je.element)}),Ot}),A=Tt=>ms(Tt,Ke=>it(Ke.cells,Ot=>(uf(Ot.element,"span",Ot.colspan,1),Ot.element))),N=(Tt,Ke)=>{const Ot=VD(c,Ke),Vt=(Ke==="colgroup"?A:E)(Tt);Dl(Ot,Vt)},G=Tt=>{Gu(c,Tt).each(Br)},ee=(Tt,Ke)=>{Tt.length>0?N(Tt,Ke):G(Ke)},ge=[],ke=[],st=[],Dt=[];return Fe(f,Tt=>{switch(Tt.section){case"thead":ge.push(Tt);break;case"tbody":ke.push(Tt);break;case"tfoot":st.push(Tt);break;case"colgroup":Dt.push(Tt);break}}),ee(Dt,"colgroup"),ee(ge,"thead"),ee(ke,"tbody"),ee(st,"tfoot"),{newRows:p,newCells:y}},tr=c=>it(c,f=>{const p=xi(f.element);return Fe(f.cells,y=>{const E=Wa(y.element);uf(E,"colspan",y.colspan,1),uf(E,"rowspan",y.rowspan,1),_s(p,E)}),p}),Vc=(c,f)=>it(c,p=>Ur(p,f)),bo=(c,f)=>c[f],qa=(c,f)=>{if(c.length===0)return 0;const p=c[0];return Rr(c,E=>!f(p.element,E.element)).getOr(c.length)},Cu=(c,f,p,y)=>{const E=bo(c,f),A=E.section==="colgroup",N=qa(E.cells.slice(p),y),G=A?1:qa(Vc(c.slice(f),p),y);return{colspan:N,rowspan:G}},Zr=(c,f)=>{const p=it(c,E=>it(E.cells,ft)),y=(E,A,N,G)=>{for(let ee=E;ee<E+N;ee++)for(let ge=A;ge<A+G;ge++)p[ee][ge]=!0};return it(c,(E,A)=>{const N=ms(E.cells,(G,ee)=>{if(p[A][ee]===!1){const ge=Cu(c,A,ee,f);return y(A,ee,ge.rowspan,ge.colspan),[og(G.element,ge.rowspan,ge.colspan,G.isNew)]}else return[]});return Xr(E.element,N,E.section,E.isNew)})},ld=(c,f,p)=>{const y=[];Fe(c.colgroups,E=>{const A=[];for(let N=0;N<c.grid.columns;N++){const G=Yn.getColumnAt(c,N).map(ee=>zr(ee.element,p,!1)).getOrThunk(()=>zr(f.colGap(),!0,!1));A.push(G)}y.push(ju(E.element,A,"colgroup",p))});for(let E=0;E<c.grid.rows;E++){const A=[];for(let ee=0;ee<c.grid.columns;ee++){const ge=Yn.getAt(c,E,ee).map(ke=>zr(ke.element,p,ke.isLocked)).getOrThunk(()=>zr(f.gap(),!0,!1));A.push(ge)}const N=c.all[E],G=ju(N.element,A,N.section,p);y.push(G)}return y},Ay=(c,f)=>ld(c,f,!1),df=c=>Zr(c,ss),Ya=(c,f)=>ps(c.all,p=>z(p.cells,y=>ss(f,y.element))),ci=(c,f,p)=>{const y=it(f.selection,A=>Wf(A).bind(N=>Ya(c,N)).filter(p)),E=Dc(y);return ev(E.length>0,E)},cr=(c,f,p,y,E)=>(A,N,G,ee)=>{const ge=Yn.fromTable(A),ke=re.from(ee==null?void 0:ee.section).getOrThunk(Hv.fallback);return f(ge,N).map(Dt=>{const Tt=Ay(ge,G),Ke=c(Tt,Dt,ss,E(G),ke),Ot=oi(Ke.grid),je=df(Ke.grid);return{info:Dt,grid:je,cursor:Ke.cursor,lockedColumns:Ot}}).bind(Dt=>{const Tt=UD(A,Dt.grid),Ke=re.from(ee==null?void 0:ee.sizing).getOrThunk(()=>of.getTableSize(A)),Ot=re.from(ee==null?void 0:ee.resize).getOrThunk(Iv);return p(A,Dt.grid,Dt.info,{sizing:Ke,resize:Ot,section:ke}),y(A),Fs(A,Bs),Dt.lockedColumns.length>0&&Qs(A,Bs,Dt.lockedColumns.join(",")),re.some({cursor:Dt.cursor,newRows:Tt.newRows,newCells:Tt.newCells})})},Ng=(c,f)=>Wf(f.element).bind(p=>Ya(c,p).map(y=>({...y,generators:f.generators,clipboard:f.clipboard}))),ff=(c,f)=>ci(c,f,Oe).map(p=>({cells:p,generators:f.generators,clipboard:f.clipboard})),Ry=(c,f)=>f.mergable,SS=(c,f)=>f.unmergable,id=(c,f)=>ci(c,f,Oe),Uc=(c,f)=>ci(c,f,p=>!p.isLocked),xS=(c,f)=>Ya(c,f).exists(p=>!p.isLocked),Dy=(c,f)=>po(f,p=>xS(c,p)),d_=(c,f)=>Ry(c,f).filter(p=>Dy(c,p.cells)),f_=(c,f)=>SS(c,f).filter(p=>Dy(c,p)),m_=(c,f,p,y)=>{const E=da(c).rows;if(E.length===0)return c;for(let A=f.startRow;A<=f.finishRow;A++)for(let N=f.startCol;N<=f.finishCol;N++){const G=E[A],ee=Ur(G,N).isLocked;ap(G,N,zr(y(),!1,ee))}return c},My=(c,f,p,y)=>{const E=da(c).rows;let A=!0;for(let N=0;N<E.length;N++)for(let G=0;G<Cl(E[0]);G++){const ee=E[N],ge=Ur(ee,G),ke=ge.element,st=p(ke,f);st&&!A?ap(ee,G,zr(y(),!0,ge.isLocked)):st&&(A=!1)}return c},Sp=(c,f)=>Pe(c,(p,y)=>we(p,E=>f(E.element,y.element))?p:p.concat([y]),[]),g_=(c,f,p,y)=>(f>0&&f<c[0].cells.length&&Fe(c,E=>{const A=E.cells[f-1];let N=0;const G=y();for(;E.cells.length>f+N&&p(A.element,E.cells[f+N].element);)ap(E,f+N,zr(G,!0,E.cells[f+N].isLocked)),N++}),c),h_=(c,f,p,y)=>{const E=da(c).rows;if(f>0&&f<E.length){const A=E[f-1].cells,N=Sp(A,p);Fe(N,G=>{let ee=re.none();for(let ge=f;ge<E.length;ge++)for(let ke=0;ke<Cl(E[0]);ke++){const st=E[ge],Dt=Ur(st,ke);p(Dt.element,G.element)&&(ee.isNone()&&(ee=re.some(y())),ee.each(Ke=>{ap(st,ke,zr(Ke,!0,Dt.isLocked))}))}})}return c},By=c=>{const f=A=>A(c),p=P(c),y=()=>E,E={tag:!0,inner:c,fold:(A,N)=>N(c),isValue:Oe,isError:ft,map:A=>zv.value(A(c)),mapError:y,bind:f,exists:f,forall:f,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:A=>{A(c)},toOptional:()=>re.some(c)};return E},mf=c=>{const f=()=>p,p={tag:!1,inner:c,fold:(y,E)=>y(c),isValue:ft,isError:Oe,map:f,mapError:y=>zv.error(y(c)),bind:f,exists:ft,forall:Oe,getOr:he,or:he,getOrThunk:pt,orThunk:pt,getOrDie:Ie(String(c)),each:ie,toOptional:re.none};return p},zv={value:By,error:mf,fromOption:(c,f)=>c.fold(()=>mf(f),By)},Hs=(c,f,p)=>{if(c.row>=f.length||c.column>Cl(f[0]))return zv.error("invalid start address out of table bounds, row: "+c.row+", column: "+c.column);const y=f.slice(c.row),E=y[0].cells.slice(c.column),A=Cl(p[0]),N=p.length;return zv.value({rowDelta:y.length-N,colDelta:E.length-A})},Vv=(c,f)=>{const p=Cl(c[0]),y=Cl(f[0]);return{rowDelta:0,colDelta:p-y}},gf=(c,f)=>{const p=c.length,y=f.length;return{rowDelta:p-y,colDelta:0}},hf=(c,f,p,y)=>{const E=f.section==="colgroup"?p.col:p.cell;return Qe(c,A=>zr(E(),!0,y(A)))},cd=(c,f,p,y)=>{const E=c[c.length-1];return c.concat(Qe(f,()=>{const A=E.section==="colgroup"?p.colgroup:p.row,N=Yw(E,A,he),G=hf(N.cells.length,N,p,ee=>Dn(y,ee.toString()));return J0(N,G)}))},na=(c,f,p,y)=>it(c,E=>{const A=hf(f,E,p,ft);return qu(E,y,A)}),$i=(c,f,p)=>it(c,y=>Pe(p,(E,A)=>{const N=hf(1,y,f,Oe)[0];return X0(E,A,N)},y)),im=(c,f,p)=>{const y=f.colDelta<0?na:he,E=f.rowDelta<0?cd:he,A=oi(c),N=Cl(c[0]),G=we(A,ke=>ke===N-1),ee=y(c,Math.abs(f.colDelta),p,G?N-1:N),ge=oi(ee);return E(ee,Math.abs(f.rowDelta),p,dn(ge,Oe))},Ig=(c,f,p,y)=>{const E=Ur(c[f],p),A=Me(y,E.element),N=c[f];return c.length>1&&Cl(N)>1&&(p>0&&A(yl(N,p-1))||p<N.cells.length-1&&A(yl(N,p+1))||f>0&&A(yl(c[f-1],p))||f<c.length-1&&A(yl(c[f+1],p)))},Fg=(c,f,p,y,E,A)=>{const N=c.row,G=c.column,ee=p.length,ge=Cl(p[0]),ke=N+ee,st=G+ge+A.length,Dt=dn(A,Oe);for(let Tt=N;Tt<ke;Tt++){let Ke=0;for(let Ot=G;Ot<st;Ot++){if(Dt[Ot]){Ke++;continue}Ig(f,Tt,Ot,E)&&My(f,yl(f[Tt],Ot),E,y.cell);const je=Ot-G-Ke,Vt=Ur(p[Tt-N],je),vn=Vt.element,Nn=y.replace(vn);ap(f[Tt],Ot,zr(Nn,!0,Vt.isLocked))}}return f},v_=(c,f,p)=>{const y=Cl(f[0]),E=da(f).cols.length+c.row,A=Qe(y-c.column,G=>G+c.column),N=z(A,G=>po(p,ee=>ee!==G)).getOr(y-1);return{row:E,column:N}},ES=(c,f,p)=>Pn(p,y=>y>=c.column&&y<=Cl(f[0])+c.column),$y=(c,f,p,y,E)=>{const A=oi(f),N=v_(c,f,A),G=da(p).rows,ee=ES(N,G,A);return Hs(N,f,G).map(ke=>{const st={...ke,colDelta:ke.colDelta-ee.length},Dt=im(f,st,y),Tt=oi(Dt),Ke=ES(N,G,Tt);return Fg(N,Dt,G,y,E,Ke)})},ud=(c,f,p,y,E)=>{g_(f,c,E,y.cell);const A=gf(p,f),N=im(p,A,y),G=gf(f,N),ee=im(f,G,y);return it(ee,(ge,ke)=>qu(ge,c,N[ke].cells))},Uv=(c,f,p,y,E)=>{h_(f,c,E,y.cell);const A=oi(f),N=Vv(f,p),G={...N,colDelta:N.colDelta-A.length},ee=im(f,G,y),{cols:ge,rows:ke}=da(ee),st=oi(ee),Dt=Vv(p,f),Tt={...Dt,colDelta:Dt.colDelta+st.length},Ke=$i(p,y,st),Ot=im(Ke,Tt,y);return[...ge,...ke.slice(0,c),...Ot,...ke.slice(c,ke.length)]},As=(c,f,p,y)=>Yw(c,E=>y(E,p),f),ba=(c,f,p,y,E)=>{const{rows:A,cols:N}=da(c),G=A.slice(0,f),ee=A.slice(f),ge=As(A[p],(ke,st)=>f>0&&f<A.length&&y(yl(A[f-1],st),yl(A[f],st))?Ur(A[f],st):zr(E(ke.element,y),!0,ke.isLocked),y,E);return[...N,...G,ge,...ee]},xp=(c,f,p,y,E,A,N)=>{if(p==="colgroup"||!y){const G=Ur(c,E);return zr(N(G.element,A),!0,!1)}else return Ur(c,f)},kS=(c,f,p,y,E)=>it(c,A=>{const N=f>0&&f<Cl(A)&&y(yl(A,f-1),yl(A,f)),G=xp(A,f,A.section,N,p,y,E);return X0(A,f,G)}),Py=(c,f)=>ms(c,p=>{const y=p.cells,E=Jn(f,(A,N)=>N>=0&&N<A.length?A.slice(0,N).concat(A.slice(N+1)):A,y);return E.length>0?[ju(p.element,E,p.section,p.isNew)]:[]}),b_=(c,f,p)=>{const{rows:y,cols:E}=da(c);return[...E,...y.slice(0,f),...y.slice(p+1)]},cm=(c,f,p,y)=>yl(c[f],p)!==void 0&&f>0&&y(yl(c[f-1],p),yl(c[f],p)),Ny=(c,f,p)=>f>0&&p(yl(c,f-1),yl(c,f)),um=(c,f,p,y)=>cm(c,f,p,y)||Ny(c[f],p,y),Wv=(c,f)=>po(f,he)&&Fv(c.cells)?Oe:(y,E,A)=>!(os(y.element)==="th"&&f[A]),y_=(c,f)=>po(f,he)&&Fv(c)?Oe:(y,E,A)=>!(os(y.element)==="th"&&f[E]),Lg=(c,f,p,y)=>{const E=N=>N==="row"?np(f):Bc(f),A=N=>E(N)?`${N}group`:N;return c?Po(f)?A(p):null:y&&Po(f)?A(p==="row"?"col":"row"):null},C_=(c,f)=>(p,y,E)=>re.some(Lg(c,p.element,"col",f[E])),Ep=(c,f)=>(p,y)=>re.some(Lg(c,p.element,"row",f[y])),Zv=(c,f,p)=>zr(p(c.element,f),!0,c.isLocked),Hg=(c,f,p,y,E,A,N)=>{const G=ee=>we(f,ge=>p(ee.element,ge.element));return it(c,(ee,ge)=>uv(ee,(ke,st)=>{if(G(ke)){const Dt=N(ke,ge,st)?E(ke,p,y):ke;return A(Dt,ge,st).each(Tt=>{Ud(Dt.element,{scope:re.from(Tt)})}),Dt}else return ke}))},kp=(c,f,p)=>ms(c,(y,E)=>um(c,E,f,p)?[]:[Ur(y,f)]),jv=(c,f,p)=>{const y=c[f];return ms(y.cells,(E,A)=>um(c,f,A,p)?[]:[E])},zg=(c,f,p,y,E)=>{const A=da(c).rows,N=ms(f,ke=>kp(A,ke,y)),G=it(A,ke=>Fv(ke.cells)),ee=y_(N,G),ge=Ep(p,G);return Hg(c,N,y,E,Zv,ge,ee)},TS=(c,f,p,y,E,A,N)=>{const{cols:G,rows:ee}=da(c),ge=ee[f[0]],ke=ms(f,je=>jv(ee,je,E)),st=it(ge.cells,(je,Vt)=>Fv(kp(ee,Vt,E))),Dt=[...ee];Fe(f,je=>{Dt[je]=N.transformRow(ee[je],p)});const Tt=[...G,...Dt],Ke=Wv(ge,st),Ot=C_(y,st);return Hg(Tt,ke,E,A,N.transformCell,Ot,Ke)},Gv=(c,f,p,y)=>{const E=da(c).rows,A=it(f,N=>Ur(E[N.row],N.column));return Hg(c,A,p,y,Zv,re.none,Oe)},wu={generate:c=>{if(!j(c))throw new Error("cases must be an array");if(c.length===0)throw new Error("there must be at least one case");const f=[],p={};return Fe(c,(y,E)=>{const A=Qt(y);if(A.length!==1)throw new Error("one and only one name per case");const N=A[0],G=y[N];if(p[N]!==void 0)throw new Error("duplicate key detected:"+N);if(N==="cata")throw new Error("cannot have a case named cata (sorry)");if(!j(G))throw new Error("case arguments must be an array");f.push(N),p[N]=(...ee)=>{const ge=ee.length;if(ge!==G.length)throw new Error("Wrong number of arguments to case "+N+". Expected "+G.length+" ("+G+"), got "+ge);return{fold:(...st)=>{if(st.length!==c.length)throw new Error("Wrong number of arguments to fold. Expected "+c.length+", got "+st.length);return st[E].apply(null,ee)},match:st=>{const Dt=Qt(st);if(f.length!==Dt.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+Dt.join(","));if(!po(f,Ke=>Ut(Dt,Ke)))throw new Error("Not all branches were specified when using match. Specified: "+Dt.join(", ")+`
Required: `+f.join(", "));return st[N].apply(null,ee)},log:st=>{console.log(st,{constructors:f,constructor:N,params:ee})}}}}),p}},xl={...wu.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Vn=(c,f)=>c.length===0?xl.none():c.length===1?xl.only(0):f===0?xl.left(0,1):f===c.length-1?xl.right(f-1,f):f>0&&f<c.length-1?xl.middle(f-1,f,f+1):xl.none(),Vl=(c,f,p,y,E)=>{const A=c.slice(0),N=Vn(c,f),G=P(it(A,P(0))),ee=Dt=>y.singleColumnWidth(A[Dt],p),ge=(Dt,Tt)=>E.calcLeftEdgeDeltas(A,Dt,Tt,p,y.minCellWidth(),y.isRelative),ke=(Dt,Tt,Ke)=>E.calcMiddleDeltas(A,Dt,Tt,Ke,p,y.minCellWidth(),y.isRelative),st=(Dt,Tt)=>E.calcRightEdgeDeltas(A,Dt,Tt,p,y.minCellWidth(),y.isRelative);return N.fold(G,ee,ge,ke,st)},He=(c,f,p)=>{let y=0;for(let E=c;E<f;E++)y+=p[E]!==void 0?p[E]:0;return y},Vg=(c,f)=>{const p=Yn.justCells(c);return it(p,y=>{const E=He(y.column,y.column+y.colspan,f);return{element:y.element,width:E,colspan:y.colspan}})},ls=(c,f)=>{const p=Yn.justColumns(c);return it(p,(y,E)=>({element:y.element,width:f[E],colspan:y.colspan}))},_S=(c,f)=>{const p=Yn.justCells(c);return it(p,y=>{const E=He(y.row,y.row+y.rowspan,f);return{element:y.element,height:E,rowspan:y.rowspan}})},Kv=(c,f)=>it(c.all,(p,y)=>({element:p.element,height:f[y]})),ys=c=>Jn(c,(f,p)=>f+p,0),dd=(c,f)=>Yn.hasColumns(c)?ls(c,f):Vg(c,f),qv=(c,f,p)=>{const y=dd(c,f);Fe(y,E=>{p.setElementWidth(E.element,E.width)})},Iy=(c,f,p,y,E)=>{const A=Yn.fromTable(c),N=E.getCellDelta(f),G=E.getWidths(A,E),ee=p===A.grid.columns-1,ge=y.clampTableDelta(G,p,N,E.minCellWidth(),ee),ke=Vl(G,p,ge,E,y),st=it(ke,(Dt,Tt)=>Dt+G[Tt]);qv(A,st,E),y.resizeTable(E.adjustTableWidth,ge,ee)},Fy=(c,f,p,y)=>{const E=Yn.fromTable(c),A=ha(E,c,y),N=it(A,(ke,st)=>p===st?Math.max(f+ke,tv()):ke),G=_S(E,N),ee=Kv(E,N);Fe(ee,ke=>{bs(ke.element,ke.height)}),Fe(G,ke=>{bs(ke.element,ke.height)});const ge=ys(N);bs(c,ge)},Yv=(c,f,p,y,E)=>{const A=Yn.generate(f),N=y.getWidths(A,y),G=y.pixelWidth(),{newSizes:ee,delta:ge}=E.calcRedestributedWidths(N,G,p.pixelDelta,y.isRelative);qv(A,ee,y),y.adjustTableWidth(ge)},Xv=(c,f,p,y)=>{const E=Yn.generate(f),A=y.getWidths(E,y);qv(E,A,y)},pf=c=>Pe(c,(p,y)=>we(p,A=>A.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),Tp=Va("col"),Ly=Va("colgroup"),Jv=c=>os(c)==="tr"||Ly(c),OS=c=>{const f=gl(c,"colspan",1),p=gl(c,"rowspan",1);return{element:c,colspan:f,rowspan:p}},AS=(c,f=OS)=>{const p=G=>Tp(G.element)?c.col(G):c.cell(G),y=G=>Ly(G.element)?c.colgroup(G):c.row(G),E=G=>{if(Jv(G))return y({element:G});{const ee=G,ge=p(f(ee));return A=re.some({item:ee,replacement:ge}),ge}};let A=re.none();return{getOrInit:(G,ee)=>A.fold(()=>E(G),ge=>ee(G,ge.item)?ge.replacement:E(G))}},fm=c=>f=>{const p=[],y=(N,G)=>z(p,ee=>G(ee.item,N)),E=N=>{const G=c==="td"?{scope:null}:{},ee=f.replace(N,c,G);return p.push({item:N,sub:ee}),ee};return{replaceOrInit:(N,G)=>{if(Jv(N)||Tp(N))return N;{const ee=N;return y(ee,G).fold(()=>E(ee),ge=>G(N,ge.item)?ge.sub:E(ee))}}}},Ma=c=>dl(c,"scope").map(f=>f.substr(0,3)),Zo={modification:AS,transform:fm,merging:c=>({unmerge:y=>{const E=Ma(y);return E.each(A=>Qs(y,"scope",A)),()=>{const A=c.cell({element:y,colspan:1,rowspan:1});return Mc(A,"width"),Mc(y,"width"),E.each(N=>Qs(A,"scope",N)),A}},merge:y=>{const E=()=>{const A=Dc(it(y,Ma));if(A.length===0)return re.none();{const N=A[0],G=["row","col"];return we(A,ge=>ge!==N&&Ut(G,ge))?re.none():re.from(N)}};return Mc(y[0],"width"),E().fold(()=>Fs(y[0],"scope"),A=>Qs(y[0],"scope",A+"group")),P(y[0])}})},w_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Su=(c,f)=>{const p=c.property().name(f);return Ut(["ol","ul"],p)},Hy=(c,f)=>{const p=c.property().name(f);return Ut(w_,p)},zy=(c,f)=>Ut(["br","img","hr","input"],c.property().name(f)),_p=_g(),Op=c=>Hy(_p,c),Qv=c=>Su(_p,c),RS=c=>zy(_p,c),S_=c=>{const f=Va("br"),p=ee=>po(ee,ge=>f(ge)||Oc(ge)&&rf(ge).trim().length===0),y=ee=>os(ee)==="li"||ua(ee,Qv).isSome(),E=ee=>jd(ee).map(ge=>Op(ge)?!0:RS(ge)?os(ge)!=="img":!1).getOr(!1),A=ee=>up(ee).bind(ge=>{const ke=E(ge);return Ac(ge).map(st=>ke===!0||y(st)||f(ge)||Op(st)&&!ss(ee,st)?[]:[Te.fromTag("br")])}).getOr([]),G=(()=>{const ee=ms(c,ge=>{const ke=Oo(ge);return p(ke)?[]:ke.concat(A(ge))});return ee.length===0?[Te.fromTag("br")]:ee})();fl(c[0]),Dl(c[0],G)},Vy=c=>kg(c,!0),$r=c=>{Yd(c).length===0&&Br(c)},Sr=(c,f)=>({grid:c,cursor:f}),Ba=c=>ps(c,f=>ps(f.cells,p=>{const y=p.element;return ev(Vy(y),y)})),Xa=(c,f,p)=>{var y,E;const A=da(c).rows;return re.from((E=(y=A[f])===null||y===void 0?void 0:y.cells[p])===null||E===void 0?void 0:E.element).filter(Vy).orThunk(()=>Ba(A))},Jo=(c,f,p)=>{const y=Xa(c,f,p);return Sr(c,y)},ur=c=>Pe(c,(p,y)=>we(p,A=>A.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),$a=(c,f,p,y)=>{const E=f[0].row,A=ur(f),N=Jn(A,(G,ee)=>({grid:ba(G.grid,E,ee.row+G.delta,p,y.getOrInit),delta:G.delta+1}),{grid:c,delta:0}).grid;return Jo(N,E,f[0].column)},DS=(c,f,p,y)=>{const E=ur(f),A=E[E.length-1],N=A.row+A.rowspan,G=Jn(E,(ee,ge)=>ba(ee,N,ge.row,p,y.getOrInit),c);return Jo(G,N,f[0].column)},Wc=(c,f,p,y)=>{const E=f.details,A=pf(E),N=A[0].column,G=Jn(A,(ee,ge)=>({grid:kS(ee.grid,N,ge.column+ee.delta,p,y.getOrInit),delta:ee.delta+1}),{grid:c,delta:0}).grid;return Jo(G,E[0].row,N)},MS=(c,f,p,y)=>{const E=f.details,A=E[E.length-1],N=A.column+A.colspan,G=pf(E),ee=Jn(G,(ge,ke)=>kS(ge,N,ke.column,p,y.getOrInit),c);return Jo(ee,E[0].row,N)},BS=(c,f,p,y)=>{const E=pf(f),A=it(E,G=>G.column),N=zg(c,A,!0,p,y.replaceOrInit);return Jo(N,f[0].row,f[0].column)},$S=(c,f,p,y)=>{const E=Gv(c,f,p,y.replaceOrInit);return Jo(E,f[0].row,f[0].column)},Uy=(c,f,p,y)=>{const E=pf(f),A=it(E,G=>G.column),N=zg(c,A,!1,p,y.replaceOrInit);return Jo(N,f[0].row,f[0].column)},eb=(c,f,p,y)=>{const E=Gv(c,f,p,y.replaceOrInit);return Jo(E,f[0].row,f[0].column)},tb=(c,f)=>(p,y,E,A,N)=>{const G=ur(y),ee=it(G,ke=>ke.row),ge=TS(p,ee,c,f,E,A.replaceOrInit,N);return Jo(ge,y[0].row,y[0].column)},jD=tb("thead",!0),PS=tb("tbody",!1),x_=tb("tfoot",!1),Wy=(c,f,p,y)=>{const E=pf(f.details),A=Py(c,it(E,G=>G.column)),N=A.length>0?A[0].cells.length-1:0;return Jo(A,E[0].row,Math.min(E[0].column,N))},Zy=(c,f,p,y)=>{const E=ur(f),A=b_(c,E[0].row,E[E.length-1].row),N=A.length>0?A.length-1:0;return Jo(A,Math.min(f[0].row,N),f[0].column)},E_=(c,f,p,y)=>{const E=f.cells;S_(E);const A=m_(c,f.bounds,p,y.merge(E));return Sr(A,re.from(E[0]))},k_=(c,f,p,y)=>{const A=Jn(f,(N,G)=>My(N,G,p,y.unmerge(G)),c);return Sr(A,re.from(f[0]))},NS=(c,f,p,y)=>{const A=((ee,ge)=>{const ke=Yn.fromTable(ee);return ld(ke,ge,!0)})(f.clipboard,f.generators),N=Qh(f.row,f.column);return $y(N,c,A,f.generators,p).fold(()=>Sr(c,re.some(f.element)),ee=>Jo(ee,f.row,f.column))},Pt=(c,f,p)=>{const y=sv(c,p.section),E=Yn.generate(y);return ld(E,f,!0)},nb=(c,f,p,y)=>{const E=da(c).rows,A=f.cells[0].column,N=E[f.cells[0].row],G=Pt(f.clipboard,f.generators,N),ee=ud(A,c,G,f.generators,p);return Jo(ee,f.cells[0].row,f.cells[0].column)},gt=(c,f,p,y)=>{const E=da(c).rows,A=f.cells[f.cells.length-1].column+f.cells[f.cells.length-1].colspan,N=E[f.cells[0].row],G=Pt(f.clipboard,f.generators,N),ee=ud(A,c,G,f.generators,p);return Jo(ee,f.cells[0].row,f.cells[0].column)},T_=(c,f,p,y)=>{const E=da(c).rows,A=f.cells[0].row,N=E[A],G=Pt(f.clipboard,f.generators,N),ee=Uv(A,c,G,f.generators,p);return Jo(ee,f.cells[0].row,f.cells[0].column)},jr=(c,f,p,y)=>{const E=da(c).rows,A=f.cells[f.cells.length-1].row+f.cells[f.cells.length-1].rowspan,N=E[f.cells[0].row],G=Pt(f.clipboard,f.generators,N),ee=Uv(A,c,G,f.generators,p);return Jo(ee,f.cells[0].row,f.cells[0].column)},__=(c,f)=>{const p=Yn.fromTable(c);return id(p,f).bind(E=>{const A=E[E.length-1],N=E[0].column,G=A.column+A.colspan,ee=Wn(it(p.all,ge=>Pn(ge.cells,ke=>ke.column>=N&&ke.column<G)));return $g(ee)}).getOr("")},jy=(c,f)=>{const p=Yn.fromTable(c);return id(p,f).bind($g).getOr("")},O_=(c,f)=>{const p=Yn.fromTable(c);return id(p,f).bind(E=>{const A=E[E.length-1],N=E[0].row,G=A.row+A.rowspan,ee=p.all.slice(N,G);return yS(ee)}).getOr("")},Ja=(c,f,p,y)=>Xv(c,f,p,y.sizing),Gy=(c,f,p,y)=>Yv(c,f,p,y.sizing,y.resize),IS=(c,f)=>we(f,p=>p.column===0&&p.isLocked),Ps=(c,f)=>we(f,p=>p.column+p.colspan>=c.grid.columns&&p.isLocked),vf=(c,f)=>{const p=ny(c),y=pf(f);return Pe(y,(E,A)=>{const G=p[A.column].map(qw).getOr(0);return E+G},0)},Ug=c=>(f,p)=>id(f,p).filter(y=>!(c?IS:Ps)(f,y)).map(y=>({details:y,pixelDelta:vf(f,y)})),xu=(c,f)=>Uc(c,f).map(p=>({details:p,pixelDelta:-vf(c,p)})),ic=c=>(f,p)=>ff(f,p).filter(y=>!(c?IS:Ps)(f,y.cells)),Ap=Zo.transform("th"),Ul=Zo.transform("td"),FS=cr($a,id,ie,ie,Zo.modification),Ky=cr(DS,id,ie,ie,Zo.modification),qy=cr(Wc,Ug(!0),Gy,ie,Zo.modification),Yy=cr(MS,Ug(!1),Gy,ie,Zo.modification),LS=cr(Wy,xu,Gy,$r,Zo.modification),Xy=cr(Zy,id,ie,$r,Zo.modification),A_=cr(BS,Uc,ie,ie,Ap),HS=cr(Uy,Uc,ie,ie,Ul),R_=cr(jD,Uc,ie,ie,Ap),D_=cr(PS,Uc,ie,ie,Ul),Jy=cr(x_,Uc,ie,ie,Ul),zS=cr($S,Uc,ie,ie,Ap),M_=cr(eb,Uc,ie,ie,Ul),ob=cr(E_,d_,Ja,ie,Zo.merging),B_=cr(k_,f_,Ja,ie,Zo.merging),VS=cr(NS,Ng,Ja,ie,Zo.modification),$_=cr(nb,ic(!0),ie,ie,Zo.modification),Rp=cr(gt,ic(!1),ie,ie,Zo.modification),P_=cr(T_,ff,ie,ie,Zo.modification),N_=cr(jr,ff,ie,ie,Zo.modification),US=__,I_=jy,F_=O_,Dp=(c,f)=>c.dispatch("NewRow",{node:f}),WS=(c,f)=>c.dispatch("NewCell",{node:f}),Qa=(c,f,p)=>{c.dispatch("TableModified",{...p,table:f})},is=(c,f,p,y,E)=>{c.dispatch("TableSelectionChange",{cells:f,start:p,finish:y,otherCells:E})},sb=c=>{c.dispatch("TableSelectionClear")},el=(c,f,p,y,E)=>{c.dispatch("ObjectResizeStart",{target:f,width:p,height:y,origin:E})},mm=(c,f,p,y,E)=>{c.dispatch("ObjectResized",{target:f,width:p,height:y,origin:E})},Mp={structure:!1,style:!0},Pr={structure:!0,style:!1},rb={structure:!0,style:!0},ZS=(c,f)=>xg(c)?of.percentageSize(f):Fc(c)?of.pixelSize(f):of.getTableSize(f),L_=(c,f,p)=>{const y=ol=>os(nm(ol))==="table",E=ol=>!y(c)||Ty(ol).rows>1,A=ol=>!y(c)||Ty(ol).columns>1,N=lS(c),G=iS(c)?ie:Ey,ee=ol=>{switch(my(c)){case"section":return Hv.section();case"sectionCells":return Hv.sectionCells();case"cells":return Hv.cells();default:return Hv.getTableSectionType(ol,"section")}},ge=(ol,jC)=>jC.cursor.fold(()=>{const a1=Yd(ol);return Ge(a1).filter(Zs).map(zi=>{p.clearSelectedCells(ol.dom);const sa=c.dom.createRng();return sa.selectNode(zi.dom),c.selection.setRng(sa),Qs(zi,"data-mce-selected","1"),sa})},a1=>{const zi=lc(a1),sa=c.dom.createRng();return sa.setStart(zi.element.dom,zi.offset),sa.setEnd(zi.element.dom,zi.offset),c.selection.setRng(sa),p.clearSelectedCells(ol.dom),re.some(sa)}),ke=(ol,jC,a1,zi)=>(sa,GC,zb=!1)=>{Sl(sa);const Zx=Te.fromDom(c.getDoc()),rM=dp(a1,Zx,N),jx={sizing:ZS(c,sa),resize:iS(c)?Nv():Iv(),section:ee(sa)};return jC(sa)?ol(sa,GC,rM,jx).bind(KC=>{f.refresh(sa.dom),Fe(KC.newRows,sl=>{Dp(c,sl.dom)}),Fe(KC.newCells,sl=>{WS(c,sl.dom)});const ZO=ge(sa,KC);return Zs(sa)&&(Sl(sa),zb||Qa(c,sa.dom,zi)),ZO.map(sl=>({rng:sl,effect:zi}))}):re.none()},st=ke(Xy,E,ie,Pr),Dt=ke(LS,A,ie,Pr),Tt=ke(FS,Oe,ie,Pr),Ke=ke(Ky,Oe,ie,Pr),Ot=ke(qy,Oe,G,Pr),je=ke(Yy,Oe,G,Pr),Vt=ke(ob,Oe,ie,Pr),vn=ke(B_,Oe,ie,Pr),Nn=ke($_,Oe,ie,Pr),Qo=ke(Rp,Oe,ie,Pr),Gr=ke(P_,Oe,ie,Pr),Vs=ke(N_,Oe,ie,Pr),Zl=ke(VS,Oe,ie,rb),Yc=ke(zS,Oe,ie,Pr),r1=ke(M_,Oe,ie,Pr),Hb=ke(A_,Oe,ie,Pr),uh=ke(HS,Oe,ie,Pr),Mo=ke(R_,Oe,ie,Pr),Pa=ke(D_,Oe,ie,Pr),nl=ke(Jy,Oe,ie,Pr);return{deleteRow:st,deleteColumn:Dt,insertRowsBefore:Tt,insertRowsAfter:Ke,insertColumnsBefore:Ot,insertColumnsAfter:je,mergeCells:Vt,unmergeCells:vn,pasteColsBefore:Nn,pasteColsAfter:Qo,pasteRowsBefore:Gr,pasteRowsAfter:Vs,pasteCells:Zl,makeCellsHeader:Yc,unmakeCellsHeader:r1,makeColumnsHeader:Hb,unmakeColumnsHeader:uh,makeRowsHeader:Mo,makeRowsBody:Pa,makeRowsFooter:nl,getTableRowType:F_,getTableCellType:I_,getTableColType:US}},ab=(c,f,p)=>{const y=gl(c,f,1);p===1||y<=1?Fs(c,f):Qs(c,f,Math.min(p,y))},jS=(c,f)=>p=>{const y=p.column+p.colspan-1,E=p.column;return y>=c&&E<f},H_=(c,f,p)=>{if(Yn.hasColumns(c)){const y=Pn(Yn.justColumns(c),jS(f,p)),E=it(y,N=>{const G=Wa(N.element);return ab(G,"span",p-f),G}),A=Te.fromTag("colgroup");return Dl(A,E),[A]}else return[]},z_=(c,f,p)=>it(c.all,y=>{const E=Pn(y.cells,jS(f,p)),A=it(E,G=>{const ee=Wa(G.element);return ab(ee,"colspan",p-f),ee}),N=Te.fromTag("tr");return Dl(N,A),N}),V_=(c,f)=>{const p=Yn.fromTable(c);return Uc(p,f).map(E=>{const A=E[E.length-1],N=E[0].column,G=A.column+A.colspan,ee=H_(p,N,G),ge=z_(p,N,G);return[...ee,...ge]})},U_=(c,f,p)=>{const y=Yn.fromTable(c);return id(y,f).bind(A=>{const N=ld(y,p,!1),ee=da(N).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),ge=ms(ee,st=>{const Dt=Pn(st.cells,Tt=>!Tt.isLocked);return Dt.length>0?[{...st,cells:Dt}]:[]}),ke=df(ge);return ev(ke.length>0,ke)}).map(A=>tr(A))},Bp=wu.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Qy=(c,f,p)=>{const y=p.substring(0,p.length-c.length),E=parseFloat(y);return y===E.toString()?f(E):Bp.invalid(p)},bf={...Bp,from:c=>ml(c,"%")?Qy("%",Bp.percent,c):ml(c,"px")?Qy("px",Bp.pixels,c):Bp.invalid(c)},lb=(c,f)=>it(c,p=>bf.from(p).fold(()=>p,E=>E/f*100+"%",E=>E+"%")),W_=(c,f,p)=>{const y=p/f;return it(c,E=>bf.from(E).fold(()=>E,N=>N*y+"px",N=>N/100*p+"px"))},GS=(c,f)=>{const p=c.fold(()=>P(""),y=>{const E=y/f;return P(E+"px")},()=>{const y=100/f;return P(y+"%")});return Qe(f,p)},Z_=(c,f,p)=>c.fold(()=>f,y=>W_(f,p,y),y=>lb(f,p)),gm=(c,f,p)=>{const y=bf.from(p),E=po(c,A=>A==="0px")?GS(y,c.length):Z_(y,c,f);return K_(E)},$p=(c,f)=>c.length===0?f:Jn(c,(p,y)=>bf.from(y).fold(P(0),he,he)+p,0),j_=(c,f)=>{const p=Math.floor(c);return{value:p+f,remainder:c-p}},G_=(c,f)=>bf.from(c).fold(P(c),p=>p+f+"px",p=>p+f+"%"),K_=c=>{if(c.length===0)return c;const f=Jn(c,(y,E)=>{const A=bf.from(E).fold(()=>({value:E,remainder:0}),N=>j_(N,"px"),N=>({value:N+"%",remainder:0}));return{output:[A.value].concat(y.output),remainder:y.remainder+A.remainder}},{output:[],remainder:0}),p=f.output;return p.slice(0,p.length-1).concat([G_(p[p.length-1],Math.round(f.remainder))])},fd=bf.from,ib=(c,f,p)=>{Fe(f,y=>{const E=c.slice(y.column,y.colspan+y.column),A=$p(E,Ei());rs(y.element,"width",A+p)})},cb=(c,f,p)=>{Fe(f,(y,E)=>{const A=$p([c[E]],Ei());rs(y.element,"width",A+p)})},eC=(c,f,p,y)=>{Fe(p,E=>{const A=c.slice(E.row,E.rowspan+E.row),N=$p(A,tv());rs(E.element,"height",N+y)}),Fe(f,(E,A)=>{rs(E.element,"height",c[A])})},KS=c=>fd(c).fold(P("px"),P("px"),P("%")),Pi=(c,f,p)=>{const y=Yn.fromTable(c),E=y.all,A=Yn.justCells(y),N=Yn.justColumns(y);f.each(G=>{const ee=KS(G),ge=bl(c),ke=Ju(y,c),st=gm(ke,ge,G);Yn.hasColumns(y)?cb(st,N,ee):ib(st,A,ee),rs(c,"width",G)}),p.each(G=>{const ee=KS(G),ge=Qd(c),ke=vv(y,c,_i),st=gm(ke,ge,G);eC(st,E,A,ee),rs(c,"height",G)})},ub=hv,qS=Ri,md=t_,hm=c=>{Fs(c,"width")},Pp=c=>{const f=sc(c);Pi(c,re.some(f),re.none()),hm(c)},tC=c=>{const f=yr(c);Pi(c,re.some(f),re.none()),hm(c)},YS=c=>{Mc(c,"width");const f=op(c),p=f.length>0?f:Yd(c);Fe(p,y=>{Mc(y,"width"),hm(y)}),hm(c)},q_={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},XS=()=>Te.fromTag("th"),Y_=()=>Te.fromTag("td"),X_=()=>Te.fromTag("col"),JS=(c,f,p,y)=>{const E=Te.fromTag("tr");for(let A=0;A<c;A++){const N=y<f||A<p?XS():Y_();A<p&&Qs(N,"scope","row"),y<f&&Qs(N,"scope","col"),_s(N,Te.fromTag("br")),_s(E,N)}return E},QS=c=>{const f=Te.fromTag("colgroup");return Qe(c,()=>_s(f,X_())),f},nC=(c,f,p,y)=>Qe(c,E=>JS(f,p,y,E)),J_=(c,f,p,y,E,A=q_)=>{const N=Te.fromTag("table"),G=E!=="cells";ja(N,A.styles),Ji(N,A.attributes),A.colGroups&&_s(N,QS(f));const ee=Math.min(c,p);if(G&&p>0){const Tt=Te.fromTag("thead");_s(N,Tt);const Ot=nC(p,f,E==="sectionCells"?ee:0,y);Dl(Tt,Ot)}const ge=Te.fromTag("tbody");_s(N,ge);const ke=G?c-ee:c,Dt=nC(ke,f,G?0:p,y);return Dl(ge,Dt),N},Q_=c=>c.dom.innerHTML,eO=c=>{const f=Te.fromTag("div"),p=Te.fromDom(c.dom.cloneNode(!0));return _s(f,p),Q_(f)},db=(c,f)=>{c.selection.select(f.dom,!0),c.selection.collapse(!0)},oC=(c,f)=>{qd(f,"td,th").each(Me(db,c))},ex=(c,f)=>{Fe(Ms(f,"tr"),p=>{Dp(c,p.dom),Fe(Ms(p,"th,td"),y=>{WS(c,y.dom)})})},tO=c=>W(c)&&c.indexOf("%")!==-1,nO=(c,f,p,y,E)=>{const A=em(c),N={styles:A,attributes:ir(c),colGroups:hy(c)};return c.undoManager.ignore(()=>{const G=J_(p,f,E,y,my(c),N);Qs(G,"data-mce-id","__mce");const ee=eO(G);c.insertContent(ee),c.addVisual()}),qd(nm(c),'table[data-mce-id="__mce"]').map(G=>(Fc(c)?tC(G):Lc(c)?YS(G):(xg(c)||tO(A.width))&&Pp(G),Sl(G),Fs(G,"data-mce-id"),ex(c,G),oC(c,G),G.dom)).getOrNull()},oO=(c,f,p,y={})=>{const E=A=>ve(A)&&A>0;if(E(f)&&E(p)){const A=y.headerRows||0,N=y.headerColumns||0;return nO(c,p,f,N,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Np=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const sO="x-tinymce/dom-table-",Ip=sO+"rows",Fp=sO+"columns",tx=c=>{const f=Np.FakeClipboardItem(c);Np.write([f])},fb=c=>{var f;const p=(f=Np.read())!==null&&f!==void 0?f:[];return ps(p,y=>re.from(y.getType(c)))},sC=c=>{fb(c).isSome()&&Np.clear()},rC=c=>{c.fold(nx,f=>tx({[Ip]:f}))},aC=()=>fb(Ip),nx=()=>sC(Ip),Lp=c=>{c.fold(rO,f=>tx({[Fp]:f}))},ox=()=>fb(Fp),rO=()=>sC(Fp),lC=c=>xy(od(c),nd(c)).filter(Tg),aO=c=>Cp(od(c),nd(c)).filter(Tg),pm=(c,f)=>{const p=nd(c),y=()=>lC(c).each(je=>{pl(je,p).filter(K(p)).each(Vt=>{const vn=Te.fromText("");if(iu(Vt,vn),Br(Vt),c.dom.isEmpty(c.getBody()))c.setContent(""),c.selection.setCursorLocation();else{const Nn=c.dom.createRng();Nn.setStart(vn.dom,0),Nn.setEnd(vn.dom,0),c.selection.setRng(Nn),c.nodeChanged()}})}),E=je=>lC(c).each(Vt=>{Lc(c)||Fc(c)||xg(c)||pl(Vt,p).each(Nn=>{je==="relative"&&!ub(Nn)?Pp(Nn):je==="fixed"&&!qS(Nn)?tC(Nn):je==="responsive"&&!md(Nn)&&YS(Nn),Sl(Nn),Qa(c,Nn.dom,Pr)})}),A=je=>pl(je,p),N=je=>aO(c).bind(Vt=>A(Vt).map(vn=>je(vn,Vt))),G=(je,Vt)=>{N(vn=>{c.formatter.toggle("tableclass",{value:Vt},vn.dom),Qa(c,vn.dom,Mp)})},ee=(je,Vt)=>{N(vn=>{const Nn=yu(c),Gr=po(Nn,Vs=>c.formatter.match("tablecellclass",{value:Vt},Vs.dom))?c.formatter.remove:c.formatter.apply;Fe(Nn,Vs=>Gr("tablecellclass",{value:Vt},Vs.dom)),Qa(c,vn.dom,Mp)})},ge=()=>{lC(c).each(je=>{pl(je,p).each(Vt=>{Gu(Vt,"caption").fold(()=>{const vn=Te.fromTag("caption");_s(vn,Te.fromText("Caption")),Fw(Vt,vn,0),c.selection.setCursorLocation(vn.dom,0)},vn=>{Va("caption")(je)&&Kh("td",Vt).each(Nn=>c.selection.setCursorLocation(Nn.dom,0)),Br(vn)}),Qa(c,Vt.dom,Pr)})})},ke=je=>{c.focus()},st=(je,Vt=!1)=>N((vn,Nn)=>{const Qo=rd(yu(c),vn,Nn);je(vn,Qo,Vt).each(ke)}),Dt=()=>N((je,Vt)=>{const vn=rd(yu(c),je,Vt),Nn=dp(ie,Te.fromDom(c.getDoc()),re.none());return U_(je,vn,Nn)}),Tt=()=>N((je,Vt)=>{const vn=rd(yu(c),je,Vt);return V_(je,vn)}),Ke=(je,Vt)=>Vt().each(vn=>{const Nn=it(vn,Qo=>Wa(Qo));N((Qo,Gr)=>{const Vs=Ll(Te.fromDom(c.getDoc())),Zl=zc(yu(c),Gr,Nn,Vs);je(Qo,Zl).each(ke)})}),Ot=je=>(Vt,vn)=>Zn(vn,"type").each(Nn=>{st(je(Nn),vn.no_events)});Vo({mceTableSplitCells:()=>st(f.unmergeCells),mceTableMergeCells:()=>st(f.mergeCells),mceTableInsertRowBefore:()=>st(f.insertRowsBefore),mceTableInsertRowAfter:()=>st(f.insertRowsAfter),mceTableInsertColBefore:()=>st(f.insertColumnsBefore),mceTableInsertColAfter:()=>st(f.insertColumnsAfter),mceTableDeleteCol:()=>st(f.deleteColumn),mceTableDeleteRow:()=>st(f.deleteRow),mceTableCutCol:()=>Tt().each(je=>{Lp(je),st(f.deleteColumn)}),mceTableCutRow:()=>Dt().each(je=>{rC(je),st(f.deleteRow)}),mceTableCopyCol:()=>Tt().each(je=>Lp(je)),mceTableCopyRow:()=>Dt().each(je=>rC(je)),mceTablePasteColBefore:()=>Ke(f.pasteColsBefore,ox),mceTablePasteColAfter:()=>Ke(f.pasteColsAfter,ox),mceTablePasteRowBefore:()=>Ke(f.pasteRowsBefore,aC),mceTablePasteRowAfter:()=>Ke(f.pasteRowsAfter,aC),mceTableDelete:y,mceTableCellToggleClass:ee,mceTableToggleClass:G,mceTableToggleCaption:ge,mceTableSizingMode:(je,Vt)=>E(Vt),mceTableCellType:Ot(je=>je==="th"?f.makeCellsHeader:f.unmakeCellsHeader),mceTableColType:Ot(je=>je==="th"?f.makeColumnsHeader:f.unmakeColumnsHeader),mceTableRowType:Ot(je=>{switch(je){case"header":return f.makeRowsHeader;case"footer":return f.makeRowsFooter;default:return f.makeRowsBody}})},(je,Vt)=>c.addCommand(Vt,je)),c.addCommand("mceInsertTable",(je,Vt)=>{oO(c,Vt.rows,Vt.columns,Vt.options)}),c.addCommand("mceTableApplyCellStyle",(je,Vt)=>{const vn=Gr=>"tablecell"+Gr.toLowerCase().replace("-","");if(!U(Vt))return;const Nn=Pn(yu(c),Tg);if(Nn.length===0)return;const Qo=Dr(Vt,(Gr,Vs)=>c.formatter.has(vn(Vs))&&W(Gr));yt(Qo)||(Vo(Qo,(Gr,Vs)=>{const Zl=vn(Vs);Fe(Nn,Yc=>{Gr===""?c.formatter.remove(Zl,{value:null},Yc.dom,!0):c.formatter.apply(Zl,{value:Gr},Yc.dom)})}),A(Nn[0]).each(Gr=>Qa(c,Gr.dom,Mp)))})},lO=(c,f)=>{const p=nd(c),y=E=>Cp(od(c)).bind(A=>pl(A,p).map(N=>{const G=rd(yu(c),N,A);return E(N,G)})).getOr("");Vo({mceTableRowType:()=>y(f.getTableRowType),mceTableCellType:()=>y(f.getTableCellType),mceTableColType:()=>y(f.getTableColType)},(E,A)=>c.addQueryValueHandler(A,E))},iC=wu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Hp=(c,f,p,y)=>c.fold(f,p,y),iO=c=>c.fold(he,he,he),sx=iC.before,rx=iC.on,ax=iC.after,ya={before:sx,on:rx,after:ax,cata:Hp,getStart:iO},Eu={create:(c,f)=>({selection:c,kill:f})},zp=(c,f)=>{const p=c.document.createRange();return p.selectNode(f.dom),p},gb=(c,f)=>{const p=c.document.createRange();return cO(p,f),p},cO=(c,f)=>c.selectNodeContents(f.dom),lx=(c,f)=>{f.fold(p=>{c.setStartBefore(p.dom)},(p,y)=>{c.setStart(p.dom,y)},p=>{c.setStartAfter(p.dom)})},ix=(c,f)=>{f.fold(p=>{c.setEndBefore(p.dom)},(p,y)=>{c.setEnd(p.dom,y)},p=>{c.setEndAfter(p.dom)})},hb=(c,f,p)=>{const y=c.document.createRange();return lx(y,f),ix(y,p),y},pb=(c,f,p,y,E)=>{const A=c.document.createRange();return A.setStart(f.dom,p),A.setEnd(y.dom,E),A},tl=c=>({left:c.left,top:c.top,right:c.right,bottom:c.bottom,width:c.width,height:c.height}),uO=c=>{const f=c.getClientRects(),p=f.length>0?f[0]:c.getBoundingClientRect();return p.width>0||p.height>0?re.some(p).map(tl):re.none()},ku=wu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),yf=(c,f,p)=>f(Te.fromDom(p.startContainer),p.startOffset,Te.fromDom(p.endContainer),p.endOffset),Vp=(c,f)=>f.match({domRange:p=>({ltr:P(p),rtl:re.none}),relative:(p,y)=>({ltr:cg(()=>hb(c,p,y)),rtl:cg(()=>re.some(hb(c,y,p)))}),exact:(p,y,E,A)=>({ltr:cg(()=>pb(c,p,y,E,A)),rtl:cg(()=>re.some(pb(c,E,A,p,y)))})}),Up=(c,f)=>{const p=f.ltr();return p.collapsed?f.rtl().filter(E=>E.collapsed===!1).map(E=>ku.rtl(Te.fromDom(E.endContainer),E.endOffset,Te.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>yf(c,ku.ltr,p)):yf(c,ku.ltr,p)},cx=(c,f)=>{const p=Vp(c,f);return Up(c,p)},Zc=(c,f)=>cx(c,f).match({ltr:(y,E,A,N)=>{const G=c.document.createRange();return G.setStart(y.dom,E),G.setEnd(A.dom,N),G},rtl:(y,E,A,N)=>{const G=c.document.createRange();return G.setStart(A.dom,N),G.setEnd(y.dom,E),G}});ku.ltr,ku.rtl;const Wg={create:(c,f,p,y)=>({start:c,soffset:f,finish:p,foffset:y})},ux={create:(c,f,p,y)=>({start:ya.on(c,f),finish:ya.on(p,y)})},Zg=(c,f)=>{const p=Zc(c,f);return Wg.create(Te.fromDom(p.startContainer),p.startOffset,Te.fromDom(p.endContainer),p.endOffset)},Cf=ux.create,jg=(c,f,p,y,E,A,N)=>ss(p,E)&&y===A?re.none():cs(p,"td,th",f).bind(G=>cs(E,"td,th",f).bind(ee=>Gg(c,f,G,ee,N))),Gg=(c,f,p,y,E)=>ss(p,y)?re.none():vp(p,y,f).bind(A=>{const N=A.boxes.getOr([]);return N.length>1?(E(c,N,A.start,A.finish),re.some(Eu.create(re.some(Cf(p,0,p,mu(p))),!0))):re.none()}),cC=(c,f,p,y,E)=>{const A=N=>(E.clearBeforeUpdate(p),E.selectRange(p,N.boxes,N.start,N.finish),N.boxes);return Cy(y,c,f,E.firstSelectedSelector,E.lastSelectedSelector).map(A)},vm=(c,f)=>({item:c,mode:f}),Wp=(c,f,p,y=hd)=>c.property().parent(f).map(E=>vm(E,y)),hd=(c,f,p,y=wf)=>p.sibling(c,f).map(E=>vm(E,y)),wf=(c,f,p,y=wf)=>{const E=c.property().children(f);return p.first(E).map(N=>vm(N,y))},Zp=[{current:Wp,next:hd,fallback:re.none()},{current:hd,next:wf,fallback:re.some(Wp)},{current:wf,next:wf,fallback:re.some(hd)}],xr=(c,f,p,y,E=Zp)=>z(E,N=>N.current===p).bind(N=>N.current(c,f,y,N.next).orThunk(()=>N.fallback.bind(G=>xr(c,f,G,y)))),vb={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?re.some(p[p.length-1]):re.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?re.some(p[0]):re.none()})},Kg=(c,f,p,y,E,A)=>xr(c,f,y,E).bind(G=>A(G.item)?re.none():p(G.item)?re.some(G.item):Kg(c,G.item,p,G.mode,E,A)),bm=(c,f,p,y)=>Kg(c,f,p,hd,vb.left(),y),uC=(c,f,p,y)=>Kg(c,f,p,hd,vb.right(),y),qg=c=>f=>c.property().children(f).length===0,mO=(c,f,p)=>dC(c,f,qg(c),p),dx=(c,f,p)=>fx(c,f,qg(c),p),dC=bm,fx=uC,Yg=_g(),jc=(c,f)=>mO(Yg,c,f),mx=(c,f)=>dx(Yg,c,f),gO=(c,f,p)=>dC(Yg,c,f,p),gx=(c,f,p)=>fx(Yg,c,f,p),hx=(c,f,p)=>ua(c,f,p).isSome(),Xg=wu.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),KD=(c,f,p)=>{const y=c.getRect(f),E=c.getRect(p);return E.right>y.left&&E.left<y.right},qD=c=>cs(c,"tr"),ym={...Xg,verify:(c,f,p,y,E,A,N)=>cs(y,"td,th",N).bind(G=>cs(f,"td,th",N).map(ee=>ss(G,ee)?ss(y,G)&&mu(G)===E?A(ee):Xg.none("in same cell"):Aa(qD,[G,ee]).fold(()=>KD(c,ee,G)?Xg.success():A(ee),ge=>A(ee)))).getOr(Xg.none("default")),cata:(c,f,p,y,E)=>c.fold(f,p,y,E)},Er=(c,f,p,y)=>({parent:c,children:f,element:p,index:y}),Ca=c=>Ac(c).bind(f=>{const p=Oo(f);return oa(p,c).map(y=>Er(f,p,c,y))}),oa=(c,f)=>Rr(c,Me(ss,f)),kr=Va("br"),Wl=(c,f,p)=>f(c,p).bind(y=>Oc(y)&&rf(y).trim().length===0?Wl(y,f,p):re.some(y)),jp=(c,f,p)=>p.traverse(f).orThunk(()=>Wl(f,p.gather,c)).map(p.relative),Ni=(c,f)=>Al(c,f).filter(kr).orThunk(()=>Al(c,f-1).filter(kr)),Cm=(c,f,p,y)=>Ni(f,p).bind(E=>y.traverse(E).fold(()=>Wl(E,y.gather,c).map(y.relative),A=>Ca(A).map(N=>ya.on(N.parent,N.index)))),hO=(c,f,p,y)=>(kr(f)?jp(c,f,y):Cm(c,f,p,y)).map(A=>({start:A,finish:A})),pO=c=>ym.cata(c,f=>re.none(),()=>re.none(),f=>re.some(Da(f,0)),f=>re.some(Da(f,mu(f)))),_u=(c,f)=>({left:c.left,top:c.top+f,right:c.right,bottom:c.bottom+f}),Jg=(c,f)=>({left:c.left,top:c.top-f,right:c.right,bottom:c.bottom-f}),bb=(c,f,p)=>({left:c.left+f,top:c.top+p,right:c.right+f,bottom:c.bottom+p}),uc=c=>c.top,mC=c=>c.bottom,gC=(c,f,p)=>p>=0&&p<mu(f)?c.getRangedRect(f,p,f,p+1):p>0?c.getRangedRect(f,p-1,f,p):re.none(),wm=c=>({left:c.left,top:c.top,right:c.right,bottom:c.bottom}),hC=(c,f)=>re.some(c.getRect(f)),px=(c,f,p)=>Ta(f)?hC(c,f).map(wm):Oc(f)?gC(c,f,p).map(wm):re.none(),yb=(c,f)=>Ta(f)?hC(c,f).map(wm):Oc(f)?c.getRangedRect(f,0,f,mu(f)).map(wm):re.none(),pd=5,pC=100,Gc=wu.generate([{none:[]},{retry:["caret"]}]),vx=(c,f)=>c.left<f.left||Math.abs(f.right-c.left)<1||c.left>f.right,vC=(c,f,p)=>Yo(f,Op).fold(ft,y=>yb(c,y).exists(E=>vx(p,E))),vO=(c,f,p,y,E)=>{const A=_u(E,pd);return Math.abs(p.bottom-y.bottom)<1||p.top>E.bottom?Gc.retry(A):p.top===E.bottom?Gc.retry(_u(E,1)):vC(c,f,E)?Gc.retry(bb(A,pd,0)):Gc.none()},bO={point:uc,adjuster:(c,f,p,y,E)=>{const A=Jg(E,pd);return Math.abs(p.top-y.top)<1||p.bottom<E.top?Gc.retry(A):p.bottom===E.top?Gc.retry(Jg(E,1)):vC(c,f,E)?Gc.retry(bb(A,pd,0)):Gc.none()},move:Jg,gather:jc},yO={point:mC,adjuster:vO,move:_u,gather:mx},ui=(c,f,p)=>c.elementFromPoint(f,p).filter(y=>os(y)==="table").isSome(),XD=(c,f,p,y,E)=>Sm(c,f,p,f.move(y,pd),E),Sm=(c,f,p,y,E)=>E===0?re.some(y):ui(c,y.left,f.point(y))?XD(c,f,p,y,E-1):c.situsFromPoint(y.left,f.point(y)).bind(A=>A.start.fold(re.none,N=>yb(c,N).bind(G=>f.adjuster(c,N,G,p,y).fold(re.none,ee=>Sm(c,f,p,ee,E-1))).orThunk(()=>re.some(y)),re.none)),Qg=(c,f,p)=>c.point(f)>p.getInnerHeight()?re.some(c.point(f)-p.getInnerHeight()):c.point(f)<0?re.some(-c.point(f)):re.none(),bC=(c,f,p)=>{const y=c.move(p,pd),E=Sm(f,c,p,y,pC).getOr(y);return Qg(c,E,f).fold(()=>f.situsFromPoint(E.left,c.point(E)),A=>(f.scrollBy(0,A),f.situsFromPoint(E.left,c.point(E)-A)))},yC={tryUp:Me(bC,bO),tryDown:Me(bC,yO),getJumpSize:P(pd)},CO=20,bx=(c,f,p)=>c.getSelection().bind(y=>hO(f,y.finish,y.foffset,p).fold(()=>re.some(Da(y.finish,y.foffset)),E=>{const A=c.fromSitus(E),N=ym.verify(c,y.finish,y.foffset,A.finish,A.foffset,p.failure,f);return pO(N)})),CC=(c,f,p,y,E,A)=>A===0?re.none():xm(c,f,p,y,E).bind(N=>{const G=c.fromSitus(N),ee=ym.verify(c,p,y,G.finish,G.foffset,E.failure,f);return ym.cata(ee,()=>re.none(),()=>re.some(N),ge=>ss(p,ge)&&y===0?to(c,p,y,Jg,E):CC(c,f,ge,0,E,A-1),ge=>ss(p,ge)&&y===mu(ge)?to(c,p,y,_u,E):CC(c,f,ge,mu(ge),E,A-1))}),to=(c,f,p,y,E)=>px(c,f,p).bind(A=>vd(c,E,y(A,yC.getJumpSize()))),vd=(c,f,p)=>{const y=Kw().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?f.retry(c,p):re.none()},xm=(c,f,p,y,E)=>px(c,p,y).bind(A=>vd(c,E,A)),Cb=(c,f,p)=>bx(c,f,p).bind(y=>CC(c,f,y.element,y.offset,p,CO).map(c.fromSitus)),wO=(c,f)=>hx(c,p=>Ac(p).exists(y=>ss(y,f))),Em=(c,f,p,y,E)=>cs(y,"td,th",f).bind(A=>cs(A,"table",f).bind(N=>wO(E,N)?Cb(c,f,p).bind(G=>cs(G.finish,"td,th",f).map(ee=>({start:A,finish:ee,range:G}))):re.none())),wb=(c,f,p,y,E,A)=>A(y,f).orThunk(()=>Em(c,f,p,y,E).map(N=>{const G=N.range;return Eu.create(re.some(Cf(G.start,G.soffset,G.finish,G.foffset)),!0)})),wC=(c,f)=>cs(c,"tr",f).bind(p=>cs(p,"table",f).bind(y=>{const E=Ms(y,"tr");return ss(p,E[0])?gO(y,A=>up(A).isSome(),f).map(A=>{const N=mu(A);return Eu.create(re.some(Cf(A,N,A,N)),!0)}):re.none()})),SC=(c,f)=>cs(c,"tr",f).bind(p=>cs(p,"table",f).bind(y=>{const E=Ms(y,"tr");return ss(p,E[E.length-1])?gx(y,A=>gu(A).isSome(),f).map(A=>Eu.create(re.some(Cf(A,0,A,0)),!0)):re.none()})),xC=(c,f,p,y,E,A,N)=>Em(c,p,y,E,A).bind(G=>Gg(f,p,G.start,G.finish,N)),yx=c=>{let f=c;return{get:()=>f,set:E=>{f=E}}},SO=c=>{const f=yx(re.none()),p=()=>f.get().each(c);return{clear:()=>{p(),f.set(re.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:G=>{p(),f.set(re.some(G))}}},Sf=()=>{const c=SO(ie);return{...c,on:p=>c.get().each(p)}},eh=(c,f)=>cs(c,"td,th",f),JD=c=>Ol(c).exists(kg),xO=(c,f,p,y)=>{const E=Sf(),A=E.clear,N=ke=>{E.on(st=>{y.clearBeforeUpdate(f),eh(ke.target,p).each(Dt=>{vp(st,Dt,p).each(Tt=>{const Ke=Tt.boxes.getOr([]);if(Ke.length===1){const Ot=Ke[0],je=py(Ot)==="false",Vt=js(tm(ke.target),Ot,ss);je&&Vt&&(y.selectRange(f,Ke,Ot,Ot),c.selectContents(Ot))}else Ke.length>1&&(y.selectRange(f,Ke,Tt.start,Tt.finish),c.selectContents(Dt))})})})};return{clearstate:A,mousedown:ke=>{y.clear(f),eh(ke.target,p).filter(JD).each(E.set)},mouseover:ke=>{N(ke)},mouseup:ke=>{N(ke),A()}}},Sb={traverse:jd,gather:mx,relative:ya.before,retry:yC.tryDown,failure:ym.failedDown},xb={traverse:zf,gather:jc,relative:ya.before,retry:yC.tryUp,failure:ym.failedUp},bd=c=>f=>f===c,Eb=bd(38),km=bd(40),yd=c=>c>=37&&c<=40,Cx={isBackward:bd(37),isForward:bd(39)},Gp={isBackward:bd(39),isForward:bd(37)},EC=c=>{const f=c!==void 0?c.dom:document,p=f.body.scrollLeft||f.documentElement.scrollLeft,y=f.body.scrollTop||f.documentElement.scrollTop;return Yu(p,y)},EO=(c,f,p)=>{const E=(p!==void 0?p.dom:document).defaultView;E&&E.scrollBy(c,f)},Ou=wu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wx=c=>Ou.exact(c.start,c.soffset,c.finish,c.foffset),kO=c=>c.match({domRange:f=>Te.fromDom(f.startContainer),relative:(f,p)=>ya.getStart(f),exact:(f,p,y,E)=>f}),Sx=Ou.domRange,kC=Ou.relative,th=Ou.exact,TC=c=>{const f=kO(c);return or(f)},TO=Wg.create,nh={domRange:Sx,relative:kC,exact:th,exactFromRange:wx,getWin:TC,range:TO},xx=(c,f,p)=>{var y,E;return re.from((E=(y=c.dom).caretPositionFromPoint)===null||E===void 0?void 0:E.call(y,f,p)).bind(A=>{if(A.offsetNode===null)return re.none();const N=c.dom.createRange();return N.setStart(A.offsetNode,A.offset),N.collapse(),re.some(N)})},At=(c,f,p)=>{var y,E;return re.from((E=(y=c.dom).caretRangeFromPoint)===null||E===void 0?void 0:E.call(y,f,p))},dr=(()=>document.caretPositionFromPoint?xx:document.caretRangeFromPoint?At:re.none)(),oh=(c,f,p)=>{const y=Te.fromDom(c.document);return dr(y,f,p).map(E=>Wg.create(Te.fromDom(E.startContainer),E.startOffset,Te.fromDom(E.endContainer),E.endOffset))},zs=(c,f)=>{const p=os(c);return p==="input"?ya.after(c):Ut(["br","img"],p)?f===0?ya.before(c):ya.after(c):ya.on(c,f)},Ii=(c,f)=>{const p=c.fold(ya.before,zs,ya.after),y=f.fold(ya.before,zs,ya.after);return nh.relative(p,y)},Kp=(c,f,p,y)=>{const E=zs(c,f),A=zs(p,y);return nh.relative(E,A)},sh=(c,f,p,y)=>{const A=Wu(c).dom.createRange();return A.setStart(c.dom,f),A.setEnd(p.dom,y),A},_C=(c,f,p,y)=>{const E=sh(c,f,p,y),A=ss(c,p)&&f===y;return E.collapsed&&!A},kb=c=>re.from(c.getSelection()),Kc=(c,f)=>{kb(c).each(p=>{p.removeAllRanges(),p.addRange(f)})},Tb=(c,f,p,y,E)=>{const A=pb(c,f,p,y,E);Kc(c,A)},_O=(c,f,p,y,E,A)=>{f.collapse(p.dom,y),f.extend(E.dom,A)},di=(c,f)=>cx(c,f).match({ltr:(p,y,E,A)=>{Tb(c,p,y,E,A)},rtl:(p,y,E,A)=>{kb(c).each(N=>{if(N.setBaseAndExtent)N.setBaseAndExtent(p.dom,y,E.dom,A);else if(N.extend)try{_O(c,N,p,y,E,A)}catch{Tb(c,E,A,p,y)}else Tb(c,E,A,p,y)})}}),Tr=(c,f,p,y,E)=>{const A=Kp(f,p,y,E);di(c,A)},OC=(c,f,p)=>{const y=Ii(f,p);di(c,y)},_b=c=>{if(c.rangeCount>0){const f=c.getRangeAt(0),p=c.getRangeAt(c.rangeCount-1);return re.some(Wg.create(Te.fromDom(f.startContainer),f.startOffset,Te.fromDom(p.endContainer),p.endOffset))}else return re.none()},Tm=c=>{if(c.anchorNode===null||c.focusNode===null)return _b(c);{const f=Te.fromDom(c.anchorNode),p=Te.fromDom(c.focusNode);return _C(f,c.anchorOffset,p,c.focusOffset)?re.some(Wg.create(f,c.anchorOffset,p,c.focusOffset)):_b(c)}},rh=(c,f,p=!0)=>{const E=(p?gb:zp)(c,f);Kc(c,E)},qp=c=>kb(c).filter(f=>f.rangeCount>0).bind(Tm),Ob=c=>qp(c).map(f=>nh.exact(f.start,f.soffset,f.finish,f.foffset)),Ab=(c,f)=>{const p=Zc(c,f);return uO(p)},Rb=(c,f,p)=>oh(c,f,p),Ex=c=>{kb(c).each(f=>f.removeAllRanges())},ah=c=>({elementFromPoint:(je,Vt)=>Te.fromPoint(Te.fromDom(c.document),je,Vt),getRect:je=>je.dom.getBoundingClientRect(),getRangedRect:(je,Vt,vn,Nn)=>{const Qo=nh.exact(je,Vt,vn,Nn);return Ab(c,Qo)},getSelection:()=>Ob(c).map(je=>Zg(c,je)),fromSitus:je=>{const Vt=nh.relative(je.start,je.finish);return Zg(c,Vt)},situsFromPoint:(je,Vt)=>Rb(c,je,Vt).map(vn=>ux.create(vn.start,vn.soffset,vn.finish,vn.foffset)),clearSelection:()=>{Ex(c)},collapseSelection:(je=!1)=>{Ob(c).each(Vt=>Vt.fold(vn=>vn.collapse(je),(vn,Nn)=>{const Qo=je?vn:Nn;OC(c,Qo,Qo)},(vn,Nn,Qo,Gr)=>{const Vs=je?vn:Qo,Zl=je?Nn:Gr;Tr(c,Vs,Zl,Vs,Zl)}))},setSelection:je=>{Tr(c,je.start,je.soffset,je.finish,je.foffset)},setRelativeSelection:(je,Vt)=>{OC(c,je,Vt)},selectNode:je=>{rh(c,je,!1)},selectContents:je=>{rh(c,je)},getInnerHeight:()=>c.innerHeight,getScrollY:()=>EC(Te.fromDom(c.document)).top,scrollBy:(je,Vt)=>{EO(je,Vt,Te.fromDom(c.document))}}),Cd=(c,f)=>({rows:c,cols:f}),kx=(c,f,p,y)=>{const E=ah(c),A=xO(E,f,p,y);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},AC=c=>Yo(c,Cn).exists(kg),Db=(c,f)=>AC(c)||AC(f),Tx=(c,f,p,y)=>{const E=ah(c),A=()=>(y.clear(f),re.none());return{keydown:(ee,ge,ke,st,Dt,Tt)=>{const Ke=ee.raw,Ot=Ke.which,je=Ke.shiftKey===!0;return sm(f,y.selectedSelector).fold(()=>(yd(Ot)&&!je&&y.clearBeforeUpdate(f),yd(Ot)&&je&&!Db(ge,st)?re.none:km(Ot)&&je?Me(xC,E,f,p,Sb,st,ge,y.selectRange):Eb(Ot)&&je?Me(xC,E,f,p,xb,st,ge,y.selectRange):km(Ot)?Me(wb,E,p,Sb,st,ge,SC):Eb(Ot)?Me(wb,E,p,xb,st,ge,wC):re.none),vn=>{const Nn=Qo=>()=>ps(Qo,Vs=>cC(Vs.rows,Vs.cols,f,vn,y)).fold(()=>dS(f,y.firstSelectedSelector,y.lastSelectedSelector).map(Vs=>{const Zl=km(Ot)||Tt.isForward(Ot)?ya.after:ya.before;return E.setRelativeSelection(ya.on(Vs.first,0),Zl(Vs.table)),y.clear(f),Eu.create(re.none(),!0)}),Vs=>re.some(Eu.create(re.none(),!0)));return yd(Ot)&&je&&!Db(ge,st)?re.none:km(Ot)&&je?Nn([Cd(1,0)]):Eb(Ot)&&je?Nn([Cd(-1,0)]):Tt.isBackward(Ot)&&je?Nn([Cd(0,-1),Cd(-1,0)]):Tt.isForward(Ot)&&je?Nn([Cd(0,1),Cd(1,0)]):yd(Ot)&&!je?A:re.none})()},keyup:(ee,ge,ke,st,Dt)=>sm(f,y.selectedSelector).fold(()=>{const Tt=ee.raw,Ke=Tt.which;return Tt.shiftKey===!0&&yd(Ke)&&Db(ge,st)?jg(f,p,ge,ke,st,Dt,y.selectRange):re.none()},re.none)}},Yp=(c,f,p,y)=>{const E=ah(c);return(A,N)=>{y.clearBeforeUpdate(f),vp(A,N,p).each(G=>{const ee=G.boxes.getOr([]);y.selectRange(f,ee,G.start,G.finish),E.selectContents(N),E.collapseSelection()})}},Xp=(c,f)=>{const p=Yr(c,f);return p===void 0||p===""?[]:p.split(" ")},_m=(c,f,p)=>{const E=Xp(c,f).concat([p]);return Qs(c,f,E.join(" ")),!0},xf=(c,f,p)=>{const y=Pn(Xp(c,f),E=>E!==p);return y.length>0?Qs(c,f,y.join(" ")):Fs(c,f),!1},Nr=c=>c.dom.classList!==void 0,dc=c=>Xp(c,"class"),Fi=(c,f)=>_m(c,"class",f),Mb=(c,f)=>xf(c,"class",f),fc=(c,f)=>{Nr(c)?c.dom.classList.add(f):Fi(c,f)},OO=c=>{(Nr(c)?c.dom.classList:dc(c)).length===0&&Fs(c,"class")},Bb=(c,f)=>{Nr(c)?c.dom.classList.remove(f):Mb(c,f),OO(c)},RC=(c,f)=>Nr(c)&&c.dom.classList.contains(f),DC=(c,f)=>{Fe(f,p=>{Bb(c,p)})},_x=c=>f=>{fc(f,c)},Om=c=>f=>{DC(f,c)},MC={byClass:c=>{const f=_x(c.selected),p=Om([c.selected,c.lastSelected,c.firstSelected]),y=A=>{const N=Ms(A,c.selectedSelector);Fe(N,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(A,N,G,ee)=>{y(A),Fe(N,f),fc(G,c.firstSelected),fc(ee,c.lastSelected)},selectedSelector:c.selectedSelector,firstSelectedSelector:c.firstSelectedSelector,lastSelectedSelector:c.lastSelectedSelector}},byAttr:(c,f,p)=>{const y=ee=>{Fs(ee,c.selected),Fs(ee,c.firstSelected),Fs(ee,c.lastSelected)},E=ee=>{Qs(ee,c.selected,"1")},A=ee=>{N(ee),p()},N=ee=>{const ge=Ms(ee,`${c.selectedSelector},${c.firstSelectedSelector},${c.lastSelectedSelector}`);Fe(ge,y)};return{clearBeforeUpdate:N,clear:A,selectRange:(ee,ge,ke,st)=>{A(ee),Fe(ge,E),Qs(ke,c.firstSelected,"1"),Qs(st,c.lastSelected,"1"),f(ge,ke,st)},selectedSelector:c.selectedSelector,firstSelectedSelector:c.firstSelectedSelector,lastSelectedSelector:c.lastSelectedSelector}}},BC=(c,f,p,y)=>{switch(c.tag){case"none":return f();case"single":return y(c.element);case"multiple":return p(c.elements)}},No=()=>({tag:"none"}),Ef=c=>({tag:"multiple",elements:c}),Ax=c=>({tag:"single",element:c}),Rx=(c,f,p)=>({get:()=>i_(c(),p).fold(()=>f().fold(No,Ax),Ef)}),Dx=(c,f)=>{const p=c.slice(0,f[f.length-1].row+1),y=df(p);return ms(y,E=>{const A=E.cells.slice(0,f[f.length-1].column+1);return it(A,N=>N.element)})},$C=(c,f)=>{const p=c.slice(f[0].row+f[0].rowspan-1,c.length),y=df(p);return ms(y,E=>{const A=E.cells.slice(f[0].column+f[0].colspan-1,E.cells.length);return it(A,N=>N.element)})},Mx=(c,f,p)=>{const y=Yn.fromTable(c);return id(y,f).map(A=>{const N=ld(y,p,!1),{rows:G}=da(N),ee=Dx(G,A),ge=$C(G,A);return{upOrLeftCells:ee,downOrRightCells:ge}})},PC=(c,f,p,y,E,A,N)=>({target:c,x:f,y:p,stop:y,prevent:E,kill:A,raw:N}),NC=c=>{const f=Te.fromDom(co(c).getOr(c.target)),p=()=>c.stopPropagation(),y=()=>c.preventDefault(),E=pe(y,p);return PC(f,c.clientX,c.clientY,p,y,E,c)},Bx=(c,f)=>p=>{c(p)&&f(NC(p))},IC=(c,f,p,y,E)=>{const A=Bx(p,y);return c.dom.addEventListener(f,A,E),{unbind:Me($b,c,f,A,E)}},RO=(c,f,p,y)=>IC(c,f,p,y,!1),$b=(c,f,p,y)=>{c.dom.removeEventListener(f,p,y)},DO=Oe,kf=(c,f,p)=>RO(c,f,DO,p),Jp=NC,FC=c=>!RC(Te.fromDom(c.target),"ephox-snooker-resizer-bar"),MO=(c,f)=>{const p=Rx(()=>Te.fromDom(c.getBody()),()=>Cp(od(c),nd(c)),ac.selectedSelector),y=(ee,ge,ke)=>{pl(ge).each(Dt=>{const Tt=lS(c),Ke=dp(ie,Te.fromDom(c.getDoc()),Tt),Ot=yu(c),je=Mx(Dt,{selection:Ot},Ke);is(c,ee,ge,ke,je)})},E=()=>sb(c),A=MC.byAttr(ac,y,E);return c.on("init",ee=>{const ge=c.getWin(),ke=nm(c),st=nd(c),Dt=()=>{const Mo=c.selection,Pa=Te.fromDom(Mo.getStart()),nl=Te.fromDom(Mo.getEnd());Aa(pl,[Pa,nl]).fold(()=>A.clear(ke),ie)},Tt=kx(ge,ke,st,A),Ke=Tx(ge,ke,st,A),Ot=Yp(ge,ke,st,A),je=Mo=>Mo.raw.shiftKey===!0;c.on("TableSelectorChange",Mo=>Ot(Mo.start,Mo.finish));const Vt=(Mo,Pa)=>{!je(Mo)||(Pa.kill&&Mo.kill(),Pa.selection.each(nl=>{const Hi=nh.relative(nl.start,nl.finish),fi=Zc(ge,Hi);c.selection.setRng(fi)}))},vn=Mo=>{const Pa=Jp(Mo);if(Pa.raw.shiftKey&&yd(Pa.raw.which)){const nl=c.selection.getRng(),Hi=Te.fromDom(nl.startContainer),fi=Te.fromDom(nl.endContainer);Ke.keyup(Pa,Hi,nl.startOffset,fi,nl.endOffset).each(dh=>{Vt(Pa,dh)})}},Nn=Mo=>{const Pa=Jp(Mo);f.hide();const nl=c.selection.getRng(),Hi=Te.fromDom(nl.startContainer),fi=Te.fromDom(nl.endContainer),dh=sy(Cx,Gp)(Te.fromDom(c.selection.getStart()));Ke.keydown(Pa,Hi,nl.startOffset,fi,nl.endOffset,dh).each(ol=>{Vt(Pa,ol)}),f.show()},Qo=Mo=>Mo.button===0,Gr=Mo=>Mo.buttons===void 0?!0:(Mo.buttons&1)!==0,Vs=Mo=>{Tt.clearstate()},Zl=Mo=>{Qo(Mo)&&FC(Mo)&&Tt.mousedown(Jp(Mo))},Yc=Mo=>{Gr(Mo)&&FC(Mo)&&Tt.mouseover(Jp(Mo))},r1=Mo=>{Qo(Mo)&&FC(Mo)&&Tt.mouseup(Jp(Mo))},uh=(()=>{const Mo=yx(Te.fromDom(ke)),Pa=yx(0);return{touchEnd:Hi=>{const fi=Te.fromDom(Hi.target);if(Va("td")(fi)||Va("th")(fi)){const dh=Mo.get(),ol=Pa.get();ss(dh,fi)&&Hi.timeStamp-ol<300&&(Hi.preventDefault(),Ot(fi,fi))}Mo.set(fi),Pa.set(Hi.timeStamp)}}})();c.on("dragstart",Vs),c.on("mousedown",Zl),c.on("mouseover",Yc),c.on("mouseup",r1),c.on("touchend",uh.touchEnd),c.on("keyup",vn),c.on("keydown",Nn),c.on("NodeChange",Dt)}),c.on("PreInit",()=>{c.serializer.addTempAttr(ac.firstSelected),c.serializer.addTempAttr(ac.lastSelected)}),{getSelectedCells:()=>BC(p.get(),P([]),ee=>it(ee,ge=>ge.dom),ee=>[ee.dom]),clearSelectedCells:ee=>A.clear(Te.fromDom(ee))}},nr=c=>{let f=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");f.push(A)},unbind:A=>{f=Pn(f,N=>N!==A)},trigger:(...A)=>{const N={};Fe(c,(G,ee)=>{N[G]=A[ee]}),Fe(f,G=>{G(N)})}}},fr=c=>{const f=Xi(c,y=>({bind:y.bind,unbind:y.unbind})),p=Xi(c,y=>y.trigger);return{registry:f,trigger:p}},Am=(c,f)=>{let p=null;const y=()=>{Y(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...A)=>{y(),p=setTimeout(()=>{p=null,c.apply(null,A)},f)}}},Pb=c=>c.slice(0).sort(),Ft=(c,f)=>{throw new Error("All required keys ("+Pb(c).join(", ")+") were not specified. Specified keys were: "+Pb(f).join(", ")+".")},Rm=c=>{throw new Error("Unsupported keys for object: "+Pb(c).join(", "))},Qn=(c,f)=>{if(!j(f))throw new Error("The "+c+" fields must be an array. Was: "+f+".");Fe(f,p=>{if(!W(p))throw new Error("The value "+p+" in the "+c+" fields was not a string.")})},$x=(c,f)=>{throw new Error("All values need to be of type: "+f+". Keys ("+Pb(c).join(", ")+") were not.")},Qp=c=>{const f=Pb(c);z(f,(y,E)=>E<f.length-1&&y===f[E+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+f.join(", ")+"].")})},e1=(c,f)=>BO(c,f,{validate:te,label:"function"}),BO=(c,f,p)=>{if(f.length===0)throw new Error("You must specify at least one required field.");return Qn("required",f),Qp(f),y=>{const E=Qt(y);po(f,G=>Ut(E,G))||Ft(f,E),c(f,E);const N=Pn(f,G=>!p.validate(y[G],G));return N.length>0&&$x(N,p.label),y}},Px=(c,f)=>{const p=Pn(f,y=>!Ut(c,y));p.length>0&&Rm(p)},LC=c=>e1(Px,c),$O=LC(["compare","extract","mutate","sink"]),Nx=LC(["element","start","stop","destroy"]),HC=LC(["forceDrop","drop","move","delayDrop"]),Dm=()=>{let c=re.none();const f=()=>{c=re.none()},p=(A,N)=>{const G=c.map(ee=>A.compare(ee,N));return c=re.some(N),G},y=(A,N)=>{N.extract(A).each(ee=>{p(N,ee).each(ke=>{E.trigger.move(ke)})})},E=fr({move:nr(["info"])});return{onEvent:y,reset:f,events:E.registry}},Nb=()=>{const c=fr({move:nr(["info"])});return{onEvent:ie,reset:ie,events:c.registry}},Ix=()=>{const c=Nb(),f=Dm();let p=c;return{on:()=>{p.reset(),p=f},off:()=>{p.reset(),p=c},isOn:()=>p===f,onEvent:(G,ee)=>{p.onEvent(G,ee)},events:f.events}},QD=(c,f,p)=>{let y=!1;const E=fr({start:nr([]),stop:nr([])}),A=Ix(),N=()=>{Ke.stop(),A.isOn()&&(A.off(),E.trigger.stop())},G=Am(N,200),ee=je=>{Ke.start(je),A.on(),E.trigger.start()},ge=je=>{G.cancel(),A.onEvent(je,f)};A.events.move.bind(je=>{f.mutate(c,je.info)});const ke=()=>{y=!0},st=()=>{y=!1},Dt=()=>y,Tt=je=>(...Vt)=>{y&&je.apply(null,Vt)},Ke=f.sink(HC({forceDrop:N,drop:Tt(N),move:Tt(ge),delayDrop:Tt(G.throttle)}),p),Ot=()=>{Ke.destroy()};return{element:Ke.element,go:ee,on:ke,off:st,isActive:Dt,destroy:Ot,events:E.registry}},Fx=c=>{const f=c.replace(/\./g,"-");return{resolve:y=>f+"-"+y}},Lx=Fx("ephox-dragster").resolve,PO=c=>{const f={layerClass:Lx("blocker"),...c},p=Te.fromTag("div");return Qs(p,"role","presentation"),ja(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),fc(p,Lx("blocker")),fc(p,f.layerClass),{element:P(p),destroy:()=>{Br(p)}}};var IO=$O({compare:(c,f)=>Yu(f.left-c.left,f.top-c.top),extract:c=>re.some(Yu(c.x,c.y)),sink:(c,f)=>{const p=PO(f),y=kf(p.element(),"mousedown",c.forceDrop),E=kf(p.element(),"mouseup",c.drop),A=kf(p.element(),"mousemove",c.move),N=kf(p.element(),"mouseout",c.delayDrop),G=()=>{p.destroy(),E.unbind(),A.unbind(),N.unbind(),y.unbind()},ee=ke=>{_s(ke,p.element())},ge=()=>{Br(p.element())};return Nx({element:p.element,start:ee,stop:ge,destroy:G})},mutate:(c,f)=>{c.mutate(f.left,f.top)}});const t1=(c,f={})=>{var p;const y=(p=f.mode)!==null&&p!==void 0?p:IO;return QD(c,y,f)},Ib=Fx("ephox-snooker").resolve,FO=()=>{const c=fr({drag:nr(["xDelta","yDelta"])});return{mutate:(p,y)=>{c.trigger.drag(p,y)},events:c.registry}},wd=()=>{const c=fr({drag:nr(["xDelta","yDelta","target"])});let f=re.none();const p=FO();return p.events.drag.bind(A=>{f.each(N=>{c.trigger.drag(A.xDelta,A.yDelta,N)})}),{assign:A=>{f=re.some(A)},get:()=>f,mutate:p.mutate,events:c.registry}},lh=(c,f,p,y,E)=>{const A=Te.fromTag("div");return ja(A,{position:"absolute",left:f-y/2+"px",top:p+"px",height:E+"px",width:y+"px"}),Ji(A,{"data-column":c,role:"presentation"}),A},LO=(c,f,p,y,E)=>{const A=Te.fromTag("div");return ja(A,{position:"absolute",left:f+"px",top:p-E/2+"px",height:E+"px",width:y+"px"}),Ji(A,{"data-row":c,role:"presentation"}),A},zC=Ib("resizer-bar"),VC=Ib("resizer-rows"),UC=Ib("resizer-cols"),WC=7,HO=(c,f)=>ms(c.all,(p,y)=>f(p.element)?[y]:[]),zO=(c,f)=>{const p=[];return Qe(c.grid.columns,y=>{Yn.getColumnAt(c,y).map(A=>A.element).forall(f)&&p.push(y)}),Pn(p,y=>{const E=Yn.filterItems(c,A=>A.column===y);return po(E,A=>f(A.element))})},Sd=c=>{const f=Ms(c.parent(),"."+zC);Fe(f,Br)},n1=(c,f,p)=>{const y=c.origin();Fe(f,E=>{E.each(A=>{const N=p(y,A);fc(N,zC),_s(c.parent(),N)})})},VO=(c,f,p,y)=>{n1(c,f,(E,A)=>{const N=lh(A.col,A.x-E.left,p.top-E.top,WC,y);return fc(N,UC),N})},go=(c,f,p,y)=>{n1(c,f,(E,A)=>{const N=LO(A.row,p.left-E.left,A.y-E.top,y,WC);return fc(N,VC),N})},UO=(c,f,p,y,E)=>{const A=Yf(p),N=f.isResizable,G=y.length>0?_i.positions(y,p):[],ee=G.length>0?HO(c,N):[],ge=Pn(G,(Tt,Ke)=>we(ee,Ot=>Ke===Ot));go(f,ge,A,qw(p));const ke=E.length>0?Ai.positions(E,p):[],st=ke.length>0?zO(c,N):[],Dt=Pn(ke,(Tt,Ke)=>we(st,Ot=>Ke===Ot));VO(f,Dt,A,qf(p))},mc=(c,f)=>{if(Sd(c),c.isResizable(f)){const p=Yn.fromTable(f),y=YT(p),E=ny(p);UO(p,c,f,y,E)}},qc=(c,f)=>{const p=Ms(c.parent(),"."+zC);Fe(p,f)},Fb=c=>{qc(c,f=>{rs(f,"display","none")})},El=c=>{qc(c,f=>{rs(f,"display","block")})},ih=c=>RC(c,VC),o1=c=>RC(c,UC),s1=Ib("resizer-bar-dragging"),ch=c=>{const f=wd(),p=t1(f,{});let y=re.none();const E=(Ke,Ot)=>re.from(Yr(Ke,Ot));f.events.drag.bind(Ke=>{E(Ke.target,"data-row").each(Ot=>{const je=rr(Ke.target,"top");rs(Ke.target,"top",je+Ke.yDelta+"px")}),E(Ke.target,"data-column").each(Ot=>{const je=rr(Ke.target,"left");rs(Ke.target,"left",je+Ke.xDelta+"px")})});const A=(Ke,Ot)=>{const je=rr(Ke,Ot),Vt=gl(Ke,"data-initial-"+Ot,0);return je-Vt};p.events.stop.bind(()=>{f.get().each(Ke=>{y.each(Ot=>{E(Ke,"data-row").each(je=>{const Vt=A(Ke,"top");Fs(Ke,"data-initial-top"),Tt.trigger.adjustHeight(Ot,Vt,parseInt(je,10))}),E(Ke,"data-column").each(je=>{const Vt=A(Ke,"left");Fs(Ke,"data-initial-left"),Tt.trigger.adjustWidth(Ot,Vt,parseInt(je,10))}),mc(c,Ot)})})});const N=(Ke,Ot)=>{Tt.trigger.startAdjust(),f.assign(Ke),Qs(Ke,"data-initial-"+Ot,rr(Ke,Ot)),fc(Ke,s1),rs(Ke,"opacity","0.2"),p.go(c.parent())},G=kf(c.parent(),"mousedown",Ke=>{ih(Ke.target)&&N(Ke.target,"top"),o1(Ke.target)&&N(Ke.target,"left")}),ee=Ke=>ss(Ke,c.view()),ge=Ke=>cs(Ke,"table",ee).filter(kg),ke=kf(c.view(),"mouseover",Ke=>{ge(Ke.target).fold(()=>{Zs(Ke.target)&&Sd(c)},Ot=>{p.isActive()&&(y=re.some(Ot),mc(c,Ot))})}),st=()=>{G.unbind(),ke.unbind(),p.destroy(),Sd(c)},Dt=Ke=>{mc(c,Ke)},Tt=fr({adjustHeight:nr(["table","delta","row"]),adjustWidth:nr(["table","delta","column"]),startAdjust:nr([])});return{destroy:st,refresh:Dt,on:p.on,off:p.off,hideBars:Me(Fb,c),showBars:Me(El,c),events:Tt.registry}},zx={create:(c,f,p)=>{const y=_i,E=Ai,A=ch(c),N=fr({beforeResize:nr(["table","type"]),afterResize:nr(["table","type"]),startDrag:nr([])});return A.events.adjustHeight.bind(G=>{const ee=G.table;N.trigger.beforeResize(ee,"row");const ge=y.delta(G.delta,ee);Fy(ee,ge,G.row,y),N.trigger.afterResize(ee,"row")}),A.events.startAdjust.bind(G=>{N.trigger.startDrag()}),A.events.adjustWidth.bind(G=>{const ee=G.table;N.trigger.beforeResize(ee,"col");const ge=E.delta(G.delta,ee),ke=p(ee);Iy(ee,ge,G.column,f,ke),N.trigger.afterResize(ee,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:N.registry}}},Li={only:(c,f)=>{const p=Qm(c)?Mr(c):c;return{parent:P(p),view:P(c),origin:P(Yu(0,0)),isResizable:f}},detached:(c,f,p)=>{const y=()=>Yf(f);return{parent:P(f),view:P(c),origin:y,isResizable:p}},body:(c,f,p)=>({parent:P(f),view:P(c),origin:P(Yu(0,0)),isResizable:p})},xd=()=>{const c=Te.fromTag("div");return ja(c,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),_s(F(),c),c},Lb=(c,f)=>c.inline?Li.body(Te.fromDom(c.getBody()),xd(),f):Li.only(Te.fromDom(c.getDoc()),f),Tf=(c,f)=>{c.inline&&Br(f.parent())},jn=c=>fe(c)&&c.nodeName==="TABLE",Vx="bar-",Ux=c=>Yr(c,"data-mce-resize")!=="false",ZC=c=>{const f=Yn.fromTable(c);Yn.hasColumns(f)||Fe(Yd(c),p=>{const y=Uf(p,"width");rs(p,"width",y),Fs(p,"width")})},Wx=c=>{const f=Sf(),p=Sf(),y=Sf();let E,A;const N=Ke=>ZS(c,Ke),G=()=>$s(c)?Iv():Nv(),ee=Ke=>Ty(Ke).columns,ge=(Ke,Ot,je)=>{const Vt=ml(Ot,"e");if(A===""&&Pp(Ke),je!==E&&A!==""){rs(Ke,"width",A);const vn=G(),Nn=N(Ke),Qo=$s(c)||Vt?ee(Ke)-1:0;Iy(Ke,je-E,Qo,vn,Nn)}else if(gp(A)){const vn=parseFloat(A.replace("%","")),Nn=je*vn/E;rs(Ke,"width",Nn+"%")}Ev(A)&&ZC(Ke)},ke=()=>{p.on(Ke=>{Ke.destroy()}),y.on(Ke=>{Tf(c,Ke)})};return c.on("init",()=>{const Ke=Lb(c,Ux);if(y.set(Ke),fp(c)&&ii(c)){const Ot=G(),je=zx.create(Ke,Ot,N);je.on(),je.events.startDrag.bind(Vt=>{f.set(c.selection.getRng())}),je.events.beforeResize.bind(Vt=>{const vn=Vt.table.dom;el(c,vn,vu(vn),vy(vn),Vx+Vt.type)}),je.events.afterResize.bind(Vt=>{const vn=Vt.table,Nn=vn.dom;Sl(vn),f.on(Qo=>{c.selection.setRng(Qo),c.focus()}),mm(c,Nn,vu(Nn),vy(Nn),Vx+Vt.type),c.undoManager.add()}),p.set(je)}}),c.on("ObjectResizeStart",Ke=>{const Ot=Ke.target;if(jn(Ot)){const je=Te.fromDom(Ot);Fe(c.dom.select(".mce-clonedresizable"),Vt=>{c.dom.addClass(Vt,"mce-"+gy(c)+"-columns")}),!qS(je)&&Fc(c)?tC(je):!ub(je)&&xg(c)&&Pp(je),md(je)&&rg(Ke.origin,Vx)&&Pp(je),E=Ke.width,A=Lc(c)?"":xv(c,Ot).getOr("")}}),c.on("ObjectResized",Ke=>{const Ot=Ke.target;if(jn(Ot)){const je=Te.fromDom(Ot),Vt=Ke.origin;rg(Vt,"corner-")&&ge(je,Vt,Ke.width),Sl(je),Qa(c,je.dom,Mp)}}),c.on("SwitchMode",()=>{p.on(Ke=>{c.mode.isReadOnly()?Ke.hideBars():Ke.showBars()})}),c.on("dragstart dragend",Ke=>{p.on(Ot=>{Ke.type==="dragstart"?(Ot.hideBars(),Ot.off()):(Ot.on(),Ot.showBars())})}),c.on("remove",()=>{ke()}),{refresh:Ke=>{p.on(Ot=>Ot.refreshBars(Te.fromDom(Ke)))},hide:()=>{p.on(Ke=>Ke.hideBars())},show:()=>{p.on(Ke=>Ke.showBars())}}},Mm=c=>{Bi(c);const f=Wx(c),p=MO(c,f),y=L_(c,f,p);return pm(c,y),lO(c,y),Dg(c,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},Bm=c=>({table:Mm(c)});var WO=()=>{g.add("dom",Bm)};WO()})();(function(){const g=Object.getPrototypeOf,C=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},_=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&C(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},R=t=>s=>_(s)===t,V=t=>s=>typeof s===t,L=t=>s=>t===s,W=(t,s)=>j(t)&&C(t,s,(a,i)=>g(a)===i),U=R("string"),j=R("object"),Y=t=>W(t,Object),le=R("array"),ce=L(null),ne=V("boolean"),fe=L(void 0),te=t=>t==null,ve=t=>!te(t),ie=V("function"),pe=V("number"),Ce=(t,s)=>{if(le(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},P=()=>{},he=t=>()=>t(),Ye=(t,s)=>(...a)=>t(s.apply(null,a)),Me=(t,s)=>a=>t(s(a)),K=t=>()=>t,Ie=t=>t,pt=(t,s)=>t===s;function ft(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const Oe=t=>s=>!t(s),re=t=>()=>{throw new Error(t)},Nt=t=>t(),Je=K(!1),ot=K(!0);class O{constructor(s,a){this.tag=s,this.value=a}static some(s){return new O(!0,s)}static none(){return O.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?O.some(s(this.value)):O.none()}bind(s){return this.tag?s(this.value):O.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:O.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s!=null?s:"Called getOrDie on None")}static from(s){return ve(s)?O.some(s):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const Ut=Array.prototype.slice,we=Array.prototype.indexOf,Qe=Array.prototype.push,it=(t,s)=>we.call(t,s),Fe=(t,s)=>{const a=it(t,s);return a===-1?O.none():O.some(a)},_n=(t,s)=>it(t,s)>-1,Kn=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},Pn=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},Jn=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=Ut.call(t,i,i+s);a.push(d)}return a},Pe=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const h=t[d];i[d]=s(h,d)}return i},St=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},z=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Rr=(t,s)=>{const a=[],i=[];for(let d=0,h=t.length;d<h;d++){const v=t[d];(s(v,d)?a:i).push(v)}return{pass:a,fail:i}},Wn=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const h=t[i];s(h,i)&&a.push(h)}return a},ms=(t,s,a)=>(z(t,(i,d)=>{a=s(a,i,d)}),a),po=(t,s,a)=>(St(t,(i,d)=>{a=s(a,i,d)}),a),Vu=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const h=t[i];if(s(h,i))return O.some(h);if(a(h,i))break}return O.none()},dn=(t,s)=>Vu(t,s,Je),$o=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return O.some(a)}return O.none()},pn=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!le(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Qe.apply(s,t[a])}return s},Ge=(t,s)=>pn(Pe(t,s)),cl=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},ps=t=>{const s=Ut.call(t,0);return s.reverse(),s},Qt=(t,s)=>Wn(t,a=>!_n(s,a)),_l=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const h=t[i];a[String(h)]=s(h,i)}return a},Vo=t=>[t],Xi=(t,s)=>{const a=Ut.call(t,0);return a.sort(s),a},ns=(t,s)=>s>=0&&s<t.length?O.some(t[s]):O.none(),Js=t=>ns(t,0),Si=t=>ns(t,t.length-1),Dr=ie(Array.from)?Array.from:t=>Ut.call(t),ks=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return O.none()},It=Object.keys,Zn=Object.hasOwnProperty,Dn=(t,s)=>{const a=It(t);for(let i=0,d=a.length;i<d;i++){const h=a[i],v=t[h];s(v,h)}},Re=(t,s)=>yt(t,(a,i)=>({k:i,v:s(a,i)})),yt=(t,s)=>{const a={};return Dn(t,(i,d)=>{const h=s(i,d);a[h.k]=h.v}),a},en=t=>(s,a)=>{t[a]=s},hn=(t,s,a,i)=>{Dn(t,(d,h)=>{(s(d,h)?a:i)(d,h)})},vo=(t,s)=>{const a={},i={};return hn(t,s,en(a),en(i)),{t:a,f:i}},Ts=(t,s)=>{const a={};return hn(t,s,en(a),P),a},ka=(t,s)=>{const a=[];return Dn(t,(i,d)=>{a.push(s(i,d))}),a},Uo=(t,s)=>{const a=It(t);for(let i=0,d=a.length;i<d;i++){const h=a[i],v=t[h];if(s(v,h,t))return O.some(v)}return O.none()},Lr=t=>ka(t,Ie),xt=(t,s)=>Hn(t,s)?O.from(t[s]):O.none(),Hn=(t,s)=>Zn.call(t,s),pr=(t,s)=>Hn(t,s)&&t[s]!==void 0&&t[s]!==null,ul=(t,s,a=pt)=>t.exists(i=>a(i,s)),Lf=(t,s,a=pt)=>ru(t,s,a).getOr(t.isNone()&&s.isNone()),su=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},os=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return O.none()}return O.some(s)},ru=(t,s,a)=>t.isSome()&&s.isSome()?O.some(a(t.getOrDie(),s.getOrDie())):O.none(),Uu=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?O.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):O.none(),Ko=(t,s)=>t!=null?O.some(s(t)):O.none(),Cn=(t,s)=>t?O.some(s):O.none(),Ta=(t,s)=>t+s,Oc=(t,s)=>t.substring(s),Qm=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,eg=(t,s)=>Qs(t,s)?Oc(t,s.length):t,Va=(t,s)=>Ji(t,s)?t:Ta(t,s),Hr=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?fe(i)?!0:d+s.length<=i:!1},Qs=(t,s)=>Qm(t,s,0),Ji=(t,s)=>Qm(t,s,t.length-s.length),Yr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),dl=t=>t.length>0,Fs=t=>!dl(t),_a=t=>t.style!==void 0&&ie(t.style.getPropertyValue),au=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Qi(i.childNodes[0])},Hf=(t,s)=>{const i=(s||document).createElement(t);return Qi(i)},tg=(t,s)=>{const i=(s||document).createTextNode(t);return Qi(i)},Qi=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Te={fromHtml:au,fromTag:Hf,fromText:tg,fromDom:Qi,fromPoint:(t,s,a)=>O.from(t.dom.elementFromPoint(s,a)).map(Qi)},Ua=typeof window<"u"?window:Function("return this;")(),Wd=(t,s)=>{let a=s!=null?s:Ua;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},K1=(t,s)=>{const a=t.split(".");return Wd(a,s)},Kh=(t,s)=>K1(t,s),ss=(t,s)=>{const a=Kh(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},q1=Object.getPrototypeOf,Iw=t=>ss("HTMLElement",t),Wu=t=>{const s=K1("ownerDocument.defaultView",t);return j(t)&&(Iw(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(q1(t).constructor.name))},Zd=9,Mr=11,or=1,Ac=3,Ol=t=>t.dom.nodeName.toLowerCase(),lu=t=>t.dom.nodeType,zf=t=>s=>lu(s)===t,jd=t=>Oo(t)&&Wu(t.dom),Oo=zf(or),Al=zf(Ac),Gd=zf(Zd),Kd=zf(Mr),iu=t=>s=>Oo(s)&&Ol(s)===t,Rl=(t,s)=>{const a=t.dom;if(a.nodeType!==or)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},_s=t=>t.nodeType!==or&&t.nodeType!==Zd&&t.nodeType!==Mr||t.childElementCount===0,Fw=(t,s)=>{const a=s===void 0?document:s.dom;return _s(a)?[]:Pe(a.querySelectorAll(t),Te.fromDom)},qh=(t,s)=>{const a=s===void 0?document:s.dom;return _s(a)?O.none():O.from(a.querySelector(t)).map(Te.fromDom)},Lo=(t,s)=>t.dom===s.dom,Dl=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},fl=t=>Te.fromDom(t.dom.ownerDocument),Br=t=>Gd(t)?t:fl(t),Vf=t=>Te.fromDom(Br(t).dom.documentElement),Zu=t=>Te.fromDom(Br(t).dom.defaultView),xi=t=>O.from(t.dom.parentNode).map(Te.fromDom),Wa=t=>O.from(t.dom.parentElement).map(Te.fromDom),Yh=(t,s)=>{const a=ie(s)?s:Je;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const h=i.parentNode,v=Te.fromDom(h);if(d.push(v),a(v)===!0)break;i=h}return d},Xh=t=>O.from(t.dom.offsetParent).map(Te.fromDom),Y1=t=>O.from(t.dom.nextSibling).map(Te.fromDom),Ml=t=>Pe(t.dom.childNodes,Te.fromDom),cu=(t,s)=>{const a=t.dom.childNodes;return O.from(a[s]).map(Te.fromDom)},Jh=t=>cu(t,0),Qh=(t,s)=>({element:t,offset:s}),ng=(t,s)=>{const a=Ml(t);return a.length>0&&s<a.length?Qh(a[s],0):Qh(t,s)},og=t=>Kd(t)&&ve(t.dom.host),X1=ie(Element.prototype.attachShadow)&&ie(Node.prototype.getRootNode),sg=K(X1),Xr=X1?t=>Te.fromDom(t.dom.getRootNode()):Br,zr=t=>og(t)?t:Te.fromDom(Br(t).dom.body),ju=t=>ep(t).isSome(),ep=t=>{const s=Xr(t);return og(s)?O.some(s):O.none()},J1=t=>Te.fromDom(t.dom.host),ec=t=>{if(sg()&&ve(t.target)){const s=Te.fromDom(t.target);if(Oo(s)&&U0(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Js(a)}}return O.from(t.target)},U0=t=>ve(t.dom.shadowRoot),ca=t=>{const s=Al(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return ep(Te.fromDom(s)).fold(()=>a.body.contains(s),Me(ca,J1))},Vr=()=>tc(Te.fromDom(document)),tc=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Te.fromDom(s)},Rc=(t,s,a)=>{if(U(a)||ne(a)||pe(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},In=(t,s,a)=>{Rc(t.dom,s,a)},co=(t,s)=>{const a=t.dom;Dn(s,(i,d)=>{Rc(a,d,i)})},Jr=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Zs=(t,s)=>O.from(Jr(t,s)),F=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},q=(t,s)=>{t.dom.removeAttribute(s)},me=t=>po(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Ne=(t,s,a)=>{if(!U(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);_a(t)&&t.style.setProperty(s,a)},Lt=(t,s)=>{_a(t)&&t.style.removeProperty(s)},Rt=(t,s,a)=>{const i=t.dom;Ne(i,s,a)},qo=(t,s)=>{const a=t.dom;Dn(s,(i,d)=>{Ne(a,d,i)})},Ms=(t,s)=>{const a=t.dom;Dn(s,(i,d)=>{i.fold(()=>{Lt(a,d)},h=>{Ne(a,d,h)})})},et=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!ca(t)?ua(a,s):d},ua=(t,s)=>_a(t)?t.style.getPropertyValue(s):"",Yo=(t,s)=>{const a=t.dom,i=ua(a,s);return O.from(i).filter(d=>d.length>0)},vr=t=>{const s={},a=t.dom;if(_a(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},Q1=(t,s,a)=>{const i=Te.fromTag(t);return Rt(i,s,a),Yo(i,s).isSome()},so=(t,s)=>{const a=t.dom;Lt(a,s),ul(Zs(t,"style").map(Yr),"")&&q(t,"style")},Gu=t=>t.dom.offsetWidth,qd=(t,s)=>{const a=(S,x)=>{if(!pe(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);const T=S.dom;_a(T)&&(T.style[t]=x+"px")},i=S=>{const x=s(S);if(x<=0||x===null){const T=et(S,t);return parseFloat(T)||0}return x},d=i,h=(S,x)=>po(x,(T,D)=>{const $=et(S,D),I=$===void 0?0:parseInt($,10);return isNaN(I)?T:T+I},0);return{set:a,get:i,getOuter:d,aggregate:h,max:(S,x,T)=>{const D=h(S,T);return x>D?x-D:0}}},cs=qd("height",t=>{const s=t.dom;return ca(t)?s.getBoundingClientRect().height:s.offsetHeight}),js=t=>cs.get(t),Dc=t=>cs.getOuter(t),WT=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=cs.max(t,s,a);Rt(t,"max-height",i+"px")},ev=(t,s)=>({left:t,top:s,translate:(i,d)=>ev(t+i,s+d)}),vs=ev,Bl=t=>{const s=t.getBoundingClientRect();return vs(s.left,s.top)},rg=(t,s)=>t!==void 0?t:s!==void 0?s:0,ml=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return vs(a.offsetLeft,a.offsetTop);const h=rg(i==null?void 0:i.pageYOffset,d.scrollTop),v=rg(i==null?void 0:i.pageXOffset,d.scrollLeft),S=rg(d.clientTop,a.clientTop),x=rg(d.clientLeft,a.clientLeft);return ag(t).translate(v-x,h-S)},ag=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?vs(i.offsetLeft,i.offsetTop):ca(t)?Bl(s):vs(0,0)},tp=qd("width",t=>t.dom.offsetWidth),gs=(t,s)=>tp.set(t,s),Za=t=>tp.get(t),$l=t=>tp.getOuter(t),Lw=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=tp.max(t,s,a);Rt(t,"max-width",i+"px")},uu=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},rs=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,h=t.isiOS()&&!d,v=t.isiOS()||t.isAndroid(),S=v||i("(pointer:coarse)"),x=d||!h&&v&&i("(min-device-width:768px)"),T=h||v&&!x,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,$=!T&&!x&&!D;return{isiPad:K(d),isiPhone:K(h),isTablet:K(x),isPhone:K(T),isTouch:K(S),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:K(D),isDesktop:K($)}},ja=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},Uf=(t,s)=>{const a=ja(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return Mc(i(1),i(2))},Hw=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?lg():Uf(t,a)},lg=()=>Mc(0,0),Mc=(t,s)=>({major:t,minor:s}),sr={nu:Mc,detect:Hw,unknown:lg},gl=(t,s)=>ks(s.brands,a=>{const i=a.brand.toLowerCase();return dn(t,d=>{var h;return i===((h=d.brand)===null||h===void 0?void 0:h.toLowerCase())}).map(d=>({current:d.name,version:sr.nu(parseInt(a.version,10),0)}))}),hl=(t,s)=>{const a=String(s).toLowerCase();return dn(t,i=>i.search(a))},Bc=(t,s)=>hl(t,s).map(a=>{const i=sr.detect(a.versionRegexes,s);return{current:a.name,version:i}}),np=(t,s)=>hl(t,s).map(a=>{const i=sr.detect(a.versionRegexes,s);return{current:a.name,version:i}}),rr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ei=t=>s=>Hr(s,t),tv=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Hr(t,"edge/")&&Hr(t,"chrome")&&Hr(t,"safari")&&Hr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rr],search:t=>Hr(t,"chrome")&&!Hr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Hr(t,"msie")||Hr(t,"trident")},{name:"Opera",versionRegexes:[rr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ei("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ei("firefox")},{name:"Safari",versionRegexes:[rr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Hr(t,"safari")||Hr(t,"mobile/"))&&Hr(t,"applewebkit")}],ig=[{name:"Windows",search:Ei("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Hr(t,"iphone")||Hr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ei("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ei("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ei("linux"),versionRegexes:[]},{name:"Solaris",search:Ei("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ei("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ei("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],nv={browsers:K(tv),oses:K(ig)},zw="Edge",Wf="Chromium",Yd="IE",op="Opera",pl="Firefox",W0="Safari",Zf=()=>ov({current:void 0,version:sr.unknown()}),ov=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(zw),isChromium:i(Wf),isIE:i(Yd),isOpera:i(op),isFirefox:i(pl),isSafari:i(W0)}},jf={unknown:Zf,nu:ov,edge:K(zw),chromium:K(Wf),ie:K(Yd),opera:K(op),firefox:K(pl),safari:K(W0)},Z0="Windows",sv="iOS",cg="Android",Vw="Linux",Uw="macOS",ug="Solaris",ZT="FreeBSD",de="ChromeOS",rv=()=>vl({current:void 0,version:sr.unknown()}),vl=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(Z0),isiOS:i(sv),isAndroid:i(cg),isMacOS:i(Uw),isLinux:i(Vw),isSolaris:i(ug),isFreeBSD:i(ZT),isChromeOS:i(de)}},j0={unknown:rv,nu:vl,windows:K(Z0),ios:K(sv),android:K(cg),linux:K(Vw),macos:K(Uw),solaris:K(ug),freebsd:K(ZT),chromeos:K(de)},GT={detect:(t,s,a)=>{const i=nv.browsers(),d=nv.oses(),h=s.bind(x=>gl(i,x)).orThunk(()=>Bc(i,t)).fold(jf.unknown,jf.nu),v=np(d,t).fold(j0.unknown,j0.nu),S=rs(v,h,t,a);return{browser:h,os:v,deviceType:S}}},Ao=t=>window.matchMedia(t).matches;let $c=uu(()=>GT.detect(navigator.userAgent,O.from(navigator.userAgentData),Ao));const Oa=()=>$c(),Ku=(t,s,a,i,d,h,v)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:h,raw:v}),Ww=t=>{const s=Te.fromDom(ec(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Ye(i,a);return Ku(s,t.clientX,t.clientY,a,i,d,t)},dg=(t,s)=>a=>{t(a)&&s(Ww(a))},ti=(t,s,a,i,d)=>{const h=dg(a,i);return t.dom.addEventListener(s,h,d),{unbind:ft(Zw,t,s,h,d)}},av=(t,s,a,i)=>ti(t,s,a,i,!1),G0=(t,s,a,i)=>ti(t,s,a,i,!0),Zw=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},nc=(t,s)=>{xi(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},fg=(t,s)=>{Y1(t).fold(()=>{xi(t).each(d=>{ni(d,s)})},i=>{nc(i,s)})},jw=(t,s)=>{Jh(t).fold(()=>{ni(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},ni=(t,s)=>{t.dom.appendChild(s.dom)},Qr=(t,s,a)=>{cu(t,a).fold(()=>{ni(t,s)},i=>{nc(i,s)})},Xd=(t,s)=>{St(s,a=>{ni(t,a)})},mg=t=>{t.dom.textContent="",St(Ml(t),s=>{oc(s)})},oc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Pl=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return vs(a,i)},K0=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Gw=t=>{const s=t===void 0?window:t;return Oa().browser.isFirefox()?O.none():O.from(s.visualViewport)},sp=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),lv=t=>{const s=t===void 0?window:t,a=s.document,i=Pl(Te.fromDom(a));return Gw(s).fold(()=>{const d=s.document.documentElement,h=d.clientWidth,v=d.clientHeight;return sp(i.left,i.top,h,v)},d=>sp(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},q0=()=>Te.fromDom(document),du=(t,s)=>t.view(s).fold(K([]),i=>{const d=t.owner(i),h=du(t,d);return[i].concat(h)}),iv=(t,s)=>{const a=s.owner(t),i=du(s,a);return O.some(i)};var KT=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?O.none():O.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Te.fromDom)},owner:t=>fl(t)});const cv=t=>{const s=q0(),a=Pl(s);return iv(t,KT).fold(ft(ml,t),d=>{const h=ag(t),v=ms(d,(S,x)=>{const T=ag(x);return{left:S.left+T.left,top:S.top+T.top}},{left:0,top:0});return vs(v.left+h.left+a.left,v.top+h.top+a.top)})},Kw=(t,s,a)=>({point:t,width:s,height:a}),Gf=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),br=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),us=t=>{const s=ml(t),a=$l(t),i=Dc(t);return br(s.left,s.top,a,i)},ki=t=>{const s=cv(t),a=$l(t),i=Dc(t);return br(s.left,s.top,a,i)},Y0=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),h=Math.min(t.bottom,s.bottom),v=d-a,S=h-i;return br(a,i,v,S)},qT=(t,s)=>po(s,(a,i)=>Y0(a,i),t),Ga=()=>lv(window);var rp=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Kf=t=>{const s=h=>h(t),a=K(t),i=()=>d,d={tag:!0,inner:t,fold:(h,v)=>v(t),isValue:ot,isError:Je,map:h=>Mn.value(h(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:h=>{h(t)},toOptional:()=>O.some(t)};return d},bl=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Je,isError:ot,map:s,mapError:i=>Mn.error(i(t)),bind:s,exists:Je,forall:ot,getOr:Ie,or:Ie,getOrThunk:Nt,orThunk:Nt,getOrDie:re(String(t)),each:P,toOptional:O.none};return a},Mn={value:Kf,error:bl,fromOption:(t,s)=>t.fold(()=>bl(s),Kf)};var Ti;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Ti||(Ti={}));const qu=(t,s,a)=>t.stype===Ti.Error?s(t.serror):a(t.svalue),X0=t=>{const s=[],a=[];return St(t,i=>{qu(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},ap=(t,s)=>t.stype===Ti.Error?{stype:Ti.Error,serror:s(t.serror)}:t,J0=(t,s)=>t.stype===Ti.Value?{stype:Ti.Value,svalue:s(t.svalue)}:t,uv=(t,s)=>t.stype===Ti.Value?s(t.svalue):t,Ur=(t,s)=>t.stype===Ti.Error?s(t.serror):t,yl=t=>({stype:Ti.Value,svalue:t}),Cl=t=>({stype:Ti.Error,serror:t}),Bs={fromResult:t=>t.fold(Cl,yl),toResult:t=>qu(t,Mn.error,Mn.value),svalue:yl,partition:X0,serror:Cl,bind:uv,bindError:Ur,map:J0,mapError:ap,fold:qu},Nl=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),oi=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),gg=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},ar=(t,s)=>s,Xw=(t,s)=>Y(t)&&Y(s)?Xo(t,s):s,Q0=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const h in d)Hn(d,h)&&(a[h]=t(a[h],d[h]))}return a},Xo=Q0(Xw),Jd=Q0(ar),Ro=()=>({tag:"required",process:{}}),Pc=t=>({tag:"defaultedThunk",process:t}),ey=t=>Pc(K(t)),dv=()=>({tag:"option",process:{}}),ty=t=>({tag:"mergeWithThunk",process:t}),Yn=t=>ty(K(t)),ny=(t,s)=>t.length>0?Bs.svalue(Xo(s,Jd.apply(void 0,t))):Bs.svalue(s),oy=t=>Ye(Bs.serror,pn)(t),sy={consolidateObj:(t,s)=>{const a=Bs.partition(t);return a.errors.length>0?oy(a.errors):ny(a.values,s)},consolidateArr:t=>{const s=Bs.partition(t);return s.errors.length>0?oy(s.errors):Bs.svalue(s.values)}},ry=t=>j(t)&&It(t).length>100?" removed due to size":JSON.stringify(t,null,2),Jw=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):t;return Pe(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Qd=(t,s)=>Bs.serror([{path:t,getErrorInfo:s}]),qf=(t,s,a)=>Qd(t,()=>'Could not find valid *required* value for "'+s+'" in '+ry(a)),XT=(t,s)=>Qd(t,()=>'Choice schema did not contain choice key: "'+s+'"'),lp=(t,s,a)=>Qd(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+ry(s)),Yu=(t,s)=>Qd(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),ay=(t,s)=>Qd(t,K(s)),Nc=t=>{const s=(i,d)=>Bs.bindError(t(d),h=>ay(i,h)),a=K("val");return{extract:s,toString:a}},Yf=Nc(Bs.svalue),JT=(t,s,a,i)=>xt(s,a).fold(()=>qf(t,a,s),i),fv=(t,s,a,i)=>{const d=xt(t,s).getOrThunk(()=>a(t));return i(d)},ly=(t,s,a)=>a(xt(t,s)),Qw=(t,s,a,i)=>{const d=xt(t,s).map(h=>h===!0?a(t):h);return i(d)},iy=(t,s,a,i,d)=>{const h=S=>d.extract(s.concat([i]),S),v=S=>S.fold(()=>Bs.svalue(O.none()),x=>{const T=d.extract(s.concat([i]),x);return Bs.map(T,O.some)});switch(t.tag){case"required":return JT(s,a,i,h);case"defaultedThunk":return fv(a,i,t.process,h);case"option":return ly(a,i,v);case"defaultedOptionThunk":return Qw(a,i,t.process,v);case"mergeWithThunk":return fv(a,i,K({}),S=>{const x=Xo(t.process(a),S);return h(x)})}},fa=(t,s,a)=>{const i={},d=[];for(const h of a)gg(h,(v,S,x,T)=>{const D=iy(x,t,s,v,T);Bs.fold(D,$=>{d.push(...$)},$=>{i[S]=$})},(v,S)=>{i[v]=S(s)});return d.length>0?Bs.serror(d):Bs.svalue(i)},mv=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),lr=t=>It(Ts(t,ve)),ea=t=>{const s=rn(t),a=ms(t,(d,h)=>gg(h,v=>Xo(d,{[v]:!0}),K(d)),{});return{extract:(d,h)=>{const v=ne(h)?[]:lr(h),S=Wn(v,x=>!pr(a,x));return S.length===0?s.extract(d,h):Yu(d,S)},toString:s.toString}},rn=t=>({extract:(i,d)=>fa(i,d,t),toString:()=>`obj{
`+Pe(t,d=>gg(d,(h,v,S,x)=>h+" -> "+x.toString(),(h,v)=>"state("+h+")")).join(`
`)+"}"}),Bt=t=>({extract:(i,d)=>{const h=Pe(d,(v,S)=>t.extract(i.concat(["["+S+"]"]),v));return sy.consolidateArr(h)},toString:()=>"array("+t.toString()+")"}),Xf=(t,s)=>{const a=s!==void 0?s:Ie;return{extract:(h,v)=>{const S=[];for(const x of t){const T=x.extract(h,v);if(T.stype===Ti.Value)return{stype:Ti.Value,svalue:a(T.svalue)};S.push(T)}return sy.consolidateArr(S)},toString:()=>"oneOf("+Pe(t,h=>h.toString()).join(", ")+")"}},_i=(t,s)=>{const a=(h,v)=>Bt(Nc(t)).extract(h,v);return{extract:(h,v)=>{const S=It(v),x=a(h,S);return Bs.bind(x,T=>{const D=Pe(T,$=>Nl($,$,Ro(),s));return rn(D).extract(h,v)})},toString:()=>"setOf("+s.toString()+")"}},cy=(t,s)=>{const a=uu(s);return{extract:(h,v)=>a().extract(h,v),toString:()=>a().toString()}},uy=Ye(Bt,rn),Oi=K(Yf),Ai=(t,s)=>Nc(a=>{const i=typeof a;return t(a)?Bs.svalue(a):Bs.serror(`Expected type: ${s} but got: ${i}`)}),gv=Ai(pe,"number"),Os=Ai(U,"string"),hg=Ai(ne,"boolean"),ip=Ai(ie,"function"),ut=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>ut(t[s]));default:return!1}},QT=Nc(t=>ut(t)?Bs.svalue(t):Bs.serror("Expected value to be acceptable for sending via postMessage")),e_=(t,s,a,i)=>xt(a,i).fold(()=>lp(t,a,i),h=>h.extract(t.concat(["branch: "+i]),s)),si=(t,s)=>({extract:(d,h)=>xt(h,t).fold(()=>XT(d,t),S=>e_(d,h,s,S)),toString:()=>"chooseOn("+t+"). Possible values: "+It(s)}),pg=()=>Bt(Yf),ef=t=>Nc(s=>t(s).fold(Bs.serror,Bs.svalue)),bs=(t,s)=>_i(a=>Bs.fromResult(t(a)),s),eS=(t,s,a)=>{const i=s.extract([t],a);return Bs.mapError(i,d=>({input:a,errors:d}))},Do=(t,s,a)=>Bs.toResult(eS(t,s,a)),Eo=t=>t.fold(s=>{throw new Error(vg(s))},Ie),ma=(t,s,a)=>Eo(Do(t,s,a)),vg=t=>`Errors: 
`+Jw(t.errors).join(`
`)+`

Input object: `+ry(t.input),er=(t,s)=>si(t,Re(s,rn)),Jf=(t,s)=>cy(t,s),Wr=Nl,Ka=oi,Xu=t=>ef(s=>_n(t,s)?Mn.value(s):Mn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),We=t=>Wr(t,t,Ro(),Oi()),wl=(t,s)=>Wr(t,t,Ro(),s),tS=t=>wl(t,gv),yr=t=>wl(t,Os),sc=(t,s)=>Wr(t,t,Ro(),Xu(s)),hv=t=>wl(t,hg),Ri=t=>wl(t,ip),t_=(t,s)=>Wr(t,t,dv(),Nc(a=>Bs.serror("The field: "+t+" is forbidden. "+s))),tf=(t,s)=>Wr(t,t,Ro(),rn(s)),nS=(t,s)=>Wr(t,t,Ro(),uy(s)),ri=(t,s)=>Wr(t,t,Ro(),Bt(s)),xo=t=>Wr(t,t,dv(),Oi()),fu=(t,s)=>Wr(t,t,dv(),s),cp=t=>fu(t,gv),ga=t=>fu(t,Os),pv=(t,s)=>fu(t,Xu(s)),nf=t=>fu(t,ip),Ju=(t,s)=>fu(t,Bt(s)),Gs=(t,s)=>fu(t,rn(s)),dy=(t,s)=>fu(t,ea(s)),Ae=(t,s)=>Wr(t,t,ey(s),Oi()),ha=(t,s,a)=>Wr(t,t,ey(s),a),vv=(t,s)=>ha(t,s,gv),ai=(t,s)=>ha(t,s,Os),Il=(t,s,a)=>ha(t,s,Xu(a)),ta=(t,s)=>ha(t,s,hg),Ls=(t,s)=>ha(t,s,ip),bv=(t,s)=>ha(t,s,QT),bg=(t,s,a)=>ha(t,s,Bt(a)),of=(t,s,a)=>ha(t,s,rn(a)),cn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Fl={generate:t=>{if(!le(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return St(t,(i,d)=>{const h=It(i);if(h.length!==1)throw new Error("one and only one name per case");const v=h[0],S=i[v];if(a[v]!==void 0)throw new Error("duplicate key detected:"+v);if(v==="cata")throw new Error("cannot have a case named cata (sorry)");if(!le(S))throw new Error("case arguments must be an array");s.push(v),a[v]=(...x)=>{const T=x.length;if(T!==S.length)throw new Error("Wrong number of arguments to case "+v+". Expected "+S.length+" ("+S+"), got "+T);return{fold:(...$)=>{if($.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+$.length);return $[d].apply(null,x)},match:$=>{const I=It($);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!cl(s,J=>_n(I,J)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return $[v].apply(null,x)},log:$=>{console.log($,{constructors:s,constructor:v,params:x})}}}}),a}};Fl.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const sf=t=>{const s=[],a=[];return St(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},n_=(t,s)=>{const a={};return Dn(t,(i,d)=>{_n(s,d)||(a[d]=i)}),a},pa=(t,s)=>({[t]:s}),yv=t=>{const s={};return St(t,a=>{s[a.key]=a.value}),s},Qu=(t,s)=>n_(t,s),yg=(t,s)=>pa(t,s),Di=t=>yv(t),rf=(t,s)=>t.length===0?Mn.value(s):Mn.value(Xo(s,Jd.apply(void 0,t))),ed=t=>Mn.error(pn(t)),Mi=(t,s)=>{const a=sf(t);return a.errors.length>0?ed(a.errors):rf(a.values,s)},mu=t=>ie(t)?t:Je,oS=(t,s,a)=>{let i=t.dom;const d=mu(a);for(;i.parentNode;){i=i.parentNode;const h=Te.fromDom(i),v=s(h);if(v.isSome())return v;if(d(h))break}return O.none()},Cg=(t,s,a)=>{const i=s(t),d=mu(a);return i.orThunk(()=>d(t)?O.none():oS(t,s,d))},Cv=(t,s)=>Lo(t.element,s.event.target),sS={can:ot,abort:Je,run:P},gu=t=>{if(!pr(t,"can")&&!pr(t,"abort")&&!pr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...sS,...t}},up=(t,s)=>(...a)=>po(t,(i,d)=>i&&s(d).apply(void 0,a),!0),o_=(t,s)=>(...a)=>po(t,(i,d)=>i||s(d).apply(void 0,a),!1),fy=t=>ie(t)?{can:ot,abort:Je,run:t}:t,wv=t=>{const s=up(t,d=>d.can),a=o_(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{St(t,h=>{h.run.apply(void 0,d)})}}},Cr=K,hu=Cr("touchstart"),wg=Cr("touchmove"),Qf=Cr("touchend"),rS=Cr("touchcancel"),li=Cr("mousedown"),Sv=Cr("mousemove"),dp=Cr("mouseout"),Ll=Cr("mouseup"),td=Cr("mouseover"),Ic=Cr("focusin"),af=Cr("focusout"),rc=Cr("keydown"),aS=Cr("keyup"),lf=Cr("input"),Sg=Cr("change"),Bi=Cr("click"),lS=Cr("transitioncancel"),fp=Cr("transitionend"),my=Cr("transitionstart"),gy=Cr("selectstart"),$s=t=>K("alloy."+t),iS={tap:$s("tap")},pu=$s("focus"),xg=$s("blur.post"),Fc=$s("paste.post"),Lc=$s("receive"),ii=$s("execute"),Eg=$s("focus.item"),mp=iS.tap,ir=$s("longpress"),em=$s("sandbox.close"),hy=$s("typeahead.cancel"),tm=$s("system.init"),kg=$s("system.touchmove"),py=$s("system.touchend"),nm=$s("system.scroll"),nd=$s("system.resize"),Sl=$s("system.attached"),od=$s("system.detached"),vu=$s("system.dismissRequested"),vy=$s("system.repositionRequested"),xv=$s("focusmanager.shifted"),gp=$s("slotcontainer.visibility"),Ev=$s("system.external.element.scroll"),Tg=$s("change.tab"),cf=$s("dismiss.tab"),cS=$s("highlight"),hp=$s("dehighlight"),Co=(t,s)=>{Tv(t,t.element,s,{})},tn=(t,s,a)=>{Tv(t,t.element,s,a)},om=t=>{Co(t,ii())},kv=(t,s,a)=>{Tv(t,s,a,{})},Tv=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},by=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},s_=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},Wo=t=>Di(t),_v=(t,s)=>({key:t,value:gu({abort:s})}),uS=(t,s)=>({key:t,value:gu({can:s})}),pp=t=>({key:t,value:gu({run:(s,a)=>{a.event.prevent()}})}),Xe=(t,s)=>({key:t,value:gu({run:s})}),_g=(t,s,a)=>({key:t,value:gu({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),r_=t=>s=>Xe(t,s),Ov=t=>s=>({key:t,value:gu({run:(a,i)=>{Cv(a,i)&&s(a,i)}})}),yy=(t,s)=>Xe(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{s_(d,d.element,t,i)})}),Og=(t,s,a)=>{const i=s.partUids[a];return yy(t,i)},Ag=(t,s)=>Xe(t,(a,i)=>{const d=i.event,h=a.getSystem().getByDom(d.target).getOrThunk(()=>Cg(d.target,S=>a.getSystem().getByDom(S).toOptional(),Je).getOr(a));s(a,h,i)}),bu=t=>Xe(t,(s,a)=>{a.cut()}),a_=t=>Xe(t,(s,a)=>{a.stop()}),Rg=(t,s)=>Ov(t)(s),as=Ov(Sl()),Aa=Ov(od()),l_=Ov(tm()),Hc=r_(ii()),vp=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Ml(Te.fromDom(i))},sm=t=>t.dom.innerHTML,rm=(t,s)=>{const i=fl(t).dom,d=Te.fromDom(i.createDocumentFragment()),h=vp(s,i);Xd(d,h),mg(t),ni(t,d)},dS=t=>{const s=Te.fromTag("div"),a=Te.fromDom(t.dom.cloneNode(!0));return ni(s,a),sm(s)},fS=(t,s)=>Te.fromDom(t.dom.cloneNode(s)),Cy=t=>fS(t,!1),i_=t=>{if(og(t))return"#shadow-root";{const s=Cy(t);return dS(s)}},am=t=>i_(t),sd=(t,s,a)=>Lo(s,t.element)&&!Lo(s,a),Av=Wo([uS(pu(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return sd(t,i,d)?(console.warn(pu()+` did not get interpreted by the desired target. 
Originator: `+am(i)+`
Target: `+am(d)+`
Check the `+pu()+" event handlers"),!1):!0})]);var Rv=Object.freeze({__proto__:null,events:Av});let bp=0;const $t=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return bp++,t+"_"+i+bp+String(a)},Ra=K("alloy-id-"),yp=K("data-alloy-id"),mS=Ra(),Dv=yp(),va=(t,s)=>{const a=$t(mS+t);return Mv(s,a),a},Mv=(t,s)=>{Object.defineProperty(t.dom,Dv,{value:s,writable:!0})},ac=t=>{const s=Oo(t)?t.dom[Dv]:null;return O.from(s)},rd=t=>$t(t),wy=Ie,zc=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+am(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:K("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Je}},Sy=zc(),gS=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,h=i.indexOf("("),v=i.substring(h+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:xy(v.slice(0,1).concat(v.slice(3)))}),t},xy=t=>Pe(t,s=>Ji(s,"/*")?s.substring(0,s.length-2):s),Cp=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:xy(h)}),t},yu=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:xy(h.slice(1))}),t},wp=$t("alloy-premade"),Bv=t=>(Object.defineProperty(t.element.dom,wp,{value:t.uid,writable:!0}),yg(wp,t)),c_=t=>Hn(t.dom,wp),hS=t=>xt(t,wp),Dg=t=>yu((s,...a)=>t(s.getApis(),s,...a),t),Da={init:()=>Hl({readState:K("No State required")})},Hl=t=>t,Mg=(t,s)=>{const a=Pe(s,d=>Gs(d.name(),[We("config"),Ae("state",Da)])),i=Do("component.behaviours",rn(a),t.behaviours).fold(d=>{throw new Error(vg(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Ie);return{list:s,data:Re(i,d=>{const h=d.map(v=>({config:v.config,state:v.state.init(v.config)}));return K(h)})}},pS=t=>t.list,lm=t=>t.data,$v=(t,s)=>{const a={};return Dn(t,(i,d)=>{Dn(i,(h,v)=>{const S=xt(a,v).getOr([]);a[v]=S.concat([s(d,h)])})}),a},lc=t=>({classes:fe(t.classes)?[]:t.classes,attributes:fe(t.attributes)?{}:t.attributes,styles:fe(t.styles)?{}:t.styles}),Ey=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Pv=(t,s,a,i)=>{const d={...s};St(a,D=>{d[D.name()]=D.exhibit(t,i)});const h=$v(d,(D,$)=>({name:D,modification:$})),v=D=>ms(D,($,I)=>({...I.modification,...$}),{}),S=ms(h.classes,(D,$)=>$.modification.concat(D),[]),x=v(h.attributes),T=v(h.styles);return lc({classes:S,attributes:x,styles:T})},Bg=(t,s,a,i)=>{try{const d=Xi(a,(h,v)=>{const S=h[s],x=v[s],T=i.indexOf(S),D=i.indexOf(x);if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(i,null,2));return T<D?-1:D<T?1:0});return Mn.value(d)}catch(d){return Mn.error([d])}},ky=(t,s)=>({handler:t,purpose:s}),ad=(t,s)=>({cHandler:t,purpose:s}),vS=(t,s)=>ad(ft.apply(void 0,[t.handler].concat(s)),t.purpose),Nv=t=>t.cHandler,Iv=(t,s)=>({name:t,handler:s}),Ty=(t,s)=>{const a={};return St(t,i=>{a[i.name()]=i.handlers(s)}),a},Po=(t,s,a)=>{const i={...a,...Ty(s,t)};return $v(i,Iv)},Fv=(t,s,a,i)=>{const d=Po(t,a,i);return yS(d,s)},u_=t=>{const s=fy(t);return(a,i,...d)=>{const h=[a,i].concat(d);s.abort.apply(void 0,h)?i.stop():s.can.apply(void 0,h)&&s.run.apply(void 0,h)}},bS=(t,s)=>Mn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Pe(s,a=>a.name),null,2)]),$g=(t,s,a)=>{const i=s[a];return i?Bg("Event: "+a,"name",t,i).map(d=>{const h=Pe(d,v=>v.handler);return wv(h)}):bS(a,t)},yS=(t,s)=>{const a=ka(t,(i,d)=>(i.length===1?Mn.value(i[0].handler):$g(i,s,d)).map(v=>{const S=u_(v),x=i.length>1?Wn(s[d],T=>Kn(i,D=>D.name===T)).join(" > "):i[0].name;return yg(d,ky(S,x))}));return Mi(a,{})},zl="alloy.base.behaviour",wr=rn([Wr("dom","dom",Ro(),rn([We("tag"),Ae("styles",{}),Ae("classes",[]),Ae("attributes",{}),xo("value"),xo("innerHtml")])),We("components"),We("uid"),Ae("events",{}),Ae("apis",{}),Wr("eventOrder","eventOrder",Yn({[ii()]:["disabling",zl,"toggling","typeaheadevents"],[pu()]:[zl,"focusing","keying"],[tm()]:[zl,"disabling","toggling","representing"],[lf()]:[zl,"representing","streaming","invalidating"],[od()]:[zl,"representing","item-events","tooltipping"],[li()]:["focusing",zl,"item-type-events"],[hu()]:["focusing",zl,"item-type-events"],[td()]:["item-type-events","tooltipping"],[Lc()]:["receiving","reflecting","tooltipping"]}),Oi()),xo("domModification")]),_y=t=>Do("custom.definition",wr,t),CS=t=>({...t.dom,uid:t.uid,domChildren:Pe(t.components,s=>s.element)}),Pg=t=>t.domModification.fold(()=>lc({}),lc),Lv=t=>t.events,Oy=(t,s)=>{const a=Jr(t,s);return a===void 0||a===""?[]:a.split(" ")},p6=(t,s,a)=>{const d=Oy(t,s).concat([a]);return In(t,s,d.join(" ")),!0},Hv=(t,s,a)=>{const i=Wn(Oy(t,s),d=>d!==a);return i.length>0?In(t,s,i.join(" ")):q(t,s),!1},uf=t=>t.dom.classList!==void 0,wS=t=>Oy(t,"class"),VD=(t,s)=>p6(t,"class",s),UD=(t,s)=>Hv(t,"class",s),tr=(t,s)=>{uf(t)?t.dom.classList.add(s):VD(t,s)},Vc=t=>{(uf(t)?t.dom.classList:wS(t)).length===0&&q(t,"class")},bo=(t,s)=>{uf(t)?t.dom.classList.remove(s):UD(t,s),Vc(t)},qa=(t,s)=>uf(t)&&t.dom.classList.contains(s),Cu=(t,s)=>{St(s,a=>{tr(t,a)})},Zr=(t,s)=>{St(s,a=>{bo(t,a)})},ld=(t,s)=>cl(s,a=>qa(t,a)),Ay=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},df=t=>uf(t)?Ay(t):wS(t),Ya=t=>t.dom.value,ci=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},cr=(t,s,a)=>cu(t,s).map(d=>{if(a.exists(v=>!Lo(v,d))){const v=a.map(Ol).getOr("span"),S=Te.fromTag(v);return nc(d,S),S}else return d}),Ng=(t,s,a)=>{a.fold(()=>ni(t,s),i=>{Lo(i,s)||(nc(i,s),oc(i))})},ff=(t,s,a)=>{const i=Pe(s,a),d=Ml(t);return St(d.slice(i.length),oc),i},Ry=(t,s,a,i)=>{const d=cu(t,s),h=i(a,d),v=cr(t,s,d);return Ng(t,h.element,v),h},SS=(t,s,a)=>ff(t,s,(i,d)=>Ry(t,d,i,a)),id=(t,s)=>ff(t,s,(a,i)=>{const d=cu(t,i);return Ng(t,a,d),a}),Uc=(t,s)=>{const a=It(t),i=It(s),d=Qt(i,a),h=vo(t,(v,S)=>!Hn(s,S)||v!==s[S]).t;return{toRemove:d,toSet:h}},xS=(t,s)=>{const{class:a,style:i,...d}=me(s),{toSet:h,toRemove:v}=Uc(t.attributes,d),S=()=>{St(v,qe=>q(s,qe)),co(s,h)},x=vr(s),{toSet:T,toRemove:D}=Uc(t.styles,x),$=()=>{St(D,qe=>so(s,qe)),qo(s,T)},I=df(s),Z=Qt(I,t.classes),J=Qt(t.classes,I),ue=()=>{Cu(s,J),Zr(s,Z)},_e=qe=>{rm(s,qe)},Se=()=>{const qe=t.domChildren;id(s,qe)},be=()=>{const qe=s,Le=t.value.getOrUndefined();Le!==Ya(qe)&&ci(qe,Le!=null?Le:"")};return S(),ue(),$(),t.innerHtml.fold(Se,_e),be(),s},Dy=t=>{const s=Te.fromTag(t.tag);co(s,t.attributes),Cu(s,t.classes),qo(s,t.styles),t.innerHtml.each(i=>rm(s,i));const a=t.domChildren;return Xd(s,a),t.value.each(i=>{ci(s,i)}),s},d_=(t,s)=>{try{const a=xS(t,s);return O.some(a)}catch{return O.none()}},f_=t=>t.innerHtml.isSome()&&t.domChildren.length>0,m_=(t,s)=>{const a=d=>Ol(d)===t.tag&&!f_(t)&&!c_(d),i=s.filter(a).bind(d=>d_(t,d)).getOrThunk(()=>Dy(t));return Mv(i,t.uid),i},My=t=>{const s=xt(t,"behaviours").getOr({});return Ge(It(s),a=>{const i=s[a];return ve(i)?[i.me]:[]})},Sp=(t,s)=>Mg(t,s),g_=t=>{const s=My(t);return Sp(t,s)},h_=(t,s,a)=>{const i=CS(t),d=Pg(t),h={"alloy.base.modification":d},v=s.length>0?Pv(a,h,s,i):d;return Ey(i,v)},By=(t,s,a)=>{const i={"alloy.base.behaviour":Lv(t)};return Fv(a,t.eventOrder,s,i).getOrDie()},mf=(t,s)=>{const a=()=>qe,i=cn(Sy),d=Eo(_y(t)),h=g_(t),v=pS(h),S=lm(h),x=h_(d,v,S),T=m_(x,s),D=By(d,v,S),$=cn(d.components),I=Le=>{i.set(Le)},Z=()=>{i.set(zc(a))},J=()=>{const Le=Ml(T),ht=Ge(Le,lt=>i.get().getByDom(lt).fold(()=>[],Vo));$.set(ht)},ue=Le=>{const ht=S;return(ie(ht[Le.name()])?ht[Le.name()]:()=>{throw new Error("Could not find "+Le.name()+" in "+JSON.stringify(t,null,2))})()},_e=Le=>ie(S[Le.name()]),Se=()=>d.apis,be=Le=>S[Le]().map(ht=>ht.state.readState()).getOr("not enabled"),qe={uid:t.uid,getSystem:i.get,config:ue,hasConfigured:_e,spec:t,readState:be,getApis:Se,connect:I,disconnect:Z,element:T,syncComponents:J,components:$.get,events:D};return qe},p_=(t,s)=>{const a=xt(t,"components").getOr([]);return s.fold(()=>Pe(a,na),i=>Pe(a,(d,h)=>cd(d,cu(i,h))))},zv=(t,s)=>{const{events:a,...i}=wy(t),d=p_(i,s),h={...i,events:{...Rv,...a},components:d};return Mn.value(mf(h,s))},Hs=t=>{const s=Te.fromText(t);return Vv({element:s})},Vv=t=>{const s=ma("external.component",ea([We("element"),xo("uid")]),t),a=cn(zc()),i=S=>{a.set(S)},d=()=>{a.set(zc(()=>v))},h=s.uid.getOrThunk(()=>rd("external"));Mv(s.element,h);const v={uid:h,getSystem:a.get,config:O.none,hasConfigured:Je,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:K("No state"),syncComponents:P,components:K([]),events:{}};return Bv(v)},gf=rd,hf=t=>Hn(t,"uid"),cd=(t,s)=>hS(t).getOrThunk(()=>{const a=hf(t)?t:{uid:gf(""),...t};return zv(a,s).getOrDie()}),na=t=>cd(t,O.none()),$i=Bv;var im=(t,s,a,i,d)=>t(a,i)?O.some(a):ie(d)&&d(a)?O.none():s(a,i,d);const Ig=(t,s,a)=>{let i=t.dom;const d=ie(a)?a:Je;for(;i.parentNode;){i=i.parentNode;const h=Te.fromDom(i);if(s(h))return O.some(h);if(d(h))break}return O.none()},Fg=(t,s,a)=>im((d,h)=>h(d),Ig,t,s,a),v_=(t,s)=>{const a=d=>s(Te.fromDom(d));return dn(t.dom.childNodes,a).map(Te.fromDom)},ES=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const h=Te.fromDom(i.childNodes[d]);if(s(h))return O.some(h);const v=a(i.childNodes[d]);if(v.isSome())return v}return O.none()};return a(t.dom)},$y=(t,s,a)=>Fg(t,s,a).isSome(),ud=(t,s,a)=>Ig(t,i=>Rl(i,s),a),Uv=(t,s)=>v_(t,a=>Rl(a,s)),As=(t,s)=>qh(s,t),ba=(t,s,a)=>im((d,h)=>Rl(d,h),ud,t,s,a),xp="aria-controls",kS=t=>Fg(t,a=>{if(!Oo(a))return!1;const i=Jr(a,"id");return i!==void 0&&i.indexOf(xp)>-1}).bind(a=>{const i=Jr(a,"id"),d=Xr(a);return As(d,`[${xp}="${i}"]`)}),Py=()=>{const t=$t(xp);return{id:t,link:i=>{In(i,xp,t)},unlink:i=>{q(i,xp)}}},b_=(t,s)=>kS(s).exists(a=>cm(t,a)),cm=(t,s)=>$y(s,a=>Lo(a,t.element),Je)||b_(t,s),Ny="unknown";var um;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(um||(um={}));const Wv=cn({}),y_=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,h,v)=>{a.push({outcome:"cut",target:h,purpose:v})},logEventStopped:(d,h,v)=>{a.push({outcome:"stopped",target:h,purpose:v})},logNoParent:(d,h,v)=>{a.push({outcome:"no-parent",target:h,purpose:v})},logEventNoHandlers:(d,h)=>{a.push({outcome:"no-handlers-left",target:h})},logEventResponse:(d,h,v)=>{a.push({outcome:"response",purpose:v,target:h})},write:()=>{const d=new Date().getTime();_n(["mousemove","mouseover","mouseout",tm()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Pe(a,h=>_n(["cut","stopped","response"],h.outcome)?"{"+h.purpose+"} "+h.outcome+" at ("+am(h.target)+")":h.outcome)})}}},Lg=(t,s,a)=>{switch(xt(Wv.get(),t).orThunk(()=>{const d=It(Wv.get());return ks(d,h=>t.indexOf(h)>-1?O.some(Wv.get()[h]):O.none())}).getOr(um.NORMAL)){case um.NORMAL:return a(kp());case um.LOGGING:{const d=y_(t,s),h=a(d);return d.write(),h}case um.STOP:return!0}},C_=["alloy/data/Fields","alloy/debugging/Debugging"],Ep=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return dn(s,a=>a.indexOf("alloy")>0&&!Kn(C_,i=>a.indexOf(i)>-1)).getOr(Ny)}else return Ny},Zv={logEventCut:P,logEventStopped:P,logNoParent:P,logEventNoHandlers:P,logEventResponse:P,write:P},Hg=(t,s,a)=>Lg(t,s,a),kp=K(Zv),jv=K([We("menu"),We("selectedMenu")]),zg=K([We("item"),We("selectedItem")]);K(rn(zg().concat(jv())));const TS=K(rn(zg())),Gv=tf("initSize",[We("numColumns"),We("numRows")]),WD=()=>wl("markers",TS()),wu=()=>tf("markers",[We("backgroundMenu")].concat(jv()).concat(zg())),dm=t=>tf("markers",Pe(t,We)),xl=(t,s,a)=>(Ep(),Wr(s,s,a,ef(i=>Mn.value((...d)=>i.apply(void 0,d))))),Vn=t=>xl("onHandler",t,ey(P)),Vl=t=>xl("onKeyboardHandler",t,ey(O.none)),He=t=>xl("onHandler",t,Ro()),Vg=t=>xl("onKeyboardHandler",t,Ro()),ls=(t,s)=>Ka(t,K(s)),_S=t=>Ka(t,Ie),Kv=K(Gv),ys=(t,s,a,i,d,h,v,S=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:h,label:`${v}-${d}`,alwaysFit:S}),dd=Fl.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),qv=(t,s,a,i,d,h,v,S,x)=>t.fold(s,a,i,d,h,v,S,x),Iy=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),Fy=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),Yv=dd.southeast,Xv=dd.southwest,pf=dd.northeast,Tp=dd.northwest,Ly=dd.south,Jv=dd.north,OS=dd.east,AS=dd.west,fm=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},Ma=(t,s,a)=>Math.min(Math.max(t,s),a),ZD=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Zo=(t,s)=>_l(["left","right","top","bottom"],a=>xt(s,a).map(i=>ZD(t,i))),w_=(t,s,a)=>{const i=(x,T)=>s[x].map(D=>{const $=x==="top"||x==="bottom",I=$?a.top:a.left,J=(x==="left"||x==="top"?Math.max:Math.min)(D,T)+I;return $?Ma(J,t.y,t.bottom):Ma(J,t.x,t.right)}).getOr(T),d=i("left",t.x),h=i("top",t.y),v=i("right",t.right),S=i("bottom",t.bottom);return br(d,h,v-d,S-h)},Su="layout",Hy=t=>t.x,zy=(t,s)=>t.x+t.width/2-s.width/2,_p=(t,s)=>t.x+t.width-s.width,Op=(t,s)=>t.y-s.height,Qv=t=>t.y+t.height,RS=(t,s)=>t.y+t.height/2-s.height/2,S_=t=>t.x+t.width,Vy=(t,s)=>t.x-s.width,$r=(t,s,a)=>ys(Hy(t),Qv(t),a.southeast(),Yv(),"southeast",Zo(t,{left:1,top:3}),Su),Sr=(t,s,a)=>ys(_p(t,s),Qv(t),a.southwest(),Xv(),"southwest",Zo(t,{right:0,top:3}),Su),Ba=(t,s,a)=>ys(Hy(t),Op(t,s),a.northeast(),pf(),"northeast",Zo(t,{left:1,bottom:2}),Su),Xa=(t,s,a)=>ys(_p(t,s),Op(t,s),a.northwest(),Tp(),"northwest",Zo(t,{right:0,bottom:2}),Su),Jo=(t,s,a)=>ys(zy(t,s),Op(t,s),a.north(),Jv(),"north",Zo(t,{bottom:2}),Su),ur=(t,s,a)=>ys(zy(t,s),Qv(t),a.south(),Ly(),"south",Zo(t,{top:3}),Su),$a=(t,s,a)=>ys(S_(t),RS(t,s),a.east(),OS(),"east",Zo(t,{left:0}),Su),DS=(t,s,a)=>ys(Vy(t,s),RS(t,s),a.west(),AS(),"west",Zo(t,{right:1}),Su),Wc=()=>[$r,Sr,Ba,Xa,ur,Jo,$a,DS],MS=()=>[Sr,$r,Xa,Ba,ur,Jo,$a,DS],BS=()=>[Ba,Xa,$r,Sr,Jo,ur],$S=()=>[Xa,Ba,Sr,$r,Jo,ur],Uy=()=>[$r,Sr,Ba,Xa,ur,Jo],eb=()=>[Sr,$r,Xa,Ba,ur,Jo],tb=(t,s)=>s.universal?t:Wn(t,a=>_n(s.channels,a));var PS=Object.freeze({__proto__:null,events:t=>Wo([Xe(Lc(),(s,a)=>{const i=t.channels,d=It(i),h=a,v=tb(d,h);St(v,S=>{const x=i[S],T=x.schema,D=ma("channel["+S+`] data
Receiver: `+am(s.element),T,h.data);x.onReceive(s,D)})})])}),x_=[wl("channels",bs(Mn.value,ea([He("onReceive"),Ae("schema",Oi())])))];const Wy=(t,s,a)=>Hc(i=>{a(i,t,s)}),Zy=(t,s,a)=>l_((i,d)=>{a(i,t,s)}),E_=(t,s,a,i,d,h)=>{const v=ea(t),S=Gs(s,[dy("config",t)]);return nb(v,S,s,a,i,d,h)},k_=(t,s,a,i,d,h)=>{const v=t,S=Gs(s,[fu("config",t)]);return nb(v,S,s,a,i,d,h)},NS=(t,s,a)=>gS((d,...h)=>{const v=[d].concat(h);return d.config({name:K(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},S=>{const x=Array.prototype.slice.call(v,1);return s.apply(void 0,[d,S.config,S.state].concat(x))})},a,s),Pt=t=>({key:t,value:void 0}),nb=(t,s,a,i,d,h,v)=>{const S=$=>pr($,a)?$[a]():O.none(),x=Re(d,($,I)=>NS(a,$,I)),D={...Re(h,($,I)=>Cp($,I)),...x,revoke:ft(Pt,a),config:$=>{const I=ma(a+"-config",t,$);return{key:a,value:{config:I,me:D,configAsRaw:uu(()=>ma(a+"-config",t,$)),initialConfig:$,state:v}}},schema:K(s),exhibit:($,I)=>ru(S($),xt(i,"exhibit"),(Z,J)=>J(I,Z.config,Z.state)).getOrThunk(()=>lc({})),name:K(a),handlers:$=>S($).map(I=>xt(i,"events").getOr(()=>({}))(I.config,I.state)).getOr({})};return D},gt=t=>Di(t),T_=ea([We("fields"),We("name"),Ae("active",{}),Ae("apis",{}),Ae("state",Da),Ae("extra",{})]),jr=t=>{const s=ma("Creating behaviour: "+t.name,T_,t);return E_(s.fields,s.name,s.active,s.apis,s.extra,s.state)},__=ea([We("branchKey"),We("branches"),We("name"),Ae("active",{}),Ae("apis",{}),Ae("state",Da),Ae("extra",{})]),jy=t=>{const s=ma("Creating behaviour: "+t.name,__,t);return k_(er(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},O_=K(void 0),Ja=jr({fields:x_,name:"receiving",active:PS});var IS=Object.freeze({__proto__:null,exhibit:(t,s)=>lc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Ps=t=>t.dom.focus(),vf=t=>t.dom.blur(),Ug=t=>{const s=Xr(t).dom;return t.dom===s.activeElement},xu=(t=q0())=>O.from(t.dom.activeElement).map(Te.fromDom),ic=t=>xu(Xr(t)).filter(s=>t.dom.contains(s.dom)),Ap=(t,s)=>{const a=Xr(s),i=xu(a).bind(h=>{const v=S=>Lo(h,S);return v(s)?O.some(s):ES(s,v)}),d=t(s);return i.each(h=>{xu(a).filter(v=>Lo(v,h)).fold(()=>{Ps(h)},P)}),d},Ul=(t,s,a,i,d)=>{const h=v=>v+"px";return{position:t,left:s.map(h),top:a.map(h),right:i.map(h),bottom:d.map(h)}},FS=t=>({...t,position:O.some(t.position)}),Ky=(t,s)=>{Ms(t,FS(s))},qy=Fl.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Yy=(t,s,a,i,d,h)=>{const v=s.rect,S=v.x-a,x=v.y-i,T=v.width,D=v.height,$=d-(S+T),I=h-(x+D),Z=O.some(S),J=O.some(x),ue=O.some($),_e=O.some(I),Se=O.none();return qv(s.direction,()=>Ul(t,Z,J,Se,Se),()=>Ul(t,Se,J,ue,Se),()=>Ul(t,Z,Se,Se,_e),()=>Ul(t,Se,Se,ue,_e),()=>Ul(t,Z,J,Se,Se),()=>Ul(t,Z,Se,Se,_e),()=>Ul(t,Z,J,Se,Se),()=>Ul(t,Se,J,ue,Se))},LS=(t,s)=>t.fold(()=>{const a=s.rect;return Ul("absolute",O.some(a.x),O.some(a.y),O.none(),O.none())},(a,i,d,h)=>Yy("absolute",s,a,i,d,h),(a,i,d,h)=>Yy("fixed",s,a,i,d,h)),Xy=(t,s)=>{const a=ft(cv,s),i=t.fold(a,a,()=>{const v=Pl();return cv(s).translate(-v.left,-v.top)}),d=$l(s),h=Dc(s);return br(i.left,i.top,d,h)},A_=(t,s)=>s.fold(()=>t.fold(Ga,Ga,br),a=>t.fold(K(a),K(a),()=>{const i=HS(t,a.x,a.y);return br(i.left,i.top,a.width,a.height)})),HS=(t,s,a)=>{const i=vs(s,a),d=()=>{const h=Pl();return i.translate(-h.left,-h.top)};return t.fold(K(i),K(i),d)},R_=(t,s,a,i)=>t.fold(s,a,i);qy.none;const D_=qy.relative,Jy=qy.fixed,zS=(t,s)=>({anchorBox:t,origin:s}),M_=(t,s)=>zS(t,s),ob="data-alloy-placement",B_=(t,s)=>{In(t,ob,s)},VS=t=>Zs(t,ob),$_=t=>q(t,ob),Rp=Fl.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),P_=(t,s)=>{const{x:a,y:i,right:d,bottom:h}=s,{x:v,y:S,right:x,bottom:T,width:D,height:$}=t,I=v>=a&&v<=d,Z=S>=i&&S<=h,J=I&&Z,ue=x<=d&&x>=a,_e=T<=h&&T>=i,Se=ue&&_e,be=Math.min(D,v>=a?d-v:x-a),qe=Math.min($,S>=i?h-S:T-i);return{originInBounds:J,sizeInBounds:Se,visibleW:be,visibleH:qe}},N_=(t,s)=>{const{x:a,y:i,right:d,bottom:h}=s,{x:v,y:S,width:x,height:T}=t,D=Math.max(a,d-x),$=Math.max(i,h-T),I=Ma(v,a,D),Z=Ma(S,i,$),J=Math.min(I+x,d)-I,ue=Math.min(Z+T,h)-Z;return br(I,Z,J,ue)},US=(t,s,a)=>{const i=K(s.bottom-a.y),d=K(a.bottom-s.y),h=Iy(t,d,d,i),v=K(s.right-a.x),S=K(a.right-s.x);return{maxWidth:Fy(t,S,S,v),maxHeight:h}},I_=(t,s,a,i)=>{const d=t.bubble,h=d.offset,v=w_(i,t.restriction,h),S=t.x+h.left,x=t.y+h.top,T=br(S,x,s,a),{originInBounds:D,sizeInBounds:$,visibleW:I,visibleH:Z}=P_(T,v),J=D&&$,ue=J?T:N_(T,v),_e=ue.width>0&&ue.height>0,{maxWidth:Se,maxHeight:be}=US(t.direction,ue,i),qe={rect:ue,maxHeight:be,maxWidth:Se,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:x};return J||t.alwaysFit?Rp.fit(qe):Rp.nofit(qe,I,Z,_e)},F_=(t,s,a,i,d,h)=>{const v=i.width,S=i.height,x=(D,$,I,Z,J)=>{const ue=D(a,i,d,t,h),_e=I_(ue,v,S,h);return _e.fold(K(_e),(Se,be,qe,Le)=>(J===Le?qe>Z||be>I:!J&&Le)?_e:Rp.nofit($,I,Z,J))};return po(s,(D,$)=>{const I=ft(x,$);return D.fold(K(D),I)},Rp.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Yv(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Ie,Ie)},Dp=t=>{const s=cn(O.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(O.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:S=>{a(),s.set(O.some(S))}}},WS=()=>Dp(t=>t.destroy()),Qa=()=>Dp(t=>t.unbind()),is=()=>{const t=Dp(P);return{...t,on:a=>t.get().each(a)}},sb=ot,el=(t,s,a)=>av(t,s,sb,a),mm=(t,s,a)=>G0(t,s,sb,a),Mp=Ww,Pr=["top","bottom","right","left"],rb="data-alloy-transition-timer",ZS=(t,s)=>ld(t,s.classes),L_=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),ab=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return Uo(s,(i,d)=>{const h=t[d].map(a),v=i.map(a);return!Lf(h,v)}).isSome()},jS=t=>{const s=h=>{const S=et(t,h).split(/\s*,\s*/);return Wn(S,dl)},a=h=>{if(U(h)&&/^[\d.]+/.test(h)){const v=parseFloat(h);return Ji(h,"ms")?v:v*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return po(d,(h,v,S)=>{const x=a(i[S])+a(v);return Math.max(h,x)},0)},H_=(t,s)=>{const a=Qa(),i=Qa();let d;const h=T=>{var D;const $=(D=T.raw.pseudoElement)!==null&&D!==void 0?D:"";return Lo(T.target,t)&&Fs($)&&_n(Pr,T.raw.propertyName)},v=T=>{if(te(T)||h(T)){a.clear(),i.clear();const D=T==null?void 0:T.raw.type;(te(D)||D===fp())&&(clearTimeout(d),q(t,rb),Zr(t,s.classes))}},S=el(t,my(),T=>{h(T)&&(S.unbind(),a.set(el(t,fp(),v)),i.set(el(t,lS(),v)))}),x=jS(t);requestAnimationFrame(()=>{d=setTimeout(v,x+17),In(t,rb,d)})},z_=(t,s)=>{Cu(t,s.classes),Zs(t,rb).each(a=>{clearTimeout(parseInt(a,10)),q(t,rb)}),H_(t,s)},V_=(t,s,a,i,d,h)=>{const v=L_(i,d,h);if(v||ZS(t,i)){Rt(t,"position",a.position);const S=Xy(s,t),x=LS(s,{...d,rect:S}),T=_l(Pr,D=>x[D]);ab(a,T)&&(Ms(t,T),v&&z_(t,i),Gu(t))}else Zr(t,i.classes)},U_=t=>({width:$l(t),height:Dc(t)}),Bp=(t,s,a,i)=>{so(s,"max-height"),so(s,"max-width");const d=U_(s);return F_(s,i.preference,t,d,a,i.bounds)},Qy=(t,s)=>{const a=s.classes;Zr(t,a.off),Cu(t,a.on)},GD=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},bf=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},lb=(t,s,a)=>{const i=LS(a.origin,s);a.transition.each(d=>{V_(t,a.origin,i,d,s,a.lastPlacement)}),Ky(t,i)},W_=(t,s)=>{B_(t,s.placement)},GS=(t,s)=>{WT(t,Math.floor(s))},Z_=K((t,s)=>{GS(t,s),qo(t,{"overflow-x":"hidden","overflow-y":"auto"})}),gm=K((t,s)=>{GS(t,s)}),$p=(t,s,a)=>t[s]===void 0?a:t[s],j_=(t,s,a,i,d,h,v,S)=>{const x=$p(v,"maxHeightFunction",Z_()),T=$p(v,"maxWidthFunction",P),D=t.anchorBox,$=t.origin,I={bounds:A_($,h),origin:$,preference:i,maxHeightFunction:x,maxWidthFunction:T,lastPlacement:d,transition:S};return G_(D,s,a,I)},G_=(t,s,a,i)=>{const d=Bp(t,s,a,i);return lb(s,d,i),W_(s,d),Qy(s,d),GD(s,d,i),bf(s,d,i),{layout:d.layout,placement:d.placement}},K_=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],fd=(t,s,a,i=1)=>{const d=t*i,h=s*i,v=x=>xt(a,x).getOr([]),S=(x,T,D)=>{const $=Qt(K_,D);return{offset:vs(x,T),classesOn:Ge(D,v),classesOff:Ge($,v)}};return{southeast:()=>S(-t,s,["top","alignLeft"]),southwest:()=>S(t,s,["top","alignRight"]),south:()=>S(-t/2,s,["top","alignCentre"]),northeast:()=>S(-t,-s,["bottom","alignLeft"]),northwest:()=>S(t,-s,["bottom","alignRight"]),north:()=>S(-t/2,-s,["bottom","alignCentre"]),east:()=>S(t,-s/2,["valignCentre","left"]),west:()=>S(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>S(d,h,["top","alignLeft","inset"]),insetNorthwest:()=>S(-d,h,["top","alignRight","inset"]),insetNorth:()=>S(-d/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>S(d,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>S(-d,-h,["bottom","alignRight","inset"]),insetSouth:()=>S(-d/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>S(-d,-h/2,["valignCentre","right","inset"]),insetWest:()=>S(d,-h/2,["valignCentre","left","inset"])}},ib=()=>fd(0,0,{}),cb=Ie,eC=(t,s)=>a=>KS(a)==="rtl"?s:t,KS=t=>et(t,"direction")==="rtl"?"rtl":"ltr";var Pi;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Pi||(Pi={}));const ub="data-alloy-vertical-dir",qS=t=>$y(t,s=>Oo(s)&&Jr(s,"data-alloy-vertical-dir")===Pi.BottomToTop),md=()=>Gs("layouts",[We("onLtr"),We("onRtl"),xo("onBottomLtr"),xo("onBottomRtl")]),hm=(t,s,a,i,d,h,v)=>{const S=v.map(qS).getOr(!1),x=s.layouts.map(Z=>Z.onLtr(t)),T=s.layouts.map(Z=>Z.onRtl(t)),D=S?s.layouts.bind(Z=>Z.onBottomLtr.map(J=>J(t))).or(x).getOr(d):x.getOr(a),$=S?s.layouts.bind(Z=>Z.onBottomRtl.map(J=>J(t))).or(T).getOr(h):T.getOr(i);return eC(D,$)(t)},Pp=(t,s,a)=>{const i=s.hotspot,d=Xy(a,i.element),h=hm(t.element,s,Uy(),eb(),BS(),$S(),O.some(s.hotspot.element));return O.some(cb({anchorBox:d,bubble:s.bubble.getOr(ib()),overrides:s.overrides,layouts:h}))};var tC=[We("hotspot"),xo("bubble"),Ae("overrides",{}),md(),ls("placement",Pp)];const YS=(t,s,a)=>{const i=HS(a,s.x,s.y),d=br(i.left,i.top,s.width,s.height),h=hm(t.element,s,Wc(),MS(),Wc(),MS(),O.none());return O.some(cb({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:h}))};var q_=[We("x"),We("y"),Ae("height",0),Ae("width",0),Ae("bubble",ib()),Ae("overrides",{}),md(),ls("placement",YS)];const XS=Fl.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Y_=t=>t.fold(Ie,(s,a,i)=>s.translate(-a,-i)),X_=t=>t.fold(Ie,Ie),JS=t=>po(t,(s,a)=>s.translate(a.left,a.top),vs(0,0)),QS=t=>{const s=Pe(t,Y_);return JS(s)},nC=t=>{const s=Pe(t,X_);return JS(s)},J_=XS.screen,Q_=XS.absolute,eO=(t,s,a)=>{const i=Zu(a.root).dom,d=h=>{const v=fl(h),S=fl(t.element);return Lo(v,S)};return O.from(i.frameElement).map(Te.fromDom).filter(d).map(ml)},db=(t,s,a)=>{const i=fl(t.element),d=Pl(i),h=eO(t,s,a).getOr(d);return Q_(h,d.left,d.top)},oC=(t,s,a,i)=>{const d=J_(vs(t,s));return O.some(Kw(d,a,i))},ex=(t,s,a,i,d)=>t.map(h=>{const v=[s,h.point],S=R_(i,()=>nC(v),()=>nC(v),()=>QS(v)),x=Gf(S.left,S.top,h.width,h.height),T=a.showAbove?BS():Uy(),D=a.showAbove?$S():eb(),$=hm(d,a,T,D,T,D,O.none());return cb({anchorBox:x,bubble:a.bubble.getOr(ib()),overrides:a.overrides,layouts:$})}),tO=(t,s,a)=>{const i=db(t,a,s);return s.node.filter(ca).bind(d=>{const h=d.dom.getBoundingClientRect(),v=oC(h.left,h.top,h.width,h.height),S=s.node.getOr(t.element);return ex(v,i,s,a,S)})};var nO=[We("node"),We("root"),xo("bubble"),md(),Ae("overrides",{}),Ae("showAbove",!1),ls("placement",tO)];const oO="\uFEFF",Np="\xA0",Ip={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},Fp=Fl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),tx=(t,s,a,i)=>t.fold(s,a,i),fb=t=>t.fold(Ie,Ie,Ie),sC=Fp.before,rC=Fp.on,aC=Fp.after,nx={before:sC,on:rC,after:aC,cata:tx,getStart:fb},Lp=Fl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ox=t=>Lp.exact(t.start,t.soffset,t.finish,t.foffset),rO=t=>t.match({domRange:s=>Te.fromDom(s.startContainer),relative:(s,a)=>nx.getStart(s),exact:(s,a,i,d)=>s}),lC=Lp.domRange,aO=Lp.relative,pm=Lp.exact,lO=t=>{const s=rO(t);return Zu(s)},iC=Ip.create,Hp={domRange:lC,relative:aO,exact:pm,exactFromRange:ox,getWin:lO,range:iC},iO=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},sx=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},rx=(t,s,a)=>{const i=t.document.createRange();return iO(i,s),sx(i,a),i},ax=(t,s,a,i,d)=>{const h=t.document.createRange();return h.setStart(s.dom,a),h.setEnd(i.dom,d),h},ya=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),mb=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?O.some(a).map(ya):O.none()},Eu=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?O.some(s).map(ya):O.none()},zp=Fl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gb=(t,s,a)=>s(Te.fromDom(a.startContainer),a.startOffset,Te.fromDom(a.endContainer),a.endOffset),cO=(t,s)=>s.match({domRange:a=>({ltr:K(a),rtl:O.none}),relative:(a,i)=>({ltr:uu(()=>rx(t,a,i)),rtl:uu(()=>O.some(rx(t,i,a)))}),exact:(a,i,d,h)=>({ltr:uu(()=>ax(t,a,i,d,h)),rtl:uu(()=>O.some(ax(t,d,h,a,i)))})}),lx=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>zp.rtl(Te.fromDom(d.endContainer),d.endOffset,Te.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>gb(t,zp.ltr,a)):gb(t,zp.ltr,a)},ix=(t,s)=>{const a=cO(t,s);return lx(t,a)},hb=(t,s)=>ix(t,s).match({ltr:(i,d,h,v)=>{const S=t.document.createRange();return S.setStart(i.dom,d),S.setEnd(h.dom,v),S},rtl:(i,d,h,v)=>{const S=t.document.createRange();return S.setStart(h.dom,v),S.setEnd(i.dom,d),S}});zp.ltr,zp.rtl;const pb=(t,s,a)=>Wn(Yh(t,a),s),tl=(t,s)=>Fw(s,t),uO=(t,s,a,i)=>{const h=fl(t).dom.createRange();return h.setStart(t.dom,s),h.setEnd(a.dom,i),h},ku=(t,s,a,i)=>{const d=uO(t,s,a,i),h=Lo(t,a)&&s===i;return d.collapsed&&!h},yf=t=>O.from(t.getSelection()),Vp=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return O.some(Ip.create(Te.fromDom(s.startContainer),s.startOffset,Te.fromDom(a.endContainer),a.endOffset))}else return O.none()},Up=t=>{if(t.anchorNode===null||t.focusNode===null)return Vp(t);{const s=Te.fromDom(t.anchorNode),a=Te.fromDom(t.focusNode);return ku(s,t.anchorOffset,a,t.focusOffset)?O.some(Ip.create(s,t.anchorOffset,a,t.focusOffset)):Vp(t)}},cx=t=>yf(t).filter(s=>s.rangeCount>0).bind(Up),Zc=(t,s)=>{const a=hb(t,s);return mb(a)},gd=(t,s)=>{const a=hb(t,s);return Eu(a)},dO=((t,s)=>{const a=h=>{if(!t(h))throw new Error("Can only get "+s+" value of a "+s+" node");return i(h).getOr("")},i=h=>t(h)?O.from(h.dom.nodeValue):O.none();return{get:a,getOption:i,set:(h,v)=>{if(!t(h))throw new Error("Can only set raw "+s+" value of a "+s+" node");h.dom.nodeValue=v}}})(Al,"text"),ux=t=>dO.get(t),Zg=(t,s)=>({element:t,offset:s}),Cf=(t,s)=>{const a=Ml(t);if(a.length===0)return Zg(t,s);if(s<a.length)return Zg(a[s],0);{const i=a[a.length-1],d=Al(i)?ux(i).length:Ml(i).length;return Zg(i,d)}},jg=(t,s)=>Al(t)?Zg(t,s):Cf(t,s),Gg=t=>t.foffset!==void 0,cC=(t,s)=>s.getSelection.getOrThunk(()=>()=>cx(t))().map(i=>{if(Gg(i)){const d=jg(i.start,i.soffset),h=jg(i.finish,i.foffset);return Hp.range(d.element,d.offset,h.element,h.offset)}else return i}),vm=(t,s,a)=>{const i=Zu(s.root).dom,d=db(t,a,s),h=cC(i,s).bind(x=>{if(Gg(x))return gd(i,Hp.exactFromRange(x)).orThunk(()=>{const D=Te.fromText(oO);nc(x.start,D);const $=Zc(i,Hp.exact(D,0,D,1));return oc(D),$}).bind(D=>oC(D.left,D.top,D.width,D.height));{const T=Re(x,$=>$.dom.getBoundingClientRect()),D={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return oC(D.left,D.top,D.right-D.left,D.bottom-D.top)}}),S=cC(i,s).bind(x=>Gg(x)?Oo(x.start)?O.some(x.start):Wa(x.start):O.some(x.firstCell)).getOr(t.element);return ex(h,d,s,a,S)};var Wp=[xo("getSelection"),We("root"),xo("bubble"),md(),Ae("overrides",{}),Ae("showAbove",!1),ls("placement",vm)];const hd="link-layout",wf=t=>t.x+t.width,Zp=(t,s)=>t.x-s.width,xr=(t,s)=>t.y-s.height+t.height,fO=t=>t.y,Tu=(t,s,a)=>ys(wf(t),fO(t),a.southeast(),Yv(),"southeast",Zo(t,{left:0,top:2}),hd),vb=(t,s,a)=>ys(Zp(t,s),fO(t),a.southwest(),Xv(),"southwest",Zo(t,{right:1,top:2}),hd),Kg=(t,s,a)=>ys(wf(t),xr(t,s),a.northeast(),pf(),"northeast",Zo(t,{left:0,bottom:3}),hd),bm=(t,s,a)=>ys(Zp(t,s),xr(t,s),a.northwest(),Tp(),"northwest",Zo(t,{right:1,bottom:3}),hd),uC=()=>[Tu,vb,Kg,bm],qg=()=>[vb,Tu,bm,Kg],mO=(t,s,a)=>{const i=Xy(a,s.item.element),d=hm(t.element,s,uC(),qg(),uC(),qg(),O.none());return O.some(cb({anchorBox:i,bubble:ib(),overrides:s.overrides,layouts:d}))};var dx=[We("item"),md(),Ae("overrides",{}),ls("placement",mO)],dC=er("type",{selection:Wp,node:nO,hotspot:tC,submenu:dx,makeshift:q_});const fx=[ri("classes",Os),Il("mode","all",["all","layout","placement"])],Yg=[Ae("useFixed",Je),xo("getBounds")],jc=[wl("anchor",dC),Gs("transition",fx)],mx=()=>{const t=document.documentElement;return Jy(0,0,t.clientWidth,t.clientHeight)},gO=t=>{const s=ml(t.element),a=t.element.dom.getBoundingClientRect();return D_(s.left,s.top,a.width,a.height)},gx=(t,s,a,i,d,h)=>{const v=M_(s.anchorBox,t);return j_(v,i.element,s.bubble,s.layouts,d,a,s.overrides,h)},hx=(t,s,a,i,d)=>{const h=O.none();Xg(t,s,a,i,d,h)},Xg=(t,s,a,i,d,h)=>{const v=ma("placement.info",rn(jc),d),S=v.anchor,x=i.element,T=a.get(i.uid);Ap(()=>{Rt(x,"position","fixed");const D=Yo(x,"visibility");Rt(x,"visibility","hidden");const $=s.useFixed()?mx():gO(t);S.placement(t,S,$).each(I=>{const Z=h.orThunk(()=>s.getBounds.map(Nt)),J=gx($,I,Z,i,T,v.transition);a.set(i.uid,J)}),D.fold(()=>{so(x,"visibility")},I=>{Rt(x,"visibility",I)}),Yo(x,"left").isNone()&&Yo(x,"top").isNone()&&Yo(x,"right").isNone()&&Yo(x,"bottom").isNone()&&ul(Yo(x,"position"),"fixed")&&so(x,"position")},x)};var cc=Object.freeze({__proto__:null,position:hx,positionWithinBounds:Xg,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;St(["position","left","right","top","bottom"],h=>so(d,h)),$_(d),a.clear(i.uid)}}),ym=Object.freeze({__proto__:null,init:()=>{let t={};return Hl({readState:()=>t,clear:d=>{ve(d)?delete t[d]:t={}},set:(d,h)=>{t[d]=h},get:d=>xt(t,d)})}});const Er=jr({fields:Yg,name:"positioning",active:IS,apis:cc,state:ym}),Ca=t=>t.getSystem().isConnected(),oa=t=>{Co(t,od());const s=t.components();St(s,oa)},kr=t=>{const s=t.components();St(s,kr),Co(t,Sl())},Wl=(t,s)=>{t.getSystem().addToWorld(s),ca(t.element)&&kr(s)},jp=t=>{oa(t),t.getSystem().removeFromWorld(t)},Ni=(t,s)=>{ni(t.element,s.element)},Cm=t=>{St(t.components(),s=>oc(s.element)),mg(t.element),t.syncComponents()},hO=(t,s,a)=>{const i=t.components();Cm(t);const d=a(s),h=Qt(i,d);St(h,v=>{oa(v),t.getSystem().removeFromWorld(v)}),St(d,v=>{Ca(v)?Ni(t,v):(t.getSystem().addToWorld(v),Ni(t,v),ca(t.element)&&kr(v))}),t.syncComponents()},pO=(t,s,a)=>{const i=t.components(),d=Ge(s,S=>hS(S).toArray());St(i,S=>{_n(d,S)||jp(S)});const h=a(s),v=Qt(i,h);St(v,S=>{Ca(S)&&jp(S)}),St(h,S=>{Ca(S)||Wl(t,S)}),t.syncComponents()},_u=(t,s)=>{Jg(t,s,ni)},Jg=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),ca(t.element)&&kr(s),t.syncComponents()},bb=t=>{oa(t),oc(t.element),t.getSystem().removeFromWorld(t)},uc=t=>{const s=xi(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());bb(t),s.each(a=>{a.syncComponents()})},mC=t=>{const s=t.components();St(s,bb),mg(t.element),t.syncComponents()},gC=(t,s)=>{hC(t,s,ni)},wm=(t,s)=>{hC(t,s,fg)},hC=(t,s,a)=>{a(t,s.element);const i=Ml(s.element);St(i,d=>{s.getByDom(d).each(kr)})},px=t=>{const s=Ml(t.element);St(s,a=>{t.getByDom(a).each(oa)}),oc(t.element)},yb=(t,s,a,i)=>{a.get().each(v=>{mC(t)});const d=s.getAttachPoint(t);_u(d,t);const h=t.getSystem().build(i);return _u(t,h),a.set(h),h},pd=(t,s,a,i)=>{const d=yb(t,s,a,i);return s.onOpen(t,d),d},pC=(t,s,a,i)=>a.get().map(()=>yb(t,s,a,i)),Gc=(t,s,a,i,d)=>{ui(t,s),pd(t,s,a,i),d(),Sm(t,s)},vx=(t,s,a)=>{a.get().each(i=>{mC(t),uc(t),s.onClose(t,i),a.clear()})},vC=(t,s,a)=>a.isOpen(),vO=(t,s,a,i)=>vC(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),YD=(t,s,a)=>a.get(),bO=(t,s,a,i)=>{Yo(t.element,s).fold(()=>{q(t.element,a)},d=>{In(t.element,a,d)}),Rt(t.element,s,i)},yO=(t,s,a)=>{Zs(t.element,a).fold(()=>so(t.element,s),i=>Rt(t.element,s,i))},ui=(t,s,a)=>{const i=s.getAttachPoint(t);Rt(t.element,"position",Er.getMode(i)),bO(t,"visibility",s.cloakVisibilityAttr,"hidden")},XD=t=>Kn(["top","left","right","bottom"],s=>Yo(t,s).isSome()),Sm=(t,s,a)=>{XD(t.element)||so(t.element,"position"),yO(t,"visibility",s.cloakVisibilityAttr)};var Qg=Object.freeze({__proto__:null,cloak:ui,decloak:Sm,open:pd,openWhileCloaked:Gc,close:vx,isOpen:vC,isPartOf:vO,getState:YD,setContent:pC}),yC=Object.freeze({__proto__:null,events:(t,s)=>Wo([Xe(em(),(a,i)=>{vx(a,t,s)})])}),CO=[Vn("onOpen"),Vn("onClose"),We("isPartOf"),We("getAttachPoint"),Ae("cloakVisibilityAttr","data-precloak-visibility")],CC=Object.freeze({__proto__:null,init:()=>{const t=is(),s=K("not-implemented");return Hl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const to=jr({fields:CO,name:"sandboxing",active:yC,apis:Qg,state:CC}),vd=K("dismiss.popups"),xm=K("reposition.popups"),Cb=K("mouse.released"),wO=ea([Ae("isExtraPart",Je),Gs("fireEventInstead",[Ae("event",vu())])]),Em=t=>{const s=ma("Dismissal",wO,t);return{[vd()]:{schema:ea([We("target")]),onReceive:(a,i)=>{to.isOpen(a)&&(to.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>to.close(a),h=>Co(a,h.event)))}}}},wb=ea([Gs("fireEventInstead",[Ae("event",vy())]),Ri("doReposition")]),wC=t=>{const s=ma("Reposition",wb,t);return{[xm()]:{onReceive:a=>{to.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>Co(a,i.event))}}}},SC=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},xC=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var eh=Object.freeze({__proto__:null,onLoad:SC,onUnload:xC,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),xO=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[as((i,d)=>{SC(i,t,s)}),Aa((i,d)=>{xC(i,t,s)})]:[Zy(t,s,SC)];return Wo(a)}});const Sb=()=>{const t=cn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Hl({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},xb=()=>Hl({readState:P}),bd=()=>{const t=cn({}),s=cn({});return Hl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:v=>xt(t.get(),v).orThunk(()=>xt(s.get(),v)),update:v=>{const S=t.get(),x=s.get(),T={},D={};St(v,$=>{T[$.value]=$,xt($,"meta").each(I=>{xt(I,"text").each(Z=>{D[Z]=$})})}),t.set({...S,...T}),s.set({...x,...D})},clear:()=>{t.set({}),s.set({})}})};var km=Object.freeze({__proto__:null,memory:Sb,dataset:bd,manual:xb,init:t=>t.store.manager.state(t)});const yd=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Cx=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},Gp=(t,s,a)=>{s.store.initialValue.each(d=>{yd(t,s,a,d)})},EC=(t,s,a)=>{a.clear()};var EO=[xo("initialValue"),We("getFallbackEntry"),We("getDataKey"),We("setValue"),ls("manager",{setValue:yd,getValue:Cx,onLoad:Gp,onUnload:EC,state:bd})];const Ou=(t,s,a)=>s.store.getValue(t),wx=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},kO=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var Sx=[We("getValue"),Ae("setValue",P),xo("initialValue"),ls("manager",{setValue:wx,getValue:Ou,onLoad:kO,onUnload:P,state:Da.init})];const kC=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},th=(t,s,a)=>a.get(),TC=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},TO=(t,s,a)=>{a.clear()};var nh=[xo("initialValue"),ls("manager",{setValue:kC,getValue:th,onLoad:TC,onUnload:TO,state:Sb})],xx=[ha("store",{mode:"memory"},er("mode",{memory:nh,manual:Sx,dataset:EO})),Vn("onSetValue"),Ae("resetOnDom",!1)];const At=jr({fields:xx,name:"representing",active:xO,apis:eh,extra:{setValueFrom:(t,s)=>{const a=At.getValue(s);At.setValue(t,a)}},state:km}),dr=(t,s)=>of(t,{},Pe(s,a=>t_(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Ka("dump",Ie)])),oh=t=>t.dump,zs=(t,s)=>({...gt(s),...t.dump}),Ii={field:dr,augment:zs,get:oh},Kp="placeholder",sh=Fl.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),_C=t=>Hn(t,"uiType"),kb=(t,s,a,i)=>t.exists(d=>d!==a.owner)?sh.single(!0,K(a)):xt(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+It(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),Kc=(t,s,a,i)=>_C(a)&&a.uiType===Kp?kb(t,s,a,i):sh.single(!1,K(a)),Tb=(t,s,a,i)=>Kc(t,s,a,i).fold((h,v)=>{const S=_C(a)?v(s,a.config,a.validated):v(s),x=xt(S,"components").getOr([]),T=Ge(x,D=>Tb(t,s,D,i));return[{...S,components:T}]},(h,v)=>{if(_C(a)){const S=v(s,a.config,a.validated);return a.validated.preprocess.getOr(Ie)(S)}else return v(s)}),_O=(t,s,a,i)=>Ge(a,d=>Tb(t,s,d,i)),di=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},h=()=>s.fold((v,S)=>v,(v,S)=>v);return{name:K(t),required:h,used:i,replace:d}},Tr=(t,s,a,i)=>{const d=Re(i,(v,S)=>di(S,v)),h=_O(t,s,a,d);return Dn(d,v=>{if(v.used()===!1&&v.required())throw new Error("Placeholder: "+v.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),h},OC=sh.single,_b=sh.multiple,Tm=K(Kp),rh=Fl.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),qp=Ae("factory",{sketch:Ie}),Ob=Ae("schema",[]),Ab=We("name"),Rb=Wr("pname","pname",Pc(t=>"<alloy."+$t(t.name)+">"),Oi()),Ex=Ka("schema",()=>[xo("preprocess")]),ah=Ae("defaults",K({})),Cd=Ae("overrides",K({})),kx=rn([qp,Ob,Ab,Rb,ah,Cd]),AC=rn([qp,Ob,Ab,ah,Cd]),Db=rn([qp,Ob,Ab,Rb,ah,Cd]),Tx=rn([qp,Ex,Ab,We("unit"),Rb,ah,Cd]),Yp=t=>t.fold(O.some,O.none,O.some,O.some),Xp=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},_m=t=>t.fold(Ie,Ie,Ie,Ie),xf=(t,s)=>a=>{const i=ma("Converting part type",s,a);return t(i)},Nr=xf(rh.required,kx),dc=xf(rh.external,AC),Fi=xf(rh.optional,Db),Mb=xf(rh.group,Tx),fc=K("entirety");var OO=Object.freeze({__proto__:null,required:Nr,external:dc,optional:Fi,group:Mb,asNamedPart:Yp,name:Xp,asCommon:_m,original:fc});const Bb=(t,s,a,i)=>Xo(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),RC=(t,s,a)=>{const i={},d={};return St(a,h=>{h.fold(v=>{i[v.pname]=OC(!0,(S,x,T)=>v.factory.sketch(Bb(S,v,x,T)))},v=>{const S=s.parts[v.name];d[v.name]=K(v.factory.sketch(Bb(s,v,S[fc()]),S))},v=>{i[v.pname]=OC(!1,(S,x,T)=>v.factory.sketch(Bb(S,v,x,T)))},v=>{i[v.pname]=_b(!0,(S,x,T)=>{const D=S[v.name];return Pe(D,$=>v.factory.sketch(Xo(v.defaults(S,$,T),$,v.overrides(S,$))))})})}),{internals:K(i),externals:K(d)}},DC=(t,s)=>{const a={};return St(s,i=>{Yp(i).each(d=>{const h=_x(t,d.pname);a[d.name]=v=>{const S=ma("Part: "+d.name+" in "+t,rn(d.schema),v);return{...h,config:v,validated:S}}})}),a},_x=(t,s)=>({uiType:Tm(),owner:t,name:s}),Om=(t,s,a)=>({uiType:Tm(),owner:t,name:s,config:a,validated:{}}),Ox=t=>Ge(t,s=>s.fold(O.none,O.some,O.none,O.none).map(a=>tf(a.name,a.schema.concat([_S(fc())]))).toArray()),AO=t=>Pe(t,Xp),MC=(t,s,a)=>RC(t,s,a),BC=(t,s,a)=>Tr(O.some(t),s,s.components,a),No=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Ef=(t,s,a)=>No(t,s,a).getOrDie("Could not find part: "+a),Ax=(t,s,a)=>{const i={},d=s.partUids,h=t.getSystem();return St(a,v=>{i[v]=K(h.getByUid(d[v]))}),i},Rx=(t,s)=>{const a=t.getSystem();return Re(s.partUids,(i,d)=>K(a.getByUid(i)))},Dx=t=>It(t.partUids),$C=(t,s,a)=>{const i={},d=s.partUids,h=t.getSystem();return St(a,v=>{i[v]=K(h.getByUid(d[v]).getOrDie())}),i},Mx=(t,s)=>{const a=AO(s);return Di(Pe(a,i=>({key:i,value:t+"-"+i})))},PC=t=>Wr("partUids","partUids",ty(s=>Mx(s.uid,t)),Oi());var NC=Object.freeze({__proto__:null,generate:DC,generateOne:Om,schemas:Ox,names:AO,substitutes:MC,components:BC,defaultUids:Mx,defaultUidsSchema:PC,getAllParts:Rx,getAllPartNames:Dx,getPart:No,getPartOrDie:Ef,getParts:Ax,getPartsOrDie:$C});const Bx=(t,s)=>(t.length>0?[tf("parts",t)]:[]).concat([We("uid"),Ae("dom",{}),Ae("components",[]),_S("originalSpec"),Ae("debug.sketcher",{})]).concat(s),IC=(t,s,a,i,d)=>{const h=Bx(i,d);return ma(t+" [SpecSchema]",ea(h.concat(s)),a)},RO=(t,s,a,i)=>{const d=kf(i),h=IC(t,s,d,[],[]);return a(h,d)},$b=(t,s,a,i,d)=>{const h=kf(d),v=Ox(a),S=PC(a),x=IC(t,s,h,v,[S]),T=MC(t,x,a),D=BC(t,x,T.internals());return i(x,D,h,T.externals())},DO=t=>Hn(t,"uid"),kf=t=>DO(t)?t:{...t,uid:rd("uid")},Jp=t=>t.uid!==void 0,FC=ea([We("name"),We("factory"),We("configFields"),Ae("apis",{}),Ae("extraApis",{})]),MO=ea([We("name"),We("factory"),We("configFields"),We("partFields"),Ae("apis",{}),Ae("extraApis",{})]),nr=t=>{const s=ma("Sketcher for "+t.name,FC,t),a=h=>RO(s.name,s.configFields,s.factory,h),i=Re(s.apis,Dg),d=Re(s.extraApis,(h,v)=>Cp(h,v));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},fr=t=>{const s=ma("Sketcher for "+t.name,MO,t),a=v=>$b(s.name,s.configFields,s.partFields,s.factory,v),i=DC(s.name,s.partFields),d=Re(s.apis,Dg),h=Re(s.extraApis,(v,S)=>Cp(v,S));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...h}},Am=t=>iu("input")(t)&&Jr(t,"type")!=="radio"||iu("textarea")(t);var Ft=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const Rm=[We("find")],Qn=jr({fields:Rm,name:"composing",apis:Ft}),$x=["input","button","textarea","select"],Qp=(t,s,a)=>{(s.disabled()?Dm:Nb)(t,s)},e1=(t,s)=>s.useNative===!0&&_n($x,Ol(t.element)),BO=t=>F(t.element,"disabled"),Px=t=>{In(t.element,"disabled","disabled")},LC=t=>{q(t.element,"disabled")},$O=t=>Jr(t.element,"aria-disabled")==="true",Nx=t=>{In(t.element,"aria-disabled","true")},HC=t=>{In(t.element,"aria-disabled","false")},Dm=(t,s,a)=>{s.disableClass.each(d=>{tr(t.element,d)}),(e1(t,s)?Px:Nx)(t),s.onDisabled(t)},Nb=(t,s,a)=>{s.disableClass.each(d=>{bo(t.element,d)}),(e1(t,s)?LC:HC)(t),s.onEnabled(t)},Ix=(t,s)=>e1(t,s)?BO(t):$O(t);var Fx=Object.freeze({__proto__:null,enable:Nb,disable:Dm,isDisabled:Ix,onLoad:Qp,set:(t,s,a,i)=>{(i?Dm:Nb)(t,s)}}),PO=Object.freeze({__proto__:null,exhibit:(t,s)=>lc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Wo([_v(ii(),(a,i)=>Ix(a,t)),Zy(t,s,Qp)])}),eM=[Ls("disabled",Je),Ae("useNative",!0),xo("disableClass"),Vn("onDisabled"),Vn("onEnabled")];const un=jr({fields:eM,name:"disabling",active:PO,apis:Fx}),NO=(t,s,a,i)=>{const d=tl(t.element,"."+s.highlightClass);St(d,h=>{Kn(i,S=>Lo(S.element,h))||(bo(h,s.highlightClass),t.getSystem().getByDom(h).each(S=>{s.onDehighlight(t,S),Co(S,hp())}))})},Hx=(t,s,a)=>NO(t,s,a,[]),IO=(t,s,a,i)=>{lh(t,s,a,i)&&(bo(i.element,s.highlightClass),s.onDehighlight(t,i),Co(i,hp()))},t1=(t,s,a,i)=>{NO(t,s,a,[i]),lh(t,s,a,i)||(tr(i.element,s.highlightClass),s.onHighlight(t,i),Co(i,cS()))},tM=(t,s,a)=>{VC(t,s).each(i=>{t1(t,s,a,i)})},Ib=(t,s,a)=>{UC(t,s).each(i=>{t1(t,s,a,i)})},FO=(t,s,a,i)=>{zC(t,s,a,i).fold(d=>{throw d},d=>{t1(t,s,a,d)})},wd=(t,s,a,i)=>{const d=Sd(t,s);dn(d,i).each(v=>{t1(t,s,a,v)})},lh=(t,s,a,i)=>qa(i.element,s.highlightClass),LO=(t,s,a)=>As(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),zC=(t,s,a,i)=>{const d=tl(t.element,"."+s.itemClass);return O.from(d[i]).fold(()=>Mn.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},VC=(t,s,a)=>As(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),UC=(t,s,a)=>{const i=tl(t.element,"."+s.itemClass);return(i.length>0?O.some(i[i.length-1]):O.none()).bind(h=>t.getSystem().getByDom(h).toOptional())},WC=(t,s,a,i)=>{const d=tl(t.element,"."+s.itemClass);return $o(d,v=>qa(v,s.highlightClass)).bind(v=>{const S=fm(v,i,0,d.length-1);return t.getSystem().getByDom(d[S]).toOptional()})},HO=(t,s,a)=>WC(t,s,a,-1),zO=(t,s,a)=>WC(t,s,a,1),Sd=(t,s,a)=>{const i=tl(t.element,"."+s.itemClass);return su(Pe(i,d=>t.getSystem().getByDom(d).toOptional()))};var n1=Object.freeze({__proto__:null,dehighlightAll:Hx,dehighlight:IO,highlight:t1,highlightFirst:tM,highlightLast:Ib,highlightAt:FO,highlightBy:wd,isHighlighted:lh,getHighlighted:LO,getFirst:VC,getLast:UC,getPrevious:HO,getNext:zO,getCandidates:Sd}),VO=[We("highlightClass"),We("itemClass"),Vn("onHighlight"),Vn("onDehighlight")];const go=jr({fields:VO,name:"highlighting",apis:n1}),UO=[8],mc=[9],qc=[13],Fb=[27],El=[32],ih=[37],o1=[38],s1=[39],ch=[40],nM=(t,s,a)=>{const i=ps(t.slice(0,s)),d=ps(t.slice(s+1));return dn(i.concat(d),a)},zx=(t,s,a)=>{const i=ps(t.slice(0,s));return dn(i,a)},oM=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return dn(d.concat(i),a)},sM=(t,s,a)=>{const i=t.slice(s+1);return dn(i,a)},no=t=>s=>{const a=s.raw;return _n(t,a.which)},Li=t=>s=>cl(t,a=>a(s)),xd=t=>t.raw.shiftKey===!0,Lb=t=>t.raw.ctrlKey===!0,Tf=Oe(xd),jn=(t,s)=>({matches:t,classification:s}),Vx=(t,s)=>dn(t,i=>i.matches(s)).map(i=>i.classification),Ux=(t,s,a)=>{s.exists(d=>a.exists(h=>Lo(h,d)))||tn(t,xv(),{prevFocus:s,newFocus:a})},ZC=()=>{const t=a=>ic(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const h=t(a);Ux(a,d,h)}}},Wx=()=>{const t=a=>go.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(P,v=>{go.highlight(a,v)});const h=t(a);Ux(a,d,h)}}};var Mm;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Mm||(Mm={}));const Bm=(t,s,a,i,d)=>{const h=()=>t.concat([Ae("focusManager",ZC()),ha("focusInside","onFocus",ef(T=>_n(["onFocus","onEnterOrSpace","onApi"],T)?Mn.value(T):Mn.error("Invalid value for focusInside"))),ls("handler",x),ls("state",s),ls("sendFocusIn",d)]),v=(T,D,$,I,Z)=>{const J=$(T,D,I,Z);return Vx(J,D.event).bind(ue=>ue(T,D,I,Z))},x={schema:h,processKey:v,toEvents:(T,D)=>{const $=T.focusInside!==Mm.OnFocusMode?O.none():d(T).map(J=>Xe(pu(),(ue,_e)=>{J(ue,T,D),_e.stop()})),I=(J,ue)=>{const _e=no(El.concat(qc))(ue.event);T.focusInside===Mm.OnEnterOrSpaceMode&&_e&&Cv(J,ue)&&d(T).each(Se=>{Se(J,T,D),ue.stop()})},Z=[Xe(rc(),(J,ue)=>{v(J,ue,a,T,D).fold(()=>{I(J,ue)},_e=>{ue.stop()})}),Xe(aS(),(J,ue)=>{v(J,ue,i,T,D).each(_e=>{ue.stop()})})];return Wo($.toArray().concat(Z))}};return x},WO=t=>{const s=[xo("onEscape"),xo("onEnter"),Ae("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ae("firstTabstop",0),Ae("useTabstopAt",ot),xo("visibilitySelector")].concat([t]),a=(ue,_e)=>{const Se=ue.visibilitySelector.bind(be=>ba(_e,be)).getOr(_e);return js(Se)>0},i=(ue,_e)=>{const Se=tl(ue.element,_e.selector),be=Wn(Se,qe=>a(_e,qe));return O.from(be[_e.firstTabstop])},d=(ue,_e)=>_e.focusManager.get(ue).bind(Se=>ba(Se,_e.selector)),h=(ue,_e)=>a(ue,_e)&&ue.useTabstopAt(_e),v=(ue,_e,Se)=>{i(ue,_e).each(be=>{_e.focusManager.set(ue,be)})},S=(ue,_e,Se,be,qe)=>qe(_e,Se,Le=>h(be,Le)).fold(()=>be.cyclic?O.some(!0):O.none(),Le=>(be.focusManager.set(ue,Le),O.some(!0))),x=(ue,_e,Se,be)=>{const qe=tl(ue.element,Se.selector);return d(ue,Se).bind(Le=>$o(qe,ft(Lo,Le)).bind(lt=>S(ue,qe,lt,Se,be)))},T=(ue,_e,Se)=>{const be=Se.cyclic?nM:zx;return x(ue,_e,Se,be)},D=(ue,_e,Se)=>{const be=Se.cyclic?oM:sM;return x(ue,_e,Se,be)},$=(ue,_e,Se)=>Se.onEnter.bind(be=>be(ue,_e)),I=(ue,_e,Se)=>Se.onEscape.bind(be=>be(ue,_e)),Z=K([jn(Li([xd,no(mc)]),T),jn(no(mc),D),jn(Li([Tf,no(qc)]),$)]),J=K([jn(no(Fb),I)]);return Bm(s,Da.init,Z,J,()=>O.some(v))};var c=WO(Ka("cyclic",Je)),f=WO(Ka("cyclic",ot));const p=(t,s,a)=>(kv(t,a,ii()),O.some(!0)),y=(t,s,a)=>Am(a)&&no(El)(s.event)?O.none():p(t,s,a),E=(t,s)=>O.some(!0),A=[Ae("execute",y),Ae("useSpace",!1),Ae("useEnter",!0),Ae("useControlEnter",!1),Ae("useDown",!1)],N=(t,s,a)=>a.execute(t,s,t.element),G=(t,s,a,i)=>{const d=a.useSpace&&!Am(t.element)?El:[],h=a.useEnter?qc:[],v=a.useDown?ch:[],S=d.concat(h).concat(v);return[jn(no(S),N)].concat(a.useControlEnter?[jn(Li([Lb,no(qc)]),N)]:[])},ee=(t,s,a,i)=>a.useSpace&&!Am(t.element)?[jn(no(El),E)]:[];var ge=Bm(A,Da.init,G,ee,()=>O.none());const ke=()=>{const t=is();return Hl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,h)=>{t.set({numRows:d,numColumns:h})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Dt=Object.freeze({__proto__:null,flatgrid:ke,init:t=>t.state(t)});const Tt=t=>(s,a,i,d)=>{const h=t(s.element);return Vt(h,s,a,i,d)},Ke=(t,s)=>{const a=eC(t,s);return Tt(a)},Ot=(t,s)=>{const a=eC(s,t);return Tt(a)},je=t=>(s,a,i,d)=>Vt(t,s,a,i,d),Vt=(t,s,a,i,d)=>i.focusManager.get(s).bind(v=>t(s.element,v,i,d)).map(v=>(i.focusManager.set(s,v),!0)),vn=je,Nn=je,Qo=je,Gr=t=>t.offsetWidth<=0&&t.offsetHeight<=0,Vs=t=>!Gr(t.dom),Zl=(t,s)=>$o(t,s).map(a=>({index:a,candidates:t})),Yc=(t,s,a)=>{const i=v=>Lo(v,s),d=tl(t,a),h=Wn(d,Vs);return Zl(h,i)},r1=(t,s)=>$o(t,a=>Lo(s,a)),Hb=(t,s,a,i)=>{const d=Math.floor(s/a),h=s%a;return i(d,h).bind(v=>{const S=v.row*a+v.column;return S>=0&&S<t.length?O.some(t[S]):O.none()})},uh=(t,s,a,i,d)=>Hb(t,s,i,(h,v)=>{const x=h===a-1?t.length-h*i:i,T=fm(v,d,0,x-1);return O.some({row:h,column:T})}),Mo=(t,s,a,i,d)=>Hb(t,s,i,(h,v)=>{const S=fm(h,d,0,a-1),T=S===a-1?t.length-S*i:i,D=Ma(v,0,T-1);return O.some({row:S,column:D})}),Pa=(t,s,a,i)=>uh(t,s,a,i,1),nl=(t,s,a,i)=>uh(t,s,a,i,-1),Hi=(t,s,a,i)=>Mo(t,s,a,i,-1),fi=(t,s,a,i)=>Mo(t,s,a,i,1),dh=[We("selector"),Ae("execute",y),Vl("onEscape"),Ae("captureTab",!1),Kv()],ol=(t,s,a)=>{As(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},jC=(t,s)=>s.focusManager.get(t).bind(a=>ba(a,s.selector)),a1=(t,s,a,i)=>jC(t,a).bind(d=>a.execute(t,s,d)),zi=t=>(s,a,i,d)=>Yc(s,a,i.selector).bind(h=>t(h.candidates,h.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),sa=(t,s,a)=>a.captureTab?O.some(!0):O.none(),GC=(t,s,a)=>a.onEscape(t,s),zb=zi(nl),Zx=zi(Pa),rM=zi(Hi),jx=zi(fi),KC=K([jn(no(ih),Ke(zb,Zx)),jn(no(s1),Ot(zb,Zx)),jn(no(o1),vn(rM)),jn(no(ch),Nn(jx)),jn(Li([xd,no(mc)]),sa),jn(Li([Tf,no(mc)]),sa),jn(no(El.concat(qc)),a1)]),ZO=K([jn(no(Fb),GC),jn(no(El),E)]);var sl=Bm(dh,ke,KC,ZO,()=>O.some(ol));const aM=(t,s,a,i,d)=>{const h=S=>Ol(S)==="button"&&Jr(S,"disabled")==="disabled",v=(S,x,T)=>d(S,x,i,0,T.length-1,T[x],D=>h(T[D])?v(S,D,T):O.from(T[D]));return Yc(t,a,s).bind(S=>{const x=S.index,T=S.candidates;return v(x,x,T)})},lM=(t,s,a,i)=>aM(t,s,a,i,(d,h,v,S,x,T,D)=>{const $=Ma(h+v,S,x);return $===d?O.from(T):D($)}),Gx=(t,s,a,i)=>aM(t,s,a,i,(d,h,v,S,x,T,D)=>{const $=fm(h,v,S,x);return $===d?O.none():D($)}),v6=[We("selector"),Ae("getInitial",O.none),Ae("execute",y),Vl("onEscape"),Ae("executeOnMove",!1),Ae("allowVertical",!0),Ae("allowHorizontal",!0),Ae("cycles",!0)],b6=(t,s)=>s.focusManager.get(t).bind(a=>ba(a,s.selector)),fh=(t,s,a)=>b6(t,a).bind(i=>a.execute(t,s,i)),jO=(t,s,a)=>{s.getInitial(t).orThunk(()=>As(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},iM=(t,s,a)=>(a.cycles?Gx:lM)(t,a.selector,s,-1),Kx=(t,s,a)=>(a.cycles?Gx:lM)(t,a.selector,s,1),qC=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?fh(s,a,i):O.some(!0)),GO=(t,s,a)=>a.onEscape(t,s),y6=(t,s,a,i)=>{const d=[...a.allowHorizontal?ih:[]].concat(a.allowVertical?o1:[]),h=[...a.allowHorizontal?s1:[]].concat(a.allowVertical?ch:[]);return[jn(no(d),qC(Ke(iM,Kx))),jn(no(h),qC(Ot(iM,Kx))),jn(no(qc),fh),jn(no(El),fh)]},C6=K([jn(no(El),E),jn(no(Fb),GO)]);var w6=Bm(v6,Da.init,y6,C6,()=>O.some(jO));const qx=(t,s,a)=>O.from(t[s]).bind(i=>O.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),cM=(t,s,a,i)=>{const h=t[s].length,v=fm(a,i,0,h-1);return qx(t,s,v)},uM=(t,s,a,i)=>{const d=fm(a,i,0,t.length-1),h=t[d].length,v=Ma(s,0,h-1);return qx(t,d,v)},KO=(t,s,a,i)=>{const h=t[s].length,v=Ma(a+i,0,h-1);return qx(t,s,v)},Yx=(t,s,a,i)=>{const d=Ma(a+i,0,t.length-1),h=t[d].length,v=Ma(s,0,h-1);return qx(t,d,v)},S6=(t,s,a)=>cM(t,s,a,1),x6=(t,s,a)=>cM(t,s,a,-1),E6=(t,s,a)=>uM(t,a,s,-1),k6=(t,s,a)=>uM(t,a,s,1),l1=(t,s,a)=>KO(t,s,a,-1),T6=(t,s,a)=>KO(t,s,a,1),_6=(t,s,a)=>Yx(t,a,s,-1),qO=(t,s,a)=>Yx(t,a,s,1),O6=[tf("selectors",[We("row"),We("cell")]),Ae("cycles",!0),Ae("previousSelector",O.none),Ae("execute",y)],dM=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return As(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},fM=(t,s,a)=>ic(t.element).bind(i=>a.execute(t,s,i)),mM=(t,s)=>Pe(t,a=>tl(a,s.selectors.cell)),YC=(t,s)=>(a,i,d)=>{const h=d.cycles?t:s;return ba(i,d.selectors.row).bind(v=>{const S=tl(v,d.selectors.cell);return r1(S,i).bind(x=>{const T=tl(a,d.selectors.row);return r1(T,v).bind(D=>{const $=mM(T,d);return h($,D,x).map(I=>I.cell)})})})},gM=YC(x6,l1),hM=YC(S6,T6),A6=YC(E6,_6),YO=YC(k6,qO),R6=K([jn(no(ih),Ke(gM,hM)),jn(no(s1),Ot(gM,hM)),jn(no(o1),vn(A6)),jn(no(ch),Nn(YO)),jn(no(El.concat(qc)),fM)]),D6=K([jn(no(El),E)]);var M6=Bm(O6,Da.init,R6,D6,()=>O.some(dM));const B6=[We("selector"),Ae("execute",y),Ae("moveOnTab",!1)],XO=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),$6=(t,s,a)=>{As(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},pM=(t,s,a)=>Gx(t,a.selector,s,-1),vM=(t,s,a)=>Gx(t,a.selector,s,1),bM=(t,s,a,i)=>a.moveOnTab?Qo(pM)(t,s,a,i):O.none(),P6=(t,s,a,i)=>a.moveOnTab?Qo(vM)(t,s,a,i):O.none(),N6=K([jn(no(o1),Qo(pM)),jn(no(ch),Qo(vM)),jn(Li([xd,no(mc)]),bM),jn(Li([Tf,no(mc)]),P6),jn(no(qc),XO),jn(no(El),XO)]),yM=K([jn(no(El),E)]);var I6=Bm(B6,Da.init,N6,yM,()=>O.some($6));const F6=[Vl("onSpace"),Vl("onEnter"),Vl("onShiftEnter"),Vl("onLeft"),Vl("onRight"),Vl("onTab"),Vl("onShiftTab"),Vl("onUp"),Vl("onDown"),Vl("onEscape"),Ae("stopSpaceKeyup",!1),xo("focusIn")],Xx=(t,s,a)=>[jn(no(El),a.onSpace),jn(Li([Tf,no(qc)]),a.onEnter),jn(Li([xd,no(qc)]),a.onShiftEnter),jn(Li([xd,no(mc)]),a.onShiftTab),jn(Li([Tf,no(mc)]),a.onTab),jn(no(o1),a.onUp),jn(no(ch),a.onDown),jn(no(ih),a.onLeft),jn(no(s1),a.onRight),jn(no(El),a.onSpace)],L6=(t,s,a)=>[...a.stopSpaceKeyup?[jn(no(El),E)]:[],jn(no(Fb),a.onEscape)];var CM=Bm(F6,Da.init,Xx,L6,t=>t.focusIn);const mi=c.schema(),H6=f.schema(),wM=w6.schema(),z6=sl.schema(),V6=M6.schema(),SM=ge.schema(),U6=I6.schema(),xM=CM.schema();var EM=Object.freeze({__proto__:null,acyclic:mi,cyclic:H6,flow:wM,flatgrid:z6,matrix:V6,execution:SM,menu:U6,special:xM});const W6=t=>pr(t,"setGridSize"),nn=jy({branchKey:"mode",branches:EM,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{W6(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:Dt}),kM=(t,s)=>{Ap(()=>{hO(t,s,()=>Pe(s,t.getSystem().build))},t.element)},TM=(t,s)=>{Ap(()=>{pO(t,s,()=>SS(t.element,s,t.getSystem().buildOrPatch))},t.element)},_M=(t,s,a,i)=>{jp(s);const d=Ry(t.element,a,i,t.getSystem().buildOrPatch);Wl(t,d),t.syncComponents()},Jx=(t,s,a)=>{const i=t.getSystem().build(a);Jg(t,i,s)},mh=(t,s,a,i)=>{uc(s),Jx(t,(d,h)=>Qr(d,h,a),i)},OM=(t,s,a,i)=>(s.reuseDom?TM:kM)(t,i),AM=(t,s,a,i)=>{Jx(t,ni,i)},JO=(t,s,a,i)=>{Jx(t,jw,i)},Z6=(t,s,a,i)=>{const d=Qx(t);dn(d,v=>Lo(i.element,v.element)).each(uc)},Qx=(t,s)=>t.components(),RM=(t,s,a,i,d)=>{const h=Qx(t);return O.from(h[i]).map(v=>(d.fold(()=>uc(v),S=>{(s.reuseDom?_M:mh)(t,v,i,S)}),v))};var DM=Object.freeze({__proto__:null,append:AM,prepend:JO,remove:Z6,replaceAt:RM,replaceBy:(t,s,a,i,d)=>{const h=Qx(t);return $o(h,i).bind(v=>RM(t,s,a,v,d))},set:OM,contents:Qx});const wn=jr({fields:[ta("reuseDom",!0)],name:"replacing",apis:DM}),QO=(t,s)=>{const a=Wo(s);return jr({fields:[We("enabled")],name:t,active:{events:K(a)}})},Bn=(t,s)=>{const a=QO(t,s);return{key:t,value:{config:{},me:a,configAsRaw:K({}),initialConfig:{},state:Da}}},$m=(t,s)=>{s.ignore||(Ps(t.element),s.onFocus(t))};var K6=Object.freeze({__proto__:null,focus:$m,blur:(t,s)=>{s.ignore||vf(t.element)},isFocused:t=>Ug(t.element)}),XC=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return lc(a)},events:t=>Wo([Xe(pu(),(s,a)=>{$m(s,t),a.stop()})].concat(t.stopMousedown?[Xe(li(),(s,a)=>{a.event.prevent()})]:[]))}),MM=[Vn("onFocus"),Ae("stopMousedown",!1),Ae("ignore",!1)];const fn=jr({fields:MM,name:"focusing",active:XC,apis:K6}),gh=t=>({init:()=>{const a=cn(t);return{get:()=>a.get(),set:S=>a.set(S),clear:()=>a.set(t),readState:()=>a.get()}}}),hh=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},q6=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?tr(t.element,i):bo(t.element,i)})},JC=(t,s,a,i)=>{const d=a.get();a.set(i),q6(t,s,a),hh(t,s,a),d!==i&&s.onToggled(t,i)},e4=(t,s,a)=>{JC(t,s,a,!a.get())},Pm=(t,s,a)=>{JC(t,s,a,!0)},t4=(t,s,a)=>{JC(t,s,a,!1)},BM=(t,s,a)=>a.get(),n4=(t,s,a)=>{JC(t,s,a,s.selected)};var $M=Object.freeze({__proto__:null,onLoad:n4,toggle:e4,isOn:BM,on:Pm,off:t4,set:JC}),X6=Object.freeze({__proto__:null,exhibit:()=>lc({}),events:(t,s)=>{const a=Wy(t,s,e4),i=Zy(t,s,n4);return Wo(pn([t.toggleOnExecute?[a]:[],[i]]))}});const J6=(t,s,a)=>{In(t.element,"aria-pressed",a),s.syncWithExpanded&&nE(t,s,a)},Q6=(t,s,a)=>{In(t.element,"aria-selected",a)},tE=(t,s,a)=>{In(t.element,"aria-checked",a)},nE=(t,s,a)=>{In(t.element,"aria-expanded",a)};var o4=[Ae("selected",!1),xo("toggleClass"),Ae("toggleOnExecute",!0),Vn("onToggled"),ha("aria",{mode:"none"},er("mode",{pressed:[Ae("syncWithExpanded",!1),ls("update",J6)],checked:[ls("update",tE)],expanded:[ls("update",nE)],selected:[ls("update",Q6)],none:[ls("update",P)]}))];const Fn=jr({fields:o4,name:"toggling",active:X6,apis:$M,state:gh(!1)}),NM=()=>{const t=(s,a)=>{a.stop(),om(s)};return[Xe(Bi(),t),Xe(mp(),t),bu(hu()),bu(li())]},QC=t=>{const s=a=>Hc((i,d)=>{a(i),d.stop()});return Wo(pn([t.map(s).toArray(),NM()]))},s4="alloy.item-hover",r4="alloy.item-focus",a4="alloy.item-toggled",IM=t=>{(ic(t.element).isNone()||fn.isFocused(t))&&(fn.isFocused(t)||fn.focus(t),tn(t,s4,{item:t}))},oE=t=>{tn(t,r4,{item:t})},e8=(t,s)=>{tn(t,a4,{item:t,state:s})},FM=K(s4),t8=K(r4),n8=K(a4),LM=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),o8=t=>({aria:{mode:"checked"},...Ts(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{ie(t.onToggled)&&t.onToggled(s,a),e8(s,a)}}),s8=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:LM(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ii.augment(t.itemBehaviours,[t.toggling.fold(Fn.revoke,s=>Fn.config(o8(s))),fn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{oE(s)}}),nn.config({mode:"execution"}),At.config({store:{mode:"memory",initialValue:t.data}}),Bn("item-type-events",[...NM(),Xe(td(),IM),Xe(Eg(),fn.focus)])]),components:t.components,eventOrder:t.eventOrder}),HM=[We("data"),We("components"),We("dom"),Ae("hasSubmenu",!1),xo("toggling"),Ii.field("itemBehaviours",[Fn,fn,nn,At]),Ae("ignoreFocus",!1),Ae("domModification",{}),ls("builder",s8),Ae("eventOrder",{})],e2=t=>({dom:t.dom,components:t.components,events:Wo([a_(Eg())])}),r8=[We("dom"),We("components"),ls("builder",e2)],i1=K("item-widget"),t2=K([Nr({name:"widget",overrides:t=>({behaviours:gt([At.config({store:{mode:"manual",getValue:s=>t.data,setValue:P}})])})})]),zM=t=>{const s=MC(i1(),t,t2()),a=BC(i1(),t,s.internals()),i=h=>No(h,t,"widget").map(v=>(nn.focusIn(v),v)),d=(h,v)=>Am(v.event.target)?O.none():(()=>(t.autofocus&&v.setSource(h.element),O.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:Wo([Hc((h,v)=>{i(h).each(S=>{v.stop()})}),Xe(td(),IM),Xe(Eg(),(h,v)=>{t.autofocus?i(h):fn.focus(h)})]),behaviours:Ii.augment(t.widgetBehaviours,[At.config({store:{mode:"memory",initialValue:t.data}}),fn.config({ignore:t.ignoreFocus,onFocus:h=>{oE(h)}}),nn.config({mode:"special",focusIn:t.autofocus?h=>{i(h)}:O_(),onLeft:d,onRight:d,onEscape:(h,v)=>!fn.isFocused(h)&&!t.autofocus?(fn.focus(h),O.some(!0)):(t.autofocus&&v.setSource(h.element),O.none())})])}},VM=[We("uid"),We("data"),We("components"),We("dom"),Ae("autofocus",!1),Ae("ignoreFocus",!1),Ii.field("widgetBehaviours",[At,fn,nn]),Ae("domModification",{}),PC(t2()),ls("builder",zM)],a8=er("type",{widget:VM,item:HM,separator:r8}),l8=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),UM=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),i8=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),WM=K([Mb({factory:{sketch:t=>{const s=ma("menu.spec item",a8,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Hn(s,"uid")?s:{...s,uid:rd("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),c8=K([We("value"),We("items"),We("dom"),We("components"),Ae("eventOrder",{}),dr("menuBehaviours",[go,At,Qn,nn]),ha("movement",{mode:"menu",moveOnTab:!0},er("mode",{grid:[Kv(),ls("config",l8)],matrix:[ls("config",UM),We("rowSelector"),Ae("previousSelector",O.none)],menu:[Ae("moveOnTab",!0),ls("config",i8)]})),WD(),Ae("fakeFocus",!1),Ae("focusManager",ZC()),Vn("onHighlight"),Vn("onDehighlight")]),ZM=K("alloy.menu-focus"),jM=(t,s)=>{const a=tl(t.element,'[role="menuitemradio"][aria-checked="true"]');St(a,i=>{Lo(i,s.element)||t.getSystem().getByDom(i).each(d=>{Fn.off(d)})})},sE=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:zs(t.menuBehaviours,[go.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),At.config({store:{mode:"memory",initialValue:t.value}}),Qn.config({find:O.some}),nn.config(t.movement.config(t,t.movement))]),events:Wo([Xe(t8(),(d,h)=>{const v=h.event;d.getSystem().getByDom(v.target).each(S=>{go.highlight(d,S),h.stop(),tn(d,ZM(),{menu:d,item:S})})}),Xe(FM(),(d,h)=>{const v=h.event.item;go.highlight(d,v)}),Xe(n8(),(d,h)=>{const{item:v,state:S}=h.event;S&&Jr(v.element,"role")==="menuitemradio"&&jM(d,v)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),Nm=fr({name:"Menu",configFields:c8(),partFields:WM(),factory:sE}),l4=t=>yt(t,(s,a)=>({k:s,v:a})),GM=(t,s,a,i)=>xt(a,i).bind(d=>xt(t,d).bind(h=>{const v=GM(t,s,a,h);return O.some([h].concat(v))})).getOr([]),u8=(t,s)=>{const a={};Dn(t,(v,S)=>{St(v,x=>{a[x]=S})});const i=s,d=l4(s),h=Re(d,(v,S)=>[S].concat(GM(a,i,d,S)));return Re(a,v=>xt(h,v).getOr([v]))},d8=()=>{const t=cn({}),s=cn({}),a=cn({}),i=is(),d=cn({}),h=()=>{t.set({}),s.set({}),a.set({}),i.clear()},v=()=>i.get().isNone(),S=(ht,lt)=>{s.set({...s.get(),[ht]:{type:"prepared",menu:lt}})},x=(ht,lt,wt,Mt)=>{i.set(ht),t.set(wt),s.set(lt),d.set(Mt);const Gn=u8(Mt,wt);a.set(Gn)},T=ht=>Uo(t.get(),(lt,wt)=>lt===ht),D=(ht,lt,wt)=>ue(ht).bind(Mt=>T(ht).bind(Gn=>lt(Gn).map(Yt=>({triggeredMenu:Mt,triggeringItem:Yt,triggeringPath:wt})))),$=(ht,lt)=>{const wt=Wn(Se(ht).toArray(),Mt=>ue(Mt).isSome());return xt(a.get(),ht).bind(Mt=>{const Gn=ps(wt.concat(Mt)),Yt=Ge(Gn,(Tn,Sn)=>D(Tn,lt,Gn.slice(0,Sn+1)).fold(()=>ul(i.get(),Tn)?[]:[O.none()],ro=>[O.some(ro)]));return os(Yt)})},I=ht=>xt(t.get(),ht).map(lt=>{const wt=xt(a.get(),ht).getOr([]);return[lt].concat(wt)}),Z=ht=>xt(a.get(),ht).bind(lt=>lt.length>1?O.some(lt.slice(1)):O.none()),J=ht=>xt(a.get(),ht),ue=ht=>_e(ht).bind(KM),_e=ht=>xt(s.get(),ht),Se=ht=>xt(t.get(),ht);return{setMenuBuilt:S,setContents:x,expand:I,refresh:J,collapse:Z,lookupMenu:_e,lookupItem:Se,otherMenus:ht=>{const lt=d.get();return Qt(It(lt),ht)},getPrimary:()=>i.get().bind(ue),getMenus:()=>s.get(),clear:h,isClear:v,getTriggeringPath:$}},KM=t=>t.type==="prepared"?O.some(t.menu):O.none(),i4={init:d8,extractPreparedMenu:KM},c4=$t("tiered-menu-item-highlight"),qM=$t("tiered-menu-item-dehighlight");var jl;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(jl||(jl={}));const f8=(t,s)=>{const a=is(),i=(kt,jt,yn)=>Re(yn,(qn,ln)=>{const xn=()=>Nm.sketch({...qn,value:ln,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Fo,wo)=>{tn(Fo,c4,{menuComp:Fo,itemComp:wo})},onDehighlight:(Fo,wo)=>{tn(Fo,qM,{menuComp:Fo,itemComp:wo})},focusManager:t.fakeFocus?Wx():ZC()});return ln===jt?{type:"prepared",menu:kt.getSystem().build(xn())}:{type:"notbuilt",nbMenu:xn}}),d=i4.init(),h=kt=>{const jt=i(kt,t.data.primary,t.data.menus),yn=x();return d.setContents(t.data.primary,jt,t.data.expansions,yn),d.getPrimary()},v=kt=>At.getValue(kt).value,S=(kt,jt,yn)=>ks(jt,qn=>{if(!qn.getSystem().isConnected())return O.none();const ln=go.getCandidates(qn);return dn(ln,xn=>v(xn)===yn)}),x=kt=>Re(t.data.menus,(jt,yn)=>Ge(jt.items,qn=>qn.type==="separator"?[]:[qn.data.value])),T=go.highlight,D=(kt,jt)=>{T(kt,jt),go.getHighlighted(jt).orThunk(()=>go.getFirst(jt)).each(yn=>{t.fakeFocus?go.highlight(jt,yn):kv(kt,yn.element,Eg())})},$=(kt,jt)=>su(Pe(jt,yn=>kt.lookupMenu(yn).bind(qn=>qn.type==="prepared"?O.some(qn.menu):O.none()))),I=(kt,jt,yn)=>{const qn=$(jt,jt.otherMenus(yn));St(qn,ln=>{Zr(ln.element,[t.markers.backgroundMenu]),t.stayInDom||wn.remove(kt,ln)})},Z=kt=>a.get().getOrThunk(()=>{const jt={},yn=tl(kt.element,`.${t.markers.item}`),qn=Wn(yn,ln=>Jr(ln,"aria-haspopup")==="true");return St(qn,ln=>{kt.getSystem().getByDom(ln).each(xn=>{const Fo=v(xn);jt[Fo]=xn})}),a.set(jt),jt}),J=(kt,jt)=>{const yn=Z(kt);Dn(yn,(qn,ln)=>{const xn=_n(jt,ln);In(qn.element,"aria-expanded",xn)})},ue=(kt,jt,yn)=>O.from(yn[0]).bind(qn=>jt.lookupMenu(qn).bind(ln=>{if(ln.type==="notbuilt")return O.none();{const xn=ln.menu,Fo=$(jt,yn.slice(1));return St(Fo,wo=>{tr(wo.element,t.markers.backgroundMenu)}),ca(xn.element)||wn.append(kt,$i(xn)),Zr(xn.element,[t.markers.backgroundMenu]),D(kt,xn),I(kt,jt,yn),O.some(xn)}}));let _e;(function(kt){kt[kt.HighlightSubmenu=0]="HighlightSubmenu",kt[kt.HighlightParent=1]="HighlightParent"})(_e||(_e={}));const Se=(kt,jt,yn)=>{if(yn.type==="notbuilt"){const qn=kt.getSystem().build(yn.nbMenu());return d.setMenuBuilt(jt,qn),qn}else return yn.menu},be=(kt,jt,yn=_e.HighlightSubmenu)=>{if(jt.hasConfigured(un)&&un.isDisabled(jt))return O.some(jt);{const qn=v(jt);return d.expand(qn).bind(ln=>(J(kt,ln),O.from(ln[0]).bind(xn=>d.lookupMenu(xn).bind(Fo=>{const wo=Se(kt,xn,Fo);return ca(wo.element)||wn.append(kt,$i(wo)),t.onOpenSubmenu(kt,jt,wo,ps(ln)),yn===_e.HighlightSubmenu?(go.highlightFirst(wo),ue(kt,d,ln)):(go.dehighlightAll(wo),O.some(jt))}))))}},qe=(kt,jt)=>{const yn=v(jt);return d.collapse(yn).bind(qn=>(J(kt,qn),ue(kt,d,qn).map(ln=>(t.onCollapseMenu(kt,jt,ln),ln))))},Le=(kt,jt)=>{const yn=v(jt);return d.refresh(yn).bind(qn=>(J(kt,qn),ue(kt,d,qn)))},ht=(kt,jt)=>Am(jt.element)?O.none():be(kt,jt,_e.HighlightSubmenu),lt=(kt,jt)=>Am(jt.element)?O.none():qe(kt,jt),wt=(kt,jt)=>qe(kt,jt).orThunk(()=>t.onEscape(kt,jt).map(()=>kt)),Mt=kt=>(jt,yn)=>ba(yn.getSource(),`.${t.markers.item}`).bind(qn=>jt.getSystem().getByDom(qn).toOptional().bind(ln=>kt(jt,ln).map(ot))),Gn=Wo([Xe(ZM(),(kt,jt)=>{const yn=jt.event.item;d.lookupItem(v(yn)).each(()=>{const qn=jt.event.menu;go.highlight(kt,qn);const ln=v(jt.event.item);d.refresh(ln).each(xn=>I(kt,d,xn))})}),Hc((kt,jt)=>{const yn=jt.event.target;kt.getSystem().getByDom(yn).each(qn=>{v(qn).indexOf("collapse-item")===0&&qe(kt,qn),be(kt,qn,_e.HighlightSubmenu).fold(()=>{t.onExecute(kt,qn)},P)})}),as((kt,jt)=>{h(kt).each(yn=>{wn.append(kt,$i(yn)),t.onOpenMenu(kt,yn),t.highlightOnOpen===jl.HighlightMenuAndItem?D(kt,yn):t.highlightOnOpen===jl.HighlightJustMenu&&T(kt,yn)})}),Xe(c4,(kt,jt)=>{t.onHighlightItem(kt,jt.event.menuComp,jt.event.itemComp)}),Xe(qM,(kt,jt)=>{t.onDehighlightItem(kt,jt.event.menuComp,jt.event.itemComp)}),...t.navigateOnHover?[Xe(FM(),(kt,jt)=>{const yn=jt.event.item;Le(kt,yn),be(kt,yn,_e.HighlightParent),t.onHover(kt,yn)})]:[]]),Yt=kt=>go.getHighlighted(kt).bind(go.getHighlighted),Tn=kt=>{Yt(kt).each(jt=>{qe(kt,jt)})},Sn=kt=>{d.getPrimary().each(jt=>{D(kt,jt)})},ro=kt=>O.from(kt.components()[0]).filter(jt=>Jr(jt.element,"role")==="menu"),eo={collapseMenu:Tn,highlightPrimary:Sn,repositionMenus:kt=>{d.getPrimary().bind(yn=>Yt(kt).bind(qn=>{const ln=v(qn),xn=Lr(d.getMenus()),Fo=su(Pe(xn,i4.extractPreparedMenu));return d.getTriggeringPath(ln,wo=>S(kt,Fo,wo))}).map(qn=>({primary:yn,triggeringPath:qn}))).fold(()=>{ro(kt).each(yn=>{t.onRepositionMenu(kt,yn,[])})},({primary:yn,triggeringPath:qn})=>{t.onRepositionMenu(kt,yn,qn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:zs(t.tmenuBehaviours,[nn.config({mode:"special",onRight:Mt(ht),onLeft:Mt(lt),onEscape:Mt(wt),focusIn:(kt,jt)=>{d.getPrimary().each(yn=>{kv(kt,yn.element,Eg())})}}),go.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Qn.config({find:kt=>go.getHighlighted(kt)}),wn.config({})]),eventOrder:t.eventOrder,apis:eo,events:Gn}},m8=K("collapse-item"),g8=(t,s,a)=>({primary:t,menus:s,expansions:a}),h8=(t,s)=>({primary:t,menus:yg(t,s),expansions:{}}),YM=t=>({value:$t(m8()),meta:{text:t}}),c1=nr({name:"TieredMenu",configFields:[Vg("onExecute"),Vg("onEscape"),He("onOpenMenu"),He("onOpenSubmenu"),Vn("onRepositionMenu"),Vn("onCollapseMenu"),Ae("highlightOnOpen",jl.HighlightMenuAndItem),tf("data",[We("primary"),We("menus"),We("expansions")]),Ae("fakeFocus",!1),Vn("onHighlightItem"),Vn("onDehighlightItem"),Vn("onHover"),wu(),We("dom"),Ae("navigateOnHover",!0),Ae("stayInDom",!1),dr("tmenuBehaviours",[nn,go,Qn,wn]),Ae("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:f8,extraApis:{tieredData:g8,singleData:h8,collapseItem:YM}}),p8=(t,s,a,i,d)=>{const h=()=>t.lazySink(s),v=i.type==="horizontal"?{layouts:{onLtr:()=>Uy(),onRtl:()=>eb()}}:{},S=T=>T.length===2,x=T=>S(T)?v:{};return c1.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(to.close(s),t.onEscape.map(T=>T(s)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(T,D)=>{Er.positionWithinBounds(h().getOrDie(),D,a,d())},onOpenSubmenu:(T,D,$,I)=>{const Z=h().getOrDie();Er.position(Z,$,{anchor:{type:"submenu",item:D,...x(I)}})},onRepositionMenu:(T,D,$)=>{const I=h().getOrDie();Er.positionWithinBounds(I,D,a,d()),St($,Z=>{const J=x(Z.triggeringPath);Er.position(I,Z.triggeredMenu,{anchor:{type:"submenu",item:Z.triggeringItem,...J}})})}})},v8=(t,s)=>{const a=(I,Z)=>t.getRelated(I).exists(ue=>cm(ue,Z)),i=(I,Z)=>{to.setContent(I,Z)},d=(I,Z,J)=>{const ue=O.none;h(I,Z,J,ue)},h=(I,Z,J,ue)=>{const _e=t.lazySink(I).getOrDie();to.openWhileCloaked(I,Z,()=>Er.positionWithinBounds(_e,I,J,ue())),At.setValue(I,O.some({mode:"position",config:J,getBounds:ue}))},v=(I,Z,J)=>{S(I,Z,J,O.none)},S=(I,Z,J,ue)=>{const _e=p8(t,I,Z,J,ue);to.open(I,_e),At.setValue(I,O.some({mode:"menu",menu:_e}))},x=I=>{to.isOpen(I)&&(At.setValue(I,O.none()),to.close(I))},T=I=>to.getState(I),D=I=>{to.isOpen(I)&&At.getValue(I).each(Z=>{switch(Z.mode){case"menu":to.getState(I).each(c1.repositionMenus);break;case"position":const J=t.lazySink(I).getOrDie();Er.positionWithinBounds(J,I,Z.config,Z.getBounds());break}})},$={setContent:i,showAt:d,showWithinBounds:h,showMenuAt:v,showMenuWithinBounds:S,hide:x,getContent:T,reposition:D,isOpen:to.isOpen};return{uid:t.uid,dom:t.dom,behaviours:zs(t.inlineBehaviours,[to.config({isPartOf:(I,Z,J)=>cm(Z,J)||a(I,J),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),At.config({store:{mode:"memory",initialValue:O.none()}}),Ja.config({channels:{...Em({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})}),...wC({...t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({}),doReposition:D})}})]),eventOrder:t.eventOrder,apis:$}},Rs=nr({name:"InlineView",configFields:[We("lazySink"),Vn("onShow"),Vn("onHide"),nf("onEscape"),dr("inlineBehaviours",[to,At,Ja]),Gs("fireDismissalEventInstead",[Ae("event",vu())]),Gs("fireRepositionEventInstead",[Ae("event",vy())]),Ae("getRelated",O.none),Ae("isExtraPart",Je),Ae("eventOrder",O.none)],factory:v8,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var rE=tinymce.util.Tools.resolve("tinymce.util.Delay");const wa=nr({name:"Button",factory:t=>{const s=QC(t.action),a=t.dom.tag,i=h=>xt(t.dom,"attributes").bind(v=>xt(v,h)),d=()=>{if(a==="button"){const h=i("type").getOr("button"),v=i("role").map(S=>({role:S})).getOr({});return{type:h,...v}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Ii.augment(t.buttonBehaviours,[fn.config({}),nn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Ae("uid",void 0),We("dom"),Ae("components",[]),Ii.field("buttonBehaviours",[fn,nn]),xo("action"),xo("role"),Ae("eventOrder",{})]}),ko=t=>{const s=Jp(t)&&pr(t,"uid")?t.uid:rd("memento");return{get:h=>h.getSystem().getByUid(s).getOrDie(),getOpt:h=>h.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var rl=tinymce.util.Tools.resolve("tinymce.util.I18n");const XM={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},JM="temporary-placeholder",_f=t=>()=>xt(t,JM).getOr("!not found!"),u4=(t,s)=>{const a=t.toLowerCase();if(rl.isRtl()){const i=Va(a,"-rtl");return Hn(s,i)?i:a}else return a},QM=(t,s)=>xt(s,u4(t,s)),gc=(t,s)=>{const a=s();return QM(t,a).getOrThunk(_f(a))},eB=(t,s,a)=>{const i=s();return QM(t,i).or(a).getOrThunk(_f(i))},tB=t=>rl.isRtl()?Hn(XM,t):!1,aE=()=>Bn("add-focusable",[as(t=>{Uv(t.element,"svg").each(s=>In(s,"focusable","false"))})]),nB=(t,s,a,i)=>{var d,h;const v=tB(s)?["tox-icon--flip"]:[],S=xt(a,u4(s,a)).or(i).getOrThunk(_f(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(v),innerHtml:S},behaviours:gt([...(h=t.behaviours)!==null&&h!==void 0?h:[],aE()])}},hc=(t,s,a,i=O.none())=>nB(s,t,a(),i),b8=(t,s,a)=>{const i=a(),d=dn(t,h=>Hn(i,u4(h,i)));return nB(s,d.getOr(JM),i,O.none())},y8={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Ub=nr({name:"Notification",factory:t=>{const s=ko({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:gt([wn.config({})])}),a=Z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Z}%`}}}),i=Z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Z}%`}}),d=ko({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},i(0)],behaviours:gt([wn.config({})])}),S={updateProgress:(Z,J)=>{Z.getSystem().isConnected()&&d.getOpt(Z).each(ue=>{wn.set(ue,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(J)]},i(J)])})},updateText:(Z,J)=>{if(Z.getSystem().isConnected()){const ue=s.get(Z);wn.set(ue,[Hs(J)])}}},x=pn([t.icon.toArray(),t.level.toArray(),t.level.bind(Z=>O.from(y8[Z])).toArray()]),T=ko(wa.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[hc("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:Z=>{t.onAction(Z)}})),D=b8(x,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),$={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:gt([wn.config({})])},I=[D,$];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(Z=>["tox-notification","tox-notification--in",`tox-notification--${Z}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:gt([fn.config({}),Bn("notification-events",[Xe(Ic(),Z=>{T.getOpt(Z).each(fn.focus)})])]),components:I.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[T.asSpec()]:[]),apis:S}},configFields:[xo("level"),We("progress"),xo("icon"),We("onAction"),We("text"),We("iconProvider"),We("translationProvider"),ta("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var d4=(t,s,a)=>{const i=s.backstage.shared,d=()=>{const x=us(Te.fromDom(t.getContentAreaContainer())),T=Ga(),D=Ma(T.x,x.x,x.right),$=Ma(T.y,x.y,x.bottom),I=Math.max(x.right,T.right),Z=Math.max(x.bottom,T.bottom);return O.some(br(D,$,I-D,Z-$))};return{open:(x,T)=>{const D=()=>{T(),Rs.hide(I)},$=na(Ub.sketch({text:x.text,level:_n(["success","error","warning","warn","info"],x.type)?x.type:void 0,progress:x.progressBar===!0,icon:x.icon,closeButton:x.closeButton,onAction:D,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),I=na(Rs.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(I),pe(x.timeout)&&x.timeout>0&&rE.setEditorTimeout(t,()=>{D()},x.timeout);const J={close:D,reposition:()=>{const ue=$i($),_e={maxHeightFunction:gm()},Se=t.notificationManager.getNotifications();if(Se[0]===J){const be={...i.anchors.banner(),overrides:_e};Rs.showWithinBounds(I,ue,{anchor:be},d)}else Fe(Se,J).each(be=>{const qe=Se[be-1].getEl(),Le={type:"node",root:Vr(),node:O.some(Te.fromDom(qe)),overrides:_e,layouts:{onRtl:()=>[ur],onLtr:()=>[ur]}};Rs.showWithinBounds(I,ue,{anchor:Le},d)})},text:ue=>{Ub.updateText($,ue)},settings:x,getEl:()=>$.element.dom,progressBar:{value:ue=>{Ub.updateProgress($,ue)}}};return J},close:x=>{x.close()},getArgs:x=>x.settings}},Wb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),oB=tinymce.util.Tools.resolve("tinymce.EditorManager"),u1=tinymce.util.Tools.resolve("tinymce.Env"),Xc;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Xc||(Xc={}));var d1;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(d1||(d1={}));const es=t=>s=>s.options.get(t),f1=t=>s=>O.from(t(s)),sB=t=>{const s=u1.deviceType.isPhone(),a=u1.deviceType.isTablet()||s,i=t.options.register,d=v=>U(v)||v===!1,h=v=>U(v)||pe(v);i("skin",{processor:v=>U(v)||v===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:h,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:h,default:Wb.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:v=>U(v)||ne(v),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:v=>ne(v)||U(v)||le(v)?{value:v,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Pn(9,v=>{i("toolbar"+(v+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:d1.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:v=>v==="both"||ne(v),default:!u1.deviceType.isTouch()}),i("sidebar_show",{processor:"string"})},Zb=es("readonly"),jb=es("height"),lE=es("width"),iE=f1(es("min_width")),f4=f1(es("min_height")),cE=f1(es("max_width")),m4=f1(es("max_height")),rB=f1(es("style_formats")),uE=es("style_formats_merge"),g4=es("style_formats_autohide"),h4=es("content_langs"),dE=es("removed_menuitems"),Gb=es("toolbar_mode"),p4=es("toolbar_groups"),v4=es("toolbar_location"),C8=es("fixed_toolbar_container"),w8=es("fixed_toolbar_container_target"),b4=es("toolbar_persist"),aB=es("toolbar_sticky_offset"),lB=es("menubar"),Kb=es("toolbar"),y4=es("file_picker_callback"),C4=es("file_picker_validator_handler"),iB=es("font_size_input_default_unit"),fE=es("file_picker_types"),cB=es("typeahead_urls"),uB=es("anchor_top"),dB=es("anchor_bottom"),fB=es("draggable_modal"),mB=es("statusbar"),w4=es("elementpath"),mE=es("branding"),gB=es("resize"),n2=es("paste_as_text"),hB=es("sidebar_show"),pB=es("promotion"),S4=t=>t.options.get("skin")===!1,gE=t=>t.options.get("menubar")!==!1,vB=t=>{const s=t.options.get("skin_url");if(S4(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return oB.baseURL+"/skins/ui/"+a}},bB=t=>t.options.get("line_height_formats").split(" "),o2=t=>{const s=Kb(t),a=U(s),i=le(s)&&s.length>0;return!s2(t)&&(i||a||s===!0)},x4=t=>{const s=Pn(9,i=>t.options.get("toolbar"+(i+1))),a=Wn(s,U);return Cn(a.length>0,a)},s2=t=>x4(t).fold(()=>{const s=Kb(t);return Ce(s,U)&&s.length>0},ot),r2=t=>v4(t)===d1.bottom,ph=t=>{var s;if(!t.inline)return O.none();const a=(s=C8(t))!==null&&s!==void 0?s:"";if(a.length>0)return As(Vr(),a);const i=w8(t);return ve(i)?O.some(Te.fromDom(i)):O.none()},qb=t=>t.inline&&ph(t).isSome(),E4=t=>ph(t).getOrThunk(()=>zr(Xr(Te.fromDom(t.getElement())))),a2=t=>t.inline&&!gE(t)&&!o2(t)&&!s2(t),l2=t=>(t.options.get("toolbar_sticky")||t.inline)&&!qb(t)&&!a2(t),Im=t=>!qb(t)&&t.options.get("ui_mode")==="split",yB=t=>{const s=t.options.get("menu");return Re(s,a=>({...a,items:a.items}))};var CB=Object.freeze({__proto__:null,get ToolbarMode(){return Xc},get ToolbarLocation(){return d1},register:sB,getSkinUrl:vB,isReadOnly:Zb,isSkinDisabled:S4,getHeightOption:jb,getWidthOption:lE,getMinWidthOption:iE,getMinHeightOption:f4,getMaxWidthOption:cE,getMaxHeightOption:m4,getUserStyleFormats:rB,shouldMergeStyleFormats:uE,shouldAutoHideStyleFormats:g4,getLineHeightFormats:bB,getContentLanguages:h4,getRemovedMenuItems:dE,isMenubarEnabled:gE,isMultipleToolbars:s2,isToolbarEnabled:o2,isToolbarPersist:b4,getMultipleToolbarsOption:x4,getUiContainer:E4,useFixedContainer:qb,isSplitUiMode:Im,getToolbarMode:Gb,isDraggableModal:fB,isDistractionFree:a2,isStickyToolbar:l2,getStickyToolbarOffset:aB,getToolbarLocation:v4,isToolbarLocationBottom:r2,getToolbarGroups:p4,getMenus:yB,getMenubar:lB,getToolbar:Kb,getFilePickerCallback:y4,getFilePickerTypes:fE,useTypeaheadUrls:cB,getAnchorTop:uB,getAnchorBottom:dB,getFilePickerValidatorHandler:C4,getFontSizeInputDefaultUnit:iB,useStatusBar:mB,useElementPath:w4,promotionEnabled:pB,useBranding:mE,getResize:gB,getPasteAsText:n2,getSidebarShow:hB});const k4="[data-mce-autocompleter]",hE=t=>ba(t,k4),S8=t=>As(t,k4),E8={setup:(t,s)=>{const a=(d,h)=>{tn(d,rc(),{raw:h})},i=()=>t.getMenu().bind(go.getHighlighted);s.on("keydown",d=>{const h=d.which;!t.isActive()||(t.isMenuOpen()?h===13?(i().each(om),d.preventDefault()):h===40?(i().fold(()=>{t.getMenu().each(go.highlightFirst)},v=>{a(v,d)}),d.preventDefault(),d.stopImmediatePropagation()):(h===37||h===38||h===39)&&i().each(v=>{a(v,d),d.preventDefault(),d.stopImmediatePropagation()}):(h===13||h===38||h===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&hE(Te.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var m1;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(m1||(m1={}));var Ed=m1;const T4="tox-menu-nav__js",Yb="tox-collection__item",i2="tox-swatch",k8={normal:T4,color:i2},_4="tox-collection__item--enabled",T8="tox-collection__group-heading",wB="tox-collection__item-icon",c2="tox-collection__item-label",_8="tox-collection__item-accessory",SB="tox-collection__item-caret",O8="tox-collection__item-checkmark",u2="tox-collection__item--active",xB="tox-collection__item-container",A8="tox-collection__item-container--column",EB="tox-collection__item-container--row",R8="tox-collection__item-container--align-right",D8="tox-collection__item-container--align-left",M8="tox-collection__item-container--valign-top",B8="tox-collection__item-container--valign-middle",$8="tox-collection__item-container--valign-bottom",pE=t=>xt(k8,t).getOr(T4),P8=t=>t==="color"?"tox-swatches":"tox-menu",O4=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:P8(t),tieredMenu:"tox-tiered-menu"}),g1=t=>{const s=O4(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:pE(t)}},kB=(t,s,a)=>{const i=O4(a);return{tag:"div",classes:pn([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},N8=[Nm.parts.items({})],vE=(t,s,a)=>{const i=O4(a);return{dom:{tag:"div",classes:pn([[i.tieredMenu]])},markers:g1(a)}},TB=K([xo("data"),Ae("inputAttributes",{}),Ae("inputStyles",{}),Ae("tag","input"),Ae("inputClasses",[]),Vn("onSetValue"),Ae("styles",{}),Ae("eventOrder",{}),dr("inputBehaviours",[At,fn]),Ae("selectOnFocus",!0)]),_B=t=>gt([fn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=Ya(a);a.dom.setSelectionRange(0,i.length)}:P})]),I8=t=>({..._B(t),...zs(t.inputBehaviours,[At.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Ya(s.element),setValue:(s,a)=>{Ya(s.element)!==a&&ci(s.element,a)}},onSetValue:t.onSetValue})])}),OB=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),A4=(t,s)=>({uid:t.uid,dom:OB(t),components:[],behaviours:I8(t),eventOrder:t.eventOrder}),h1=nr({name:"Input",configFields:TB(),factory:A4}),AB=$t("refetch-trigger-event"),RB=$t("redirect-menu-item-interaction"),DB="tox-menu__searcher",bE=t=>As(t.element,`.${DB}`).bind(s=>t.getSystem().getByDom(s).toOptional()),MB=bE,F8=(t,s)=>{At.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},BB=t=>{const s=At.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},L8=(t,s)=>{Zs(s.element,"id").each(a=>In(t.element,"aria-activedescendant",a))},H8=t=>{const s=(d,h)=>(h.cut(),O.none()),a=(d,h)=>{const v={interactionEvent:h.event,eventType:h.event.raw.type};return tn(d,RB,v),O.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[Yb]},components:[h1.sketch({inputClasses:[DB,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:gt([Bn(i,[Xe(lf(),d=>{Co(d,AB)}),Xe(rc(),(d,h)=>{h.event.raw.key==="Escape"&&h.stop()})]),nn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,nn.name()]}})]}},yE="tox-collection--results__js",$B=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:$t("aria-item-search-result-id"),"aria-selected":"false"}}}:t},R4=(t,s)=>a=>{const i=Jn(a,s);return Pe(i,d=>({dom:t,components:d}))},CE=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Nm.parts.items({preprocess:t!=="auto"?R4({tag:"div",classes:["tox-swatches__row"]},t):Ie})]}]}),z8=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Nm.parts.items({preprocess:R4({tag:"div",classes:["tox-collection__group"]},t)})]}),wE=(t,s)=>{const a=[];let i=[];return St(t,(d,h)=>{s(d,h)?(i.length>0&&a.push(i),i=[],(Hn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Pe(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},D4=(t,s,a)=>Nm.parts.items({preprocess:i=>{const d=Pe(i,a);return t!=="auto"&&t>1?R4({tag:"div",classes:["tox-collection__group"]},t)(d):wE(d,(h,v)=>s[v].type==="separator")}}),PB=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[D4(t,s,Ie)]}),V8=(t,s,a=!0)=>{const i=$t("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",yE].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[D4(t,s,$B)]}},U8=(t,s,a)=>{const i=$t("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[H8({i18n:rl.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],yE],attributes:{id:i}},components:[D4(t,s,$B)]}]}},W8=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Nm.parts.items({preprocess:a=>wE(a,(i,d)=>t[d].type==="separator")})]}),d2=t=>Kn(t,s=>"icon"in s&&s.icon!==void 0),Fm=t=>(console.error(vg(t)),console.log(t),O.none()),M4=(t,s,a,i,d)=>{const h=W8(a);return{value:t,dom:h.dom,components:h.components,items:a}},f2=(t,s,a,i,d)=>{const h=()=>d.menuType!=="searchable"?PB(i,a):d.searchMode.searchMode==="search-with-field"?U8(i,a,d.searchMode):V8(i,a);if(d.menuType==="color"){const v=CE(i);return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const v=PB(i,a);return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const v=h();return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const v=z8(i);return{value:t,dom:v.dom,components:v.components,items:a}}else return{value:t,dom:kB(s,i,d.menuType),components:N8,items:a}},Ks=yr("type"),m2=yr("name"),Xb=yr("label"),Of=yr("text"),kd=yr("title"),SE=yr("icon"),g2=yr("value"),Z8=Ri("fetch"),j8=Ri("getSubmenuItems"),Jb=Ri("onAction"),Qb=Ri("onItemAction"),p1=Ls("onSetup",()=>P),G8=ga("name"),Lm=ga("text"),pc=ga("icon"),e0=ga("tooltip"),B4=ga("label"),$4=ga("shortcut"),P4=nf("select"),xE=ta("active",!1),NB=ta("borderless",!1),Jc=ta("enabled",!0),EE=ta("primary",!1),IB=t=>Ae("columns",t),N4=Ae("meta",{}),I4=Ls("onAction",P),v1=t=>ai("type",t),F4=t=>Wr("name","name",Pc(()=>$t(`${t}-name`)),Os),FB=t=>Wr("value","value",Pc(()=>$t(`${t}-value`)),Oi()),L4=rn([Ks,Lm]),K8=t=>Do("separatormenuitem",L4,t),LB=rn([v1("autocompleteitem"),xE,Jc,N4,g2,Lm,pc]),HB=t=>Do("Autocompleter.Separator",L4,t),h2=t=>Do("Autocompleter.Item",LB,t),t0=[Jc,e0,pc,Lm,p1],q8=rn([Ks,Jb].concat(t0)),zB=t=>Do("toolbarbutton",q8,t),kE=[xE].concat(t0),Y8=rn(kE.concat([Ks,Jb])),VB=t=>Do("ToggleButton",Y8,t),H4=[Ls("predicate",Je),Il("scope","node",["node","editor"]),Il("position","selection",["node","selection","line"])],UB=t0.concat([v1("contextformbutton"),EE,Jb,Ka("original",Ie)]),WB=kE.concat([v1("contextformbutton"),EE,Jb,Ka("original",Ie)]),ZB=t0.concat([v1("contextformbutton")]),X8=kE.concat([v1("contextformtogglebutton")]),J8=er("type",{contextformbutton:UB,contextformtogglebutton:WB}),jB=rn([v1("contextform"),Ls("initValue",K("")),B4,ri("commands",J8),fu("launch",er("type",{contextformbutton:ZB,contextformtogglebutton:X8}))].concat(H4)),z4=t=>Do("ContextForm",jB,t),V4=rn([v1("contexttoolbar"),yr("items")].concat(H4)),GB=t=>Do("ContextToolbar",V4,t),KB=[Ks,yr("src"),ga("alt"),bg("classes",[],Os)],qB=rn(KB),Q8=[Ks,Of,G8,bg("classes",["tox-collection__item-label"],Os)],U4=rn(Q8),YB=mv(()=>si("type",{cardimage:qB,cardtext:U4,cardcontainer:XB})),XB=rn([Ks,ai("direction","horizontal"),ai("align","left"),ai("valign","middle"),ri("items",YB)]),b1=[Jc,Lm,$4,FB("menuitem"),N4],y1=rn([Ks,B4,ri("items",YB),p1,I4].concat(b1)),eH=t=>Do("cardmenuitem",y1,t),W4=rn([Ks,xE,pc].concat(b1)),TE=t=>Do("choicemenuitem",W4,t),JB=[Ks,yr("fancytype"),I4],QB=[Ae("initData",{})].concat(JB),e$=[nf("select"),of("initData",{},[ta("allowCustomColors",!0),ai("storageKey","default"),Ju("colors",Oi())])].concat(JB),t$=er("fancytype",{inserttable:QB,colorswatch:e$}),Z4=t=>Do("fancymenuitem",t$,t),n$=rn([Ks,p1,I4,pc].concat(b1)),tH=t=>Do("menuitem",n$,t),o$=rn([Ks,j8,p1,pc].concat(b1)),s$=t=>Do("nestedmenuitem",o$,t),r$=rn([Ks,pc,xE,p1,Jb].concat(b1)),a$=t=>Do("togglemenuitem",r$,t),j4=(t,s,a)=>{const i=tl(t.element,"."+a);if(i.length>0){const d=$o(i,h=>{const v=h.dom.getBoundingClientRect().top,S=i[0].dom.getBoundingClientRect().top;return Math.abs(v-S)>s}).getOr(i.length);return O.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return O.none()},G4=(t,s)=>gt([Bn(t,s)]),p2={namedEvents:G4,unnamedEvents:t=>G4($t("unnamed-events"),t)},l$=$t("tooltip.exclusive"),v2=$t("tooltip.show"),n0=$t("tooltip.hide"),o0=(t,s,a)=>{t.getSystem().broadcastOn([l$],{})};var oH=Object.freeze({__proto__:null,hideAllExclusive:o0,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&wn.set(d,i)})}}),sH=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(h=>{uc(h),t.onHide(d,h),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){o0(d);const h=t.lazySink(d).getOrDie(),v=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Wo(t.mode==="normal"?[Xe(td(),S=>{Co(d,v2)}),Xe(dp(),S=>{Co(d,n0)})]:[]),behaviours:gt([wn.config({})])});s.setTooltip(v),_u(h,v),t.onShow(d,v),Er.position(h,v,{anchor:t.anchor(d)})}};return Wo(pn([[Xe(v2,d=>{s.resetTimer(()=>{i(d)},t.delay)}),Xe(n0,d=>{s.resetTimer(()=>{a(d)},t.delay)}),Xe(Lc(),(d,h)=>{const v=h;v.universal||_n(v.channels,l$)&&a(d)}),Aa(d=>{a(d)})],t.mode==="normal"?[Xe(Ic(),d=>{Co(d,v2)}),Xe(xg(),d=>{Co(d,n0)}),Xe(td(),d=>{Co(d,v2)}),Xe(dp(),d=>{Co(d,n0)})]:[Xe(cS(),(d,h)=>{Co(d,v2)}),Xe(hp(),d=>{Co(d,n0)})]]))}}),rH=[We("lazySink"),We("tooltipDom"),Ae("exclusive",!0),Ae("tooltipComponents",[]),Ae("delay",300),Il("mode","normal",["normal","follow-highlight"]),Ae("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:K([ur,Jo,$r,Ba,Sr,Xa]),onRtl:K([ur,Jo,$r,Ba,Sr,Xa])}})),Vn("onHide"),Vn("onShow")],_E=Object.freeze({__proto__:null,init:()=>{const t=is(),s=is(),a=()=>{t.on(clearTimeout)},i=(h,v)=>{a(),t.set(setTimeout(h,v))},d=K("not-implemented");return Hl({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const i$=jr({fields:rH,name:"tooltipping",active:sH,state:_E,apis:oH}),c$=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u$="silver.readonly",d$=rn([hv("readonly")]),b2=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&St(d,h=>{h.broadcastOn([vd()],{target:i})}),St(d,h=>{h.broadcastOn([u$],{readonly:s})})},f$=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&b2(s,!0)}),t.on("SwitchMode",()=>b2(s,t.mode.isReadOnly())),Zb(t)&&t.mode.set("readonly")},_r=()=>Ja.config({channels:{[u$]:{schema:d$,onReceive:(t,s)=>{un.set(t,s.readonly)}}}}),Au={item:t=>un.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>un.config({disabled:t}),splitButton:t=>un.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>un.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},OE=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},vh=(t,s)=>as(a=>{OE(t,a)(d=>{const h=t.onSetup(d);ie(h)&&s.set(h)})}),Hm=(t,s)=>Aa(a=>OE(t,a)(s.get())),m$=(t,s)=>Hc((a,i)=>{OE(t,a)(t.onAction),!t.triggersSubmenu&&s===Ed.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Co(a,em()),i.stop())}),cH={[ii()]:["disabling","alloy.base.behaviour","toggling","item-events"]},s0=su,r0=(t,s,a,i)=>{const d=cn(P);return{type:"item",dom:s.dom,components:s0(s.optComponents),data:t.data,eventOrder:cH,hasSubmenu:t.triggersSubmenu,itemBehaviours:gt([Bn("item-events",[m$(t,a),vh(t,d),Hm(t,d)]),Au.item(()=>!t.enabled||i.isDisabled()),_r(),wn.config({})].concat(t.itemBehaviours))}},a0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),uH=t=>{const s=u1.os.isMacOS()||u1.os.isiOS(),d=s?{alt:"\u2325",ctrl:"\u2303",shift:"\u21E7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},h=t.split("+"),v=Pe(h,S=>{const x=S.toLowerCase().trim();return Hn(d,x)?d[x]:S});return s?v.join(""):v.join("+")},AE=(t,s,a=[wB])=>hc(t,{tag:"div",classes:a},s),g$=t=>({dom:{tag:"div",classes:[c2]},components:[Hs(rl.translate(t))]}),h$=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),K4=(t,s)=>({dom:{tag:"div",classes:[c2]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Hs(rl.translate(s))]}]}),p$=t=>({dom:{tag:"div",classes:[_8]},components:[Hs(uH(t))]}),v$=t=>AE("checkmark",t,[O8]),dH=t=>AE("chevron-right",t,[SB]),b$=t=>AE("chevron-down",t,[SB]),fH=(t,s)=>{const a=t.direction==="vertical"?A8:EB,i=t.align==="left"?D8:R8;return{dom:{tag:"div",classes:[xB,a,i,(()=>{switch(t.valign){case"top":return M8;case"middle":return B8;case"bottom":return $8}})()]},components:s}},mH=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),y$=(t,s,a)=>{const i="custom",d="remove",h=t.ariaLabel,v=t.value,S=t.iconContent.map(T=>eB(T,s.icons,a));return{dom:(()=>{const T=i2,D=S.getOr(""),I={tag:"div",attributes:h.map(Z=>({title:s.translate(Z)})).getOr({}),classes:[T]};return v===i?{...I,tag:"button",classes:[...I.classes,"tox-swatches__picker-btn"],innerHtml:D}:v===d?{...I,classes:[...I.classes,"tox-swatch--remove"],innerHtml:D}:ve(v)?{...I,attributes:{...I.attributes,"data-mce-color":v},styles:{"background-color":v},innerHtml:D}:I})(),optComponents:[]}},q4=t=>{const s=t.map(a=>({attributes:{title:rl.translate(a),id:$t("menu-item")}})).getOr({});return{tag:"div",classes:[T4,Yb],...s}},C$=(t,s,a,i)=>{const d={tag:"div",classes:[wB]},h=I=>hc(I,d,s.icons,i),v=()=>O.some({dom:d}),S=a?t.iconContent.map(h).orThunk(v):O.none(),x=t.checkMark,T=O.from(t.meta).fold(()=>g$,I=>Hn(I,"style")?ft(K4,I.style):g$),D=t.htmlContent.fold(()=>t.textContent.map(T),I=>O.some(h$(I,[c2])));return{dom:q4(t.ariaLabel),optComponents:[S,D,t.shortcutContent.map(p$),x,t.caret]}},y2=(t,s,a,i=O.none())=>t.presets==="color"?y$(t,s,i):C$(t,s,a,i),w$=(t,s)=>xt(t,"tooltipWorker").map(a=>[i$.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:gm}}),mode:"follow-highlight",onShow:(i,d)=>{a(h=>{i$.setComponents(i,[Vv({element:Te.fromDom(h)})])})}})]).getOr([]),gH=t=>Wb.DOM.encode(t),S$=(t,s)=>{const a=rl.translate(t),i=gH(a);if(s.length>0){const d=new RegExp(c$(s),"gi");return i.replace(d,h=>`<span class="tox-autocompleter-highlight">${h}</span>`)}else return i},hH=(t,s,a,i,d,h,v,S=!0)=>{const x=y2({presets:i,textContent:O.none(),htmlContent:a?t.text.map(T=>S$(T,s)):O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:t.value},v.providers,S,t.icon);return r0({data:a0(t),enabled:t.enabled,getApi:K({}),onAction:T=>d(t.value,t.meta),onSetup:K(P),triggersSubmenu:!1,itemBehaviours:w$(t.meta,v)},x,h,v.providers)},bh=(t,s)=>Pe(t,a=>{switch(a.type){case"cardcontainer":return fH(a,bh(a.items,s));case"cardimage":return mH(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(h=>_n(s.cardText.highlightOn,h))?O.from(s.cardText.matchText).getOr(""):"";return h$(S$(a.text,d),a.classes)}}),Y4=(t,s,a,i)=>{const d=v=>({isEnabled:()=>!un.isDisabled(v),setEnabled:S=>{un.set(v,!S),St(tl(v.element,"*"),x=>{v.getSystem().getByDom(x).each(T=>{T.hasConfigured(un)&&un.set(T,!S)})})}}),h={dom:q4(t.label),optComponents:[O.some({dom:{tag:"div",classes:[xB,EB]},components:bh(t.items,i)})]};return r0({data:a0({text:O.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(i.itemBehaviours).getOr([])},h,s,a.providers)},pH=(t,s,a,i,d,h,v,S=!0)=>{const x=D=>({setActive:$=>{Fn.set(D,$)},isActive:()=>Fn.isOn(D),isEnabled:()=>!un.isDisabled(D),setEnabled:$=>un.set(D,!$)}),T=y2({presets:a,textContent:s?t.text:O.none(),htmlContent:O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:O.none(),checkMark:s?O.some(v$(v.icons)):O.none(),caret:O.none(),value:t.value},v,S);return Xo(r0({data:a0(t),enabled:t.enabled,getApi:x,onAction:D=>i(t.value),onSetup:D=>(D.setActive(d),P),triggersSubmenu:!1,itemBehaviours:[]},T,h,v),{toggling:{toggleClass:_4,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},C2=DC(i1(),t2()),Ru=t=>({value:RE(t)}),x$=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,E$=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,k$=t=>x$.test(t)||E$.test(t),RE=t=>eg(t,"#").toUpperCase(),vH=t=>k$(t)?O.some({value:RE(t)}):O.none(),bH=t=>({value:t.value.replace(x$,(a,i,d,h)=>i+i+d+d+h+h)}),T$=t=>{const s=bH(t),a=E$.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},X4=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},w2=t=>{const s=X4(t.red)+X4(t.green)+X4(t.blue);return Ru(s)},_$=Math.min,gi=Math.max,Qc=Math.round,yH=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,O$=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Td=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),S2=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},A$=t=>{let s,a,i;const d=(t.hue||0)%360;let h=t.saturation/100,v=t.value/100;if(h=gi(0,_$(h,1)),v=gi(0,_$(v,1)),h===0)return s=a=i=Qc(255*v),Td(s,a,i,1);const S=d/60,x=v*h,T=x*(1-Math.abs(S%2-1)),D=v-x;switch(Math.floor(S)){case 0:s=x,a=T,i=0;break;case 1:s=T,a=x,i=0;break;case 2:s=0,a=x,i=T;break;case 3:s=0,a=T,i=x;break;case 4:s=T,a=0,i=x;break;case 5:s=x,a=0,i=T;break;default:s=a=i=0}return s=Qc(255*(s+D)),a=Qc(255*(a+D)),i=Qc(255*(i+D)),Td(s,a,i,1)},x2=t=>{const s=T$(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Td(a,i,d,1)},l0=(t,s,a,i)=>{const d=parseInt(t,10),h=parseInt(s,10),v=parseInt(a,10),S=parseFloat(i);return Td(d,h,v,S)},i0=t=>{if(t==="transparent")return O.some(Td(0,0,0,0));const s=yH.exec(t);if(s!==null)return O.some(l0(s[1],s[2],s[3],"1"));const a=O$.exec(t);return a!==null?O.some(l0(a[1],a[2],a[3],a[4])):O.none()},R$=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,zm=Td(255,0,0,1),CH=t=>{t.dispatch("SkinLoaded")},wH=(t,s)=>{t.dispatch("SkinLoadError",s)},Vi=t=>{t.dispatch("ResizeEditor")},E2=(t,s)=>{t.dispatch("ResizeContent",s)},_d=(t,s)=>{t.dispatch("ScrollContent",s)},D$=(t,s)=>{t.dispatch("TextColorChange",s)},Ho=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},C1=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),DE=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},ME=(t,s)=>()=>{t(),s()},Na=t=>Vm(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),J4=(t,s)=>a=>{const i=Qa(),d=()=>{a.setActive(t.formatter.match(s));const h=t.formatter.formatChanged(s,a.setActive);i.set(h)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},BE=(t,s)=>a=>{const i=Na(t)(a),d=J4(t,s)(a);return()=>{i(),d()}},Vm=(t,s,a)=>i=>{const d=()=>a(i),h=()=>{a(i),t.on(s,d)};return t.initialized?h():t.once("init",h),()=>{t.off("init",h),t.off(s,d)}},M$=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},hi=(t,s)=>()=>t.execCommand(s);var yh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const $E={},B$=(t,s=10)=>{const a=yh.getItem(t),i=U(a)?JSON.parse(a):[],h=(T=>s-T.length<0?T.slice(0,s):T)(i),v=T=>{Fe(h,T).each(S),h.unshift(T),h.length>s&&h.pop(),yh.setItem(t,JSON.stringify(h))},S=T=>{h.splice(T,1)};return{add:v,state:()=>h.slice(0)}},k2=t=>xt($E,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=yh.getItem(s);if(te(a)){const d=yh.getItem("tinymce-custom-colors");yh.setItem(s,ve(d)?d:"[]")}const i=B$(s,10);return $E[t]=i,i}),SH=t=>Pe(k2(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),$$=(t,s)=>{k2(t).add(s)},T2=(t,s,a)=>({hue:t,saturation:s,value:a}),Q4=t=>{let s=0,a=0,i=0;const d=t.red/255,h=t.green/255,v=t.blue/255,S=Math.min(d,Math.min(h,v)),x=Math.max(d,Math.max(h,v));if(S===x)return i=S,T2(0,0,i*100);const T=d===S?h-v:v===S?d-h:v-d;return s=d===S?3:v===S?1:5,s=60*(s-T/(x-S)),a=(x-S)/x,i=x,T2(Math.round(s),Math.round(a*100),Math.round(i*100))},xH=t=>Q4(x2(t)),P$=t=>w2(A$(t)),EH=t=>vH(t).orThunk(()=>i0(t).map(w2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],h=i[1],v=i[2],S=i[3];return w2(Td(d,h,v,S))}),eA="forecolor",tA="hilitecolor",nA=5,oA=t=>Math.max(nA,Math.ceil(Math.sqrt(t))),N$=(t,s)=>{const a=oA(s),i=Af("color_cols")(t);return i!==nA?i:a},I$=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+EH(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},Af=t=>s=>s.options.get(t),sA="#000000",kH=t=>{const s=t.options.register,a=i=>Ce(i,U)?{value:I$(i),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:oA(c0(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:N$(t,c0(t,eA).length)}),s("color_cols_background",{processor:"number",default:N$(t,c0(t,tA).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:sA}),s("color_default_background",{processor:"string",default:sA})},TH=(t,s)=>s===eA?Af("color_cols_foreground")(t):s===tA?Af("color_cols_background")(t):Af("color_cols")(t),F$=(t,s)=>{const a=Math.round(TH(t,s));return a>0?a:nA},L$=Af("custom_colors"),c0=(t,s)=>s===eA&&t.options.isSet("color_map_foreground")?Af("color_map_foreground")(t):s===tA&&t.options.isSet("color_map_background")?Af("color_map_background")(t):Af("color_map")(t),Od=Af("color_default_foreground"),_H=Af("color_default_background"),rA="rgba(0, 0, 0, 0)",H$=t=>i0(t).exists(s=>s.alpha!==0),z$=t=>Cg(t,s=>{if(Oo(s)){const a=et(s,"background-color");return Cn(H$(a),a)}else return O.none()}).getOr(rA),aA=(t,s)=>{const a=Te.fromDom(t.selection.getStart()),i=s==="hilitecolor"?z$(a):et(a,"color");return i0(i).map(d=>"#"+w2(d).value)},V$=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},U$=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},OH=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{V$(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{U$(t,s)})},W$=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},lA=(t,s,a,i)=>{a==="custom"?K$(t)(h=>{h.each(v=>{$$(s,v),t.execCommand("mceApplyTextcolor",s,v),i(v)})},aA(t,s).getOr(sA)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},Z$=(t,s,a)=>t.concat(SH(s).concat(W$(a))),iA=(t,s,a)=>i=>{i(Z$(t,s,a))},PE=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},cA=(t,s)=>a=>{const i=aA(t,s);return ul(i,a.toUpperCase())},j$=(t,s,a,i,d)=>{t.ui.registry.addSplitButton(s,{tooltip:i,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:cA(t,a),columns:F$(t,a),fetch:iA(c0(t,a),a,L$(t)),onAction:h=>{lA(t,a,d.get(),P)},onItemAction:(h,v)=>{lA(t,a,v,S=>{d.set(S),D$(t,{name:s,color:S})})},onSetup:h=>{PE(h,s,d.get());const v=S=>{S.name===s&&PE(h,S.name,S.color)};return t.on("TextColorChange",v),ME(Na(t)(h),()=>{t.off("TextColorChange",v)})}})},G$=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:h=>(PE(h,s,d.get()),Na(t)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:cA(t,a),initData:{storageKey:a},onAction:h=>{lA(t,a,h.value,v=>{d.set(v),D$(t,{name:s,color:v})})}}]})},K$=t=>(s,a)=>{let i=!1;const d=S=>{const T=S.getData().colorpicker;i?(s(O.from(T)),S.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",T]))},h=(S,x)=>{x.name==="hex-valid"&&(i=x.value)},v={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:v,onAction:h,onSubmit:d,onClose:P,onCancel:()=>{s(O.none())}})},u0=t=>{OH(t);const s=Od(t),a=_H(t),i=cn(s),d=cn(a);j$(t,"forecolor","forecolor","Text color",i),j$(t,"backcolor","hilitecolor","Background color",d),G$(t,"forecolor","forecolor","Text color",i),G$(t,"backcolor","hilitecolor","Background color",d)},uA=(t,s,a,i,d,h,v,S)=>{const x=d2(s),D=q$(s,a,i,d!=="color"?"normal":"color",h,v,S);return f2(t,x,D,i,{menuType:d})},q$=(t,s,a,i,d,h,v)=>su(Pe(t,S=>S.type==="choiceitem"?TE(S).fold(Fm,x=>O.some(pH(x,a===1,i,s,h(x.value),d,v,d2(t)))):O.none())),_2=(t,s)=>{const a=g1(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?As(d.element,"[aria-checked=true]"):O.none()}},Y$=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${i2}`:`.${Yb}`}},dA=(t,s)=>{const a=fA(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",v={...uA($t("menu-value"),a,S=>{t.onAction({value:S})},i,d,Ed.CLOSE_ON_EXECUTE,t.select.getOr(Je),s.shared.providers),markers:g1(d),movement:_2(i,d)};return{type:"widget",data:{value:$t("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[C2.widget(Nm.sketch(v))]}},fA=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>Z$(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(W$(a)))},NE=$t("cell-over"),mA=$t("cell-execute"),AH=(t,s,a)=>{const i=v=>tn(v,NE,{row:t,col:s}),d=v=>tn(v,mA,{row:t,col:s}),h=(v,S)=>{S.stop(),d(v)};return na({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:gt([Bn("insert-table-picker-cell",[Xe(td(),fn.focus),Xe(ii(),d),Xe(Bi(),h),Xe(mp(),h)]),Fn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),fn.config({onFocus:i})])})},X$=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const h=[];for(let v=0;v<a;v++)h.push(AH(d,v,t));i.push(h)}return i},RH=(t,s,a,i,d)=>{for(let h=0;h<i;h++)for(let v=0;v<d;v++)Fn.set(t[h][v],h<=s&&v<=a)},DH=t=>Ge(t,s=>Pe(s,$i)),J$=(t,s)=>Hs(`${s}x${t}`),Q$={inserttable:t=>{const i=$t("size-label"),d=X$(i,10,10),h=J$(0,0),v=ko({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:i}},components:[h],behaviours:gt([wn.config({})])});return{type:"widget",data:{value:$t("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[C2.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:DH(d).concat(v.asSpec()),behaviours:gt([Bn("insert-table-picker",[as(S=>{wn.set(v.get(S),[h])}),Ag(NE,(S,x,T)=>{const{row:D,col:$}=T.event;RH(d,D,$,10,10),wn.set(v.get(S),[J$(D+1,$+1)])}),Ag(mA,(S,x,T)=>{const{row:D,col:$}=T.event;t.onAction({numRows:D+1,numColumns:$+1}),Co(S,em())})]),nn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:dA},eP=(t,s)=>xt(Q$,t.fancytype).map(a=>a(t,s)),BH=(t,s,a,i=!0,d=!1)=>{const h=d?b$(a.icons):dH(a.icons),v=x=>({isEnabled:()=>!un.isDisabled(x),setEnabled:T=>un.set(x,!T),setIconFill:(T,D)=>{As(x.element,`svg path[class="${T}"], rect[class="${T}"]`).each($=>{In($,"fill",D)})}}),S=y2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.some(h),checkMark:O.none(),shortcutContent:t.shortcut},a,i);return r0({data:a0(t),getApi:v,enabled:t.enabled,onAction:P,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},S,s,a)},$H=(t,s,a,i=!0)=>{const d=v=>({isEnabled:()=>!un.isDisabled(v),setEnabled:S=>un.set(v,!S)}),h=y2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.none(),checkMark:O.none(),shortcutContent:t.shortcut},a,i);return r0({data:a0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a)},PH=t=>({type:"separator",dom:{tag:"div",classes:[Yb,T8]},components:t.text.map(Hs).toArray()}),NH=(t,s,a,i=!0)=>{const d=v=>({setActive:S=>{Fn.set(v,S)},isActive:()=>Fn.isOn(v),isEnabled:()=>!un.isDisabled(v),setEnabled:S=>un.set(v,!S)}),h=y2({iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,checkMark:O.some(v$(a.icons)),caret:O.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return Xo(r0({data:a0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a),{toggling:{toggleClass:_4,toggleOnExecute:!1,selected:t.active}})},IH=hH,tP=PH,FH=$H,LH=BH,HH=NH,zH=eP,VH=Y4;var WH=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),ZH=[wl("others",bs(Mn.value,Oi()))],jH=Object.freeze({__proto__:null,init:()=>{const t={},s=(h,v)=>{if(It(h.others).length===0)throw new Error("Cannot find any known coupled components");return xt(t,v)},a=(h,v,S)=>s(v,S).getOrThunk(()=>{const T=xt(v.others,S).getOrDie("No information found for coupled component: "+S)(h),D=h.getSystem().build(T);return t[S]=D,D}),i=(h,v,S)=>s(v,S).orThunk(()=>(xt(v.others,S).getOrDie("No information found for coupled component: "+S),O.none())),d=K({});return Hl({readState:d,getExisting:i,getOrCreate:a})}});const Cs=jr({fields:ZH,name:"coupling",apis:WH,state:jH}),IE=t=>{let s=O.none(),a=[];const i=T=>IE(D=>{d($=>{D(T($))})}),d=T=>{v()?x(T):a.push(T)},h=T=>{v()||(s=O.some(T),S(a),a=[])},v=()=>s.isSome(),S=T=>{St(T,x)},x=T=>{s.each(D=>{setTimeout(()=>{T(D)},0)})};return t(h),{get:d,map:i,isReady:v}},GH={nu:IE,pure:t=>IE(s=>{s(t)})},KH=t=>{setTimeout(()=>{throw t},0)},d0=t=>{const s=x=>{t().then(x,KH)};return{map:x=>d0(()=>t().then(x)),bind:x=>d0(()=>t().then(T=>x(T).toPromise())),anonBind:x=>d0(()=>t().then(()=>x.toPromise())),toLazy:()=>GH.nu(s),toCached:()=>{let x=null;return d0(()=>(x===null&&(x=t()),x))},toPromise:t,get:s}},ra={nu:t=>d0(()=>new Promise(t)),pure:t=>d0(()=>Promise.resolve(t))},gA=K("sink"),hA=K(Fi({name:gA(),overrides:K({dom:{tag:"div"},behaviours:gt([Er.config({useFixed:ot})]),events:Wo([bu(rc()),bu(li()),bu(Bi())])})})),nP=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),h=>({type:i,hotspot:a,overrides:d,layouts:h}))},oP=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},qH=(t,s,a,i,d,h,v)=>{const S=oP(t,s,i),x=sP(i,t);return S.map(T=>T.bind(D=>O.from(c1.sketch({...h.menu(),uid:rd(""),data:D,highlightOnOpen:v,onOpenMenu:($,I)=>{const Z=x().getOrDie();Er.position(Z,I,{anchor:a}),to.decloak(d)},onOpenSubmenu:($,I,Z)=>{const J=x().getOrDie();Er.position(J,Z,{anchor:{type:"submenu",item:I}}),to.decloak(d)},onRepositionMenu:($,I,Z)=>{const J=x().getOrDie();Er.position(J,I,{anchor:a}),St(Z,ue=>{Er.position(J,ue.triggeredMenu,{anchor:{type:"submenu",item:ue.triggeringItem}})})},onEscape:()=>(fn.focus(i),to.close(d),O.some(!0))}))))},FE=(t,s,a,i,d,h,v)=>{const S=nP(t,a);return qH(t,s,S,a,i,d,v).map(T=>(T.fold(()=>{to.isOpen(i)&&to.close(i)},D=>{to.cloak(i),to.open(i,D),h(i)}),i))},YH=(t,s,a,i,d,h,v)=>(to.close(i),ra.pure(i)),pA=(t,s,a,i,d,h)=>{const v=Cs.getCoupled(a,"sandbox");return(to.isOpen(v)?YH:FE)(t,s,a,v,i,d,h)},XH=(t,s,a)=>{const i=Qn.getCurrent(s).getOr(s),d=Za(t.element);a?Rt(i.element,"min-width",d+"px"):gs(i.element,d)},sP=(t,s)=>t.getSystem().getByUid(s.uid+"-"+gA()).map(a=>()=>Mn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Mn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),rP=t=>{to.getState(t).each(s=>{c1.repositionMenus(s)})},vA=(t,s,a)=>{const i=Py(),d=(S,x)=>{const T=nP(t,s);i.link(s.element),t.matchWidth&&XH(T.hotspot,x,t.useMinWidth),t.onOpen(T,S,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(S,x)},h=(S,x)=>{i.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(S,x)},v=sP(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:Ii.augment(t.sandboxBehaviours,[At.config({store:{mode:"memory",initialValue:s}}),to.config({onOpen:d,onClose:h,isPartOf:(S,x,T)=>cm(x,T)||cm(s,T),getAttachPoint:()=>v().getOrDie()}),Qn.config({find:S=>to.getState(S).bind(x=>Qn.getCurrent(x))}),Ja.config({channels:{...Em({isExtraPart:Je}),...wC({doReposition:rP})}})])}},aP=t=>{const s=Cs.getCoupled(t,"sandbox");rP(s)},bA=()=>[Ae("sandboxClasses",[]),Ii.field("sandboxBehaviours",[Qn,Ja,to,At])],LE=K([We("dom"),We("fetch"),Vn("onOpen"),Vl("onExecute"),Ae("getHotspot",O.some),Ae("getAnchorOverrides",K({})),md(),dr("dropdownBehaviours",[Fn,Cs,nn,fn]),We("toggleClass"),Ae("eventOrder",{}),xo("lazySink"),Ae("matchWidth",!1),Ae("useMinWidth",!1),xo("role")].concat(bA())),yA=K([dc({schema:[wu(),Ae("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),hA()]),CA=(t,s,a,i)=>{const d=D=>xt(t.dom,"attributes").bind($=>xt($,D)),h=D=>{to.getState(D).each($=>{c1.highlightPrimary($)})},v=(D,$,I)=>pA(t,Ie,D,i,$,I),S=D=>{v(D,h,jl.HighlightMenuAndItem).get(P)},x={expand:D=>{Fn.isOn(D)||v(D,P,jl.HighlightNone).get(P)},open:D=>{Fn.isOn(D)||v(D,P,jl.HighlightMenuAndItem).get(P)},refetch:D=>Cs.getExistingCoupled(D,"sandbox").fold(()=>v(D,P,jl.HighlightMenuAndItem).map(P),I=>FE(t,Ie,D,I,i,P,jl.HighlightMenuAndItem).map(P)),isOpen:Fn.isOn,close:D=>{Fn.isOn(D)&&v(D,P,jl.HighlightMenuAndItem).get(P)},repositionMenus:D=>{Fn.isOn(D)&&aP(D)}},T=(D,$)=>(om(D),O.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.dropdownBehaviours,[Fn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Cs.config({others:{sandbox:D=>vA(t,D,{onOpen:()=>Fn.on(D),onClose:()=>Fn.off(D)})}}),nn.config({mode:"special",onSpace:T,onEnter:T,onDown:(D,$)=>{if(vc.isOpen(D)){const I=Cs.getCoupled(D,"sandbox");h(I)}else vc.open(D);return O.some(!0)},onEscape:(D,$)=>vc.isOpen(D)?(vc.close(D),O.some(!0)):O.none()}),fn.config({})]),events:QC(O.some(S)),eventOrder:{...t.eventOrder,[ii()]:["disabling","toggling","alloy.base.behaviour"]},apis:x,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},vc=fr({name:"Dropdown",configFields:LE(),partFields:yA(),factory:CA,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),JH=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},QH=t=>{const s=At.getValue(t),a=bE(t).map(BB);vc.refetch(s).get(()=>{const i=Cs.getCoupled(s,"sandbox");a.each(d=>bE(i).each(h=>F8(h,d)))})},wA=(t,s)=>{SA(t).each(a=>{by(t,a.element,s.event.eventType,s.event.interactionEvent)})},SA=t=>to.getState(t).bind(go.getHighlighted).bind(go.getHighlighted),HE=t=>qa(t.element,yE)?O.some(t.element):As(t.element,"."+yE),xA=(t,s,a)=>{MB(t).each(i=>{L8(i,a),HE(s).each(h=>{Zs(h,"id").each(v=>In(i.element,"aria-controls",v))})}),In(a.element,"aria-selected","true")},e7=(t,s,a)=>{In(a.element,"aria-selected","false")},t7=t=>{MB(t).each(s=>fn.focus(s))},n7=t=>Cs.getExistingCoupled(t,"sandbox").bind(bE).map(BB).map(a=>a.fetchPattern).getOr("");var zE;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(zE||(zE={}));const o7=(t,s,a,i,d)=>{const h=a.shared.providers,v=S=>d?{...S,shortcut:O.none(),icon:S.text.isSome()?O.none():S.icon}:S;switch(t.type){case"menuitem":return tH(t).fold(Fm,S=>O.some(FH(v(S),s,h,i)));case"nestedmenuitem":return s$(t).fold(Fm,S=>O.some(LH(v(S),s,h,i,d)));case"togglemenuitem":return a$(t).fold(Fm,S=>O.some(HH(v(S),s,h,i)));case"separator":return K8(t).fold(Fm,S=>O.some(tP(S)));case"fancymenuitem":return Z4(t).fold(Fm,S=>zH(S,a));default:return console.error("Unknown item in general menu",t),O.none()}},s7=(t,s,a,i,d,h,v)=>{const S=i===1,x=!S||d2(t);return su(Pe(t,T=>{switch(T.type){case"separator":return HB(T).fold(Fm,D=>O.some(tP(D)));case"cardmenuitem":return eH(T).fold(Fm,D=>O.some(VH({...D,onAction:$=>{D.onAction($),a(D.value,D.meta)}},d,h,{itemBehaviours:w$(D.meta,h),cardText:{matchText:s,highlightOn:v}})));case"autocompleteitem":default:return h2(T).fold(Fm,D=>O.some(IH(D,s,S,"normal",a,d,h,x)))}}))},lP=(t,s,a,i,d,h)=>{const v=d2(s),S=su(Pe(s,D=>{const $=Z=>d?!Hn(Z,"text"):v,I=Z=>o7(Z,a,i,$(Z),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?I({...D,enabled:!1}):I(D)})),x=JH(h);return(d?M4:f2)(t,v,S,1,x)},EA=t=>c1.singleData(t.value,t),r7=(t,s,a,i)=>{const d=_2(s,i),h=g1(i);return{data:EA({...t,movement:d,menuBehaviours:p2.unnamedEvents(s!=="auto"?[]:[as((v,S)=>{j4(v,4,h.item).each(({numColumns:x,numRows:T})=>{nn.setGridSize(v,T,x)})})])}),menu:{markers:g1(i),fakeFocus:a===zE.ContentFocus}}},a7=(t,s)=>hE(Te.fromDom(s.startContainer)).map(a=>{const i=t.createRng();return i.selectNode(a.dom),i}),l7={register:(t,s)=>{const a=cn(!1),i=cn(!1),d=na(Rs.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:gt([Bn("dismissAutocompleter",[Xe(vu(),()=>T())])]),lazySink:s.getSink})),h=()=>Rs.isOpen(d),v=i.get,S=()=>{h()&&Rs.hide(d)},x=()=>Rs.getContent(d).bind(J=>ns(J.components(),0)),T=()=>t.execCommand("mceAutocompleterClose"),D=J=>{const ue=ks(J,_e=>O.from(_e.columns)).getOr(1);return Ge(J,_e=>{const Se=_e.items;return s7(Se,_e.matchText,(be,qe)=>{const Le=t.selection.getRng();a7(t.dom,Le).each(ht=>{const lt={hide:()=>T(),reload:wt=>{S(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:wt})}};a.set(!0),_e.onAction(lt,ht,be,qe),a.set(!1)})},ue,Ed.BUBBLE_TO_SANDBOX,s,_e.highlightOn)})},$=(J,ue)=>{S8(Te.fromDom(t.getBody())).each(_e=>{const Se=ks(J,be=>O.from(be.columns)).getOr(1);Rs.showMenuAt(d,{anchor:{type:"node",root:Te.fromDom(t.getBody()),node:O.from(_e)}},r7(f2("autocompleter-value",!0,ue,Se,{menuType:"normal"}),Se,zE.ContentFocus,"normal"))}),x().each(go.highlightFirst)},I=J=>{const ue=D(J);ue.length>0?$(J,ue):S()};t.on("AutocompleterStart",({lookupData:J})=>{i.set(!0),a.set(!1),I(J)}),t.on("AutocompleterUpdate",({lookupData:J})=>I(J)),t.on("AutocompleterEnd",()=>{S(),i.set(!1),a.set(!1)});const Z={cancelIfNecessary:T,isMenuOpen:h,isActive:v,isProcessingAction:a.get,getMenu:x};E8.setup(Z,t)}},i7=["visible","hidden"],kA=t=>{if(jd(t)){const s=et(t,"overflow");return Yr(s).length>0&&!_n(i7,s)}else return!1},c7=t=>{const s=pb(t,kA),a=s.length===0?ep(t).map(J1).map(i=>pb(i,kA)).getOr([]):s;return Js(a).map(i=>({element:i,others:a.slice(1)}))},w1=(t,s)=>Im(t)?c7(s):O.none(),Ui=t=>{const s=[...Pe(t.others,us),Ga()];return qT(us(t.element),s)},O2=(t,s,a)=>ba(t,s,a).isSome(),iP=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...h)=>{a=setTimeout(()=>{t.apply(null,h),a=null},s)}}},VE=5,Or=400,cP=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?O.none():O.some(s.touches[0])},u7=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>VE||i>VE},d7=t=>{const s=is(),a=cn(!1),i=iP(T=>{t.triggerEvent(ir(),T),a.set(!0)},Or),d=T=>(cP(T).each(D=>{i.cancel();const $={x:D.clientX,y:D.clientY,target:T.target};i.schedule(T),a.set(!1),s.set($)}),O.none()),h=T=>(i.cancel(),cP(T).each(D=>{s.on($=>{u7(D,$)&&s.clear()})}),O.none()),v=T=>{i.cancel();const D=$=>Lo($.target,T.target);return s.get().filter(D).map($=>a.get()?(T.prevent(),!1):t.triggerEvent(mp(),T))},S=Di([{key:hu(),value:d},{key:wg(),value:h},{key:Qf(),value:v}]);return{fireIfReady:(T,D)=>xt(S,D).bind($=>$(T))}},f7=t=>t.raw.which===UO[0]&&!_n(["input","textarea"],Ol(t.target))&&!O2(t.target,'[contenteditable="true"]'),m7=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=d7(a),h=Pe(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),Z=>el(t,Z,J=>{d.fireIfReady(J,Z).each(_e=>{_e&&J.kill()}),a.triggerEvent(Z,J)&&J.kill()})),v=is(),S=el(t,"paste",Z=>{d.fireIfReady(Z,"paste").each(ue=>{ue&&Z.kill()}),a.triggerEvent("paste",Z)&&Z.kill(),v.set(setTimeout(()=>{a.triggerEvent(Fc(),Z)},0))}),x=el(t,"keydown",Z=>{a.triggerEvent("keydown",Z)?Z.kill():a.stopBackspace&&f7(Z)&&Z.prevent()}),T=el(t,"focusin",Z=>{a.triggerEvent("focusin",Z)&&Z.kill()}),D=is(),$=el(t,"focusout",Z=>{a.triggerEvent("focusout",Z)&&Z.kill(),D.set(setTimeout(()=>{a.triggerEvent(xg(),Z)},0))});return{unbind:()=>{St(h,Z=>{Z.unbind()}),x.unbind(),T.unbind(),$.unbind(),S.unbind(),v.on(clearTimeout),D.on(clearTimeout)}}},uP=(t,s)=>{const a=xt(t,"target").getOr(s);return cn(a)},g7=(t,s)=>{const a=cn(!1),i=cn(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},h7=t=>{const s=cn(!1);return{stop:()=>{s.set(!0)},cut:P,isStopped:s.get,isCut:Je,event:t,setSource:re("Cannot set source of a broadcasted event"),getSource:re("Cannot get source of a broadcasted event")}},A2=Fl.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),dP=(t,s,a,i,d,h)=>{const v=t(s,i),S=g7(a,d);return v.fold(()=>(h.logEventNoHandlers(s,i),A2.complete()),x=>{const T=x.descHandler;return Nv(T)(S),S.isStopped()?(h.logEventStopped(s,x.element,T.purpose),A2.stopped()):S.isCut()?(h.logEventCut(s,x.element,T.purpose),A2.complete()):xi(x.element).fold(()=>(h.logNoParent(s,x.element,T.purpose),A2.complete()),$=>(h.logEventResponse(s,x.element,T.purpose),A2.resume($)))})},fP=(t,s,a,i,d,h)=>dP(t,s,a,i,d,h).fold(ot,v=>fP(t,s,a,v,d,h),Je),p7=(t,s,a,i,d)=>{const h=uP(a,i);return dP(t,s,a,i,h,d)},v7=(t,s,a)=>{const i=h7(s);return St(t,d=>{const h=d.descHandler;Nv(h)(i)}),i.isStopped()},b7=(t,s,a,i)=>mP(t,s,a,a.target,i),mP=(t,s,a,i,d)=>{const h=uP(a,i);return fP(t,s,a,i,h,d)},y7=(t,s)=>({element:t,descHandler:s}),C7=(t,s)=>({id:t,descHandler:s}),w7=()=>{const t={},s=(v,S,x)=>{Dn(x,(T,D)=>{const $=t[D]!==void 0?t[D]:{};$[S]=vS(T,v),t[D]=$})},a=(v,S)=>ac(S).bind(x=>xt(v,x)).map(x=>y7(S,x));return{registerId:s,unregisterId:v=>{Dn(t,(S,x)=>{Hn(S,v)&&delete S[v]})},filterByType:v=>xt(t,v).map(S=>ka(S,(x,T)=>C7(T,x))).getOr([]),find:(v,S,x)=>xt(t,S).bind(T=>Cg(x,D=>a(T,D),v))}},S7=()=>{const t=w7(),s={},a=T=>{const D=T.element;return ac(D).getOrThunk(()=>va("uid-",T.element))},i=(T,D)=>{const $=s[D];if($===T)h(T);else throw new Error('The tagId "'+D+'" is already used by: '+am($.element)+`
Cannot use it for: `+am(T.element)+`
The conflicting element is`+(ca($.element)?" ":" not ")+"already in the DOM")},d=T=>{const D=a(T);pr(s,D)&&i(T,D);const $=[T];t.registerId($,D,T.events),s[D]=T},h=T=>{ac(T.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(T,D,$)=>t.find(T,D,$),filter:T=>t.filterByType(T),register:d,unregister:h,getById:T=>xt(s,T)}},Ad=nr({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:oh(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Ae("components",[]),dr("containerBehaviours",[]),Ae("events",{}),Ae("domModification",{}),Ae("eventOrder",{})]}),TA=t=>{const s=Se=>xi(t.element).fold(ot,be=>Lo(Se,be)),a=S7(),i=(Se,be)=>a.find(s,Se,be),d=m7(t.element,{triggerEvent:(Se,be)=>Hg(Se,be.target,qe=>b7(i,Se,be,qe))}),h={debugInfo:K("real"),triggerEvent:(Se,be,qe)=>{Hg(Se,be,Le=>mP(i,Se,qe,be,Le))},triggerFocus:(Se,be)=>{ac(Se).fold(()=>{Ps(Se)},qe=>{Hg(pu(),Se,Le=>(p7(i,pu(),{originator:be,kill:P,prevent:P,target:Se},Se,Le),!1))})},triggerEscape:(Se,be)=>{h.triggerEvent("keydown",Se.element,be.event)},getByUid:Se=>ue(Se),getByDom:Se=>_e(Se),build:na,buildOrPatch:cd,addToGui:Se=>{x(Se)},removeFromGui:Se=>{T(Se)},addToWorld:Se=>{v(Se)},removeFromWorld:Se=>{S(Se)},broadcast:Se=>{I(Se)},broadcastOn:(Se,be)=>{Z(Se,be)},broadcastEvent:(Se,be)=>{J(Se,be)},isConnected:ot},v=Se=>{Se.connect(h),Al(Se.element)||(a.register(Se),St(Se.components(),v),h.triggerEvent(tm(),Se.element,{target:Se.element}))},S=Se=>{Al(Se.element)||(St(Se.components(),S),a.unregister(Se)),Se.disconnect()},x=Se=>{_u(t,Se)},T=Se=>{uc(Se)},D=()=>{d.unbind(),oc(t.element)},$=Se=>{const be=a.filter(Lc());St(be,qe=>{const Le=qe.descHandler;Nv(Le)(Se)})},I=Se=>{$({universal:!0,data:Se})},Z=(Se,be)=>{$({universal:!1,channels:Se,data:be})},J=(Se,be)=>{const qe=a.filter(Se);return v7(qe,be)},ue=Se=>a.getById(Se).fold(()=>Mn.error(new Error('Could not find component with uid: "'+Se+'" in system.')),Mn.value),_e=Se=>{const be=ac(Se).getOr("not found");return ue(be)};return v(t),{root:t,element:t.element,destroy:D,add:x,remove:T,getByUid:ue,getByDom:_e,addToWorld:v,removeFromWorld:S,broadcast:I,broadcastOn:Z,broadcastEvent:J}},x7=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Pe(t.items,s.interpreter)}),E7=K([Ae("prefix","form-field"),dr("fieldBehaviours",[Qn,At])]),k7=K([Fi({schema:[We("dom")],name:"label"}),Fi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[We("text")],name:"aria-descriptor"}),Nr({factory:{sketch:t=>{const s=Qu(t,["factory"]);return t.factory.sketch(s)}},schema:[We("factory")],name:"field"})]),gP=(t,s,a,i)=>{const d=zs(t.fieldBehaviours,[Qn.config({find:S=>No(S,t,"field")}),At.config({store:{mode:"manual",getValue:S=>Qn.getCurrent(S).bind(At.getValue),setValue:(S,x)=>{Qn.getCurrent(S).each(T=>{At.setValue(T,x)})}}})]),h=Wo([as((S,x)=>{const T=Ax(S,t,["label","field","aria-descriptor"]);T.field().each(D=>{const $=$t(t.prefix);T.label().each(I=>{In(I.element,"for",$),In(D.element,"id",$)}),T["aria-descriptor"]().each(I=>{const Z=$t(t.prefix);In(I.element,"id",Z),In(D.element,"aria-describedby",Z)})})})]),v={getField:S=>No(S,t,"field"),getLabel:S=>No(S,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:h,apis:v}},To=fr({name:"FormField",configFields:E7(),partFields:k7(),factory:gP,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var T7=Object.freeze({__proto__:null,exhibit:(t,s)=>lc({attributes:Di([{key:s.tabAttr,value:"true"}])})}),hP=[Ae("tabAttr","data-alloy-tabstop")];const Ns=jr({fields:hP,name:"tabstopping",active:T7});var _7=tinymce.util.Tools.resolve("tinymce.html.Entities");const R2=(t,s,a,i)=>{const d=O7(t,s,a,i);return To.sketch(d)},pP=(t,s)=>R2(t,s,[],[]),O7=(t,s,a,i)=>({dom:vP(a),components:t.toArray().concat([s]),fieldBehaviours:gt(i)}),A7=()=>vP([]),vP=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Ch=(t,s)=>To.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Hs(s.translate(t))]}),pi=$t("form-component-change"),D2=$t("form-close"),Um=$t("form-cancel"),Rf=$t("form-action"),f0=$t("form-submit"),_A=$t("form-block"),OA=$t("form-unblock"),bP=$t("form-tabchange"),yP=$t("form-resize"),R7=(t,s,a)=>{const i=t.label.map($=>Ch($,s)),d=$=>(I,Z)=>{ba(Z.event.target,"[data-collection-item-value]").each(J=>{$(I,Z,J,Jr(J,"data-collection-item-value"))})},h=($,I)=>{const Z=Pe(I,_e=>{const Se=rl.translate(_e.text),be=t.columns===1?`<div class="tox-collection__item-label">${Se}</div>`:"",qe=`<div class="tox-collection__item-icon">${_e.icon}</div>`,Le={_:" "," - ":" ","-":" "},ht=Se.replace(/\_| \- |\-/g,wt=>Le[wt]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${_7.encodeAllRaw(_e.value)}" title="${ht}" aria-label="${ht}">${qe}${be}</div>`}),J=t.columns!=="auto"&&t.columns>1?Jn(Z,t.columns):[Z],ue=Pe(J,_e=>`<div class="tox-collection__group">${_e.join("")}</div>`);rm($.element,ue.join(""))},v=d(($,I,Z,J)=>{I.stop(),s.isDisabled()||tn($,Rf,{name:t.name,value:J})}),S=[Xe(td(),d(($,I,Z)=>{Ps(Z)})),Xe(Bi(),v),Xe(mp(),v),Xe(Ic(),d(($,I,Z)=>{As($.element,"."+u2).each(J=>{bo(J,u2)}),tr(Z,u2)})),Xe(af(),d($=>{As($.element,"."+u2).each(I=>{bo(I,u2)})})),Hc(d(($,I,Z,J)=>{tn($,Rf,{name:t.name,value:J})}))],x=($,I)=>Pe(tl($.element,".tox-collection__item"),I),T=To.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Ie},behaviours:gt([un.config({disabled:s.isDisabled,onDisabled:$=>{x($,I=>{tr(I,"tox-collection__item--state-disabled"),In(I,"aria-disabled",!0)})},onEnabled:$=>{x($,I=>{bo(I,"tox-collection__item--state-disabled"),q(I,"aria-disabled")})}}),_r(),wn.config({}),At.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:($,I)=>{h($,I),t.columns==="auto"&&j4($,5,"tox-collection__item").each(({numRows:Z,numColumns:J})=>{nn.setGridSize($,Z,J)}),Co($,yP)}}),Ns.config({}),nn.config(Y$(t.columns,"normal")),Bn("collection-events",S)]),eventOrder:{[ii()]:["disabling","alloy.base.behaviour","collection-events"]}});return R2(i,T,["tox-form__group--collection"],[])},D7=["input","textarea"],CP=t=>{const s=Ol(t);return _n(D7,s)},wP=(t,s)=>{const a=s.getRoot(t).getOr(t.element);bo(a,s.invalidClass),s.notify.each(i=>{CP(t.element)&&In(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{rm(d,i.validHtml)}),i.onValid(t)})},SP=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);tr(d,s.invalidClass),s.notify.each(h=>{CP(t.element)&&In(t.element,"aria-invalid",!0),h.getContainer(t).each(v=>{rm(v,i)}),h.onInvalid(t,i)})},xP=(t,s,a)=>s.validator.fold(()=>ra.pure(Mn.value(!0)),i=>i.validate(t)),AA=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),xP(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(SP(t,s,a,d),Mn.error(d)),d=>(wP(t,s),Mn.value(d))):Mn.error("No longer in system")));var EP=Object.freeze({__proto__:null,markValid:wP,markInvalid:SP,query:xP,run:AA,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return qa(a,s.invalidClass)}}),M7=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Wo([Xe(a.onEvent,i=>{AA(i,t,s).get(Ie)})].concat(a.validateOnLoad?[as(i=>{AA(i,t,s).get(P)})]:[]))).getOr({})}),B7=[We("invalidClass"),Ae("getRoot",O.none),Gs("notify",[Ae("aria","alert"),Ae("getContainer",O.none),Ae("validHtml",""),Vn("onValid"),Vn("onInvalid"),Vn("onValidate")]),Gs("validator",[We("validate"),Ae("onEvent","input"),Ae("validateOnLoad",!0)])];const Df=jr({fields:B7,name:"invalidating",active:M7,apis:EP,extra:{validation:t=>s=>{const a=At.getValue(s);return ra.pure(t(a))}}});var $7=Object.freeze({__proto__:null,events:()=>Wo([_v(gy(),ot)]),exhibit:()=>lc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const M2=jr({fields:[],name:"unselecting",active:$7}),P7=(t,s)=>vc.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:gt([Au.button(s.providers.isDisabled),_r(),M2.config({}),Ns.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>ra.nu(i=>t.fetch(i)).map(i=>O.from(EA(Xo(uA($t("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,Ed.CLOSE_ON_EXECUTE,Je,s.providers),{movement:_2(t.columns,t.presets)})))),parts:{menu:vE(!1,1,t.presets)}}),RA=$t("color-input-change"),DA=$t("color-swatch-change"),TP=$t("color-picker-cancel"),N7=(t,s,a,i)=>{const d=To.parts.field({factory:h1,inputClasses:["tox-textfield"],data:i,onSetValue:T=>Df.run(T).get(P),inputBehaviours:gt([un.config({disabled:s.providers.isDisabled}),_r(),Ns.config({}),Df.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>Wa(T.element),notify:{onValid:T=>{const D=At.getValue(T);tn(T,RA,{color:D})}},validator:{validateOnLoad:!1,validate:T=>{const D=At.getValue(T);if(D.length===0)return ra.pure(Mn.value(!0));{const $=Te.fromTag("span");Rt($,"background-color",D);const I=Yo($,"background-color").fold(()=>Mn.error("blah"),Z=>Mn.value(D));return ra.pure(I)}}}})]),selectOnFocus:!1}),h=t.label.map(T=>Ch(T,s.providers)),v=(T,D)=>{tn(T,DA,{value:D})},S=(T,D)=>{x.getOpt(T).each($=>{D==="custom"?a.colorPicker(I=>{I.fold(()=>Co($,TP),Z=>{v($,Z),$$(t.storageKey,Z)})},"#ffffff"):D==="remove"?v($,""):v($,D)})},x=ko(P7({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Sr,$r,ur],onLtr:()=>[$r,Sr,ur]},components:[],fetch:iA(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:S},s));return To.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:h.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:gt([Bn("form-field-events",[Xe(RA,(T,D)=>{x.getOpt(T).each($=>{Rt($.element,"background-color",D.event.color)}),tn(T,pi,{name:t.name})}),Xe(DA,(T,D)=>{To.getField(T).each($=>{At.setValue($,D.event.value),Qn.getCurrent(T).each(fn.focus)})}),Xe(TP,(T,D)=>{To.getField(T).each($=>{Qn.getCurrent(T).each(fn.focus)})})])])})},_P=Fi({schema:[We("dom")],name:"label"}),wh=t=>Fi({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Wo([_g(hu(),(d,h,v)=>i(d,v),[s]),_g(li(),(d,h,v)=>i(d,v),[s]),_g(Sv(),(d,h,v)=>{v.mouseIsDown.get()&&i(d,v)},[s])])}))}),I7=wh("top-left"),F7=wh("top"),L7=wh("top-right"),H7=wh("right"),z7=wh("bottom-right"),UE=wh("bottom"),V7=wh("bottom-left"),WE=wh("left"),U7=Nr({name:"thumb",defaults:K({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Wo([Og(hu(),t,"spectrum"),Og(wg(),t,"spectrum"),Og(Qf(),t,"spectrum"),Og(li(),t,"spectrum"),Og(Sv(),t,"spectrum"),Og(Ll(),t,"spectrum")])})}),W7=Nr({schema:[Ka("mouseIsDown",()=>cn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,h)=>a.getValueFromEvent(h).map(v=>a.setValueFrom(d,t,v));return{behaviours:gt([nn.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),fn.config({})]),events:Wo([Xe(hu(),i),Xe(wg(),i),Xe(li(),i),Xe(Sv(),(d,h)=>{t.mouseIsDown.get()&&i(d,h)})])}}});var Z7=[_P,WE,H7,F7,UE,I7,L7,V7,z7,U7,W7];const ZE=K("slider.change.value"),jE=t=>t.type.indexOf("touch")!==-1,Sh=t=>{const s=t.event.raw;if(jE(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?O.some(a.touches[0]).map(i=>vs(i.clientX,i.clientY)):O.none()}else{const a=s;return a.clientX!==void 0?O.some(a).map(i=>vs(i.clientX,i.clientY)):O.none()}},OP="top",AP="right",j7="bottom",G7="left",S1=t=>t.model.minX,x1=t=>t.model.minY,GE=t=>t.model.minX-1,KE=t=>t.model.minY-1,E1=t=>t.model.maxX,k1=t=>t.model.maxY,qE=t=>t.model.maxX+1,YE=t=>t.model.maxY+1,RP=(t,s,a)=>s(t)-a(t),XE=t=>RP(t,E1,S1),xh=t=>RP(t,k1,x1),Eh=t=>XE(t)/2,DP=t=>xh(t)/2,T1=t=>t.stepSize,MA=t=>t.snapToGrid,B2=t=>t.snapStart,MP=t=>t.rounded,kh=(t,s)=>t[s+"-edge"]!==void 0,m0=t=>kh(t,G7),BP=t=>kh(t,AP),$P=t=>kh(t,OP),PP=t=>kh(t,j7),Wm=t=>t.model.value.get(),Th=(t,s)=>({x:t,y:s}),Du=(t,s)=>{tn(t,ZE(),{value:s})},JE=(t,s)=>{Du(t,Th(GE(s),KE(s)))},K7=(t,s)=>{Du(t,KE(s))},q7=(t,s)=>{Du(t,Th(Eh(s),KE(s)))},Y7=(t,s)=>{Du(t,Th(qE(s),KE(s)))},NP=(t,s)=>{Du(t,qE(s))},X7=(t,s)=>{Du(t,Th(qE(s),DP(s)))},J7=(t,s)=>{Du(t,Th(qE(s),YE(s)))},Q7=(t,s)=>{Du(t,YE(s))},IP=(t,s)=>{Du(t,Th(Eh(s),YE(s)))},ez=(t,s)=>{Du(t,Th(GE(s),YE(s)))},tz=(t,s)=>{Du(t,GE(s))},nz=(t,s)=>{Du(t,Th(GE(s),DP(s)))},BA=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),$A=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),PA=(t,s,a)=>Math.max(s,Math.min(a,t)),FP=(t,s,a,i,d)=>d.fold(()=>{const h=t-s,v=Math.round(h/i)*i;return PA(s+v,s-1,a+1)},h=>{const v=(t-h)%i,S=Math.round(v/i),x=Math.floor((t-h)/i),T=Math.floor((a-h)/i),D=Math.min(T,x+S),$=h+D*i;return Math.max(h,$)}),oz=(t,s,a)=>Math.min(a,Math.max(t,s))-s,LP=t=>{const{min:s,max:a,range:i,value:d,step:h,snap:v,snapStart:S,rounded:x,hasMinEdge:T,hasMaxEdge:D,minBound:$,maxBound:I,screenRange:Z}=t,J=T?s-1:s,ue=D?a+1:a;if(d<$)return J;if(d>I)return ue;{const _e=oz(d,$,I),Se=PA(_e/Z*i+s,J,ue);return v&&Se>=s&&Se<=a?FP(Se,s,a,h,S):x?Math.round(Se):Se}},HP=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:h,hasMaxEdge:v,maxBound:S,maxOffset:x,centerMinEdge:T,centerMaxEdge:D}=t;return d<s?h?0:T:d>a?v?S:D:(d-s)/i*x},NA="top",zP="right",IA="bottom",_h="left",sz="width",rz="height",Mf=t=>t.element.dom.getBoundingClientRect(),Wi=(t,s)=>t[s],vi=t=>{const s=Mf(t);return Wi(s,_h)},QE=t=>{const s=Mf(t);return Wi(s,zP)},$2=t=>{const s=Mf(t);return Wi(s,NA)},VP=t=>{const s=Mf(t);return Wi(s,IA)},UP=t=>{const s=Mf(t);return Wi(s,sz)},WP=t=>{const s=Mf(t);return Wi(s,rz)},ZP=(t,s,a)=>(t+s)/2-a,FA=(t,s)=>{const a=Mf(t),i=Mf(s),d=Wi(a,_h),h=Wi(a,zP),v=Wi(i,_h);return ZP(d,h,v)},LA=(t,s)=>{const a=Mf(t),i=Mf(s),d=Wi(a,NA),h=Wi(a,IA),v=Wi(i,NA);return ZP(d,h,v)},ek=(t,s)=>{tn(t,ZE(),{value:s})},HA=(t,s,a)=>{const i={min:S1(s),max:E1(s),range:XE(s),value:a,step:T1(s),snap:MA(s),snapStart:B2(s),rounded:MP(s),hasMinEdge:m0(s),hasMaxEdge:BP(s),minBound:vi(t),maxBound:QE(t),screenRange:UP(t)};return LP(i)},jP=(t,s,a)=>{const i=HA(t,s,a);return ek(t,i),i},az=(t,s)=>{const a=S1(s);ek(t,a)},GP=(t,s)=>{const a=E1(s);ek(t,a)},KP=(t,s,a)=>{const d=(t>0?$A:BA)(Wm(a),S1(a),E1(a),T1(a));return ek(s,d),O.some(d)},zA=t=>(s,a)=>KP(t,s,a).map(ot),lz=t=>Sh(t).map(a=>a.left),iz=(t,s,a,i,d)=>{const v=UP(t),S=i.bind(D=>O.some(FA(D,t))).getOr(0),x=d.bind(D=>O.some(FA(D,t))).getOr(v),T={min:S1(s),max:E1(s),range:XE(s),value:a,hasMinEdge:m0(s),hasMaxEdge:BP(s),minBound:vi(t),minOffset:0,maxBound:QE(t),maxOffset:v,centerMinEdge:S,centerMaxEdge:x};return HP(T)},VA=(t,s,a,i,d,h)=>{const v=iz(s,h,a,i,d);return vi(s)-vi(t)+v},cz=(t,s,a,i)=>{const d=Wm(a),h=VA(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),v=Za(s.element)/2;Rt(s.element,"left",h-v+"px")},uz=zA(-1),dz=zA(1),UA=O.none,fz=O.none,qP={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(NP),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(tz)};var mz=Object.freeze({__proto__:null,setValueFrom:jP,setToMin:az,setToMax:GP,findValueOfOffset:HA,getValueFromEvent:lz,findPositionOfValue:VA,setPositionFromValue:cz,onLeft:uz,onRight:dz,onUp:UA,onDown:fz,edgeActions:qP});const tk=(t,s)=>{tn(t,ZE(),{value:s})},WA=(t,s,a)=>{const i={min:x1(s),max:k1(s),range:xh(s),value:a,step:T1(s),snap:MA(s),snapStart:B2(s),rounded:MP(s),hasMinEdge:$P(s),hasMaxEdge:PP(s),minBound:$2(t),maxBound:VP(t),screenRange:WP(t)};return LP(i)},gz=(t,s,a)=>{const i=WA(t,s,a);return tk(t,i),i},hz=(t,s)=>{const a=x1(s);tk(t,a)},pz=(t,s)=>{const a=k1(s);tk(t,a)},vz=(t,s,a)=>{const d=(t>0?$A:BA)(Wm(a),x1(a),k1(a),T1(a));return tk(s,d),O.some(d)},ZA=t=>(s,a)=>vz(t,s,a).map(ot),YP=t=>Sh(t).map(a=>a.top),bz=(t,s,a,i,d)=>{const v=WP(t),S=i.bind(D=>O.some(LA(D,t))).getOr(0),x=d.bind(D=>O.some(LA(D,t))).getOr(v),T={min:x1(s),max:k1(s),range:xh(s),value:a,hasMinEdge:$P(s),hasMaxEdge:PP(s),minBound:$2(t),minOffset:0,maxBound:VP(t),maxOffset:v,centerMinEdge:S,centerMaxEdge:x};return HP(T)},jA=(t,s,a,i,d,h)=>{const v=bz(s,h,a,i,d);return $2(s)-$2(t)+v},yz=(t,s,a,i)=>{const d=Wm(a),h=jA(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),v=js(s.element)/2;Rt(s.element,"top",h-v+"px")},Cz=O.none,wz=O.none,XP=ZA(-1),JP=ZA(1),QP={"top-left":O.none(),top:O.some(K7),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(Q7),"bottom-left":O.none(),left:O.none()};var GA=Object.freeze({__proto__:null,setValueFrom:gz,setToMin:hz,setToMax:pz,findValueOfOffset:WA,getValueFromEvent:YP,findPositionOfValue:jA,setPositionFromValue:yz,onLeft:Cz,onRight:wz,onUp:XP,onDown:JP,edgeActions:QP});const nk=(t,s)=>{tn(t,ZE(),{value:s})},P2=(t,s)=>({x:t,y:s}),Sz=(t,s,a)=>{const i=HA(t,s,a.left),d=WA(t,s,a.top),h=P2(i,d);return nk(t,h),h},xz=(t,s,a,i)=>{const d=t>0?$A:BA,h=s?Wm(i).x:d(Wm(i).x,S1(i),E1(i),T1(i)),v=s?d(Wm(i).y,x1(i),k1(i),T1(i)):Wm(i).y;return nk(a,P2(h,v)),O.some(h)},ok=(t,s)=>(a,i)=>xz(t,s,a,i).map(ot),Ez=(t,s)=>{const a=S1(s),i=x1(s);nk(t,P2(a,i))},KA=(t,s)=>{const a=E1(s),i=k1(s);nk(t,P2(a,i))},Zm=t=>Sh(t),kz=(t,s,a,i)=>{const d=Wm(a),h=VA(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),v=jA(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),S=Za(s.element)/2,x=js(s.element)/2;Rt(s.element,"left",h-S+"px"),Rt(s.element,"top",v-x+"px")},N2=ok(-1,!1),Tz=ok(1,!1),qA=ok(-1,!0),_z=ok(1,!0),Oz={"top-left":O.some(JE),top:O.some(q7),"top-right":O.some(Y7),right:O.some(X7),"bottom-right":O.some(J7),bottom:O.some(IP),"bottom-left":O.some(ez),left:O.some(nz)};var Az=Object.freeze({__proto__:null,setValueFrom:Sz,setToMin:Ez,setToMax:KA,getValueFromEvent:Zm,setPositionFromValue:kz,onLeft:N2,onRight:Tz,onUp:qA,onDown:_z,edgeActions:Oz});const eN=[Ae("stepSize",1),Ae("onChange",P),Ae("onChoose",P),Ae("onInit",P),Ae("onDragStart",P),Ae("onDragEnd",P),Ae("snapToGrid",!1),Ae("rounded",!0),xo("snapStart"),wl("model",er("mode",{x:[Ae("minX",0),Ae("maxX",100),Ka("value",t=>cn(t.mode.minX)),We("getInitialValue"),ls("manager",mz)],y:[Ae("minY",0),Ae("maxY",100),Ka("value",t=>cn(t.mode.minY)),We("getInitialValue"),ls("manager",GA)],xy:[Ae("minX",0),Ae("maxX",100),Ae("minY",0),Ae("maxY",100),Ka("value",t=>cn({x:t.mode.minX,y:t.mode.minY})),We("getInitialValue"),ls("manager",Az)]})),dr("sliderBehaviours",[nn,At]),Ka("mouseIsDown",()=>cn(!1))],bc=fr({name:"Slider",configFields:eN,partFields:Z7,factory:(t,s,a,i)=>{const d=Le=>Ef(Le,t,"thumb"),h=Le=>Ef(Le,t,"spectrum"),v=Le=>No(Le,t,"left-edge"),S=Le=>No(Le,t,"right-edge"),x=Le=>No(Le,t,"top-edge"),T=Le=>No(Le,t,"bottom-edge"),D=t.model,$=D.manager,I=(Le,ht)=>{$.setPositionFromValue(Le,ht,t,{getLeftEdge:v,getRightEdge:S,getTopEdge:x,getBottomEdge:T,getSpectrum:h})},Z=(Le,ht)=>{D.value.set(ht);const lt=d(Le);I(Le,lt)},J=(Le,ht)=>{Z(Le,ht);const lt=d(Le);return t.onChange(Le,lt,ht),O.some(!0)},ue=Le=>{$.setToMin(Le,t)},_e=Le=>{$.setToMax(Le,t)},Se=Le=>{const ht=()=>{No(Le,t,"thumb").each(wt=>{const Mt=D.value.get();t.onChoose(Le,wt,Mt)})},lt=t.mouseIsDown.get();t.mouseIsDown.set(!1),lt&&ht()},be=(Le,ht)=>{ht.stop(),t.mouseIsDown.set(!0),t.onDragStart(Le,d(Le))},qe=(Le,ht)=>{ht.stop(),t.onDragEnd(Le,d(Le)),Se(Le)};return{uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.sliderBehaviours,[nn.config({mode:"special",focusIn:Le=>No(Le,t,"spectrum").map(nn.focusIn).map(ot)}),At.config({store:{mode:"manual",getValue:Le=>D.value.get(),setValue:Z}}),Ja.config({channels:{[Cb()]:{onReceive:Se}}})]),events:Wo([Xe(ZE(),(Le,ht)=>{J(Le,ht.event.value)}),as((Le,ht)=>{const lt=D.getInitialValue();D.value.set(lt);const wt=d(Le);I(Le,wt);const Mt=h(Le);t.onInit(Le,wt,Mt,D.value.get())}),Xe(hu(),be),Xe(Qf(),qe),Xe(li(),be),Xe(Ll(),qe)]),apis:{resetToMin:ue,resetToMax:_e,setValue:Z,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),I2=$t("rgb-hex-update"),sk=$t("slider-update"),tN=$t("palette-update"),yc=(t,s)=>{const a=bc.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=bc.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return bc.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:K(0)},components:[a,i],sliderBehaviours:gt([fn.config({})]),onChange:(d,h,v)=>{tn(d,sk,{value:v})}})},nN="form",Rz=[dr("formBehaviours",[At])],YA=t=>"<alloy.field."+t+">",oN=t=>{const s=(()=>{const h=[];return{field:(S,x)=>(h.push(S),Om(nN,YA(S),x)),record:K(h)}})(),a=t(s),i=s.record(),d=Pe(i,h=>Nr({name:h,pname:YA(h)}));return $b(nN,Rz,d,Mz,a)},Dz=(t,s)=>t.fold(()=>Mn.error(s),Mn.value),Mz=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.formBehaviours,[At.config({store:{mode:"manual",getValue:a=>{const i=Rx(a,t);return Re(i,(d,h)=>d().bind(v=>{const S=Qn.getCurrent(v);return Dz(S,new Error(`Cannot find a current component to extract the value from for form part '${h}': `+am(v.element)))}).map(At.getValue))},setValue:(a,i)=>{Dn(i,(d,h)=>{No(a,t,h).each(v=>{Qn.getCurrent(v).each(S=>{At.setValue(S,d)})})})}}})]),apis:{getField:(a,i)=>No(a,t,i).bind(Qn.getCurrent)}}),g0={getField:Dg((t,s,a)=>t.getField(s,a)),sketch:oN},sN=$t("valid-input"),rN=$t("invalid-input"),aN=$t("validating-input"),XA="colorcustom.rgb.",lN=(t,s,a,i)=>{const d=(I,Z)=>Df.config({invalidClass:s("invalid"),notify:{onValidate:J=>{tn(J,aN,{type:I})},onValid:J=>{tn(J,sN,{type:I,value:At.getValue(J)})},onInvalid:J=>{tn(J,rN,{type:I,value:At.getValue(J)})}},validator:{validate:J=>{const ue=At.getValue(J),_e=Z(ue)?Mn.value(!0):Mn.error(t("aria.input.invalid"));return ra.pure(_e)},validateOnLoad:!1}}),h=(I,Z,J,ue,_e)=>{const Se=t(XA+"range"),be=To.parts.label({dom:{tag:"label",attributes:{"aria-label":ue}},components:[Hs(J)]}),qe=To.parts.field({data:_e,factory:h1,inputAttributes:{type:"text",...Z==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:gt([d(Z,I),Ns.config({})]),onSetValue:wt=>{Df.isInvalid(wt)&&Df.run(wt).get(P)}}),Le=[be,qe],ht=Z!=="hex"?[To.parts["aria-descriptor"]({text:Se})]:[],lt=Le.concat(ht);return{dom:{tag:"div",attributes:{role:"presentation"}},components:lt}},v=(I,Z)=>{const J=w2(Z);return g0.getField(I,"hex").each(ue=>{fn.isFocused(ue)||At.setValue(I,{hex:J.value})}),J},S=(I,Z)=>{const J=Z.red,ue=Z.green,_e=Z.blue;At.setValue(I,{red:J,green:ue,blue:_e})},x=ko({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),T=(I,Z)=>{x.getOpt(I).each(J=>{Rt(J.element,"background-color","#"+Z.value)})};return nr({factory:()=>{const I={red:cn(O.some(255)),green:cn(O.some(255)),blue:cn(O.some(255)),hex:cn(O.some("ffffff"))},Z=(Sn,ro)=>{const an=x2(ro);S(Sn,an),Se(an)},J=Sn=>I[Sn].get(),ue=(Sn,ro)=>{I[Sn].set(ro)},_e=()=>J("red").bind(Sn=>J("green").bind(ro=>J("blue").map(an=>Td(Sn,ro,an,1)))),Se=Sn=>{const ro=Sn.red,an=Sn.green,eo=Sn.blue;ue("red",O.some(ro)),ue("green",O.some(an)),ue("blue",O.some(eo))},be=(Sn,ro)=>{const an=ro.event;an.type!=="hex"?ue(an.type,O.none()):i(Sn)},qe=(Sn,ro)=>{a(Sn);const an=Ru(ro);ue("hex",O.some(an.value));const eo=x2(an);S(Sn,eo),Se(eo),tn(Sn,I2,{hex:an}),T(Sn,an)},Le=(Sn,ro,an)=>{const eo=parseInt(an,10);ue(ro,O.some(eo)),_e().each(kt=>{const jt=v(Sn,kt);tn(Sn,I2,{hex:jt}),T(Sn,jt)})},ht=Sn=>Sn.type==="hex",lt=(Sn,ro)=>{const an=ro.event;ht(an)?qe(Sn,an.value):Le(Sn,an.type,an.value)},wt=Sn=>({label:t(XA+Sn+".label"),description:t(XA+Sn+".description")}),Mt=wt("red"),Gn=wt("green"),Yt=wt("blue"),Tn=wt("hex");return Xo(g0.sketch(Sn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Sn.field("red",To.sketch(h(S2,"red",Mt.label,Mt.description,255))),Sn.field("green",To.sketch(h(S2,"green",Gn.label,Gn.description,255))),Sn.field("blue",To.sketch(h(S2,"blue",Yt.label,Yt.description,255))),Sn.field("hex",To.sketch(h(k$,"hex",Tn.label,Tn.description,"ffffff"))),x.asSpec()],formBehaviours:gt([Df.config({invalidClass:s("form-invalid")}),Bn("rgb-form-events",[Xe(sN,lt),Xe(rN,be),Xe(aN,be)])])})),{apis:{updateHex:(Sn,ro)=>{At.setValue(Sn,{hex:ro.value}),Z(Sn,ro),T(Sn,ro)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(I,Z,J)=>{I.updateHex(Z,J)}},extraApis:{}})},Bz=(t,s)=>{const a=bc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=bc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,D)=>{const{width:$,height:I}=T,Z=T.getContext("2d");if(Z===null)return;Z.fillStyle=D,Z.fillRect(0,0,$,I);const J=Z.createLinearGradient(0,0,$,0);J.addColorStop(0,"rgba(255,255,255,1)"),J.addColorStop(1,"rgba(255,255,255,0)"),Z.fillStyle=J,Z.fillRect(0,0,$,I);const ue=Z.createLinearGradient(0,0,0,I);ue.addColorStop(0,"rgba(0,0,0,0)"),ue.addColorStop(1,"rgba(0,0,0,1)"),Z.fillStyle=ue,Z.fillRect(0,0,$,I)},h=(T,D)=>{const $=T.components()[0].element.dom,I=T2(D,100,100),Z=A$(I);d($,R$(Z))},v=(T,D)=>{const $=Q4(x2(D));bc.setValue(T,{x:$.saturation,y:100-$.value})};return nr({factory:T=>{const D=K({x:0,y:0}),$=(J,ue,_e)=>{tn(J,tN,{value:_e})},I=(J,ue,_e,Se)=>{d(_e.element.dom,R$(zm))},Z=gt([Qn.config({find:O.some}),fn.config({})]);return bc.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,i],onChange:$,onInit:I,sliderBehaviours:Z})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,D,$)=>{h(D,$)},setThumb:(T,D,$)=>{v(D,$)}},extraApis:{}})},$z=(t,s)=>{const a=d=>{const h=lN(t,s,d.onValidHex,d.onInvalidHex),v=Bz(t,s),S=lt=>(100-lt)/100*360,x=lt=>100-lt/360*100,T={paletteRgba:cn(zm),paletteHue:cn(0)},D=ko(yc(t,s)),$=ko(v.sketch({})),I=ko(h.sketch({})),Z=(lt,wt,Mt)=>{$.getOpt(lt).each(Gn=>{v.setHue(Gn,Mt)})},J=(lt,wt)=>{I.getOpt(lt).each(Mt=>{h.updateHex(Mt,wt)})},ue=(lt,wt,Mt)=>{D.getOpt(lt).each(Gn=>{bc.setValue(Gn,x(Mt))})},_e=(lt,wt)=>{$.getOpt(lt).each(Mt=>{v.setThumb(Mt,wt)})},Se=(lt,wt)=>{const Mt=x2(lt);T.paletteRgba.set(Mt),T.paletteHue.set(wt)},be=(lt,wt,Mt,Gn)=>{Se(wt,Mt),St(Gn,Yt=>{Yt(lt,wt,Mt)})},qe=()=>{const lt=[J];return(wt,Mt)=>{const Gn=Mt.event.value,Yt=T.paletteHue.get(),Tn=T2(Yt,Gn.x,100-Gn.y),Sn=P$(Tn);be(wt,Sn,Yt,lt)}},Le=()=>{const lt=[Z,J];return(wt,Mt)=>{const Gn=S(Mt.event.value),Yt=T.paletteRgba.get(),Tn=Q4(Yt),Sn=T2(Gn,Tn.saturation,Tn.value),ro=P$(Sn);be(wt,ro,Gn,lt)}},ht=()=>{const lt=[Z,ue,_e];return(wt,Mt)=>{const Gn=Mt.event.hex,Yt=xH(Gn);be(wt,Gn,Yt.hue,lt)}};return{uid:d.uid,dom:d.dom,components:[$.asSpec(),D.asSpec(),I.asSpec()],behaviours:gt([Bn("colour-picker-events",[Xe(I2,ht()),Xe(tN,qe()),Xe(sk,Le())]),Qn.config({find:lt=>I.getOpt(lt)}),nn.config({mode:"acyclic"})])}};return nr({name:"ColourPicker",configFields:[We("dom"),Ae("onValidHex",P),Ae("onInvalidHex",P)],factory:a})},Mu={self:()=>Qn.config({find:O.some}),memento:t=>Qn.config({find:t.getOpt}),childAt:t=>Qn.config({find:s=>cu(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},JA=rn([Ae("preprocess",Ie),Ae("postprocess",Ie)]),h0=(t,s)=>{const a=ma("RepresentingConfigs.memento processors",JA,s);return At.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),h=At.getValue(d);return a.postprocess(h)},setValue:(i,d)=>{const h=a.preprocess(d),v=t.get(i);At.setValue(v,h)}}})},Oh=(t,s,a)=>At.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),QA=(t,s,a)=>Oh(t,i=>s(i.element),(i,d)=>a(i.element,d)),cN=t=>QA(t,sm,rm),rk=t=>At.config({store:{mode:"memory",initialValue:t}}),Nz={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},ak=t=>s=>t.translate(Nz[s]),Iz=(t,s,a)=>{const i=x=>"tox-"+x,d=$z(ak(s),i),h=x=>{tn(x,Rf,{name:"hex-valid",value:!0})},v=x=>{tn(x,Rf,{name:"hex-valid",value:!1})},S=ko(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:v}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:gt([Oh(a,x=>{const T=S.get(x);return Qn.getCurrent(T).bind(I=>At.getValue(I).hex).map(I=>"#"+eg(I,"#")).getOr("")},(x,T)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,$=O.from(D.exec(T)).bind(J=>ns(J,1)),I=S.get(x);Qn.getCurrent(I).fold(()=>{console.log("Can not find form")},J=>{At.setValue(J,{hex:$.getOr("")}),g0.getField(J,"hex").each(ue=>{Co(ue,lf())})})}),Mu.self()])}};var Fz=tinymce.util.Tools.resolve("tinymce.Resource");const uN=t=>Hn(t,"init"),dN=t=>{const s=is(),a=ko({dom:{tag:t.tag}}),i=is();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:gt([Bn("custom-editor-events",[as(d=>{a.getOpt(d).each(h=>{(uN(t)?t.init(h.element.dom):Fz.load(t.scriptId,t.scriptUrl).then(v=>v(h.element.dom,t.settings))).then(v=>{i.on(S=>{v.setValue(S)}),i.clear(),s.set(v)})})})]),Oh(O.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,h)=>{s.get().fold(()=>i.set(h),v=>v.setValue(h))}),Mu.self()]),components:[a.asSpec()]}};var Rd=tinymce.util.Tools.resolve("tinymce.util.Tools");const fN=(t,s)=>{const a=Rd.explode(s.getOption("images_file_types")),i=d=>Kn(a,h=>Ji(d.name.toLowerCase(),`.${h.toLowerCase()}`));return Wn(Dr(t),i)},Gl=(t,s,a)=>{const i=(I,Z)=>{Z.stop()},d=I=>(Z,J)=>{St(I,ue=>{ue(Z,J)})},h=(I,Z)=>{var J;if(!un.isDisabled(I)){const ue=Z.event.raw;S(I,(J=ue.dataTransfer)===null||J===void 0?void 0:J.files)}},v=(I,Z)=>{const J=Z.event.raw.target;S(I,J.files)},S=(I,Z)=>{Z&&(At.setValue(I,fN(Z,s)),tn(I,pi,{name:t.name}))},x=ko({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:gt([Bn("input-file-events",[bu(Bi()),bu(mp())])])}),T=I=>({uid:I.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:gt([rk(a.getOr([])),Mu.self(),un.config({}),Fn.config({toggleClass:"dragenter",toggleOnExecute:!1}),Bn("dropzone-events",[Xe("dragenter",d([i,Fn.toggle])),Xe("dragleave",d([i,Fn.toggle])),Xe("dragover",i),Xe("drop",d([i,h])),Xe(Sg(),v)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Hs(s.translate("Drop an image here"))]},wa.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Hs(s.translate("Browse for an image")),x.asSpec()],action:Z=>{x.get(Z).element.dom.click()},buttonBehaviours:gt([Ns.config({}),Au.button(s.isDisabled),_r()])})]}]}),D=t.label.map(I=>Ch(I,s)),$=To.parts.field({factory:{sketch:T}});return R2(D,$,["tox-form__group--stretched"],[])},mN=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Pe(t.items,s.interpreter)}),Lz=(t,s)=>{let a=null,i=null;return{cancel:()=>{ce(a)||(clearTimeout(a),a=null,i=null)},throttle:(...v)=>{i=v,ce(a)&&(a=setTimeout(()=>{const S=i;a=null,i=null,t.apply(null,S)},s))}}},Hz=(t,s)=>{let a=null;return{cancel:()=>{ce(a)||(clearTimeout(a),a=null)},throttle:(...h)=>{ce(a)&&(a=setTimeout(()=>{a=null,t.apply(null,h)},s))}}},lk=(t,s)=>{let a=null;const i=()=>{ce(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...h)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,h)},s)}}},e3=$t("alloy-fake-before-tabstop"),t3=$t("alloy-fake-after-tabstop"),gN=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:gt([fn.config({ignore:!0}),Ns.config({})])}),n3=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[gN([e3]),s,gN([t3])],behaviours:gt([Mu.childAt(1)])}),Dd=(t,s)=>{tn(t,rc(),{raw:{which:9,shiftKey:s}})},o3=(t,s)=>{const a=s.element;qa(a,e3)?Dd(t,!0):qa(a,t3)&&Dd(t,!1)},p0=t=>O2(t,["."+e3,"."+t3].join(","),Je),v0=$t("update-dialog"),ik=$t("update-title"),hN=$t("update-body"),pN=$t("update-footer"),vN=$t("body-send-message"),ck=$t("dialog-focus-shifted"),s3=Oa().browser,F2=s3.isSafari(),zz=s3.isFirefox(),r3=F2||zz,Vz=s3.isChromium(),Bf=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,L2=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),Uz=(t,s)=>{const a=t.body;return O.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!Vz&&!F2||ve(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},bN=(t,s,a)=>{const i=t.dom;O.from(i.contentDocument).fold(a,d=>{let h=0;const v=Uz(d,s).map(x=>(h=x.scrollTop,x)).forall(Bf),S=()=>{const x=i.contentWindow;ve(x)&&(v?L2(x,"bottom"):!v&&r3&&h!==0&&L2(x,h))};F2&&i.addEventListener("load",S,{once:!0}),d.open(),d.write(s),d.close(),F2||S()})},yN=Cn(r3,F2?500:200).map(t=>Lz(bN,t)),a3=(t,s)=>{const a=cn(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const h=i.element,v=()=>In(h,"srcdoc",d);s?yN.fold(K(bN),S=>S.throttle)(h,d,v):v()}a.set(d)}}},uk=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],h=t.border?["tox-navobj-bordered"]:[],v={...t.label.map($=>({title:$})).getOr({}),...a.map($=>({srcdoc:$})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},S=a3(a,t.streamContent),x=t.label.map($=>Ch($,s)),T=$=>n3(O.from(h),{uid:$.uid,dom:{tag:"iframe",attributes:v,classes:[i,...d]},behaviours:gt([Ns.config({}),fn.config({}),Oh(a,S.getValue,S.setValue),Ja.config({channels:{[ck]:{onReceive:(I,Z)=>{Z.newFocus.each(J=>{Wa(I.element).each(ue=>{(Lo(I.element,J)?tr:bo)(ue,"tox-navobj-bordered-focus")})})}}}})])}),D=To.parts.field({factory:{sketch:T}});return R2(x,D,["tox-form__group--stretched"],[])},H2=t=>new Promise((s,a)=>{const i=()=>{h(),s(t)},d=[el(t,"load",i),el(t,"error",()=>{h(),a("Unable to load data from image: "+t.dom.src)})],h=()=>St(d,v=>v.unbind());t.dom.complete&&i()}),z2=(t,s,a,i,d)=>{const h=a*d,v=i*d,S=Math.max(0,t/2-h/2),x=Math.max(0,s/2-v/2);return{left:S.toString()+"px",top:x.toString()+"px",width:h.toString()+"px",height:v.toString()+"px"}},CN=(t,s,a)=>{const i=Za(t),d=js(t);return Math.min(i/s,d/a,1)},wN=(t,s)=>{const a=cn(s.getOr({url:""})),i=ko({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=ko({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),h=(x,T)=>{const D={url:T.url};T.zoom.each(I=>D.zoom=I),T.cachedWidth.each(I=>D.cachedWidth=I),T.cachedHeight.each(I=>D.cachedHeight=I),a.set(D);const $=()=>{const{cachedWidth:I,cachedHeight:Z,zoom:J}=D;if(!fe(I)&&!fe(Z)){if(fe(J)){const _e=CN(x.element,I,Z);D.zoom=_e}const ue=z2(Za(x.element),js(x.element),I,Z,D.zoom);d.getOpt(x).each(_e=>{qo(_e.element,ue)})}};i.getOpt(x).each(I=>{const Z=I.element;T.url!==Jr(Z,"src")&&(In(Z,"src",T.url),bo(x.element,"tox-imagepreview__loaded")),$(),H2(Z).then(J=>{x.getSystem().isConnected()&&(tr(x.element,"tox-imagepreview__loaded"),D.cachedWidth=J.dom.naturalWidth,D.cachedHeight=J.dom.naturalHeight,$())})})},v={};t.height.each(x=>v.height=x);const S=s.map(x=>({url:x.url,zoom:O.from(x.zoom),cachedWidth:O.from(x.cachedWidth),cachedHeight:O.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:v,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:gt([Mu.self(),Oh(S,()=>a.get(),h)])}},Zz=(t,s)=>{const a="tox-label",i=t.align==="center"?[`${a}--center`]:[],d=t.align==="end"?[`${a}--end`]:[],h={dom:{tag:"label",classes:[a,...i,...d]},components:[Hs(s.providers.translate(t.label))]},v=Pe(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h,...v],behaviours:gt([Mu.self(),wn.config({}),cN(O.none()),nn.config({mode:"acyclic"})])}},SN=$t("toolbar.button.execute"),jz=t=>Hc((s,a)=>{OE(t,s)(i=>{tn(s,SN,{buttonApi:i}),t.onAction(i)})}),_1=$t("common-button-display-events"),xN={[ii()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Sl()]:["toolbar-button-events",_1],[li()]:["focusing","alloy.base.behaviour",_1]},l3=t=>Rt(t.element,"width",et(t.element,"width")),EN=(t,s,a)=>hc(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),dk=(t,s)=>EN(t,s,[]),jm=(t,s)=>EN(t,s,[wn.config({})]),kN=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Hs(a.translate(t))],behaviours:gt([wn.config({})])}),Cc=$t("update-menu-text"),O1=$t("update-menu-icon"),fk=(t,s,a)=>{const i=cn(P),d=t.text.map(I=>ko(kN(I,s,a.providers))),h=t.icon.map(I=>ko(jm(I,a.providers.icons))),v=(I,Z)=>{const J=At.getValue(I);return fn.focus(J),tn(J,"keydown",{raw:Z.event.raw}),vc.close(J),O.some(!0)},S=t.role.fold(()=>({}),I=>({role:I})),x=t.tooltip.fold(()=>({}),I=>{const Z=a.providers.translate(I);return{title:Z,"aria-label":Z}}),T=hc("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),D=$t("common-button-display-events");return ko(vc.sketch({...t.uid?{uid:t.uid}:{},...S,dom:{tag:"button",classes:[s,`${s}--select`].concat(Pe(t.classes,I=>`${s}--${I}`)),attributes:{...x}},components:s0([h.map(I=>I.asSpec()),d.map(I=>I.asSpec()),O.some(T)]),matchWidth:!0,useMinWidth:!0,onOpen:(I,Z,J)=>{t.searchable&&t7(J)},dropdownBehaviours:gt([...t.dropdownBehaviours,Au.button(()=>t.disabled||a.providers.isDisabled()),_r(),M2.config({}),wn.config({}),Bn("dropdown-events",[vh(t,i),Hm(t,i)]),Bn(D,[as((I,Z)=>l3(I))]),Bn("menubutton-update-display-text",[Xe(Cc,(I,Z)=>{d.bind(J=>J.getOpt(I)).each(J=>{wn.set(J,[Hs(a.providers.translate(Z.event.text))])})}),Xe(O1,(I,Z)=>{h.bind(J=>J.getOpt(I)).each(J=>{wn.set(J,[jm(Z.event.icon,a.providers.icons)])})})])]),eventOrder:Xo(xN,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Sl()]:["toolbar-button-events","dropdown-events",D]}),sandboxBehaviours:gt([nn.config({mode:"special",onLeft:v,onRight:v}),Bn("dropdown-sandbox-events",[Xe(AB,(I,Z)=>{QH(I),Z.stop()}),Xe(RB,(I,Z)=>{wA(I,Z),Z.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...vE(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:xA,onCollapseMenu:(I,Z,J)=>{go.getHighlighted(J).each(ue=>{xA(I,J,ue)})},onDehighlightItem:e7}},fetch:I=>ra.nu(ft(t.fetch,I))})).asSpec()},V2=t=>U(t),TN=t=>t.type==="separator",_N=t=>Hn(t,"getSubmenuItems"),Gz={type:"separator"},Kz=(t,s)=>{const a=po(t,(i,d)=>V2(d)?d===""?i:d==="|"?i.length>0&&!TN(i[i.length-1])?i.concat([Gz]):i:Hn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&TN(a[a.length-1])&&a.pop(),a},qz=(t,s)=>{const a=t.getSubmenuItems(),i=i3(a,s),d=Xo(i.menus,{[t.value]:i.items}),h=Xo(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:h}},Yz=t=>{const s=xt(t,"value").getOrThunk(()=>$t("generated-menu-item"));return Xo({value:s},t)},i3=(t,s)=>{const a=Kz(U(t)?t.split(" "):t,s);return ms(a,(i,d)=>{if(_N(d)){const h=Yz(d),v=qz(h,s);return{menus:Xo(i.menus,v.menus),items:[v.item,...i.items],expansions:Xo(i.expansions,v.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},Xz=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),ON=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Ah=(t,s,a,i)=>{const d=$t("primary-menu"),h=i3(t,a.shared.providers.menuItems());if(h.items.length===0)return O.none();const v=Xz(i),S=lP(d,h.items,s,a,i.isHorizontalMenu,v),x=ON(i),T=Re(h.menus,($,I)=>lP(I,$,s,a,!1,x)),D=Xo(T,yg(d,S));return O.from(c1.tieredData(d,D,h.expansions))},Md=t=>!Hn(t,"items"),mk="data-value",c3=(t,s,a,i)=>Pe(a,d=>Md(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{At.setValue(t,d.value),tn(t,pi,{name:s}),fn.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>c3(t,s,d.items,i)}),gk=(t,s)=>ks(t,a=>Md(a)?Cn(a.value===s,a):gk(a.items,s)),u3=(t,s,a)=>{const i=s.shared.providers,d=a.bind(x=>gk(t.items,x)).orThunk(()=>Js(t.items).filter(Md)),h=t.label.map(x=>Ch(x,i)),v=To.parts.field({dom:{},factory:{sketch:x=>fk({uid:x.uid,text:d.map(T=>T.text),icon:O.none(),tooltip:t.label,role:O.none(),fetch:(T,D)=>{const $=c3(T,t.name,t.items,At.getValue(T));D(Ah($,Ed.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:O.none()}))},onSetup:K(P),getApi:K({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ns.config({}),Oh(d.map(T=>T.value),T=>Jr(T.element,mk),(T,D)=>{gk(t.items,D).each($=>{In(T.element,mk,$.value),tn(T,Cc,{text:$.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[v]};return To.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:pn([h.toArray(),[S]]),fieldBehaviours:gt([un.config({disabled:K(!t.enabled),onDisabled:x=>{To.getField(x).each(un.disable)},onEnabled:x=>{To.getField(x).each(un.enable)}})])})},AN=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Pe(t.items,s.shared.interpreter)}),hk=(t,s)=>{const a=Pe(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>yg("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:zs(t.selectBehaviours,[fn.config({}),At.config({store:{mode:"manual",getValue:d=>Ya(d.element),setValue:(d,h)=>{const v=Js(t.options);dn(t.options,x=>x.value===h).isSome()?ci(d.element,h):d.element.dom.selectedIndex===-1&&h===""&&v.each(x=>ci(d.element,x.value))},...i}})])}},RN=nr({name:"HtmlSelect",configFields:[We("options"),dr("selectBehaviours",[fn,At]),Ae("selectClasses",[]),Ae("selectAttributes",{}),xo("data")],factory:hk}),DN=(t,s,a)=>{const i=Pe(t.items,x=>({text:s.translate(x.text),value:x.value})),d=t.label.map(x=>Ch(x,s)),h=To.parts.field({dom:{},...a.map(x=>({data:x})).getOr({}),selectAttributes:{size:t.size},options:i,factory:RN,selectBehaviours:gt([un.config({disabled:()=>!t.enabled||s.isDisabled()}),Ns.config({}),Bn("selectbox-change",[Xe(Sg(),(x,T)=>{tn(x,pi,{name:t.name})})])])}),v=t.size>1?O.none():O.some(hc("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),S={dom:{tag:"div",classes:["tox-selectfield"]},components:pn([[h],v.toArray()])};return To.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:pn([d.toArray(),[S]]),fieldBehaviours:gt([un.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:x=>{To.getField(x).each(un.disable)},onEnabled:x=>{To.getField(x).each(un.enable)}}),_r()])})},Jz=K([Ae("field1Name","field1"),Ae("field2Name","field2"),He("onLockedChange"),dm(["lockClass"]),Ae("locked",!1),Ii.field("coupledFieldBehaviours",[Qn,At])]),Qz=(t,s,a)=>No(t,s,a).bind(Qn.getCurrent),MN=(t,s)=>Nr({factory:To,name:t,overrides:a=>({fieldBehaviours:gt([Bn("coupled-input-behaviour",[Xe(lf(),i=>{Qz(i,a,s).each(d=>{No(i,a,"lock").each(h=>{Fn.isOn(h)&&a.onLockedChange(i,d,h)})})})])])})}),eV=K([MN("field1","field2"),MN("field2","field1"),Nr({factory:wa,schema:[We("dom")],name:"lock",overrides:t=>({buttonBehaviours:gt([Fn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),tV=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ii.augment(t.coupledFieldBehaviours,[Qn.config({find:O.some}),At.config({store:{mode:"manual",getValue:d=>{const h=$C(d,t,["field1","field2"]);return{[t.field1Name]:At.getValue(h.field1()),[t.field2Name]:At.getValue(h.field2())}},setValue:(d,h)=>{const v=$C(d,t,["field1","field2"]);pr(h,t.field1Name)&&At.setValue(v.field1(),h[t.field1Name]),pr(h,t.field2Name)&&At.setValue(v.field2(),h[t.field2Name])}}})]),apis:{getField1:d=>No(d,t,"field1"),getField2:d=>No(d,t,"field2"),getLock:d=>No(d,t,"lock")}}),Zi=fr({name:"FormCoupledInputs",configFields:Jz(),partFields:eV(),factory:tV,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),BN=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},d3=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Mn.value({value:i,unit:d})}else return Mn.error(t)},$N=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Hn(a,d);return t.unit===s?O.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?O.some(t.value):O.some(t.value/a[t.unit]*a[s]):O.none()},f3=t=>O.none(),pk=(t,s)=>a=>$N(a,s).map(i=>({value:i*t,unit:s})),nV=(t,s)=>{const a=d3(t).toOptional(),i=d3(s).toOptional();return ru(a,i,(d,h)=>$N(d,h.unit).map(v=>h.value/v).map(v=>pk(v,h.unit)).getOr(f3)).getOr(f3)},oV=(t,s)=>{let a=f3;const i=$t("ratio-event"),d=$=>hc($,{tag:"span",classes:["tox-icon","tox-lock-icon__"+$]},s.icons),h=Zi.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:gt([un.config({disabled:()=>!t.enabled||s.isDisabled()}),_r(),Ns.config({})])}),v=$=>({dom:{tag:"div",classes:["tox-form__group"]},components:$}),S=$=>To.parts.field({factory:h1,inputClasses:["tox-textfield"],inputBehaviours:gt([un.config({disabled:()=>!t.enabled||s.isDisabled()}),_r(),Ns.config({}),Bn("size-input-events",[Xe(Ic(),(I,Z)=>{tn(I,i,{isField1:$})}),Xe(Sg(),(I,Z)=>{tn(I,pi,{name:t.name})})])]),selectOnFocus:!1}),x=$=>({dom:{tag:"label",classes:["tox-label"]},components:[Hs(s.translate($))]}),T=Zi.parts.field1(v([To.parts.label(x("Width")),S(!0)])),D=Zi.parts.field2(v([To.parts.label(x("Height")),S(!1)]));return Zi.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[T,D,v([x(Np),h])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:($,I,Z)=>{d3(At.getValue($)).each(J=>{a(J).each(ue=>{At.setValue(I,BN(ue))})})},coupledFieldBehaviours:gt([un.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:$=>{Zi.getField1($).bind(To.getField).each(un.disable),Zi.getField2($).bind(To.getField).each(un.disable),Zi.getLock($).each(un.disable)},onEnabled:$=>{Zi.getField1($).bind(To.getField).each(un.enable),Zi.getField2($).bind(To.getField).each(un.enable),Zi.getLock($).each(un.enable)}}),_r(),Bn("size-input-events2",[Xe(i,($,I)=>{const Z=I.event.isField1,J=Z?Zi.getField1($):Zi.getField2($),ue=Z?Zi.getField2($):Zi.getField1($),_e=J.map(At.getValue).getOr(""),Se=ue.map(At.getValue).getOr("");a=nV(_e,Se)})])])})},PN=(t,s,a)=>{const i=bc.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Hs(s.translate(t.label))]}),d=bc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),h=bc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return bc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:K(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,h],sliderBehaviours:gt([Mu.self(),fn.config({})]),onChoose:(v,S,x)=>{tn(v,pi,{name:t.name,value:x})}})},NN=(t,s)=>{const a=S=>({dom:{tag:"th",innerHtml:s.translate(S)}}),i=S=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Pe(S,a)}]}),d=S=>({dom:{tag:"td",innerHtml:s.translate(S)}}),h=S=>({dom:{tag:"tr"},components:Pe(S,d)}),v=S=>({dom:{tag:"tbody"},components:Pe(S,h)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),v(t.cells)],behaviours:gt([Ns.config({}),fn.config({})])}},IN=(t,s)=>{const a=t.label.map(Z=>Ch(Z,s)),i=[un.config({disabled:()=>t.disabled||s.isDisabled()}),_r(),nn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:Z=>(Co(Z,f0),O.some(!0))}),Bn("textfield-change",[Xe(lf(),(Z,J)=>{tn(Z,pi,{name:t.name})}),Xe(Fc(),(Z,J)=>{tn(Z,pi,{name:t.name})})]),Ns.config({})],d=t.validation.map(Z=>Df.config({getRoot:J=>Wa(J.element),invalidClass:"tox-invalid",validator:{validate:J=>{const ue=At.getValue(J),_e=Z.validator(ue);return ra.pure(_e===!0?Mn.value(ue):Mn.error(_e))},validateOnLoad:Z.validateOnLoad}})).toArray(),h=t.placeholder.fold(K({}),Z=>({placeholder:s.translate(Z)})),v=t.inputMode.fold(K({}),Z=>({inputmode:Z})),S={...h,...v},x=To.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(Z=>({data:Z})).getOr({}),inputAttributes:S,inputClasses:[t.classname],inputBehaviours:gt(pn([i,d])),selectOnFocus:!1,factory:h1}),T=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,$=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),I=[un.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:Z=>{To.getField(Z).each(un.disable)},onEnabled:Z=>{To.getField(Z).each(un.enable)}}),_r()];return R2(a,T,$,I)},sV=(t,s,a)=>IN({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:O.none(),maximized:t.maximized,data:a},s),m3=(t,s,a)=>IN({name:t.name,multiline:!0,label:t.label,inputMode:O.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:O.none(),maximized:t.maximized,data:a},s),U2=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),$f=t=>t.dimension.property,A1=(t,s)=>t.dimension.getDimension(s),vk=(t,s)=>{const a=U2(t,s);Zr(a,[s.shrinkingClass,s.growingClass])},g3=(t,s)=>{bo(t.element,s.openClass),tr(t.element,s.closedClass),Rt(t.element,$f(s),"0px"),Gu(t.element)},bk=(t,s)=>{bo(t.element,s.closedClass),tr(t.element,s.openClass),so(t.element,$f(s))},h3=(t,s,a,i)=>{a.setCollapsed(),Rt(t.element,$f(s),A1(s,t.element)),vk(t,s),g3(t,s),s.onStartShrink(t),s.onShrunk(t)},rV=(t,s,a,i)=>{const d=i.getOrThunk(()=>A1(s,t.element));a.setCollapsed(),Rt(t.element,$f(s),d),Gu(t.element);const h=U2(t,s);bo(h,s.growingClass),tr(h,s.shrinkingClass),g3(t,s),s.onStartShrink(t)},FN=(t,s,a)=>{const i=A1(s,t.element);(i==="0px"?h3:rV)(t,s,a,O.some(i))},LN=(t,s,a)=>{const i=U2(t,s),d=qa(i,s.shrinkingClass),h=A1(s,t.element);bk(t,s);const v=A1(s,t.element);(d?()=>{Rt(t.element,$f(s),h),Gu(t.element)}:()=>{g3(t,s)})(),bo(i,s.shrinkingClass),tr(i,s.growingClass),bk(t,s),Rt(t.element,$f(s),v),a.setExpanded(),s.onStartGrow(t)},aV=(t,s,a)=>{if(a.isExpanded()){so(t.element,$f(s));const i=A1(s,t.element);Rt(t.element,$f(s),i)}},HN=(t,s,a)=>{a.isExpanded()||LN(t,s,a)},lV=(t,s,a)=>{a.isExpanded()&&FN(t,s,a)},zN=(t,s,a)=>{a.isExpanded()&&h3(t,s,a)},iV=(t,s,a)=>a.isExpanded(),cV=(t,s,a)=>a.isCollapsed(),VN=(t,s,a)=>{const i=U2(t,s);return qa(i,s.growingClass)===!0},UN=(t,s,a)=>{const i=U2(t,s);return qa(i,s.shrinkingClass)===!0};var uV=Object.freeze({__proto__:null,refresh:aV,grow:HN,shrink:lV,immediateShrink:zN,hasGrown:iV,hasShrunk:cV,isGrowing:VN,isShrinking:UN,isTransitioning:(t,s,a)=>VN(t,s)||UN(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?FN:LN)(t,s,a)},disableTransitions:vk,immediateGrow:(t,s,a)=>{a.isExpanded()||(bk(t,s),Rt(t.element,$f(s),A1(s,t.element)),vk(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),dV=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return lc(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:yg(s.dimension.property,"0px")})},events:(t,s)=>Wo([Rg(fp(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(vk(a,t),s.isExpanded()&&so(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),fV=[We("closedClass"),We("openClass"),We("shrinkingClass"),We("growingClass"),xo("getAnimationRoot"),Vn("onShrunk"),Vn("onStartShrink"),Vn("onGrown"),Vn("onStartGrow"),Ae("expanded",!1),wl("dimension",er("property",{width:[ls("property","width"),ls("getDimension",t=>Za(t)+"px")],height:[ls("property","height"),ls("getDimension",t=>js(t)+"px")]}))],W2=Object.freeze({__proto__:null,init:t=>{const s=cn(t.expanded),a=()=>"expanded: "+s.get();return Hl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:ft(s.set,!1),setExpanded:ft(s.set,!0),readState:a})}});const Kl=jr({fields:fV,name:"sliding",active:dV,apis:uV,state:W2}),ZN=t=>({isEnabled:()=>!un.isDisabled(t),setEnabled:s=>un.set(t,!s),setActive:s=>{const a=t.element;s?(tr(a,"tox-tbtn--enabled"),In(a,"aria-pressed",!0)):(bo(a,"tox-tbtn--enabled"),q(a,"aria-pressed"))},isActive:()=>qa(t.element,"tox-tbtn--enabled"),setText:s=>{tn(t,Cc,{text:s})},setIcon:s=>tn(t,O1,{icon:s})}),Z2=(t,s,a,i,d=!0)=>fk({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(h,v)=>{const S={pattern:t.search.isSome()?n7(h):""};t.fetch(x=>{v(Ah(x,Ed.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},S,ZN(h))},onSetup:t.onSetup,getApi:ZN,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Ns.config({})]:[]]},s,a.shared),p3=(t,s,a)=>{const i=h=>v=>{const S=!v.isActive();v.setActive(S),h.storage.set(S),a.shared.getSink().each(x=>{s().getOpt(x).each(T=>{Ps(T.element),tn(T,Rf,{name:h.name,value:h.storage.get()})})})},d=h=>v=>{v.setActive(h.storage.get())};return h=>{h(Pe(t,v=>{const S=v.text.fold(()=>({}),x=>({text:x}));return{type:v.type,active:!1,...S,onAction:i(v),onSetup:d(v)}}))}},jN=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Hs(t)]}),yk=$t("leaf-label-event-id"),Ck=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:h})=>{const v=t.menu.map(x=>Z2(x,"tox-mbtn",h,O.none(),a)),S=[jN(t.title)];return v.each(x=>S.push(x)),wa.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:S,role:"treeitem",action:x=>{s(t.id),x.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[rc()]:[yk,"keying"]},buttonBehaviours:gt([...a?[Ns.config({})]:[],Fn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ja.config({channels:{[`update-active-item-${i}`]:{onReceive:(x,T)=>{(T.value===t.id?Fn.on:Fn.off)(x)}}}}),Bn(yk,[as((x,T)=>{d.each(D=>{(D===t.id?Fn.on:Fn.off)(x)})}),Xe(rc(),(x,T)=>{const D=T.event.raw.code==="ArrowLeft",$=T.event.raw.code==="ArrowRight";D?(ud(x.element,".tox-tree--directory").each(I=>{x.getSystem().getByDom(I).each(Z=>{Uv(I,".tox-tree--directory__label").each(J=>{Z.getSystem().getByDom(J).each(fn.focus)})})}),T.stop()):$&&T.stop()})])])})},mV=(t,s,a)=>hc(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),gV=(t,s)=>mV(t,s,[]),v3=$t("directory-label-event-id"),GN=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(S=>Z2(S,"tox-mbtn",i,O.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[gV("chevron-right",i.shared.providers.icons)]},jN(t.title)];d.each(S=>{h.push(S)});const v=S=>{ud(S.element,".tox-tree--directory").each(x=>{S.getSystem().getByDom(x).each(T=>{const D=!Fn.isOn(T);Fn.toggle(T),tn(S,"expand-tree-node",{expanded:D,node:t.id})})})};return wa.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:h,action:v,eventOrder:{[rc()]:[v3,"keying"]},buttonBehaviours:gt([...s?[Ns.config({})]:[],Bn(v3,[Xe(rc(),(S,x)=>{const T=x.event.raw.code==="ArrowRight",D=x.event.raw.code==="ArrowLeft";T&&a&&x.stop(),(T||D)&&ud(S.element,".tox-tree--directory").each($=>{S.getSystem().getByDom($).each(I=>{!Fn.isOn(I)&&T||Fn.isOn(I)&&D?(v(S),x.stop()):D&&!Fn.isOn(I)&&(ud(I.element,".tox-tree--directory").each(Z=>{Uv(Z,".tox-tree--directory__label").each(J=>{I.getSystem().getByDom(J).each(fn.focus)})}),x.stop())})})})])])})},hV=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:h,backstage:v})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(S=>S.type==="leaf"?Ck({leaf:S,selectedId:h,onLeafAction:s,visible:a,treeId:i,backstage:v}):wk({directory:S,expandedIds:d,selectedId:h,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:v})),behaviours:gt([Kl.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),wn.config({})])}),KN=$t("directory-event-id"),wk=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:h,selectedId:v})=>{const{children:S}=t,x=cn(h),T=$=>S.map(I=>I.type==="leaf"?Ck({leaf:I,selectedId:v,onLeafAction:s,visible:$,treeId:i,backstage:d}):wk({directory:I,expandedIds:x.get(),selectedId:v,onLeafAction:s,labelTabstopping:$,treeId:i,backstage:d})),D=h.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[GN({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),hV({children:S,expandedIds:h,selectedId:v,onLeafAction:s,visible:D,treeId:i,backstage:d})],behaviours:gt([Bn(KN,[as(($,I)=>{Fn.set($,D)}),Xe("expand-tree-node",($,I)=>{const{expanded:Z,node:J}=I.event;x.set(Z?[...x.get(),J]:x.get().filter(ue=>ue!==J))})]),Fn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:($,I)=>{const Z=$.components()[1],J=T(I);I?Kl.grow(Z):Kl.shrink(Z),wn.set(Z,J)}})])}},pV=$t("tree-event-id"),qN=(t,s)=>{const a=t.onLeafAction.getOr(P),i=t.onToggleExpand.getOr(P),d=t.defaultExpandedIds,h=cn(d),v=cn(t.defaultSelectedId),S=$t("tree-id"),x=(T,D)=>t.items.map($=>$.type==="leaf"?Ck({leaf:$,selectedId:T,onLeafAction:a,visible:!0,treeId:S,backstage:s}):wk({directory:$,selectedId:T,onLeafAction:a,expandedIds:D,labelTabstopping:!0,treeId:S,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:x(v.get(),h.get()),behaviours:gt([nn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Bn(pV,[Xe("expand-tree-node",(T,D)=>{const{expanded:$,node:I}=D.event;h.set($?[...h.get(),I]:h.get().filter(Z=>Z!==I)),i(h.get(),{expanded:$,node:I})})]),Ja.config({channels:{[`update-active-item-${S}`]:{onReceive:(T,D)=>{v.set(O.some(D.value)),wn.set(T,x(O.some(D.value),h.get()))}}}}),wn.config({})])}};var YN=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Wo([Xe(t.event,i),Aa(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Xe(d,()=>s.cancel())]).getOr([])))}});const XN=t=>{const s=cn(null);return Hl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:h=>{s.set(h)},cancel:()=>{const h=s.get();h!==null&&h.cancel()}})};var bV=Object.freeze({__proto__:null,throttle:XN,init:t=>t.stream.streams.state(t)});const JN=(t,s)=>{const a=t.stream,i=lk(t.onStream,a.delay);return s.setTimer(i),(d,h)=>{i.throttle(d,h),a.stopEvent&&h.stop()}};var yV=[wl("stream",er("mode",{throttle:[We("delay"),Ae("stopEvent",!0),ls("streams",{setup:JN,state:XN})]})),Ae("event","input"),xo("cancelEvent"),He("onStream")];const Sk=jr({fields:yV,name:"streaming",active:YN,state:bV}),xk=(t,s,a)=>{const i=At.getValue(a);At.setValue(s,i),Ek(s)},QN=(t,s)=>{const a=t.element,i=Ya(a),d=a.dom;Jr(a,"type")!=="number"&&s(d,i)},Ek=t=>{QN(t,(s,a)=>s.setSelectionRange(a.length,a.length))},CV=(t,s)=>{QN(t,(a,i)=>a.setSelectionRange(s,i.length))},wV=(t,s,a)=>{if(t.selectsOver){const i=At.getValue(s),d=t.getDisplayText(i),h=At.getValue(a);return t.getDisplayText(h).indexOf(d)===0?O.some(()=>{xk(t,s,a),CV(s,d.length)}):O.none()}else return O.none()},b3=K("alloy.typeahead.itemexecute"),eI=(t,s,a,i)=>{const d=($,I,Z)=>{t.previewing.set(!1);const J=Cs.getCoupled($,"sandbox");if(to.isOpen(J))Qn.getCurrent(J).each(ue=>{go.getHighlighted(ue).fold(()=>{Z(ue)},()=>{s_(J,ue.element,"keydown",I)})});else{const ue=_e=>{Qn.getCurrent(_e).each(Z)};FE(t,v($),$,J,i,ue,jl.HighlightMenuAndItem).get(P)}},h=_B(t),v=$=>I=>I.map(Z=>{const J=Lr(Z.menus),ue=Ge(J,Se=>Wn(Se.items,be=>be.type==="item"));return At.getState($).update(Pe(ue,Se=>Se.data)),Z}),S=$=>Qn.getCurrent($),x="typeaheadevents",T=[fn.config({}),At.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:$=>Ya($.element),getFallbackEntry:$=>({value:$,meta:{}}),setValue:($,I)=>{ci($.element,t.model.getDisplayText(I))},...t.initialData.map($=>yg("initialValue",$)).getOr({})}}),Sk.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:($,I)=>{const Z=Cs.getCoupled($,"sandbox");if(fn.isFocused($)&&Ya($.element).length>=t.minChars){const ue=S(Z).bind(Se=>go.getHighlighted(Se).map(At.getValue));t.previewing.set(!0);const _e=Se=>{S(Z).each(be=>{ue.fold(()=>{t.model.selectsOver&&go.highlightFirst(be)},qe=>{go.highlightBy(be,Le=>At.getValue(Le).value===qe.value),go.getHighlighted(be).orThunk(()=>(go.highlightFirst(be),O.none()))})})};FE(t,v($),$,Z,i,_e,jl.HighlightJustMenu).get(P)}},cancelEvent:hy()}),nn.config({mode:"special",onDown:($,I)=>(d($,I,go.highlightFirst),O.some(!0)),onEscape:$=>{const I=Cs.getCoupled($,"sandbox");return to.isOpen(I)?(to.close(I),O.some(!0)):O.none()},onUp:($,I)=>(d($,I,go.highlightLast),O.some(!0)),onEnter:$=>{const I=Cs.getCoupled($,"sandbox"),Z=to.isOpen(I);if(Z&&!t.previewing.get())return S(I).bind(J=>go.getHighlighted(J)).map(J=>(tn($,b3(),{item:J}),!0));{const J=At.getValue($);return Co($,hy()),t.onExecute(I,$,J),Z&&to.close(I),O.some(!0)}}}),Fn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Cs.config({others:{sandbox:$=>vA(t,$,{onOpen:()=>Fn.on($),onClose:()=>{t.lazyTypeaheadComp.get().each(I=>q(I.element,"aria-activedescendant")),Fn.off($)}})}}),Bn(x,[as($=>{t.lazyTypeaheadComp.set(O.some($))}),Aa($=>{t.lazyTypeaheadComp.set(O.none())}),Hc($=>{const I=P;pA(t,v($),$,i,I,jl.HighlightMenuAndItem).get(P)}),Xe(b3(),($,I)=>{const Z=Cs.getCoupled($,"sandbox");xk(t.model,$,I.event.item),Co($,hy()),t.onItemExecute($,Z,I.event.item,At.getValue($)),to.close(Z),Ek($)})].concat(t.dismissOnBlur?[Xe(xg(),$=>{const I=Cs.getCoupled($,"sandbox");ic(I.element).isNone()&&to.close(I)})]:[]))],D={[od()]:[At.name(),Sk.name(),x],...t.eventOrder};return{uid:t.uid,dom:OB(Xo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...zs(t.typeaheadBehaviours,T)},eventOrder:D}},SV=K([xo("lazySink"),We("fetch"),Ae("minChars",5),Ae("responseTime",1e3),Vn("onOpen"),Ae("getHotspot",O.some),Ae("getAnchorOverrides",K({})),Ae("layouts",O.none()),Ae("eventOrder",{}),of("model",{},[Ae("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Ae("selectsOver",!0),Ae("populateFromBrowse",!0)]),Vn("onSetValue"),Vl("onExecute"),Vn("onItemExecute"),Ae("inputClasses",[]),Ae("inputAttributes",{}),Ae("inputStyles",{}),Ae("matchWidth",!0),Ae("useMinWidth",!1),Ae("dismissOnBlur",!0),dm(["openClass"]),xo("initialData"),dr("typeaheadBehaviours",[fn,At,Sk,nn,Fn,Cs]),Ka("lazyTypeaheadComp",()=>cn(O.none)),Ka("previewing",()=>cn(!0))].concat(TB()).concat(bA())),tI=K([dc({schema:[wu()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{wV(t.model,d,i).fold(()=>{t.model.selectsOver?(go.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},h=>{h(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&xk(t.model,d,i),Zs(i.element,"id").each(h=>In(d.element,"aria-activedescendant",h))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(tn(i,b3(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&xk(t.model,i,a)})}})})]),xV=fr({name:"Typeahead",configFields:SV(),partFields:tI(),factory:eI}),eu=t=>({...t,toCached:()=>eu(t.toCached()),bindFuture:x=>eu(t.bind(T=>T.fold(D=>ra.pure(Mn.error(D)),D=>x(D)))),bindResult:x=>eu(t.map(T=>T.bind(x))),mapResult:x=>eu(t.map(T=>T.map(x))),mapError:x=>eu(t.map(T=>T.mapError(x))),foldResult:(x,T)=>t.map(D=>D.fold(x,T)),withTimeout:(x,T)=>eu(ra.nu(D=>{let $=!1;const I=setTimeout(()=>{$=!0,D(Mn.error(T()))},x);t.get(Z=>{$||(clearTimeout(I),D(Z))})}))}),nI=t=>eu(ra.nu(t)),oI=t=>eu(ra.pure(Mn.value(t))),kV={nu:nI,wrap:eu,pure:oI,value:oI,error:t=>eu(ra.pure(Mn.error(t))),fromResult:t=>eu(ra.pure(t)),fromFuture:t=>eu(t.map(Mn.value)),fromPromise:t=>nI(s=>{t.then(a=>{s(Mn.value(a))},a=>{s(Mn.error(a))})})},j2=(t,s,a=[],i,d,h)=>{const v=s.fold(()=>({}),T=>({action:T})),S={buttonBehaviours:gt([Au.button(()=>!t.enabled||h.isDisabled()),_r(),Ns.config({}),Bn("button press",[pp("click"),pp("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...v},x=Xo(S,{dom:i});return Xo(x,{components:d})},TV=(t,s,a,i=[])=>{const d=t.tooltip.map(x=>({"aria-label":a.translate(x),title:a.translate(x)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:d},v=t.icon.map(x=>dk(x,a.icons)),S=s0([v]);return j2(t,s,i,h,S,a)},y3=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},sI=(t,s,a,i=[],d=[])=>{const h=a.translate(t.text),v=t.icon.map(I=>dk(I,a.icons)),S=[v.getOrThunk(()=>Hs(h))],x=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),$={tag:"button",classes:[...y3(x),...v.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:h}};return j2(t,s,i,$,S,a)},C3=(t,s,a,i=[],d=[])=>{const h=sI(t,O.some(s),a,i,d);return wa.sketch(h)},rI=(t,s)=>a=>{s==="custom"?tn(a,Rf,{name:t,value:{}}):s==="submit"?Co(a,f0):s==="cancel"?Co(a,Um):console.error("Unknown button type: ",s)},_V=(t,s)=>s==="menu",OV=(t,s)=>s==="custom"||s==="cancel"||s==="submit",aI=(t,s)=>s==="togglebutton",lI=(t,s)=>{var a,i;const d=t.icon.map(be=>jm(be,s.icons)).map(ko),h=be=>{tn(be,Rf,{name:t.name,value:{setIcon:qe=>{d.map(Le=>Le.getOpt(be).each(ht=>{wn.set(ht,[jm(qe,s.icons)])}))}}})},v=t.buttonType.getOr(t.primary?"primary":"secondary"),S={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:v==="primary",tooltip:O.from(t.tooltip),enabled:(i=t.enabled)!==null&&i!==void 0?i:!1,borderless:!1},x=S.tooltip.map(be=>({"aria-label":s.translate(be),title:s.translate(be)})).getOr({}),T=y3(v!=null?v:"secondary"),D=t.icon.isSome()&&t.text.isSome(),$={tag:"button",classes:[...T.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:x},I=[],Z=s.translate(t.text.getOr("")),J=Hs(Z),_e=[...s0([d.map(be=>be.asSpec())]),...t.text.isSome()?[J]:[]],Se=j2(S,O.some(h),I,$,_e,s);return wa.sketch(Se)},G2=(t,s,a)=>{if(_V(t,s)){const i=()=>v,d=t,h={...t,type:"menubutton",search:O.none(),onSetup:S=>(S.setEnabled(t.enabled),P),fetch:p3(d.items,i,a)},v=ko(Z2(h,"tox-tbtn",a,O.none()));return v.asSpec()}else if(OV(t,s)){const i=rI(t.name,s),d={...t,borderless:!1};return C3(d,i,a.shared.providers,[])}else{if(aI(t,s))return lI(t,a.shared.providers);throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},kk=(t,s)=>{const a=rI(t.name,"custom");return pP(O.none(),To.parts.field({factory:wa,...sI(t,O.some(a),s,[rk(""),Mu.self()])}))},AV={type:"separator"},RV=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:P}),w3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:P}),DV=t=>Pe(t,RV),iI=(t,s)=>Wn(s,a=>a.type===t),S3=(t,s)=>DV(iI(t,s)),MV=t=>S3("header",t.targets),BV=t=>S3("anchor",t.targets),cI=t=>O.from(t.anchorTop).map(s=>w3("<top>",s)).toArray(),$V=t=>O.from(t.anchorBottom).map(s=>w3("<bottom>",s)).toArray(),PV=t=>Pe(t,s=>w3(s,s)),Ln=t=>po(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(AV,a),[]),R1=(t,s)=>{const a=t.toLowerCase();return Wn(s,i=>{var d;const h=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,v=(d=i.value)!==null&&d!==void 0?d:"";return Hr(h.toLowerCase(),a)||Hr(v.toLowerCase(),a)})},uI=(t,s,a)=>{var i,d;const h=At.getValue(s),v=(d=(i=h==null?void 0:h.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:h.value;return a.getLinkInformation().fold(()=>[],x=>{const T=R1(v,PV(a.getHistory(t)));return t==="file"?Ln([T,R1(v,MV(x)),R1(v,pn([cI(x),BV(x),$V(x)]))]):T})},x3=$t("aria-invalid"),dI=(t,s,a,i)=>{const d=s.shared.providers,h=be=>{const qe=At.getValue(be);a.addToHistory(qe.value,t.filetype)},v={...i.map(be=>({initialData:be})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":x3,type:"url"},minChars:0,responseTime:0,fetch:be=>{const qe=uI(t.filetype,be,a),Le=Ah(qe,Ed.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:O.none()});return ra.pure(Le)},getHotspot:be=>J.getOpt(be),onSetValue:(be,qe)=>{be.hasConfigured(Df)&&Df.run(be).get(P)},typeaheadBehaviours:gt([...a.getValidationHandler().map(be=>Df.config({getRoot:qe=>Wa(qe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(qe,Le)=>{D.getOpt(qe).each(ht=>{In(ht.element,"title",d.translate(Le))})}},validator:{validate:qe=>{const Le=At.getValue(qe);return kV.nu(ht=>{be({type:t.filetype,url:Le.value},lt=>{if(lt.status==="invalid"){const wt=Mn.error(lt.message);ht(wt)}else{const wt=Mn.value(lt.message);ht(wt)}})})},validateOnLoad:!1}})).toArray(),un.config({disabled:()=>!t.enabled||d.isDisabled()}),Ns.config({}),Bn("urlinput-events",[Xe(lf(),be=>{const qe=Ya(be.element),Le=qe.trim();Le!==qe&&ci(be.element,Le),t.filetype==="file"&&tn(be,pi,{name:t.name})}),Xe(Sg(),be=>{tn(be,pi,{name:t.name}),h(be)}),Xe(Fc(),be=>{tn(be,pi,{name:t.name}),h(be)})])]),eventOrder:{[lf()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:be=>be.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:vE(!1,1,"normal")},onExecute:(be,qe,Le)=>{tn(qe,f0,{})},onItemExecute:(be,qe,Le,ht)=>{h(be),tn(be,pi,{name:t.name})}},S=To.parts.field({...v,factory:xV}),x=t.label.map(be=>Ch(be,d)),D=ko(((be,qe,Le=be,ht=be)=>hc(Le,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+be],attributes:{title:d.translate(ht),"aria-live":"polite",...qe.fold(()=>({}),lt=>({id:lt}))}},d.icons))("invalid",O.some(x3),"warning")),$=ko({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),I=a.getUrlPicker(t.filetype),Z=$t("browser.url.event"),J=ko({dom:{tag:"div",classes:["tox-control-wrap"]},components:[S,$.asSpec()],behaviours:gt([un.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ue=ko(C3({name:t.name,icon:O.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:O.none(),borderless:!0},be=>Co(be,Z),d,[],["tox-browse-url"])),_e=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:pn([[J.asSpec()],I.map(()=>ue.asSpec()).toArray()])}),Se=be=>{Qn.getCurrent(be).each(qe=>{const Le=At.getValue(qe),ht={fieldname:t.name,...Le};I.each(lt=>{lt(ht).get(wt=>{At.setValue(qe,wt),tn(be,pi,{name:t.name})})})})};return To.sketch({dom:A7(),components:x.toArray().concat([_e()]),fieldBehaviours:gt([un.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:be=>{To.getField(be).each(un.disable),ue.getOpt(be).each(un.disable)},onEnabled:be=>{To.getField(be).each(un.enable),ue.getOpt(be).each(un.enable)}}),_r(),Bn("url-input-events",[Xe(Z,Se)])])})},fI=(t,s)=>{const a=gc(t.icon,s.icons);return Ad.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[wa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>tn(i,Rf,{name:"alert-banner",value:t.url}),buttonBehaviours:gt([aE()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},mI=(t,s)=>{t.dom.checked=s},kK=t=>t.dom.checked,K2=(t,s,a)=>{const i=x=>(x.element.dom.click(),O.some(!0)),d=To.parts.field({factory:{sketch:Ie},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:gt([Mu.self(),un.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:x=>{Wa(x.element).each(T=>tr(T,"tox-checkbox--disabled"))},onEnabled:x=>{Wa(x.element).each(T=>bo(T,"tox-checkbox--disabled"))}}),Ns.config({}),fn.config({}),QA(a,kK,mI),nn.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Bn("checkbox-events",[Xe(Sg(),(x,T)=>{tn(x,pi,{name:t.name})})])])}),h=To.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Hs(s.translate(t.label))],behaviours:gt([M2.config({})])}),v=x=>hc(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),S=ko({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[v("checked"),v("unchecked")]});return To.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,S.asSpec(),h],fieldBehaviours:gt([un.config({disabled:()=>!t.enabled||s.isDisabled()}),_r()])})},NV=t=>t.presets==="presentation"?Ad.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Ad.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:gt([Ns.config({}),fn.config({})])}),Ar=t=>(s,a,i,d)=>xt(a,"name").fold(()=>t(a,d,O.none()),h=>s.field(h,t(a,d,xt(i,h)))),IV=t=>(s,a,i,d)=>{const h=Xo(a,{source:"dynamic"});return Ar(t)(s,h,i,d)},FV={bar:Ar((t,s)=>x7(t,s.shared)),collection:Ar((t,s,a)=>R7(t,s.shared.providers,a)),alertbanner:Ar((t,s)=>fI(t,s.shared.providers)),input:Ar((t,s,a)=>sV(t,s.shared.providers,a)),textarea:Ar((t,s,a)=>m3(t,s.shared.providers,a)),label:Ar((t,s)=>Zz(t,s.shared)),iframe:IV((t,s,a)=>uk(t,s.shared.providers,a)),button:Ar((t,s)=>kk(t,s.shared.providers)),checkbox:Ar((t,s,a)=>K2(t,s.shared.providers,a)),colorinput:Ar((t,s,a)=>N7(t,s.shared,s.colorinput,a)),colorpicker:Ar((t,s,a)=>Iz(t,s.shared.providers,a)),dropzone:Ar((t,s,a)=>Gl(t,s.shared.providers,a)),grid:Ar((t,s)=>mN(t,s.shared)),listbox:Ar((t,s,a)=>u3(t,s,a)),selectbox:Ar((t,s,a)=>DN(t,s.shared.providers,a)),sizeinput:Ar((t,s)=>oV(t,s.shared.providers)),slider:Ar((t,s,a)=>PN(t,s.shared.providers,a)),urlinput:Ar((t,s,a)=>dI(t,s,s.urlinput,a)),customeditor:Ar(dN),htmlpanel:Ar(NV),imagepreview:Ar((t,s,a)=>wN(t,a)),table:Ar((t,s)=>NN(t,s.shared.providers)),tree:Ar((t,s)=>qN(t,s)),panel:Ar((t,s)=>AN(t,s))},LV={field:(t,s)=>s,record:K([])},E3=(t,s,a,i)=>{const d=Xo(i,{shared:{interpreter:h=>q2(t,h,a,d)}});return q2(t,s,a,d)},q2=(t,s,a,i)=>xt(FV,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,i)),k3=(t,s,a)=>q2(LV,t,s,a),Rh="layout-inset",T3=t=>t.x,gI=(t,s)=>t.x+t.width/2-s.width/2,_3=(t,s)=>t.x+t.width-s.width,O3=t=>t.y,Tk=(t,s)=>t.y+t.height-s.height,hI=(t,s)=>t.y+t.height/2-s.height/2,_k=(t,s,a)=>ys(_3(t,s),Tk(t,s),a.insetSouthwest(),Tp(),"southwest",Zo(t,{right:0,bottom:3}),Rh),Ok=(t,s,a)=>ys(T3(t),Tk(t,s),a.insetSoutheast(),pf(),"southeast",Zo(t,{left:1,bottom:3}),Rh),Y2=(t,s,a)=>ys(_3(t,s),O3(t),a.insetNorthwest(),Xv(),"northwest",Zo(t,{right:0,top:2}),Rh),X2=(t,s,a)=>ys(T3(t),O3(t),a.insetNortheast(),Yv(),"northeast",Zo(t,{left:1,top:2}),Rh),Bu=(t,s,a)=>ys(gI(t,s),O3(t),a.insetNorth(),Ly(),"north",Zo(t,{top:2}),Rh),J2=(t,s,a)=>ys(gI(t,s),Tk(t,s),a.insetSouth(),Jv(),"south",Zo(t,{bottom:3}),Rh),pI=(t,s,a)=>ys(_3(t,s),hI(t,s),a.insetEast(),AS(),"east",Zo(t,{right:0}),Rh),vI=(t,s,a)=>ys(T3(t),hI(t,s),a.insetWest(),OS(),"west",Zo(t,{left:1}),Rh),HV=t=>{switch(t){case"north":return Bu;case"northeast":return X2;case"northwest":return Y2;case"south":return J2;case"southeast":return Ok;case"southwest":return _k;case"east":return pI;case"west":return vI}},bI=(t,s,a,i,d)=>VS(i).map(HV).getOr(Bu)(t,s,a,i,d),yI=t=>{switch(t){case"north":return J2;case"northeast":return Ok;case"northwest":return _k;case"south":return Bu;case"southeast":return X2;case"southwest":return Y2;case"east":return vI;case"west":return pI}},zV=(t,s,a,i,d)=>VS(i).map(yI).getOr(Bu)(t,s,a,i,d),Q2={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},VV=(t,s,a)=>{const d={maxHeightFunction:gm()},h=()=>({type:"node",root:zr(Xr(t())),node:O.from(t()),bubble:fd(12,12,Q2),layouts:{onRtl:()=>[X2],onLtr:()=>[Y2]},overrides:d}),v=()=>({type:"hotspot",hotspot:s(),bubble:fd(-12,12,Q2),layouts:{onRtl:()=>[$r,Sr,ur],onLtr:()=>[Sr,$r,ur]},overrides:d});return()=>a()?h():v()},UV=(t,s,a,i)=>{const h={maxHeightFunction:gm()},v=()=>({type:"node",root:zr(Xr(s())),node:O.from(s()),bubble:fd(12,12,Q2),layouts:{onRtl:()=>[Bu],onLtr:()=>[Bu]},overrides:h}),S=()=>t?{type:"node",root:zr(Xr(s())),node:O.from(s()),bubble:fd(0,-Dc(s()),Q2),layouts:{onRtl:()=>[Jo],onLtr:()=>[Jo]},overrides:h}:{type:"hotspot",hotspot:a(),bubble:fd(0,0,Q2),layouts:{onRtl:()=>[Jo],onLtr:()=>[Jo]},overrides:h};return()=>i()?v():S()},WV=(t,s,a)=>{const i=()=>({type:"node",root:zr(Xr(t())),node:O.from(t()),layouts:{onRtl:()=>[Bu],onLtr:()=>[Bu]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[ur],onLtr:()=>[ur]}});return()=>a()?i():d()},ZV=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],h=i[i.length-1],v={firstCell:Te.fromDom(d),lastCell:Te.fromDom(h)};return O.some(v)}return O.some(Hp.range(Te.fromDom(a.startContainer),a.startOffset,Te.fromDom(a.endContainer),a.endOffset))}}),CI=t=>s=>({type:"node",root:t(),node:s}),jV=(t,s,a,i)=>{const d=qb(t),h=()=>Te.fromDom(t.getBody()),v=()=>Te.fromDom(t.getContentAreaContainer()),S=()=>d||!i();return{inlineDialog:VV(v,s,S),inlineBottomDialog:UV(t.inline,v,a,S),banner:WV(v,s,S),cursor:ZV(t,h),node:CI(h)}},wI=t=>(s,a)=>{K$(t)(s,a)},GV=t=>()=>L$(t),SI=t=>s=>c0(t,s),xI=t=>s=>F$(t,s),EI=t=>({colorPicker:wI(t),hasCustomColors:GV(t),getColors:SI(t),getColorCols:xI(t)}),KV=t=>()=>fB(t),kI=t=>({isDraggableModal:KV(t)}),TI=t=>{const s=cn(r2(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},_I=t=>pr(t,"items"),A3=t=>pr(t,"format"),OI=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],qV=t=>Hn(t,"items"),Bd=t=>Hn(t,"block"),Ak=t=>Hn(t,"inline"),Rk=t=>Hn(t,"selector"),AI=t=>po(t,(s,a)=>{if(qV(a)){const i=AI(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(Ak(a)||Bd(a)||Rk(a)){const d=`custom-${U(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),R3=(t,s)=>{const a=AI(s),i=d=>{St(d,h=>{t.formatter.has(h.name)||t.formatter.register(h.name,h.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},RI=t=>rB(t).map(s=>{const a=R3(t,s);return uE(t)?OI.concat(a):a}).getOr(OI),D3=t=>{const s=It(t);return s.length===1&&_n(s,"title")},M3=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),Dk=(t,s,a,i)=>{const d=x=>M3(x,a,i),h=x=>{const T=S(x.items);return{...x,type:"submenu",getStyleItems:K(T)}},v=x=>{const T=U(x.name)?x.name:$t(x.title),D=`custom-${T}`,$={...x,type:"formatter",format:D,isSelected:a(D),getStylePreview:i(D)};return t.formatter.register(T,$),$},S=x=>Pe(x,T=>_I(T)?h(T):A3(T)?d(T):D3(T)?{...T,type:"separator"}:v(T));return S(s)},YV=t=>{const s=S=>()=>t.formatter.match(S),a=S=>()=>{const x=t.formatter.get(S);return x!==void 0?O.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(S))}):O.none()},i=cn([]),d=cn([]),h=cn(!1);return t.on("PreInit",S=>{const x=RI(t),T=Dk(t,x,s,a);i.set(T)}),t.on("addStyleModifications",S=>{const x=Dk(t,S.items,s,a);d.set(x),h.set(S.replace)}),{getData:()=>{const S=h.get()?[]:i.get(),x=d.get();return S.concat(x)}}},DI=t=>ve(t)&&t.nodeType===1,MI=Rd.trim,Mk=t=>s=>!!(DI(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),XV=Mk("true"),JV=Mk("false"),B3=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),QV=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return XV(s)}return!1},e9=(t,s)=>Pe(tl(Te.fromDom(s),t),a=>a.dom),$3=t=>t.innerText||t.textContent,BI=t=>t.id?t.id:$t("h"),t9=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,n9=t=>t9(t)&&PI(t),$I=t=>t&&/^(H[1-6])$/.test(t.nodeName),PI=t=>QV(t)&&!JV(t),NI=t=>$I(t)&&PI(t),$d=t=>$I(t)?parseInt(t.nodeName.substr(1),10):0,P3=t=>{var s;const a=BI(t),i=()=>{t.id=a};return B3("header",(s=$3(t))!==null&&s!==void 0?s:"","#"+a,$d(t),i)},o9=t=>{const s=t.id||t.name,a=$3(t);return B3("anchor",a||"#"+s,"#"+s,0,P)},s9=t=>Pe(Wn(t,NI),P3),r9=t=>Pe(Wn(t,n9),o9),a9=t=>e9("h1,h2,h3,h4,h5,h6,a:not([href])",t),l9=t=>MI(t.title).length>0,II={find:t=>{const s=a9(t);return Wn(s9(s).concat(r9(s)),l9)}},N3="tinymce-url-history",c9=5,Sa=t=>U(t)&&/^https?/.test(t),I3=t=>le(t)&&t.length<=c9&&cl(t,Sa),FI=t=>j(t)&&Uo(t,s=>!I3(s)).isNone(),ew=()=>{const t=yh.getItem(N3);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+N3+" was not valid JSON",a),{};throw a}return FI(s)?s:(console.log("Local storage "+N3+" was not valid format",s),{})},u9=t=>{if(!FI(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));yh.setItem(N3,JSON.stringify(t))},d9=t=>{const s=ew();return xt(s,t).getOr([])},f9=(t,s)=>{if(!Sa(t))return;const a=ew(),i=xt(a,s).getOr([]),d=Wn(i,h=>h!==t);a[s]=[t].concat(d).slice(0,c9),u9(a)},LI=t=>!!t,m9=t=>Re(Rd.makeMap(t,/[, ]/),LI),F3=t=>O.from(y4(t)),g9=t=>{const s=O.from(fE(t)).filter(LI).map(m9);return F3(t).fold(Je,a=>s.fold(ot,i=>It(i).length>0?i:!1))},h9=(t,s)=>{const a=g9(t);return ne(a)?a?F3(t):O.none():a[s]?F3(t):O.none()},HI=(t,s)=>h9(t,s).map(a=>i=>ra.nu(d=>{const h=(S,x)=>{if(!U(S))throw new Error("Expected value to be string");if(x!==void 0&&!j(x))throw new Error("Expected meta to be a object");d({value:S,meta:x})},v={filetype:s,fieldname:i.fieldname,...O.from(i.meta).getOr({})};a.call(t,h,i.value,v)})),tw=t=>O.from(t).filter(U).getOrUndefined(),p9=t=>cB(t)?O.some({targets:II.find(t.getBody()),anchorTop:tw(uB(t)),anchorBottom:tw(dB(t))}):O.none(),zI=t=>O.from(C4(t)),v9=t=>({getHistory:d9,addToHistory:f9,getLinkInformation:()=>p9(t),getValidationHandler:()=>zI(t),getUrlPicker:s=>HI(t,s)}),VI=(t,s,a,i)=>{const d=cn(!1),h=TI(s),v={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:rl.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},S=v9(s),x=YV(s),T=EI(s),D=kI(s),$=()=>d.get(),I=_e=>d.set(_e),Z={shared:{providers:v,anchors:jV(s,a,i,h.isPositionedAtTop),header:h},urlinput:S,styles:x,colorinput:T,dialog:D,isContextMenuOpen:$,setContextMenuState:I},J={...Z,shared:{...Z.shared,interpreter:_e=>k3(_e,{},J),getSink:t.popup}},ue={...Z,shared:{...Z.shared,interpreter:_e=>k3(_e,{},ue),getSink:t.dialog}};return{popup:J,dialog:ue}},b9=(t,s,a)=>{const i=(lt,wt)=>{St([s,...a],Mt=>{Mt.broadcastEvent(lt,wt)})},d=(lt,wt)=>{St([s,...a],Mt=>{Mt.broadcastOn([lt],wt)})},h=lt=>d(vd(),{target:lt.target}),v=q0(),S=el(v,"touchstart",h),x=el(v,"touchmove",lt=>i(kg(),lt)),T=el(v,"touchend",lt=>i(py(),lt)),D=el(v,"mousedown",h),$=el(v,"mouseup",lt=>{lt.raw.button===0&&d(Cb(),{target:lt.target})}),I=lt=>d(vd(),{target:Te.fromDom(lt.target)}),Z=lt=>{lt.button===0&&d(Cb(),{target:Te.fromDom(lt.target)})},J=()=>{St(t.editorManager.get(),lt=>{t!==lt&&lt.dispatch("DismissPopups",{relatedTarget:t})})},ue=lt=>i(nm(),Mp(lt)),_e=lt=>{d(xm(),{}),i(nd(),Mp(lt))},Se=Xr(Te.fromDom(t.getElement())),be=mm(Se,"scroll",lt=>{requestAnimationFrame(()=>{const wt=t.getContainer();if(wt!=null){const Gn=w1(t,s.element).map(Yt=>[Yt.element,...Yt.others]).getOr([]);Kn(Gn,Yt=>Lo(Yt,lt.target))&&(t.dispatch("ElementScroll",{target:lt.target.dom}),i(Ev(),lt))}})}),qe=()=>d(xm(),{}),Le=lt=>{lt.state&&d(vd(),{target:Te.fromDom(t.getContainer())})},ht=lt=>{d(vd(),{target:Te.fromDom(lt.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",I),t.on("tap",I),t.on("mouseup",Z),t.on("mousedown",J),t.on("ScrollWindow",ue),t.on("ResizeWindow",_e),t.on("ResizeEditor",qe),t.on("AfterProgressState",Le),t.on("DismissPopups",ht)}),t.on("remove",()=>{t.off("click",I),t.off("tap",I),t.off("mouseup",Z),t.off("mousedown",J),t.off("ScrollWindow",ue),t.off("ResizeWindow",_e),t.off("ResizeEditor",qe),t.off("AfterProgressState",Le),t.off("DismissPopups",ht),D.unbind(),S.unbind(),x.unbind(),T.unbind(),$.unbind(),be.unbind()}),t.on("detach",()=>{St([s,...a],px),St([s,...a],lt=>lt.destroy())})},Kr=NC,Pd=OO,TK=K([Ae("shell",!1),We("makeItem"),Ae("setupItem",P),Ii.field("listBehaviours",[wn])]),y9=Fi({name:"items",overrides:()=>({behaviours:gt([wn.config({})])})}),C9=K([y9]),w9=K("CustomList"),UI=(t,s,a,i)=>{const d=(S,x)=>{v(S).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const D=wn.contents(T),$=x.length,I=$-D.length,Z=I>0?Pn(I,()=>t.makeItem()):[],J=D.slice($);St(J,_e=>wn.remove(T,_e)),St(Z,_e=>wn.append(T,_e));const ue=wn.contents(T);St(ue,(_e,Se)=>{t.setupItem(S,_e,x[Se],Se)})})},h=t.shell?{behaviours:[wn.config({})],components:[]}:{behaviours:[],components:s},v=S=>t.shell?O.some(S):No(S,t,"items");return{uid:t.uid,dom:t.dom,components:h.components,behaviours:zs(t.listBehaviours,h.behaviours),apis:{setItems:d}}},Bk=fr({name:w9(),configFields:TK(),partFields:C9(),factory:UI,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),b0=K([We("dom"),Ae("shell",!0),dr("toolbarBehaviours",[wn])]),WI=K([Fi({name:"groups",overrides:()=>({behaviours:gt([wn.config({})])})})]),S9=(t,s,a,i)=>{const d=(S,x)=>{h(S).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},T=>{wn.set(T,x)})},h=S=>t.shell?O.some(S):No(S,t,"groups"),v=t.shell?{behaviours:[wn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:v.components,behaviours:zs(t.toolbarBehaviours,v.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},Nd=fr({name:"Toolbar",configFields:b0(),partFields:WI(),factory:S9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),x9=P,E9=Je,$k=K([]);var ZI=Object.freeze({__proto__:null,setup:x9,isDocked:E9,getBehaviours:$k});const L3=t=>(ul(Yo(t,"position"),"fixed")?O.none():Xh(t)).orThunk(()=>{const i=Te.fromTag("span");return xi(t).bind(d=>{ni(d,i);const h=Xh(i);return oc(i),h})}),jI=t=>L3(t).map(ml).getOrThunk(()=>vs(0,0)),k9=(t,s)=>{const a=t.element;tr(a,s.transitionClass),bo(a,s.fadeOutClass),tr(a,s.fadeInClass),s.onShow(t)},T9=(t,s)=>{const a=t.element;tr(a,s.transitionClass),bo(a,s.fadeInClass),tr(a,s.fadeOutClass),s.onHide(t)},GI=(t,s)=>t.y<s.bottom&&t.bottom>s.y,KI=(t,s)=>t.y>=s.y,nw=(t,s)=>t.bottom<=s.bottom,H3=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),y0=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),z3=t=>t.box.x-t.win.x,V3=(t,s,a)=>{const i=s.win,d=s.box,h=z3(s);return ks(t,v=>{switch(v){case"bottom":return nw(d,a.bounds)?O.none():O.some(y0(i,h,a));case"top":return KI(d,a.bounds)?O.none():O.some(H3(i,h,a));default:return O.none()}}).getOr({location:"no-dock"})},ow=(t,s,a)=>cl(t,i=>{switch(i){case"bottom":return nw(s,a.bounds);case"top":return KI(s,a.bounds)}}),qI=(t,s)=>{const a=s.optScrollEnv.fold(K(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return vs(t.bounds.x,a)},_9=(t,s)=>{const a=s.optScrollEnv.fold(K(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return vs(t.x,a)},Pk=(t,s,a)=>a.getInitialPos().map(i=>{const d=qI(i,s);return{box:br(d.left,d.top,Za(t),js(t)),location:i.location}}),U3=(t,s,a,i,d)=>{const h=_9(s,a),v=br(h.left,h.top,s.width,s.height);i.setInitialPos({style:vr(t),position:et(t,"position")||"static",bounds:v,location:d.location})},YI=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>U3(t,s,a,i,d),()=>P)},XI=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return O.some({morph:"static"});case"absolute":const h=L3(t).getOr(Vr()),v=us(h),S=(d=h.dom.scrollTop)!==null&&d!==void 0?d:0;return O.some({morph:"absolute",positionCss:Ul("absolute",xt(i.style,"left").map(x=>s.x-v.x),xt(i.style,"top").map(x=>s.y-v.y+S),xt(i.style,"right").map(x=>v.right-s.right),xt(i.style,"bottom").map(x=>v.bottom-s.bottom))});default:return O.none()}}),W3=(t,s,a)=>Pk(t,s,a).filter(({box:i})=>ow(a.getModes(),i,s)).bind(({box:i})=>XI(t,i,a)),C0=t=>{switch(t.location){case"top":return O.some({morph:"fixed",positionCss:Ul("fixed",O.some(t.leftX),O.some(t.topY),O.none(),O.none())});case"bottom":return O.some({morph:"fixed",positionCss:Ul("fixed",O.some(t.leftX),O.none(),O.none(),O.some(t.bottomY))});default:return O.none()}},O9=(t,s,a)=>{const i=us(t),d=Ga(),h=V3(a.getModes(),{win:d,box:i},s);return h.location==="top"||h.location==="bottom"?(U3(t,i,s,a,h),C0(h)):O.none()},A9=(t,s,a)=>W3(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Pk(t,s,a)).bind(({box:i,location:d})=>{const h=Ga(),v=z3({win:h,box:i}),S=d==="top"?H3(h,v,s):y0(h,v,s);return C0(S)})),w0=(t,s,a)=>{const i=t.element;return ul(Yo(i,"position"),"fixed")?A9(i,s,a):O9(i,s,a)},JI=(t,s,a)=>{const i=t.element;return Pk(i,s,a).bind(({box:d})=>XI(i,d,a))},R9=(t,s,a,i)=>{const d=us(t),h=Ga(),v=z3({win:h,box:d}),S=i(h,v,s);return S.location==="bottom"||S.location==="top"?(YI(t,d,s,a,S),C0(S)):O.none()},Z3=(t,s,a)=>{a.setDocked(!1),St(["left","right","top","bottom","position"],i=>so(t.element,i)),s.onUndocked(t)},sw=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Ky(t.element,i),(d?s.onDocked:s.onUndocked)(t)},Nk=(t,s,a,i,d=!1)=>{s.contextual.each(h=>{h.lazyContext(t).each(v=>{const S=GI(v,i.bounds);S!==a.isVisible()&&(a.setVisible(S),d&&!S?(Cu(t.element,[h.fadeOutClass]),h.onHide(t)):(S?k9:T9)(t,h))})})},QI=(t,s,a,i,d)=>{Nk(t,s,a,i,!0),sw(t,s,a,d.positionCss)},D9=(t,s,a,i,d)=>{switch(d.morph){case"static":return Z3(t,s,a);case"absolute":return sw(t,s,a,d.positionCss);case"fixed":return QI(t,s,a,i,d)}},M9=(t,s,a)=>{const i=s.lazyViewport(t);Nk(t,s,a,i),w0(t,i,a).each(d=>{D9(t,s,a,i,d)})},j3=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);JI(t,d,a).each(h=>{switch(h.morph){case"static":{Z3(t,s,a);break}case"absolute":{sw(t,s,a,h.positionCss);break}}}),a.setVisible(!0),s.contextual.each(h=>{Zr(i,[h.fadeInClass,h.fadeOutClass,h.transitionClass]),h.onShow(t)}),Ik(t,s,a)},Ik=(t,s,a)=>{t.getSystem().isConnected()&&M9(t,s,a)},e5=(t,s,a)=>{a.isDocked()&&j3(t,s,a)},t5=t=>(s,a,i)=>{const d=a.lazyViewport(s);R9(s.element,d,i,t).each(v=>{QI(s,a,i,d,v)})},B9=t5(H3),$9=t5(y0);var N9=Object.freeze({__proto__:null,refresh:Ik,reset:e5,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:B9,forceDockToBottom:$9}),I9=Object.freeze({__proto__:null,events:(t,s)=>Wo([Rg(fp(),(a,i)=>{t.contextual.each(d=>{qa(a.element,d.transitionClass)&&(Zr(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Xe(nm(),(a,i)=>{Ik(a,t,s)}),Xe(Ev(),(a,i)=>{Ik(a,t,s)}),Xe(nd(),(a,i)=>{e5(a,t,s)})])}),F9=[Gs("contextual",[yr("fadeInClass"),yr("fadeOutClass"),yr("transitionClass"),Ri("lazyContext"),Vn("onShow"),Vn("onShown"),Vn("onHide"),Vn("onHidden")]),Ls("lazyViewport",()=>({bounds:Ga(),optScrollEnv:O.none()})),bg("modes",["top","bottom"],Os),Vn("onDocked"),Vn("onUndocked")],o5=Object.freeze({__proto__:null,init:t=>{const s=cn(!1),a=cn(!0),i=is(),d=cn(t.modes),h=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Hl({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:h})}});const qs=jr({fields:F9,name:"docking",active:I9,apis:N9,state:o5}),G3=K($t("toolbar-height-change")),Pf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},s5="tox-tinymce--toolbar-sticky-on",r5="tox-tinymce--toolbar-sticky-off",L9=(t,s)=>{const a=fl(s),d=Zu(s).dom.innerHeight,h=Pl(a),v=Te.fromDom(t.elm),S=ki(v),x=js(v),T=S.y,D=T+x,$=ml(s),I=js(s),Z=$.top,J=Z+I,ue=Math.abs(Z-h.top)<2,_e=Math.abs(J-(h.top+d))<2;if(ue&&T<J)K0(h.left,T-I,a);else if(_e&&D>Z){const Se=T-d+x+I;K0(h.left,Se,a)}},Lk=(t,s)=>_n(qs.getModes(t),s),K3=t=>{const s=i=>Dc(i)+(parseInt(et(i,"margin-top"),10)||0)+(parseInt(et(i,"margin-bottom"),10)||0),a=t.element;Wa(a).each(i=>{const d="padding-"+qs.getModes(t)[0];if(qs.isDocked(t)){const h=Za(i);Rt(a,"width",h+"px"),Rt(i,d,s(a)+"px")}else so(a,"width"),so(i,d)})},a5=(t,s)=>{s?(bo(t,Pf.fadeOutClass),Cu(t,[Pf.transitionClass,Pf.fadeInClass])):(bo(t,Pf.fadeInClass),Cu(t,[Pf.fadeOutClass,Pf.transitionClass]))},q3=(t,s)=>{const a=Te.fromDom(t.getContainer());s?(tr(a,s5),bo(a,r5)):(tr(a,r5),bo(a,s5))},Hk=(t,s)=>{const a=fl(s);xu(a).filter(i=>!Lo(s,i)).filter(i=>Lo(i,Te.fromDom(a.dom.body))||Dl(t,i)).each(()=>Ps(s))},zk=(t,s)=>ic(t).orThunk(()=>s().toOptional().bind(a=>ic(a.element))),H9=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(qs.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(K3)}),t.on("SkinLoaded",()=>{a().each(i=>{qs.isDocked(i)?qs.reset(i):qs.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(qs.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{qs.refresh(d);const h=d.element;Vs(h)&&L9(i,h)})}),t.on("PostRender",()=>{q3(t,!1)})},z9=t=>t().map(qs.isDocked).getOr(!1),V9=()=>[Ja.config({channels:{[G3()]:{onReceive:K3}}})],l5=(t,s)=>{const a=is(),i=s.getSink,d=S=>{i().each(x=>S(x.element))},h=S=>{t.inline||K3(S),q3(t,qs.isDocked(S)),S.getSystem().broadcastOn([xm()],{}),i().each(x=>x.getSystem().broadcastOn([xm()],{}))},v=t.inline?[]:V9();return[fn.config({}),qs.config({contextual:{lazyContext:S=>{const x=Dc(S.element),T=t.inline?t.getContentAreaContainer():t.getContainer();return O.from(T).map(D=>{const $=us(Te.fromDom(D));return w1(t,S.element).fold(()=>{const Z=$.height-x,J=$.y+(Lk(S,"top")?0:x);return br($.x,J,$.width,Z)},Z=>{const J=Y0($,Ui(Z)),ue=Lk(S,"top")?J.y:J.y+x;return br(J.x,ue,J.width,J.height-x)})})},onShow:()=>{d(S=>a5(S,!0))},onShown:S=>{d(x=>Zr(x,[Pf.transitionClass,Pf.fadeInClass])),a.get().each(x=>{Hk(S.element,x),a.clear()})},onHide:S=>{zk(S.element,i).fold(a.clear,a.set),d(x=>a5(x,!1))},onHidden:()=>{d(S=>Zr(S,[Pf.transitionClass]))},...Pf},lazyViewport:S=>w1(t,S.element).fold(()=>{const T=Ga(),D=aB(t),$=T.y+(Lk(S,"top")?D:0),I=T.height-(Lk(S,"bottom")?D:0);return{bounds:br(T.x,$,T.width,I),optScrollEnv:O.none()}},T=>({bounds:Ui(T),optScrollEnv:O.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:ml(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:h,onUndocked:h}),...v]};var S0=Object.freeze({__proto__:null,setup:H9,isDocked:z9,getBehaviours:l5});const Vk=t=>{const s=t.editor,a=t.sticky?l5:$k;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:gt(a(s,t.sharedBackstage))}},Y3=rn([Ks,wl("items",Xf([uy([m2,ri("items",Os)]),Os]))].concat(t0)),U9=t=>Do("GroupToolbarButton",Y3,t),W9=[ga("text"),ga("tooltip"),ga("icon"),ha("search",!1,Xf([hg,rn([ga("placeholder")])],t=>ne(t)?t?O.some({placeholder:O.none()}):O.none():O.some(t))),Ri("fetch"),Ls("onSetup",()=>P)],i5=rn([Ks,...W9]),c5=t=>Do("menubutton",i5,t),Z9=rn([Ks,e0,pc,Lm,P4,Z8,p1,Il("presets","normal",["normal","color","listpreview"]),IB(1),Jb,Qb]),j9=t=>Do("SplitButton",Z9,t);var X3=nr({factory:(t,s)=>{const a=(d,h)=>{const v=Pe(h,S=>{const x={type:"menubutton",text:S.text,fetch:D=>{D(S.getItems())}},T=c5(x).mapError(D=>vg(D)).getOrDie();return Z2(T,"tox-mbtn",s.backstage,O.some("menuitem"))});wn.set(d,v)},i={focus:nn.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:gt([wn.config({}),Bn("menubar-events",[as(d=>{t.onSetup(d)}),Xe(td(),(d,h)=>{As(d.element,".tox-mbtn--active").each(v=>{ba(h.event.target,".tox-mbtn").each(S=>{Lo(v,S)||d.getSystem().getByDom(v).each(x=>{d.getSystem().getByDom(S).each(T=>{vc.expand(T),vc.close(x),fn.focus(T)})})})})}),Xe(xv(),(d,h)=>{h.event.prevFocus.bind(v=>d.getSystem().getByDom(v).toOptional()).each(v=>{h.event.newFocus.bind(S=>d.getSystem().getByDom(S).toOptional()).each(S=>{vc.isOpen(v)&&(vc.expand(S),vc.close(v))})})})]),nn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),O.some(!0))}),Ns.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[We("dom"),We("uid"),We("onEscape"),We("backstage"),Ae("onSetup",P)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const u5="\u26A1\uFE0FUpgrade",d5="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",G9=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:d5,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:u5}}]}),f5="container",Uk=[dr("slotBehaviours",[])],rw=t=>"<alloy.field."+t+">",K9=t=>{const s=(()=>{const h=[];return{slot:(S,x)=>(h.push(S),Om(f5,rw(S),x)),record:K(h)}})(),a=t(s),i=s.record(),d=Pe(i,h=>Nr({name:h,pname:rw(h)}));return $b(f5,Uk,d,q9,a)},q9=(t,s)=>{const a=ue=>Dx(t),i=(ue,_e)=>No(ue,t,_e),d=(ue,_e)=>(Se,be)=>No(Se,t,be).map(qe=>ue(qe,be)).getOr(_e),h=ue=>(_e,Se)=>{St(Se,be=>ue(_e,be))},v=(ue,_e)=>Jr(ue.element,"aria-hidden")!=="true",S=(ue,_e)=>{if(!v(ue)){const Se=ue.element;so(Se,"display"),q(Se,"aria-hidden"),tn(ue,gp(),{name:_e,visible:!0})}},x=(ue,_e)=>{if(v(ue)){const Se=ue.element;Rt(Se,"display","none"),In(Se,"aria-hidden","true"),tn(ue,gp(),{name:_e,visible:!1})}},T=d(v,!1),D=d(x),$=h(D),I=ue=>$(ue,a()),Z=d(S),J={getSlotNames:a,getSlot:i,isShowing:T,hideSlot:D,hideAllSlots:I,showSlot:Z};return{uid:t.uid,dom:t.dom,components:s,behaviours:oh(t.slotBehaviours),apis:J}},al={...Re({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Dg(t)),sketch:K9},J3=rn([pc,e0,Ls("onShow",P),Ls("onHide",P),p1]),Q3=t=>Do("sidebar",J3,t),eR=t=>{const{sidebars:s}=t.ui.registry.getAll();St(It(s),a=>{const i=s[a],d=()=>ul(O.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:h=>{t.execCommand("ToggleSidebar",!1,a),h.setActive(d())},onSetup:h=>{h.setActive(d());const v=()=>h.setActive(d());return t.on("ToggleSidebar",v),()=>{t.off("ToggleSidebar",v)}}})})},Y9=t=>({element:()=>t.element.dom}),tR=(t,s)=>{const a=Pe(It(s),i=>{const d=s[i],h=Eo(Q3(d));return{name:i,getApi:Y9,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return Pe(a,i=>{const d=cn(P);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:p2.unnamedEvents([vh(i,d),Hm(i,d),Xe(gp(),(h,v)=>{const S=v.event;dn(a,T=>T.name===S.name).each(T=>{(S.visible?T.onShow:T.onHide)(T.getApi(h))})})])})})},X9=t=>al.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:tR(s,t),slotBehaviours:p2.unnamedEvents([as(a=>al.hideAllSlots(a))])})),J9=(t,s,a)=>{Qn.getCurrent(t).each(d=>{wn.set(d,[X9(s)]);const h=a==null?void 0:a.toLowerCase();U(h)&&Hn(s,h)&&Qn.getCurrent(d).each(v=>{al.showSlot(v,h),Kl.immediateGrow(d),so(d.element,"width"),Wk(t.element,"region")})})},Wk=(t,s)=>{In(t,"role",s)},aw=(t,s)=>{Qn.getCurrent(t).each(i=>{Qn.getCurrent(i).each(h=>{Kl.hasGrown(i)?al.isShowing(h,s)?(Kl.shrink(i),Wk(t.element,"presentation")):(al.hideAllSlots(h),al.showSlot(h,s),Wk(t.element,"region")):(al.hideAllSlots(h),al.showSlot(h,s),Kl.grow(i),Wk(t.element,"region"))})})},Q9=t=>Qn.getCurrent(t).bind(a=>Kl.isGrowing(a)||Kl.hasGrown(a)?Qn.getCurrent(a).bind(h=>dn(al.getSlotNames(h),v=>al.isShowing(h,v))):O.none()),nR=$t("FixSizeEvent"),oR=$t("AutoSizeEvent"),MK=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:gt([Ns.config({}),fn.config({}),Kl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Qn.getCurrent(s).each(al.hideAllSlots),Co(s,oR)},onGrown:s=>{Co(s,oR)},onStartGrow:s=>{tn(s,nR,{width:Yo(s.element,"width").getOr("")})},onStartShrink:s=>{tn(s,nR,{width:Za(s.element)+"px"})}}),wn.config({}),Qn.config({find:s=>{const a=wn.contents(s);return Js(a)}})])}],behaviours:gt([Mu.childAt(0),Bn("sidebar-sliding-events",[Xe(nR,(s,a)=>{Rt(s.element,"width",a.event.width)}),Xe(oR,(s,a)=>{so(s.element,"width")})])])});var m5=Object.freeze({__proto__:null,block:(t,s,a,i)=>{In(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),h=gt([nn.config({mode:"special",onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),fn.config({})]),v=i(d,h),S=d.getSystem().build(v);wn.append(d,$i(S)),S.hasConfigured(nn)&&s.focus&&nn.focusIn(S),a.isBlocked()||s.onBlock(t),a.blockWith(()=>wn.remove(d,S))},unblock:(t,s,a)=>{q(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),tU=[Ls("getRoot",O.none),ta("focus",!0),Vn("onBlock"),Vn("onUnblock")],nU=Object.freeze({__proto__:null,init:()=>{const t=WS(),s=a=>{t.set({destroy:a})};return Hl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Id=jr({fields:tU,name:"blocking",apis:m5,state:nU}),oU=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return po(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},g5=t=>Array.prototype.slice.call(t.dom.classList,0),Dh=t=>{const s=Te.fromHtml(t),a=Ml(s),i=oU(s),d=g5(s),h=a.length===0?{}:{innerHtml:sm(s)};return{tag:Ol(s),classes:d,attributes:i,...h}},sU=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Dh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),h5=t=>Qn.getCurrent(t).each(s=>Ps(s.element)),PK=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;O.from(t.iframeElement).map(Te.fromDom).each(d=>{s?(Zs(d,a).each(h=>In(d,i,h)),In(d,a,-1)):(q(d,a),Zs(d,i).each(h=>{In(d,a,h),q(d,i)}))})},NK=(t,s,a,i)=>{const d=s.element;if(PK(t,a),a)Id.block(s,sU(i)),so(d,"display"),q(d,"aria-hidden"),t.hasFocus()&&h5(s);else{const h=Qn.getCurrent(s).exists(v=>Ug(v.element));Id.unblock(s),Rt(d,"display","none"),In(d,"aria-hidden","true"),h&&t.focus()}},p5=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:gt([wn.config({}),Id.config({focus:!1}),Qn.config({find:s=>Js(s.components())})]),components:[]}),v5=t=>t.type==="focusin",rU=t=>v5(t)?(t.composed?Js(t.composedPath()):O.from(t.target)).map(Te.fromDom).filter(Oo).exists(a=>qa(a,"mce-pastebin")):!1,aU=(t,s,a)=>{const i=cn(!1),d=is(),h=S=>{i.get()&&!rU(S)&&(S.preventDefault(),h5(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",h),t.on("BeforeExecCommand",S=>{S.command.toLowerCase()==="mcefocus"&&S.value!==!0&&h(S)})});const v=S=>{S!==i.get()&&(i.set(S),NK(t,s(),S,a.providers),Ho(t,S))};t.on("ProgressState",S=>{if(d.on(clearTimeout),pe(S.time)){const x=rE.setEditorTimeout(t,()=>v(S.state),S.time);d.set(x)}else v(S.state),d.clear()})},wc=(t,s)=>po(t,(d,h)=>s(h,d.len).fold(K(d),S=>({len:S.finish,list:d.list.concat([S])})),{len:0,list:[]}).list,sR=(t,s,a)=>({within:t,extra:s,withinWidth:a}),rR=(t,s,a)=>{const i=wc(t,(S,x)=>{const T=a(S);return O.some({element:S,start:x,finish:x+T,width:T})}),d=Wn(i,S=>S.finish<=s),h=ms(d,(S,x)=>S+x.width,0),v=i.slice(d.length);return{within:d,extra:v,withinWidth:h}},lw=t=>Pe(t,s=>s.element),lU=(t,s,a)=>{const i=lw(t.concat(s));return sR(i,[],a)},iw=(t,s,a,i)=>{const d=lw(t).concat([a]);return sR(d,lw(s),i)},iU=(t,s,a)=>sR(lw(t),[],a),Zk=(t,s,a)=>{const i=rR(s,t,a);return i.extra.length===0?O.some(i):O.none()},cU=(t,s,a,i)=>{const d=Zk(t,s,a).getOrThunk(()=>rR(s,t-a(i),a)),h=d.within,v=d.extra,S=d.withinWidth;return v.length===1&&v[0].width<=a(i)?lU(h,v,S):v.length>=1?iw(h,v,i,S):iU(h,v,S)},cw=(t,s)=>{const a=Pe(s,i=>$i(i));Nd.setGroups(t,a)},uU=t=>ks(t,s=>ic(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),b5=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Ef(t,s,"primary"),h=Cs.getCoupled(t,"overflowGroup");Rt(d.element,"visibility","hidden");const v=i.concat([h]),S=uU(v);a([]),cw(d,v);const x=Za(d.element),T=cU(x,s.builtGroups.get(),D=>Za(D.element),h);T.extra.length===0?(wn.remove(d,h),a([])):(cw(d,T.within),a(T.extra)),so(d.element,"visibility"),Gu(d.element),S.each(fn.focus)},Sc=K([dr("splitToolbarBehaviours",[Cs]),Ka("builtGroups",()=>cn([]))]),dU=K([dm(["overflowToggledClass"]),nf("getOverflowBounds"),We("lazySink"),Ka("overflowGroups",()=>cn([])),Vn("onOpened"),Vn("onClosed")].concat(Sc())),jk=K([Nr({factory:Nd,schema:b0(),name:"primary"}),dc({schema:b0(),name:"overflow"}),dc({name:"overflow-button"}),dc({name:"overflow-group"})]),Gk=K((t,s)=>{Lw(t,Math.floor(s))}),y5=K([dm(["toggledClass"]),We("lazySink"),Ri("fetch"),nf("getBounds"),Gs("fireDismissalEventInstead",[Ae("event",vu())]),md(),Vn("onToggled")]),fU=K([dc({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:gt([Fn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),dc({factory:Nd,schema:b0(),name:"toolbar",overrides:t=>({toolbarBehaviours:gt([nn.config({mode:"cyclic",onEscape:s=>(No(s,t,"button").each(fn.focus),O.none())})])})})]),uw=is(),mU=(t,s)=>{uw.set(!0),aR(t,s),uw.clear()},aR=(t,s)=>{const a=Cs.getCoupled(t,"toolbarSandbox");to.isOpen(a)?to.close(a):to.open(a,s.toolbar())},lR=(t,s,a,i)=>{const d=a.getBounds.map(v=>v()),h=a.lazySink(t).getOrDie();Er.positionWithinBounds(h,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:Gk()}}},d)},C5=(t,s,a,i,d)=>{Nd.setGroups(s,d),lR(t,s,a,i),Fn.on(t)},gU=(t,s,a)=>{const i=Py(),d=(v,S)=>{const x=uw.get().getOr(!1);a.fetch().get(T=>{C5(t,S,a,s.layouts,T),i.link(t.element),x||nn.focusIn(S)})},h=()=>{Fn.off(t),uw.get().getOr(!1)||fn.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:gt([nn.config({mode:"special",onEscape:v=>(to.close(v),O.some(!0))}),to.config({onOpen:d,onClose:h,isPartOf:(v,S,x)=>cm(S,x)||cm(t,x),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Ja.config({channels:{...Em({isExtraPart:Je,...a.fireDismissalEventInstead.map(v=>({fireEventInstead:{event:v.event}})).getOr({})}),...wC({doReposition:()=>{to.getState(Cs.getCoupled(t,"toolbarSandbox")).each(v=>{lR(t,v,a,s.layouts)})}})}})])}},Mh=fr({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...wa.sketch({...i.button(),action:d=>{aR(d,i)},buttonBehaviours:Ii.augment({dump:i.button().buttonBehaviours},[Cs.config({others:{toolbarSandbox:d=>gU(d,a,t)}})])}),apis:{setGroups:(d,h)=>{to.getState(Cs.getCoupled(d,"toolbarSandbox")).each(v=>{C5(d,v,t,a.layouts,h)})},reposition:d=>{to.getState(Cs.getCoupled(d,"toolbarSandbox")).each(h=>{lR(d,h,t,a.layouts)})},toggle:d=>{aR(d,i)},toggleWithoutFocusing:d=>{mU(d,i)},getToolbar:d=>to.getState(Cs.getCoupled(d,"toolbarSandbox")),isOpen:d=>to.isOpen(Cs.getCoupled(d,"toolbarSandbox"))}}),configFields:y5(),partFields:fU(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),w5=K([We("items"),dm(["itemSelector"]),dr("tgroupBehaviours",[nn])]),S5=K([Mb({name:"items",unit:"item"})]),x5=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.tgroupBehaviours,[nn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),Kk=fr({name:"ToolbarGroup",configFields:w5(),partFields:S5(),factory:x5}),iR=t=>Pe(t,s=>$i(s)),cR=(t,s,a)=>{b5(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{Mh.setGroups(d,iR(i))})})},E5=(t,s,a,i)=>{const d=ko(Mh.sketch({fetch:()=>ra.nu(h=>{h(iR(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Sr,$r],onRtl:()=>[$r,Sr],onBottomLtr:()=>[Xa,Ba],onBottomRtl:()=>[Ba,Xa]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(h,v)=>t[v?"onOpened":"onClosed"](h)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.splitToolbarBehaviours,[Cs.config({others:{overflowGroup:()=>Kk.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(h,v)=>{t.builtGroups.set(Pe(v,h.getSystem().build)),cR(h,d,t)},refresh:h=>cR(h,d,t),toggle:h=>{d.getOpt(h).each(v=>{Mh.toggle(v)})},toggleWithoutFocusing:h=>{d.getOpt(h).each(Mh.toggleWithoutFocusing)},isOpen:h=>d.getOpt(h).map(Mh.isOpen).getOr(!1),reposition:h=>{d.getOpt(h).each(v=>{Mh.reposition(v)})},getOverflow:h=>d.getOpt(h).bind(Mh.getToolbar)},domModification:{attributes:{role:"group"}}}},k5=fr({name:"SplitFloatingToolbar",configFields:dU(),partFields:jk(),factory:E5,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),hU=K([dm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Vn("onOpened"),Vn("onClosed")].concat(Sc())),pU=K([Nr({factory:Nd,schema:b0(),name:"primary"}),Nr({factory:Nd,schema:b0(),name:"overflow",overrides:t=>({toolbarBehaviours:gt([Kl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{No(s,t,"overflow-button").each(a=>{Fn.off(a),fn.focus(a)}),t.onClosed(s)},onGrown:s=>{nn.focusIn(s),t.onOpened(s)},onStartGrow:s=>{No(s,t,"overflow-button").each(Fn.on)}}),nn.config({mode:"acyclic",onEscape:s=>(No(s,t,"overflow-button").each(fn.focus),O.some(!0))})])})}),dc({name:"overflow-button",overrides:t=>({buttonBehaviours:gt([Fn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),dc({name:"overflow-group"})]),T5=(t,s)=>No(t,s,"overflow").map(Kl.hasGrown).getOr(!1),_5=(t,s)=>{No(t,s,"overflow-button").bind(()=>No(t,s,"overflow")).each(a=>{uR(t,s),Kl.toggleGrow(a)})},uR=(t,s)=>{No(t,s,"overflow").each(a=>{b5(t,s,i=>{const d=Pe(i,h=>$i(h));Nd.setGroups(a,d)}),No(t,s,"overflow-button").each(i=>{Kl.hasGrown(a)&&Fn.on(i)}),Kl.refresh(a)})},vU=(t,s,a,i)=>{const d="alloy.toolbar.toggle",h=(v,S)=>{const x=Pe(S,v.getSystem().build);t.builtGroups.set(x)};return{uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.splitToolbarBehaviours,[Cs.config({others:{overflowGroup:v=>Kk.sketch({...i["overflow-group"](),items:[wa.sketch({...i["overflow-button"](),action:S=>{Co(v,d)}})]})}}),Bn("toolbar-toggle-events",[Xe(d,v=>{_5(v,t)})])]),apis:{setGroups:(v,S)=>{h(v,S),uR(v,t)},refresh:v=>uR(v,t),toggle:v=>_5(v,t),isOpen:v=>T5(v,t)},domModification:{attributes:{role:"group"}}}},dR=fr({name:"SplitSlidingToolbar",configFields:hU(),partFields:pU(),factory:vU,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),O5=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[Kk.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:gt([Ns.config({}),fn.config({})])}},qk=t=>Kk.sketch(O5(t)),A5=(t,s)=>{const a=as(i=>{const d=Pe(t.initGroups,qk);Nd.setGroups(i,d)});return gt([Au.toolbarButton(t.providers.isDisabled),_r(),nn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Bn("toolbar-events",[a])])},R5=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":O5({title:O.none(),items:[]}),"overflow-button":TV({name:"more",icon:O.some("more-drawer"),enabled:!0,tooltip:O.some("More..."),primary:!1,buttonType:O.none(),borderless:!1},O.none(),t.providers)},splitToolbarBehaviours:A5(t,s)}},bU=t=>{const s=R5(t),a=4,i=k5.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return k5.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,h=ki(d),v=Vf(d),S=ki(v),x=Math.max(v.dom.scrollHeight,S.height);return br(h.x+a,S.y,h.width-a*2,x)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},yU=t=>{const s=dR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=dR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=R5(t);return dR.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([G3()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([G3()],{type:"closed"}),t.onToggled(d,!1)}})},dw=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Nd.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Xc.scrolling?["tox-toolbar--scrolling"]:[])},components:[Nd.parts.groups({})],toolbarBehaviours:A5(t,s)})},D5=[Lm,pc,ga("tooltip"),Il("buttonType","secondary",["primary","secondary"]),ta("borderless",!1),Ri("onAction")],CU=[...D5,Of,sc("type",["button"])],fR=[...D5,ta("active",!1),sc("type",["togglebutton"])],M5={button:CU,togglebutton:fR},Yk=[sc("type",["group"]),bg("buttons",[],er("type",M5))],wU=er("type",{...M5,group:Yk}),B5=rn([bg("buttons",[],wU),Ri("onShow"),Ri("onHide")]),SU=t=>Do("view",B5,t),xU=(t,s)=>{var a,i;const d=t.type==="togglebutton",h=t.icon.map(qe=>jm(qe,s.icons)).map(ko),S=(()=>qe=>{const Le=wt=>{h.map(Mt=>Mt.getOpt(qe).each(Gn=>{wn.set(Gn,[jm(wt,s.icons)])}))},ht=wt=>{const Mt=qe.element;wt?(tr(Mt,"tox-button--enabled"),In(Mt,"aria-pressed",!0)):(bo(Mt,"tox-button--enabled"),q(Mt,"aria-pressed"))},lt=()=>qa(qe.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Le,setActive:ht,isActive:lt});if(t.type==="button")return t.onAction({setIcon:Le})})(),x={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},T=y3((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),D=d?t.text.map(s.translate):O.some(s.translate(t.text)),$=D.map(Hs),I=x.tooltip.or(D).map(qe=>({"aria-label":s.translate(qe),title:s.translate(qe)})).getOr({}),Z=h.map(qe=>qe.asSpec()),J=s0([Z,$]),ue=t.icon.isSome()&&$.isSome(),_e={tag:"button",classes:T.concat(...t.icon.isSome()&&!ue?["tox-button--icon"]:[]).concat(...ue?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:I},Se=[],be=j2(x,O.some(S),Se,_e,J,s);return wa.sketch(be)},EU=(t,s)=>xU(t,s),kU=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Pe(t.buttons,a=>EU(a,s))}),$5=Oa().deviceType,mR=$5.isPhone(),TU=$5.isTablet(),Xk=t=>{let s=!1;const a=Pe(t.buttons,i=>i.type==="group"?(s=!0,kU(i,t.providers)):EU(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...mR||TU?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:gt([fn.config({}),nn.config({mode:"flow",selector:"button, .tox-button",focusInside:Mm.OnEnterOrSpaceMode})]),components:s?a:[Ad.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Ad.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},P5=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),N5=(t,s,a,i)=>{const d={getPane:h=>Kr.getPart(h,t,"pane"),getOnShow:h=>t.viewConfig.onShow,getOnHide:h=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var Bh=fr({name:"silver.View",configFields:[We("viewConfig")],partFields:[Fi({factory:{sketch:Xk},schema:[We("buttons"),We("providers")],name:"header"}),Fi({factory:{sketch:P5},schema:[],name:"pane"})],factory:N5,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const _U=(t,s,a)=>ka(s,(i,d)=>{const h=Eo(SU(i));return t.slot(d,Bh.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[Bh.parts.header({buttons:h.buttons,providers:a})]:[],Bh.parts.pane({})]}))}),I5=(t,s)=>al.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:_U(a,t,s),slotBehaviours:p2.unnamedEvents([as(i=>al.hideAllSlots(i))])})),D1=t=>dn(al.getSlotNames(t),s=>al.isShowing(t,s)),F5=t=>{const s=t.element;Rt(s,"display","none"),In(s,"aria-hidden","true")},OU=t=>{const s=t.element;so(s,"display"),q(s,"aria-hidden")},AU=t=>({getContainer:K(t)}),L5=(t,s,a)=>{al.getSlot(t,s).each(i=>{Bh.getPane(i).each(d=>{a(i)(AU(d.element.dom))})})},gR=(t,s)=>L5(t,s,Bh.getOnShow),RU=(t,s)=>L5(t,s,Bh.getOnHide);var fw=nr({factory:(t,s)=>{const h={setViews:(v,S)=>{wn.set(v,[I5(S,s.backstage.shared.providers)])},whichView:v=>Qn.getCurrent(v).bind(D1),toggleView:(v,S,x,T)=>Qn.getCurrent(v).exists(D=>{const $=D1(D),I=$.exists(J=>T===J),Z=al.getSlot(D,T).isSome();return Z&&(al.hideAllSlots(D),I?(F5(v),S()):(x(),OU(v),al.showSlot(D,T),gR(D,T)),$.each(J=>RU(D,J))),Z})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:gt([wn.config({}),Qn.config({find:v=>{const S=wn.contents(v);return Js(S)}})]),apis:h}},name:"silver.ViewWrapper",configFields:[We("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const H5=(t,s,a)=>{let i=!1;const d={getSocket:h=>Kr.getPart(h,t,"socket"),setSidebar:(h,v,S)=>{Kr.getPart(h,t,"sidebar").each(x=>J9(x,v,S))},toggleSidebar:(h,v)=>{Kr.getPart(h,t,"sidebar").each(S=>aw(S,v))},whichSidebar:h=>Kr.getPart(h,t,"sidebar").bind(Q9).getOrNull(),getHeader:h=>Kr.getPart(h,t,"header"),getToolbar:h=>Kr.getPart(h,t,"toolbar"),setToolbar:(h,v)=>{Kr.getPart(h,t,"toolbar").each(S=>{const x=Pe(v,qk);S.getApis().setGroups(S,x)})},setToolbars:(h,v)=>{Kr.getPart(h,t,"multiple-toolbar").each(S=>{const x=Pe(v,T=>Pe(T,qk));Bk.setItems(S,x)})},refreshToolbar:h=>{Kr.getPart(h,t,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{Kr.getPart(h,t,"toolbar").each(v=>{Ko(v.getApis().toggle,S=>S(v))})},toggleToolbarDrawerWithoutFocusing:h=>{Kr.getPart(h,t,"toolbar").each(v=>{Ko(v.getApis().toggleWithoutFocusing,S=>S(v))})},isToolbarDrawerToggled:h=>Kr.getPart(h,t,"toolbar").bind(v=>O.from(v.getApis().isOpen).map(S=>S(v))).getOr(!1),getThrobber:h=>Kr.getPart(h,t,"throbber"),focusToolbar:h=>{Kr.getPart(h,t,"toolbar").orThunk(()=>Kr.getPart(h,t,"multiple-toolbar")).each(S=>{nn.focusIn(S)})},setMenubar:(h,v)=>{Kr.getPart(h,t,"menubar").each(S=>{X3.setMenus(S,v)})},focusMenubar:h=>{Kr.getPart(h,t,"menubar").each(v=>{X3.focus(v)})},setViews:(h,v)=>{Kr.getPart(h,t,"viewWrapper").each(S=>{fw.setViews(S,v)})},toggleView:(h,v)=>Kr.getPart(h,t,"viewWrapper").exists(S=>fw.toggleView(S,()=>d.showMainView(h),()=>d.hideMainView(h),v)),whichView:h=>Kr.getPart(h,t,"viewWrapper").bind(fw.whichView).getOrNull(),hideMainView:h=>{i=d.isToolbarDrawerToggled(h),i&&d.toggleToolbarDrawer(h),Kr.getPart(h,t,"editorContainer").each(v=>{const S=v.element;Rt(S,"display","none"),In(S,"aria-hidden","true")})},showMainView:h=>{i&&d.toggleToolbarDrawer(h),Kr.getPart(h,t,"editorContainer").each(v=>{const S=v.element;so(S,"display"),q(S,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},Jk=Pd.optional({factory:X3,name:"menubar",schema:[We("backstage")]}),hR=t=>t.type===Xc.sliding?yU:t.type===Xc.floating?bU:dw,DU=Pd.optional({factory:{sketch:t=>Bk.sketch({uid:t.uid,dom:t.dom,listBehaviours:gt([nn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>dw({type:t.type,uid:$t("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),O.some(!0))}),setupItem:(s,a,i,d)=>{Nd.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[We("dom"),We("onEscape")]}),MU=Pd.optional({factory:{sketch:t=>{const s=hR(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),O.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[We("dom"),We("onEscape"),We("getSink")]}),z5=Pd.optional({factory:{sketch:Vk},name:"header",schema:[We("dom")]}),BU=Pd.optional({factory:{sketch:G9},name:"promotion",schema:[We("dom")]}),$U=Pd.optional({name:"socket",schema:[We("dom")]}),PU=Pd.optional({factory:{sketch:MK},name:"sidebar",schema:[We("dom")]}),V5=Pd.optional({factory:{sketch:p5},name:"throbber",schema:[We("dom")]}),NU=Pd.optional({factory:fw,name:"viewWrapper",schema:[We("backstage")]}),IU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),pR=Pd.optional({factory:{sketch:IU},name:"editorContainer",schema:[]});var jo=fr({name:"OuterContainer",factory:H5,configFields:[We("dom"),We("behaviours")],partFields:[z5,Jk,MU,DU,$U,PU,BU,V5,NU,pR],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const FU="file edit view insert format tools table help",vR={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},LU=(t,s,a)=>{const i=dE(a).split(/[ ,]/);return{text:t.title,getItems:()=>Ge(t.items,d=>{const h=d.toLowerCase();return h.trim().length===0?[]:Kn(i,v=>v===h)?[]:h==="separator"||h==="|"?[{type:"separator"}]:s.menuItems[h]?[s.menuItems[h]]:[]})}},Qk=t=>t.split(" "),U5=(t,s)=>{const a={...vR,...s.menus},i=It(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?Qk(FU):Qk(s.menubar===!1?"":s.menubar),h=Wn(d,S=>{const x=Hn(vR,S);return i?x||xt(s.menus,S).exists(T=>Hn(T,"items")):x}),v=Pe(h,S=>{const x=a[S];return LU({title:x.title,items:Qk(x.items)},s,t)});return Wn(v,S=>{const x=T=>U(T)||T.type!=="separator";return S.getItems().length>0&&Kn(S.getItems(),x)})},bR=t=>{const s=()=>{t._skinLoaded=!0,CH(t)};return()=>{t.initialized?s():t.on("init",s)}},HU=(t,s)=>()=>wH(t,{message:s}),W5=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),zU=(t,s)=>{const a=s+"/skin.min.css";return W5(t,a,t.ui.styleSheetLoader)},Z5=(t,s)=>{if(ju(Te.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.min.css";return W5(t,i,Wb.DOM.styleSheetLoader)}else return Promise.resolve()},j5=(t,s)=>{const a=vB(s);return a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!S4(s)&&U(a)?Promise.all([zU(s,a),Z5(s,a)]).then(bR(s),HU(s,"Skin could not be loaded")):Promise.resolve(bR(s)())},VU=ft(j5,!1),UU=ft(j5,!0),yR=(t,s,a)=>{const i=(S,x,T,D)=>{const $=s.shared.providers.translate(S.title);if(S.type==="separator")return O.some({type:"separator",text:$});if(S.type==="submenu"){const I=Ge(S.getStyleItems(),Z=>d(Z,x,D));return x===0&&I.length<=0?O.none():O.some({type:"nestedmenuitem",text:$,enabled:I.length>0,getSubmenuItems:()=>Ge(S.getStyleItems(),Z=>d(Z,x,D))})}else return O.some({type:"togglemenuitem",text:$,icon:S.icon,active:S.isSelected(D),enabled:!T,onAction:a.onAction(S),...S.getStylePreview().fold(()=>({}),I=>({meta:{style:I}}))})},d=(S,x,T)=>{const D=S.type==="formatter"&&a.isInvalid(S);return x===0?D?[]:i(S,x,!1,T).toArray():i(S,x,D,T).toArray()},h=S=>{const x=a.getCurrentValue(),T=a.shouldHide?0:1;return Ge(S,D=>d(D,T,x))};return{validateItems:h,getFetch:(S,x)=>(T,D)=>{const $=x(),I=h($),Z=Ah(I,Ed.CLOSE_ON_EXECUTE,S,{isHorizontalMenu:!1,search:O.none()});D(Z)}}},$h=(t,s,a)=>{const i=a.dataset,d=i.type==="basic"?()=>Pe(i.data,h=>M3(h,a.isSelectedFor,a.getPreviewFor)):i.getData;return{items:yR(t,s,a),getStyleItems:d}},mw=(t,s,a)=>{const{items:i,getStyleItems:d}=$h(t,s,a),h=S=>({getComponent:K(S)}),v=Vm(t,"NodeChange",S=>{const x=S.getComponent();a.updateText(x),un.set(S.getComponent(),!t.selection.isEditable())});return fk({text:a.icon.isSome()?O.none():a.text,icon:a.icon,tooltip:O.from(a.tooltip),role:O.none(),fetch:i.getFetch(s,d),onSetup:v,getApi:h,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},WU=t=>Pe(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),ZU=t=>({type:"basic",data:t});var x0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(x0||(x0={}));const jU=(t,s)=>s===x0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),CR=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:WU(jU(i,a))}},wR=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],G5=t=>{const s=()=>dn(wR,S=>t.formatter.match(S.format)),a=S=>()=>t.formatter.match(S),i=S=>O.none,d=S=>{const T=s().fold(K("left"),D=>D.title.toLowerCase());tn(S,O1,{icon:`align-${T}`})},h=ZU(wR),v=S=>()=>dn(wR,x=>x.format===S.format).each(x=>t.execCommand(x.command));return{tooltip:"Align",text:O.none(),icon:O.some("align-left"),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:i,onAction:v,updateText:d,dataset:h,shouldHide:!1,isInvalid:S=>!t.formatter.canApply(S.format)}},GU=(t,s)=>mw(t,s,G5(t)),K5=(t,s)=>{const a=$h(t,s,G5(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),onSetup:Na(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},gw=(t,s)=>{const a=s(),i=Pe(a,d=>d.format);return O.from(t.formatter.closest(i)).bind(d=>dn(a,h=>h.format===d)).orThunk(()=>Cn(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},eT=t=>{const s="Paragraph",a=v=>()=>t.formatter.match(v),i=v=>()=>{const S=t.formatter.get(v);return S?O.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(v))}):O.none()},d=v=>{const x=gw(t,()=>h.data).fold(K(s),T=>T.title);tn(v,Cc,{text:x})},h=CR(t,"block_formats",x0.SemiColon);return{tooltip:"Blocks",text:O.some(s),icon:O.none(),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:i,onAction:M$(t),updateText:d,dataset:h,shouldHide:!1,isInvalid:v=>!t.formatter.canApply(v.format)}},q5=(t,s)=>mw(t,s,eT(t)),Ph=(t,s)=>{const a=$h(t,s,eT(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Na(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},Y5=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],X5=t=>{const s=t.split(/\s*,\s*/);return Pe(s,a=>a.replace(/^['"]+|['"]+$/g,""))},KU=t=>{const s=()=>{const a=X5(t.toLowerCase());return cl(Y5,i=>a.indexOf(i.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},J5=t=>{const s="System Font",a=()=>{const T=J=>J?X5(J)[0]:"",D=t.queryCommandValue("FontName"),$=x.data,I=D?D.toLowerCase():"";return{matchOpt:dn($,J=>{const ue=J.format;return ue.toLowerCase()===I||T(ue).toLowerCase()===T(I).toLowerCase()}).orThunk(()=>Cn(KU(I),{title:s,format:I})),font:D}},i=T=>D=>D.exists($=>$.format===T),d=()=>{const{matchOpt:T}=a();return T},h=T=>()=>O.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}}),v=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,T.format)})},S=T=>{const{matchOpt:D,font:$}=a(),I=D.fold(K($),Z=>Z.title);tn(T,Cc,{text:I})},x=CR(t,"font_family_formats",x0.SemiColon);return{tooltip:"Fonts",text:O.some(s),icon:O.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:h,onAction:v,updateText:S,dataset:x,shouldHide:!1,isInvalid:Je}},qU=(t,s)=>mw(t,s,J5(t)),YU=(t,s)=>{const a=$h(t,s,J5(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),onSetup:Na(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},XU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},JU=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=S=>`(?:${S})?`,v=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${v})(.*)$`)})(),Q5=(t,s)=>Kn(s,a=>Kn(XU[a],i=>t===i)),tT=(t,s)=>O.from(JU.exec(t)).bind(i=>{const d=Number(i[1]),h=i[2];return Q5(h,s)?O.some({value:d,unit:h}):O.none()}),QU=(t,s)=>tT(t,s).map(({value:a,unit:i})=>a+i),nT={tab:K(9),escape:K(27),enter:K(13),backspace:K(8),delete:K(46),left:K(37),up:K(38),right:K(39),down:K(40),space:K(32),home:K(36),end:K(35),pageUp:K(33),pageDown:K(34)},eW=(t,s,a)=>{let i=O.none();const d=be=>be.map(qe=>At.getValue(qe)).getOr(""),h=Vm(t,"NodeChange",be=>{const qe=be.getComponent();i=O.some(qe),a.updateInputValue(qe),un.set(qe,!t.selection.isEditable())}),v=be=>({getComponent:K(be)}),S=cn(P),x=$t("custom-number-input-events"),T=(be,qe,Le)=>{const ht=d(i),lt=a.getNewValue(ht,be),wt=ht.length-`${lt}`.length,Mt=i.map(Yt=>Yt.element.dom.selectionStart-wt),Gn=i.map(Yt=>Yt.element.dom.selectionEnd-wt);a.onAction(lt,Le),i.each(Yt=>{At.setValue(Yt,lt),qe&&(Mt.each(Tn=>Yt.element.dom.selectionStart=Tn),Gn.each(Tn=>Yt.element.dom.selectionEnd=Tn))})},D=(be,qe)=>T((Le,ht)=>Le-ht,be,qe),$=(be,qe)=>T((Le,ht)=>Le+ht,be,qe),I=be=>Wa(be.element).fold(O.none,qe=>(Ps(qe),O.some(!0))),Z=be=>Ug(be.element)?(Jh(be.element).each(qe=>Ps(qe)),O.some(!0)):O.none(),J=(be,qe,Le,ht)=>{const lt=s.shared.providers.translate(Le),wt=$t("altExecuting"),Mt=Vm(t,"NodeChange",Yt=>{un.set(Yt.getComponent(),!t.selection.isEditable())}),Gn=Yt=>{un.isDisabled(Yt)||be(!0)};return wa.sketch({dom:{tag:"button",attributes:{title:lt,"aria-label":lt},classes:ht.concat(qe)},components:[dk(qe,s.shared.providers.icons)],buttonBehaviours:gt([un.config({}),Bn(wt,[vh({onSetup:Mt,getApi:v},S),Hm({getApi:v},S),Xe(rc(),(Yt,Tn)=>{(Tn.event.raw.keyCode===nT.space()||Tn.event.raw.keyCode===nT.enter())&&(un.isDisabled(Yt)||be(!1))}),Xe(Bi(),Gn),Xe(Qf(),Gn)])]),eventOrder:{[rc()]:[wt,"keying"],[Bi()]:[wt,"alloy.base.behaviour"],[Qf()]:[wt,"alloy.base.behaviour"]}})},ue=ko(J(be=>D(!1,be),"minus","Decrease font size",["highlight-on-focus"])),_e=ko(J(be=>$(!1,be),"plus","Increase font size",["highlight-on-focus"])),Se=ko({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[h1.sketch({inputBehaviours:gt([un.config({}),Bn(x,[vh({onSetup:h,getApi:v},S),Hm({getApi:v},S)]),Bn("input-update-display-text",[Xe(Cc,(be,qe)=>{At.setValue(be,qe.event.text)}),Xe(af(),be=>{a.onAction(At.getValue(be))}),Xe(Sg(),be=>{a.onAction(At.getValue(be))})]),nn.config({mode:"special",onEnter:be=>(T(Ie,!0,!0),O.some(!0)),onEscape:I,onUp:be=>($(!0,!1),O.some(!0)),onDown:be=>(D(!0,!1),O.some(!0)),onLeft:(be,qe)=>(qe.cut(),O.none()),onRight:(be,qe)=>(qe.cut(),O.none())})])})],behaviours:gt([fn.config({}),nn.config({mode:"special",onEnter:Z,onSpace:Z,onEscape:I}),Bn("input-wrapper-events",[Xe(td(),be=>{St([ue,_e],qe=>{const Le=Te.fromDom(qe.get(be).element.dom);Ug(Le)&&vf(Le)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[ue.asSpec(),Se.asSpec(),_e.asSpec()],behaviours:gt([fn.config({}),nn.config({mode:"flow",focusInside:Mm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:be=>Ug(be.element)?O.none():(Ps(be.element),O.some(!0))})])}},tW={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},nW={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},oW=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},sW=(t,s)=>/[0-9.]+px$/.test(t)?oW(parseInt(t,10)*72/96,s||0)+"pt":xt(nW,t).getOr(t),rW=t=>xt(tW,t).getOr(""),SR=t=>{const s=()=>{let x=O.none();const T=S.data,D=t.queryCommandValue("FontSize");if(D)for(let $=3;x.isNone()&&$>=0;$--){const I=sW(D,$),Z=rW(I);x=dn(T,J=>J.format===D||J.format===I||J.format===Z)}return{matchOpt:x,size:D}},a=x=>T=>T.exists(D=>D.format===x),i=()=>{const{matchOpt:x}=s();return x},d=K(O.none),h=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,x.format)})},v=x=>{const{matchOpt:T,size:D}=s(),$=T.fold(K(D),I=>I.title);tn(x,Cc,{text:$})},S=CR(t,"font_size_formats",x0.Space);return{tooltip:"Font sizes",text:O.some("12pt"),icon:O.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:h,updateText:v,dataset:S,shouldHide:!1,isInvalid:Je}},eF=(t,s)=>mw(t,s,SR(t)),tF=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},aW=16,nF=t=>t>=0,lW=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>tn(i,Cc,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{tT(i,["unsupportedLength","empty"]);const h=tT(i,["unsupportedLength","empty"]).or(tT(s(),["unsupportedLength","empty"])),v=h.map(D=>D.value).getOr(aW),S=iB(t),x=h.map(D=>D.unit).filter(D=>D!=="").getOr(S),T=d(v,tF(x).step);return`${nF(T)?T:v}${x}`}}},iW=(t,s)=>eW(t,s,lW(t)),cW=(t,s)=>{const a=$h(t,s,SR(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Na(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},xR=(t,s)=>{const a="Paragraph",i=v=>()=>t.formatter.match(v),d=v=>()=>{const S=t.formatter.get(v);return S!==void 0?O.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(v))}):O.none()},h=v=>{const S=$=>_I($)?Ge($.items,S):A3($)?[{title:$.title,format:$.format}]:[],x=Ge(RI(t),S),D=gw(t,K(x)).fold(K(a),$=>$.title);tn(v,Cc,{text:D})};return{tooltip:"Formats",text:O.some(a),icon:O.none(),isSelectedFor:i,getCurrentValue:O.none,getPreviewFor:d,onAction:M$(t),updateText:h,shouldHide:g4(t),isInvalid:v=>!t.formatter.canApply(v.format),dataset:s}},uW=(t,s)=>{const a={type:"advanced",...s.styles};return mw(t,s,xR(t,a))},oF=(t,s)=>{const a={type:"advanced",...s.styles},i=$h(t,s,xR(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Na(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},dW=K([We("toggleClass"),We("fetch"),He("onExecute"),Ae("getHotspot",O.some),Ae("getAnchorOverrides",K({})),md(),He("onItemExecute"),xo("lazySink"),We("dom"),Vn("onOpen"),dr("splitDropdownBehaviours",[Cs,nn,fn]),Ae("matchWidth",!1),Ae("useMinWidth",!1),Ae("eventOrder",{}),xo("role")].concat(bA())),fW=Nr({factory:wa,schema:[We("dom")],name:"arrow",defaults:()=>({buttonBehaviours:gt([fn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(om)},buttonBehaviours:gt([Fn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),mW=Nr({factory:wa,schema:[We("dom")],name:"button",defaults:()=>({buttonBehaviours:gt([fn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),gW=K([fW,mW,Fi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[We("text")],name:"aria-descriptor"}),dc({schema:[wu()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),hA()]),hW=(t,s,a,i)=>{const d=D=>{Qn.getCurrent(D).each($=>{go.highlightFirst($),nn.focusIn($)})},h=D=>{pA(t,Ie,D,i,d,jl.HighlightMenuAndItem).get(P)},v=D=>(h(D),O.some(!0)),S=D=>{const $=Ef(D,t,"button");return om($),O.some(!0)},x={...Wo([as((D,$)=>{No(D,t,"aria-descriptor").each(Z=>{const J=$t("aria");In(Z.element,"id",J),In(D.element,"aria-describedby",J)})})]),...QC(O.some(h))},T={repositionMenus:D=>{Fn.isOn(D)&&aP(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:T,eventOrder:{...t.eventOrder,[ii()]:["disabling","toggling","alloy.base.behaviour"]},events:x,behaviours:zs(t.splitDropdownBehaviours,[Cs.config({others:{sandbox:D=>{const $=Ef(D,t,"arrow");return vA(t,D,{onOpen:()=>{Fn.on($),Fn.on(D)},onClose:()=>{Fn.off($),Fn.off(D)}})}}}),nn.config({mode:"special",onSpace:S,onEnter:S,onDown:v}),fn.config({}),Fn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},oT=fr({name:"SplitDropdown",configFields:dW(),partFields:gW(),factory:hW,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),ER=t=>({isEnabled:()=>!un.isDisabled(t),setEnabled:s=>un.set(t,!s),setText:s=>tn(t,Cc,{text:s}),setIcon:s=>tn(t,O1,{icon:s})}),pW=t=>({setActive:s=>{Fn.set(t,s)},isActive:()=>Fn.isOn(t),isEnabled:()=>!un.isDisabled(t),setEnabled:s=>un.set(t,!s),setText:s=>tn(t,Cc,{text:s}),setIcon:s=>tn(t,O1,{icon:s})}),sF=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),rF=$t("focus-button"),kR=(t,s,a,i,d)=>{const h=s.map(S=>ko(kN(S,"tox-tbtn",d))),v=t.map(S=>ko(jm(S,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:sF(a,d)},components:s0([v.map(S=>S.asSpec()),h.map(S=>S.asSpec())]),eventOrder:{[li()]:["focusing","alloy.base.behaviour",_1],[Sl()]:[_1,"toolbar-group-button-events"]},buttonBehaviours:gt([Au.toolbarButton(d.isDisabled),_r(),Bn(_1,[as((S,x)=>l3(S)),Xe(Cc,(S,x)=>{h.bind(T=>T.getOpt(S)).each(T=>{wn.set(T,[Hs(d.translate(x.event.text))])})}),Xe(O1,(S,x)=>{v.bind(T=>T.getOpt(S)).each(T=>{wn.set(T,[jm(x.event.icon,d.icons)])})}),Xe(li(),(S,x)=>{x.event.prevent(),Co(S,rF)})])].concat(i.getOr([])))}},vW=(t,s,a,i)=>{const d=s.shared,h=cn(P),v={toolbarButtonBehaviours:[],getApi:ER,onSetup:t.onSetup},S=[Bn("toolbar-group-button-events",[vh(v,h),Hm(v,h)])];return Mh.sketch({lazySink:d.getSink,fetch:()=>ra.nu(x=>{x(Pe(a(t.items),qk))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:kR(t.icon,t.text,t.tooltip,O.some(S),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},TR=(t,s,a)=>{var i;const d=cn(P),h=kR(t.icon,t.text,t.tooltip,O.none(),a);return wa.sketch({dom:h.dom,components:h.components,eventOrder:xN,buttonBehaviours:{...gt([Bn("toolbar-button-events",[jz({onAction:t.onAction,getApi:s.getApi}),vh(s,d),Hm(s,d)]),Au.toolbarButton(()=>!t.enabled||a.isDisabled()),_r()].concat(s.toolbarButtonBehaviours)),[_1]:(i=h.buttonBehaviours)===null||i===void 0?void 0:i[_1]}})},aF=(t,s)=>_R(t,s,[]),_R=(t,s,a)=>TR(t,{toolbarButtonBehaviours:a.length>0?[Bn("toolbarButtonWith",a)]:[],getApi:ER,onSetup:t.onSetup},s),lF=(t,s)=>iF(t,s,[]),iF=(t,s,a)=>TR(t,{toolbarButtonBehaviours:[wn.config({}),Fn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Bn("toolbarToggleButtonWith",a)]:[]),getApi:pW,onSetup:t.onSetup},s),cF=(t,s,a)=>i=>ra.nu(d=>s.fetch(d)).map(d=>O.from(EA(Xo(uA($t("menu-value"),d,h=>{s.onItemAction(t(i),h)},s.columns,s.presets,Ed.CLOSE_ON_EXECUTE,s.select.getOr(Je),a),{movement:_2(s.columns,s.presets),menuBehaviours:p2.unnamedEvents(s.columns!=="auto"?[]:[as((h,v)=>{j4(h,4,pE(s.presets)).each(({numRows:S,numColumns:x})=>{nn.setGridSize(h,S,x)})})])})))),bW=(t,s)=>{const a=h=>({isEnabled:()=>!un.isDisabled(h),setEnabled:v=>un.set(h,!v),setIconFill:(v,S)=>{As(h.element,`svg path[class="${v}"], rect[class="${v}"]`).each(x=>{In(x,"fill",S)})},setActive:v=>{In(h.element,"aria-pressed",v),As(h.element,"span").each(S=>{h.getSystem().getByDom(S).each(x=>Fn.set(x,v))})},isActive:()=>As(h.element,"span").exists(v=>h.getSystem().getByDom(v).exists(Fn.isOn)),setText:v=>As(h.element,"span").each(S=>h.getSystem().getByDom(S).each(x=>tn(x,Cc,{text:v}))),setIcon:v=>As(h.element,"span").each(S=>h.getSystem().getByDom(S).each(x=>tn(x,O1,{icon:v})))}),i=cn(P),d={getApi:a,onSetup:t.onSetup};return oT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...sF(t.tooltip,s.providers)}},onExecute:h=>{const v=a(h);v.isEnabled()&&t.onAction(v)},onItemExecute:(h,v,S)=>{},splitDropdownBehaviours:gt([Au.splitButton(s.providers.isDisabled),_r(),Bn("split-dropdown-events",[as((h,v)=>l3(h)),Xe(rF,fn.focus),vh(d,i),Hm(d,i)]),M2.config({})]),eventOrder:{[Sl()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:cF(a,t,s.providers),parts:{menu:vE(!1,t.columns,t.presets)},components:[oT.parts.button(kR(t.icon,t.text,O.none(),O.some([Fn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),oT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:gc("chevron-down",s.providers.icons)},buttonBehaviours:gt([Au.splitButton(s.providers.isDisabled),_r(),aE()])}),oT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},uF=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],hw=(t,s)=>(a,i,d)=>{const h=t(a).mapError(v=>vg(v)).getOrDie();return s(h,i,d)},yW={button:hw(zB,(t,s)=>aF(t,s.shared.providers)),togglebutton:hw(VB,(t,s)=>lF(t,s.shared.providers)),menubutton:hw(c5,(t,s)=>Z2(t,"tox-tbtn",s,O.none(),!1)),splitbutton:hw(j9,(t,s)=>bW(t,s.shared)),grouptoolbarbutton:hw(U9,(t,s,a)=>{const i=a.ui.registry.getAll().buttons,d=v=>pw(a,{buttons:i,toolbar:v,allowToolbarGroups:!1},s,O.none()),h={[ub]:s.shared.header.isPositionedAtTop()?Pi.TopToBottom:Pi.BottomToTop};switch(Gb(a)){case Xc.floating:return vW(t,s,d,h);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},CW=(t,s,a)=>xt(yW,t.type).fold(()=>(console.error("skipping button defined by",t),O.none()),i=>O.some(i(t,s,a))),dF={styles:uW,fontsize:eF,fontsizeinput:iW,fontfamily:qU,blocks:q5,align:GU},wW=t=>{const s=Pe(uF,a=>{const i=Wn(a.items,d=>Hn(t,d)||Hn(dF,d));return{name:a.name,items:i}});return Wn(s,a=>a.items.length>0)},SW=t=>{const s=t.split("|");return Pe(s,a=>({items:a.trim().split(" ")}))},xW=t=>Ce(t,s=>Hn(s,"name")&&Hn(s,"items")),EW=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?wW(a):U(s)?SW(s):xW(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},OR=(t,s,a,i,d,h)=>xt(s,a.toLowerCase()).orThunk(()=>h.bind(v=>ks(v,S=>xt(s,S+a.toLowerCase())))).fold(()=>xt(dF,a.toLowerCase()).map(v=>v(t,d)),v=>v.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),O.none()):CW(v,d,t)),pw=(t,s,a,i)=>{const d=EW(s),h=Pe(d,v=>{const S=Ge(v.items,x=>x.trim().length===0?[]:OR(t,s.buttons,x,s.allowToolbarGroups,a,i).toArray());return{title:O.from(t.translate(v.name)),items:S}});return Wn(h,v=>v.items.length>0)},fF=(t,s,a,i)=>{const d=s.mainUi.outerContainer,h=a.toolbar,v=a.buttons;if(Ce(h,U)){const S=h.map(x=>{const T={toolbar:x,buttons:v,allowToolbarGroups:a.allowToolbarGroups};return pw(t,T,i,O.none())});jo.setToolbars(d,S)}else jo.setToolbar(d,pw(t,a,i,O.none()))},mF=Oa(),kW=mF.os.isiOS()&&mF.os.version.major<=12,TW=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const h=t.getDoc().documentElement,v=cn(vs(d.innerWidth,d.innerHeight)),S=cn(vs(h.offsetWidth,h.offsetHeight)),x=()=>{const I=v.get();(I.left!==d.innerWidth||I.top!==d.innerHeight)&&(v.set(vs(d.innerWidth,d.innerHeight)),E2(t))},T=()=>{const I=t.getDoc().documentElement,Z=S.get();(Z.left!==I.offsetWidth||Z.top!==I.offsetHeight)&&(S.set(vs(I.offsetWidth,I.offsetHeight)),E2(t))},D=I=>{_d(t,I)};i.bind(d,"resize",x),i.bind(d,"scroll",D);const $=mm(Te.fromDom(t.getBody()),"load",T);t.on("hide",()=>{St(a,I=>{Rt(I.element,"display","none")})}),t.on("show",()=>{St(a,I=>{so(I.element,"display")})}),t.on("NodeChange",T),t.on("remove",()=>{$.unbind(),i.unbind(d,"resize",x),i.unbind(d,"scroll",D),d=null})},_W=(t,s,a)=>{Im(t)&&wm(a.mainUi.mothership.element,a.popupUi.mothership),gC(s,a.dialogUi.mothership)};var AW=Object.freeze({__proto__:null,render:async(t,s,a,i,d)=>{const{mainUi:h,uiMotherships:v}=s,S=cn(0),x=h.outerContainer;await VU(t);const T=Te.fromDom(d.targetNode),D=zr(Xr(T));wm(T,h.mothership),_W(t,D,s),t.on("PostRender",()=>{jo.setSidebar(x,a.sidebar,hB(t)),fF(t,s,a,i),S.set(t.getWin().innerWidth),jo.setMenubar(x,U5(t,a)),jo.setViews(x,a.views),TW(t,s)});const $=jo.getSocket(x).getOrDie("Could not find expected socket element");if(kW){qo($.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ue=Hz(()=>{t.dispatch("ScrollContent")},20),_e=el($.element,"scroll",ue.throttle);t.on("remove",_e.unbind)}f$(t,s),t.addCommand("ToggleSidebar",(ue,_e)=>{jo.toggleSidebar(x,_e),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ue;return(ue=jo.whichSidebar(x))!==null&&ue!==void 0?ue:""}),t.addCommand("ToggleView",(ue,_e)=>{if(jo.toggleView(x,_e)){const Se=x.element;h.mothership.broadcastOn([vd()],{target:Se}),St(v,be=>{be.broadcastOn([vd()],{target:Se})}),ce(jo.whichView(x))&&(t.focus(),t.nodeChanged(),jo.refreshToolbar(x))}}),t.addQueryValueHandler("ToggleView",()=>{var ue;return(ue=jo.whichView(x))!==null&&ue!==void 0?ue:""});const I=Gb(t),Z=()=>{jo.refreshToolbar(s.mainUi.outerContainer)};(I===Xc.sliding||I===Xc.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ue=t.getWin().innerWidth;ue!==S.get()&&(Z(),S.set(ue))});const J={setEnabled:ue=>{b2(s,!ue)},isEnabled:()=>!un.isDisabled(x)};return{iframeContainer:$.element.dom,editorContainer:x.element.dom,api:J}}});const AR=t=>/^[0-9\.]+(|px)$/i.test(""+t)?O.some(parseInt(""+t,10)):O.none(),sT=t=>pe(t)?t+"px":t,rT=(t,s,a)=>{const i=s.filter(h=>t<h),d=a.filter(h=>t>h);return i.or(d).getOr(t)},gF=t=>{const s=jb(t),a=f4(t),i=m4(t);return AR(s).map(d=>rT(d,a,i))},hF=t=>gF(t).getOr(jb(t)),pF=t=>{const s=lE(t),a=iE(t),i=cE(t);return AR(s).map(d=>rT(d,a,i))},RW=t=>pF(t).getOr(lE(t)),{ToolbarLocation:RR,ToolbarMode:M1}=CB,DW=40,MW=(t,s,a,i,d)=>{const{mainUi:h,uiMotherships:v}=a,S=Wb.DOM,x=qb(t),T=l2(t),D=cE(t).or(pF(t)),$=i.shared.header,I=$.isPositionedAtTop,Z=Gb(t),J=Z===M1.sliding||Z===M1.floating,ue=cn(!1),_e=()=>ue.get()&&!t.removed,Se=an=>J?an.fold(K(0),eo=>eo.components().length>1?js(eo.components()[1].element):0):0,be=an=>{switch(v4(t)){case RR.auto:const eo=jo.getToolbar(h.outerContainer),kt=Se(eo),jt=js(an.element)-kt,yn=us(s);if(yn.y>jt)return"top";{const ln=Vf(s),xn=Math.max(ln.dom.scrollHeight,js(ln));return yn.bottom<xn-jt||Ga().bottom<yn.bottom-jt?"bottom":"top"}case RR.bottom:return"bottom";case RR.top:default:return"top"}},qe=an=>{d.on(eo=>{qs.setModes(eo,[an]),$.setDockingMode(an);const kt=I()?Pi.TopToBottom:Pi.BottomToTop;In(eo.element,ub,kt)})},Le=()=>{d.on(an=>{const eo=D.getOrThunk(()=>{const kt=AR(et(Vr(),"margin-left")).getOr(0);return Za(Vr())-ml(s).left+kt});Rt(an.element,"max-width",eo+"px")})},ht=an=>{d.on(eo=>{const kt=jo.getToolbar(h.outerContainer),jt=Se(kt),yn=us(s),{top:qn,left:ln}=lt(t,h.outerContainer.element).fold(()=>({top:I()?Math.max(yn.y-js(eo.element)+jt,0):yn.bottom,left:yn.x}),wo=>{var ll;const hs=us(wo),Ci=(ll=wo.dom.scrollTop)!==null&&ll!==void 0?ll:0,Pu=Lo(wo,Vr()),Hh=Pu?Math.max(yn.y-js(eo.element)+jt,0):yn.y-hs.y+Ci-js(eo.element)+jt;return{top:I()?Hh:yn.bottom,left:Pu?yn.x:yn.x-hs.x}}),xn={position:"absolute",left:Math.round(ln)+"px",top:Math.round(qn)+"px"},Fo=an.map(wo=>{const ll=Pl(),hs=150,Ci=window.innerWidth-(ln-ll.left);return{width:Math.max(Math.min(wo,Ci),hs)+"px"}}).getOr({});qo(h.outerContainer.element,{...xn,...Fo})})},lt=(an,eo)=>Im(an)?L3(eo):O.none(),wt=()=>{St(v,an=>{an.broadcastOn([xm()],{})})},Mt=()=>{if(x)return O.none();if(ml(h.outerContainer.element).left+$l(h.outerContainer.element)>=window.innerWidth-DW||Yo(h.outerContainer.element,"width").isSome()){Rt(h.outerContainer.element,"position","absolute"),Rt(h.outerContainer.element,"left","0px"),so(h.outerContainer.element,"width");const eo=$l(h.outerContainer.element);return O.some(eo)}else return O.none()},Gn=an=>{if(!_e())return;x||Le();const eo=x?O.none():Mt();J&&jo.refreshToolbar(h.outerContainer),x||ht(eo),T&&d.on(an),wt()},Yt=()=>x||!T||!_e()?!1:d.get().exists(an=>{const eo=$.getDockingMode(),kt=be(an);return kt!==eo?(qe(kt),!0):!1});return{isVisible:_e,isPositionedAtTop:I,show:()=>{ue.set(!0),Rt(h.outerContainer.element,"display","flex"),S.addClass(t.getBody(),"mce-edit-focus"),St(v,an=>{so(an.element,"display")}),Yt(),Im(t)?Gn(an=>qs.isDocked(an)?qs.reset(an):qs.refresh(an)):Gn(qs.refresh)},hide:()=>{ue.set(!1),Rt(h.outerContainer.element,"display","none"),S.removeClass(t.getBody(),"mce-edit-focus"),St(v,an=>{Rt(an.element,"display","none")})},update:Gn,updateMode:()=>{Yt()&&Gn(qs.reset)},repositionPopups:wt}},vF=(t,s)=>{const a=us(t);return{pos:s?a.y:a.bottom,bounds:a}},BW=(t,s,a,i)=>{const d=cn(vF(s,a.isPositionedAtTop())),h=T=>{const{pos:D,bounds:$}=vF(s,a.isPositionedAtTop()),{pos:I,bounds:Z}=d.get(),J=$.height!==Z.height||$.width!==Z.width;d.set({pos:D,bounds:$}),J&&E2(t,T),a.isVisible()&&(I!==D?a.update(qs.reset):J&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(qs.reset)),t.on("NodeChange keydown",T=>{requestAnimationFrame(()=>h(T))});let v=0;const S=lk(()=>a.update(qs.refresh),33);t.on("ScrollWindow",()=>{const T=Pl().left;T!==v&&(v=T,S.throttle()),a.updateMode()}),Im(t)&&t.on("ElementScroll",T=>{a.update(qs.refresh)});const x=Qa();x.set(mm(Te.fromDom(t.getBody()),"load",T=>h(T.raw))),t.on("remove",()=>{x.clear()})};var $W=Object.freeze({__proto__:null,render:async(t,s,a,i,d)=>{const{mainUi:h}=s,v=is(),S=Te.fromDom(d.targetNode),x=MW(t,S,s,i,v),T=b4(t);await UU(t);const D=()=>{if(v.isSet()){x.show();return}v.set(jo.getHeader(h.outerContainer).getOrDie());const I=E4(t);Im(t)?(wm(S,h.mothership),wm(S,s.popupUi.mothership)):gC(I,h.mothership),gC(I,s.dialogUi.mothership),fF(t,s,a,i),jo.setMenubar(h.outerContainer,U5(t,a)),x.show(),BW(t,S,x,T),t.nodeChanged()};t.on("show",D),t.on("hide",x.hide),T||(t.on("focus",D),t.on("blur",x.hide)),t.on("init",()=>{(t.hasFocus()||T)&&D()}),f$(t,s);const $={show:D,hide:x.hide,setEnabled:I=>{b2(s,!I)},isEnabled:()=>!un.isDisabled(h.outerContainer)};return{editorContainer:h.outerContainer.element.dom,api:$}}});const PW=()=>{const t=is(),s=is(),a=is();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const h=t.get().map(S=>S.mothership),v=s.get().map(S=>S.mothership);return h.fold(()=>v.toArray(),S=>v.fold(()=>[S],x=>Lo(S.element,x.element)?[S]:[S,x]))},lazyGetInOuterOrDie:(h,v)=>()=>a.get().bind(S=>v(S.outerContainer)).getOrDie(`Could not find ${h} element in OuterContainer`)}},NW="contexttoolbar-show",aT="contexttoolbar-hide",IW=t=>({hide:()=>Co(t,em()),getValue:()=>At.getValue(t)}),bF=(t,s)=>Xe(SN,(a,i)=>{const d=t.get(a),h=IW(d);s.onAction(h,i.event.buttonApi)}),yF=(t,s,a)=>{const{primary:i,...d}=s.original,h=Eo(zB({...d,type:"button",onAction:P}));return _R(h,a,[bF(t,s)])},CF=(t,s,a)=>{const{primary:i,...d}=s.original,h=Eo(VB({...d,type:"togglebutton",onAction:P}));return iF(h,a,[bF(t,s)])},FW=t=>t.type==="contextformtogglebutton",LW=(t,s,a)=>FW(s)?CF(t,s,a):yF(t,s,a),HW=(t,s,a)=>{const i=Pe(s,v=>ko(LW(t,v,a)));return{asSpecs:()=>Pe(i,v=>v.asSpec()),findPrimary:v=>ks(s,(S,x)=>S.primary?O.from(i[x]).bind(T=>T.getOpt(v)).filter(Oe(un.isDisabled)):O.none())}},wF=(t,s)=>{const a=t.label.fold(()=>({}),h=>({"aria-label":h})),i=ko(h1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:gt([nn.config({mode:"special",onEnter:h=>d.findPrimary(h).map(v=>(om(v),!0)),onLeft:(h,v)=>(v.cut(),O.none()),onRight:(h,v)=>(v.cut(),O.none())})])})),d=HW(i,t.commands,s);return[{title:O.none(),items:[i.asSpec()]},{title:O.none(),items:d.asSpecs()}]},zW={renderContextForm:(t,s,a)=>dw({type:t,uid:$t("context-toolbar"),initGroups:wF(s,a),onEscape:O.none,cyclicKeying:!0,providers:a}),buildInitGroups:wF},DR=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,VW=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=ng(Te.fromDom(t.startContainer),t.startOffset).element;return(Al(a)?xi(a):O.some(a)).filter(Oo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},MR=t=>{const s=t.selection.getRng(),a=VW(s);if(t.inline){const i=Pl();return br(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=ki(Te.fromDom(t.getBody()));return br(i.x+a.left,i.y+a.top,a.width,a.height)}},UW=(t,s)=>s.filter(a=>ca(a)&&jd(a)).map(ki).getOrThunk(()=>MR(t)),WW=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},lT=(t,s,a,i,d,h)=>{const v=Te.fromDom(t.getContainer()),S=As(v,".tox-editor-header").getOr(v),x=us(S),T=x.y>=s.bottom,D=i&&!T;if(t.inline&&D)return{y:Math.max(x.bottom+h,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(x.y-h,a.bottom)};const $=d==="line"?us(v):s;return D?{y:Math.max(x.bottom+h,a.y),bottom:Math.min($.bottom-h,a.bottom)}:{y:Math.max($.y+h,a.y),bottom:Math.min(x.y-h,a.bottom)}},SF=(t,s,a,i=0)=>{const d=lv(window),h=us(Te.fromDom(t.getContentAreaContainer())),v=gE(t)||o2(t)||s2(t),{x:S,width:x}=WW(h,d,i);if(t.inline&&!v)return br(S,d.y,x,d.height);{const T=s.header.isPositionedAtTop(),{y:D,bottom:$}=lT(t,h,d,T,a,i);return br(S,D,x,$-D)}},B1=12,vw={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},BR={maxHeightFunction:gm(),maxWidthFunction:Gk()},ZW=(t,s)=>{const a=t.selection.getRng(),i=ng(Te.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Lo(i.element,s)},jW=(t,s,a)=>{const i=Yo(t,"position");Rt(t,"position",s);const d=a(t);return i.each(h=>Rt(t,"position",h)),d},xF=t=>t==="node",GW=(t,s,a,i,d)=>{const h=MR(t),v=i.lastElement().exists(S=>Lo(a,S));if(ZW(t,a))return v?bI:Bu;if(v)return jW(s,i.getMode(),()=>DR(h,us(s),-20)&&!i.isReposition()?zV:bI);{const S=i.getMode()==="fixed"?d.y+Pl().top:d.y,x=js(s)+B1;return S+x<=h.y?Bu:J2}},KW=(t,s,a,i)=>{const d=x=>(T,D,$,I,Z)=>{const J=GW(t,I,x,a,Z),ue={...T,y:Z.y,height:Z.height};return{...J(ue,D,$,I,Z),alwaysFit:!0}},h=x=>xF(i)?[d(x)]:[];return s?{onLtr:x=>[ur,$r,Sr,Ba,Xa,Jo].concat(h(x)),onRtl:x=>[ur,Sr,$r,Xa,Ba,Jo].concat(h(x))}:{onLtr:x=>[Jo,ur,Ba,$r,Xa,Sr].concat(h(x)),onRtl:x=>[Jo,ur,Xa,Sr,Ba,$r].concat(h(x))}},iT=(t,s,a,i)=>s==="line"?{bubble:fd(B1,0,vw),layouts:{onLtr:()=>[$a],onRtl:()=>[DS]},overrides:BR}:{bubble:fd(0,B1,vw,1/B1),layouts:KW(t,a,i,s),overrides:BR},cT=(t,s)=>{const a=Wn(s,h=>h.predicate(t.dom)),{pass:i,fail:d}=Rr(a,h=>h.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},EF=t=>{if(t.length<=1)return t;{const s=h=>Kn(t,v=>v.position===h),a=h=>Wn(t,v=>v.position===h),i=s("selection"),d=s("node");if(i||d)if(d&&i){const h=a("node"),v=Pe(a("selection"),S=>({...S,position:"node"}));return h.concat(v)}else return a(i?"selection":"node");else return a("line")}},kF=t=>{if(t.length<=1)return t;{const s=i=>dn(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Wn(t,d=>d.position===i))}},TF=(t,s,a)=>{const i=cT(t,s);if(i.contextForms.length>0)return O.some({elem:t,toolbars:[i.contextForms[0]]});{const d=cT(t,a);if(d.contextForms.length>0)return O.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const h=EF(i.contextToolbars.concat(d.contextToolbars));return O.some({elem:t,toolbars:h})}else return O.none()}},qW=(t,s,a)=>t(s)?O.none():oS(s,i=>{if(Oo(i)){const{contextToolbars:d,contextForms:h}=cT(i,a.inNodeScope),v=h.length>0?h:kF(d);return v.length>0?O.some({elem:i,toolbars:v}):O.none()}else return O.none()},t),_F=(t,s)=>{const a=Te.fromDom(s.getBody()),i=v=>Lo(v,a),d=v=>!i(v)&&!Dl(a,v),h=Te.fromDom(s.selection.getNode());return d(h)?O.none():TF(h,t.inNodeScope,t.inEditorScope).orThunk(()=>qW(i,h,t))},YW=(t,s)=>{const a={},i=[],d=[],h={},v={},S=(D,$)=>{const I=Eo(z4($));a[D]=I,I.launch.map(Z=>{h["form:"+D]={...$.launch,type:Z.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}}}),I.scope==="editor"?d.push(I):i.push(I),v[D]=I},x=(D,$)=>{GB($).each(I=>{$.scope==="editor"?d.push(I):i.push(I),v[D]=I})},T=It(t);return St(T,D=>{const $=t[D];$.type==="contextform"?S(D,$):$.type==="contexttoolbar"&&x(D,$)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:v,formNavigators:h}},OF=$t("forward-slide"),AF=$t("backward-slide"),$R=$t("change-slide-event"),PR="tox-pop--resizing",bw=t=>{const s=cn([]);return Rs.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Rs.getContent(a).each(i=>{so(i.element,"visibility")}),bo(a.element,PR),so(a.element,"width")},inlineBehaviours:gt([Bn("context-toolbar-events",[Rg(fp(),(a,i)=>{i.event.raw.propertyName==="width"&&(bo(a.element,PR),so(a.element,"width"))}),Xe($R,(a,i)=>{const d=a.element;so(d,"width");const h=Za(d);Rs.setContent(a,i.event.contents),tr(d,PR);const v=Za(d);Rt(d,"width",h+"px"),Rs.getContent(a).each(S=>{i.event.focus.bind(x=>(Ps(x),ic(d))).orThunk(()=>(nn.focusIn(S),xu(Xr(d))))}),setTimeout(()=>{Rt(a.element,"width",v+"px")},0)}),Xe(OF,(a,i)=>{Rs.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:xu(Xr(a.element))}]))}),tn(a,$R,{contents:i.event.forwardContents,focus:O.none()})}),Xe(AF,(a,i)=>{Si(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),tn(a,$R,{contents:$i(d.bar),focus:d.focus})})})]),nn.config({mode:"special",onEscape:a=>Si(s.get()).fold(()=>t.onEscape(),i=>(Co(a,AF),O.some(!0)))})]),lazySink:()=>Mn.value(t.sink)})},NR="tox-pop--transition",XW=(t,s,a,i)=>{const d=i.backstage,h=d.shared,v=Oa().deviceType.isTouch,S=is(),x=is(),T=is(),D=na(bw({sink:a,onEscape:()=>(t.focus(),O.some(!0))})),$=()=>{const Yt=T.get().getOr("node"),Tn=xF(Yt)?1:0;return SF(t,h,Yt,Tn)},I=()=>!t.removed&&!(v()&&d.isContextMenuOpen()),Z=Yt=>ul(ru(Yt,S.get(),Lo),!0),J=()=>{if(I()){const Yt=$(),Tn=ul(T.get(),"node")?UW(t,S.get()):MR(t);return Yt.height<=0||!DR(Tn,Yt,.01)}else return!0},ue=()=>{S.clear(),x.clear(),T.clear(),Rs.hide(D)},_e=()=>{if(Rs.isOpen(D)){const Yt=D.element;so(Yt,"display"),J()?Rt(Yt,"display","none"):(x.set(0),Rs.reposition(D))}},Se=Yt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Yt],behaviours:gt([nn.config({mode:"acyclic"}),Bn("pop-dialog-wrap-events",[as(Tn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>nn.focusIn(Tn))}),Aa(Tn=>{t.shortcuts.remove("ctrl+F9")})])])}),be=uu(()=>YW(s,Yt=>{const Tn=ht([Yt]);tn(D,OF,{forwardContents:Se(Tn)})})),qe=(Yt,Tn)=>pw(t,{buttons:Yt,toolbar:Tn.items,allowToolbarGroups:!1},i.backstage,O.some(["form:"])),Le=(Yt,Tn)=>zW.buildInitGroups(Yt,Tn),ht=Yt=>{const{buttons:Tn}=t.ui.registry.getAll(),Sn=be(),ro={...Tn,...Sn.formNavigators},an=Gb(t)===Xc.scrolling?Xc.scrolling:Xc.default,eo=pn(Pe(Yt,kt=>kt.type==="contexttoolbar"?qe(ro,kt):Le(kt,h.providers)));return dw({type:an,uid:$t("context-toolbar"),initGroups:eo,onEscape:O.none,cyclicKeying:!0,providers:h.providers})},lt=(Yt,Tn)=>{const Sn=Yt==="node"?h.anchors.node(Tn):h.anchors.cursor(),ro=iT(t,Yt,v(),{lastElement:S.get,isReposition:()=>ul(x.get(),0),getMode:()=>Er.getMode(a)});return Xo(Sn,ro)},wt=(Yt,Tn)=>{if(Gn.cancel(),!I())return;const Sn=ht(Yt),ro=Yt[0].position,an=lt(ro,Tn);T.set(ro),x.set(1);const eo=D.element;so(eo,"display"),Z(Tn)||(bo(eo,NR),Er.reset(a,D)),Rs.showWithinBounds(D,Se(Sn),{anchor:an,transition:{classes:[NR],mode:"placement"}},()=>O.some($())),Tn.fold(S.clear,S.set),J()&&Rt(eo,"display","none")};let Mt=!1;const Gn=lk(()=>{if(!(!t.hasFocus()||t.removed||Mt))if(qa(D.element,NR))Gn.throttle();else{const Yt=be();_F(Yt,t).fold(ue,Tn=>{wt(Tn.toolbars,O.some(Tn.elem))})}},17);t.on("init",()=>{t.on("remove",ue),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",_e),t.on("click keyup focus SetContent",Gn.throttle),t.on(aT,ue),t.on(NW,Yt=>{const Tn=be();xt(Tn.lookupTable,Yt.toolbarKey).each(Sn=>{wt([Sn],Cn(Yt.target!==t,Yt.target)),Rs.getContent(D).each(nn.focusIn)})}),t.on("focusout",Yt=>{rE.setEditorTimeout(t,()=>{ic(a.element).isNone()&&ic(D.element).isNone()&&ue()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ue()}),t.on("AfterProgressState",Yt=>{Yt.state?ue():t.hasFocus()&&Gn.throttle()}),t.on("dragstart",()=>{Mt=!0}),t.on("dragend drop",()=>{Mt=!1}),t.on("NodeChange",Yt=>{ic(D.element).fold(Gn.throttle,P)})})},JW=t=>{St([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:hi(t,a.cmd),onSetup:BE(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Na(t),onAction:hi(t,"JustifyNone")})},IR=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),h=is();return Pe(i,v=>({type:"togglemenuitem",text:s.display(v),onSetup:S=>{const x=D=>{D&&(h.on($=>$.setActive(!1)),h.set(S)),S.setActive(D)};x(ul(d,s.hash(v)));const T=s.watcher(t,v,x);return()=>{h.clear(),T()}},onAction:()=>s.setCurrent(t,v)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},QW=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:bB,hash:s=>QU(s,["fixed","relative","empty"]).getOr(s),display:Ie,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>O.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Na(t),onMenuSetup:Na(t)}),RF=t=>O.from(h4(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:K(a),hash:i=>fe(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,h)=>{var v;return i.formatter.formatChanged("lang",h,!1,{value:d.code,customValue:(v=d.customCode)!==null&&v!==void 0?v:null}).unbind},getCurrent:i=>{const d=Te.fromDom(i.selection.getNode());return Cg(d,h=>O.some(h).filter(Oo).bind(v=>Zs(v,"lang").map(x=>{const T=Zs(v,"data-mce-lang").getOrUndefined();return{code:x,customCode:T,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=Qa();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),ME(d.clear,Na(t)(i))},onMenuSetup:Na(t)})),eZ=t=>{IR(t,QW(t)),RF(t).each(s=>IR(t,s))},tZ=(t,s)=>{K5(t,s),YU(t,s),oF(t,s),Ph(t,s),cW(t,s)},nZ=t=>Vm(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),oZ=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:nZ(t),onAction:hi(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Na(t),onAction:hi(t,"indent")})},sZ=t=>{oZ(t)},E0=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),ME(()=>t.off("PastePlainTextToggle",i),Na(t)(a))},DF=t=>{const s=cn(n2(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:E0(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:E0(t,s)})},FR=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},rZ=t=>{Rd.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:BE(t,s.name),onAction:FR(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:BE(t,a),onAction:FR(t,a)})}},MF=t=>{Rd.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:hi(t,s.action)})}),Rd.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Na(t),onAction:hi(t,s.action)})})},LR=t=>{Rd.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:hi(t,s.action),onSetup:BE(t,s.name)})})},BF=t=>{rZ(t),MF(t),LR(t)},$F=t=>{Rd.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:hi(t,s.action)})}),Rd.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Na(t),onAction:hi(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Na(t),onAction:FR(t,"code")})},aZ=t=>{BF(t),$F(t)},Gm=(t,s)=>Vm(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),uT=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Gm(t,"hasUndo"),onAction:hi(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Gm(t,"hasRedo"),onAction:hi(t,"redo")})},HR=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:Gm(t,"hasUndo"),onAction:hi(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:Gm(t,"hasRedo"),onAction:hi(t,"redo")})},PF=t=>{uT(t),HR(t)},NF=t=>Vm(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),lZ=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:NF(t),onAction:hi(t,"mceToggleVisualAid")})},IF=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:hi(t,"mceToggleVisualAid")})},iZ=t=>{IF(t),lZ(t)},cZ=(t,s)=>{JW(t),aZ(t),tZ(t,s),PF(t),u0(t),iZ(t),sZ(t),eZ(t),DF(t)},uZ=t=>U(t)?t.split(/[ ,]/):t,FF=t=>s=>s.options.get(t),dZ=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:U(a)||Ce(a,U)?{value:uZ(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},zR=FF("contextmenu_never_use_native"),dT=FF("contextmenu_avoid_overlap"),LF=t=>VR(t).length===0,VR=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Wn(a,i=>Hn(s,i))},$1=(t,s)=>({type:"makeshift",x:t,y:s}),fZ=(t,s,a)=>$1(t.x+s,t.y+a),UR=t=>t.type==="longpress"||t.type.indexOf("touch")===0,mZ=t=>{if(UR(t)){const s=t.touches[0];return $1(s.pageX,s.pageY)}else return $1(t.pageX,t.pageY)},gZ=t=>{if(UR(t)){const s=t.touches[0];return $1(s.clientX,s.clientY)}else return $1(t.clientX,t.clientY)},fT=(t,s)=>{const a=Wb.DOM.getPos(t);return fZ(s,a.x,a.y)},HF=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?mZ(s):fT(t.getContentAreaContainer(),gZ(s)):zF(t),zF=t=>({type:"selection",root:Te.fromDom(t.selection.getNode())}),hZ=t=>({type:"node",node:O.some(Te.fromDom(t.selection.getNode())),root:Te.fromDom(t.getBody())}),VF=(t,s,a)=>{switch(a){case"node":return hZ(t);case"point":return HF(t,s);case"selection":return zF(t)}},pZ=(t,s,a,i,d,h)=>{const v=a(),S=VF(t,s,h);Ah(v,Ed.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:O.none()}).map(x=>{s.preventDefault(),Rs.showMenuAt(d,{anchor:S},{menu:{markers:g1("normal")},data:x})})},vZ={onLtr:()=>[ur,$r,Sr,Ba,Xa,Jo,Bu,J2,X2,Ok,Y2,_k],onRtl:()=>[ur,Sr,$r,Xa,Ba,Jo,Bu,J2,Y2,_k,X2,Ok]},UF=12,WF={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},bZ=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return Zc(t.getWin(),Hp.domRange(d)).exists(v=>v.left<=i.clientX&&v.right>=i.clientX&&v.top<=i.clientY&&v.bottom>=i.clientY)}},yZ=t=>{const s=t.selection.getRng(),a=()=>{rE.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),h()};t.once("touchend",a);const i=v=>{v.preventDefault(),v.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>h();t.once("longpresscancel",d);const h=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},ZF=(t,s,a)=>{const i=VF(t,s,a);return{bubble:fd(0,a==="point"?UF:0,WF),layouts:vZ,overrides:{maxWidthFunction:Gk(),maxHeightFunction:gm()},...i}},CZ=(t,s,a,i,d,h,v)=>{const S=ZF(t,s,h);Ah(a,Ed.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:O.none()}).map(x=>{s.preventDefault();const T=v?jl.HighlightMenuAndItem:jl.HighlightNone;Rs.showMenuWithinBounds(d,{anchor:S},{menu:{markers:g1("normal"),highlightOnOpen:T},data:x,type:"horizontal"},()=>O.some(SF(t,i.shared,h==="node"?"node":"selection"))),t.dispatch(aT)})},wZ=(t,s,a,i,d,h)=>{const v=Oa(),S=v.os.isiOS(),x=v.os.isMacOS(),T=v.os.isAndroid(),D=v.deviceType.isTouch(),$=()=>!(T||S||x&&D),I=()=>{const Z=a();CZ(t,s,Z,i,d,h,$())};if((x||S)&&h!=="node"){const Z=()=>{yZ(t),I()};bZ(t,s)?Z():(t.once("selectionchange",Z),t.once("touchend",()=>t.off("selectionchange",Z)))}else I()},jF=t=>U(t)?t==="|":t.type==="separator",WR={type:"separator"},GF=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(U(t))return t;switch(t.type){case"separator":return WR;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return U(i)?i:Pe(i,GF)}};default:const a=t;return{type:"menuitem",...s(a),onAction:he(a.onAction)}}},mT=(t,s)=>{if(s.length===0)return t;const i=Si(t).filter(d=>!jF(d)).fold(()=>[],d=>[WR]);return t.concat(i).concat(s).concat([WR])},SZ=(t,s,a)=>{const i=po(s,(d,h)=>xt(t,h.toLowerCase()).map(v=>{const S=v.update(a);if(U(S))return mT(d,S.split(" "));if(S.length>0){const x=Pe(S,GF);return mT(d,x)}else return d}).getOrThunk(()=>d.concat([h])),[]);return i.length>0&&jF(i[i.length-1])&&i.pop(),i},xZ=(t,s)=>s.ctrlKey&&!zR(t),ZR=t=>t.type==="longpress"||Hn(t,"touches"),jR=(t,s)=>!ZR(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),GR=(t,s)=>jR(t,s)?t.selection.getStart(!0):s.target,EZ=(t,s)=>{const a=dT(t),i=jR(t,s)?"selection":"point";if(dl(a)){const d=GR(t,s);return O2(Te.fromDom(d),a)?"node":i}else return i},kZ=(t,s,a)=>{const d=Oa().deviceType.isTouch,h=na(Rs.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:gt([Bn("dismissContextMenu",[Xe(vu(),(x,T)=>{to.close(x),t.focus()})])])})),v=()=>Rs.hide(h),S=x=>{if(zR(t)&&x.preventDefault(),xZ(t,x)||LF(t))return;const T=EZ(t,x),D=()=>{const I=GR(t,x),Z=t.ui.registry.getAll(),J=VR(t);return SZ(Z.contextMenus,J,I)};(d()?wZ:pZ)(t,x,D,a,h,T)};t.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(x,v),t.on("longpress contextmenu",S)})},KR=Fl.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),gT=t=>s=>s.translate(-t.left,-t.top),hT=t=>s=>s.translate(t.left,t.top),Nf=t=>(s,a)=>po(t,(i,d)=>d(i),vs(s,a)),pT=(t,s,a)=>t.fold(Nf([hT(a),gT(s)]),Nf([gT(s)]),Nf([])),P1=(t,s,a)=>t.fold(Nf([hT(a)]),Nf([]),Nf([hT(s)])),KF=(t,s,a)=>t.fold(Nf([]),Nf([gT(a)]),Nf([hT(s),gT(a)])),TZ=(t,s,a,i,d,h)=>{const v=P1(t,d,h),S=P1(s,d,h);return Math.abs(v.left-S.left)<=a&&Math.abs(v.top-S.top)<=i},qR=(t,s,a,i,d,h)=>{const v=P1(t,d,h),S=P1(s,d,h),x=Math.abs(v.left-S.left),T=Math.abs(v.top-S.top);return vs(x,T)},YR=(t,s,a)=>{const i=t.fold((d,h)=>({position:O.some("absolute"),left:O.some(d+"px"),top:O.some(h+"px")}),(d,h)=>({position:O.some("absolute"),left:O.some(d-a.left+"px"),top:O.some(h-a.top+"px")}),(d,h)=>({position:O.some("fixed"),left:O.some(d+"px"),top:O.some(h+"px")}));return{right:O.none(),bottom:O.none(),...i}},_Z=(t,s,a)=>t.fold((i,d)=>k0(i+s,d+a),(i,d)=>Nh(i+s,d+a),(i,d)=>N1(i+s,d+a)),XR=(t,s,a,i)=>{const d=(h,v)=>(S,x)=>{const T=h(s,a,i);return v(S.getOr(T.left),x.getOr(T.top))};return t.fold(d(KF,k0),d(P1,Nh),d(pT,N1))},k0=KR.offset,Nh=KR.absolute,N1=KR.fixed,qF=(t,s)=>{const a=Jr(t,s);return fe(a)?NaN:parseInt(a,10)},OZ=(t,s)=>{const a=t.element,i=qF(a,s.leftAttr),d=qF(a,s.topAttr);return isNaN(i)||isNaN(d)?O.none():O.some(vs(i,d))},AZ=(t,s,a)=>{const i=t.element;In(i,s.leftAttr,a.left+"px"),In(i,s.topAttr,a.top+"px")},YF=(t,s)=>{const a=t.element;q(a,s.leftAttr),q(a,s.topAttr)},RZ=(t,s,a,i)=>OZ(t,s).fold(()=>a,d=>N1(d.left+i.left,d.top+i.top)),DZ=(t,s,a,i,d,h)=>{const v=RZ(t,s,a,i),S=s.mustSnap?BZ(t,s,v,d,h):$Z(t,s,v,d,h),x=pT(v,d,h);return AZ(t,s,x),S.fold(()=>({coord:N1(x.left,x.top),extra:O.none()}),T=>({coord:T.output,extra:T.extra}))},MZ=(t,s)=>{YF(t,s)},XF=(t,s,a,i)=>ks(t,d=>{const h=d.sensor;return TZ(s,h,d.range.left,d.range.top,a,i)?O.some({output:XR(d.output,s,a,i),extra:d.extra}):O.none()}),BZ=(t,s,a,i,d)=>{const h=s.getSnapPoints(t);return XF(h,a,i,d).orThunk(()=>po(h,(x,T)=>{const D=T.sensor,$=qR(a,D,T.range.left,T.range.top,i,d);return x.deltas.fold(()=>({deltas:O.some($),snap:O.some(T)}),I=>{const Z=($.left+$.top)/2,J=(I.left+I.top)/2;return Z<=J?{deltas:O.some($),snap:O.some(T)}:x})},{deltas:O.none(),snap:O.none()}).snap.map(x=>({output:XR(x.output,a,i,d),extra:x.extra})))},$Z=(t,s,a,i,d)=>{const h=s.getSnapPoints(t);return XF(h,a,i,d)},PZ=(t,s,a)=>({coord:XR(t.output,t.output,s,a),extra:t.extra});var JF=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=fl(t.element),v=Pl(h),S=jI(d),x=PZ(i,v,S),T=YR(x.coord,v,S);Ms(d,T)}}});const JR="data-initial-z-index",QF=t=>{xi(t.element).filter(Oo).each(s=>{Zs(s,JR).fold(()=>so(s,"z-index"),a=>Rt(s,"z-index",a)),q(s,JR)})},NZ=t=>{xi(t.element).filter(Oo).each(s=>{Yo(s,"z-index").each(a=>{In(s,JR,a)}),Rt(s,"z-index",et(t.element,"z-index"))})},eL=(t,s)=>{t.getSystem().addToGui(s),NZ(s)},IZ=t=>{QF(t),t.getSystem().removeFromGui(t)},Ih=(t,s,a)=>t.getSystem().build(Ad.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var tL=Gs("snaps",[We("getSnapPoints"),Vn("onSensor"),We("leftAttr"),We("topAttr"),Ae("lazyViewport",Ga),Ae("mustSnap",!1)]);const QR=[Ae("useFixed",Je),We("blockerClass"),Ae("getTarget",Ie),Ae("onDrag",P),Ae("repositionTarget",!0),Ae("onDrop",P),Ls("getBounds",Ga),tL],FZ=t=>Uu(Yo(t,"left"),Yo(t,"top"),Yo(t,"position"),(s,a,i)=>(i==="fixed"?N1:k0)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=ml(t);return Nh(s.left,s.top)}),LZ=(t,s,a,i,d)=>{const h=d.bounds,v=P1(s,a,i),S=Ma(v.left,h.x,h.x+h.width-d.width),x=Ma(v.top,h.y,h.y+h.height-d.height),T=Nh(S,x);return s.fold(()=>{const D=KF(T,a,i);return k0(D.left,D.top)},K(T),()=>{const D=pT(T,a,i);return N1(D.left,D.top)})},HZ=(t,s,a,i,d,h,v)=>{const S=s.fold(()=>{const x=_Z(a,h.left,h.top),T=pT(x,i,d);return N1(T.left,T.top)},x=>{const T=DZ(t,x,a,h,i,d);return T.extra.each(D=>{x.onSensor(t,D)}),T.coord});return LZ(t,S,i,d,v)},nL=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=fl(t.element),v=Pl(h),S=jI(d),x=FZ(d),T=HZ(t,s.snaps,x,v,S,i,a),D=YR(T,v,S);Ms(d,D)}s.onDrag(t,d,i)},oL=(t,s)=>({bounds:t.getBounds(),height:Dc(s.element),width:$l(s.element)}),eD=(t,s,a,i,d)=>{const h=a.update(i,d),v=a.getStartData().getOrThunk(()=>oL(s,t));h.each(S=>{nL(t,s,v,S)})},sL=(t,s,a,i)=>{s.each(IZ),a.snaps.each(h=>{MZ(t,h)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},tD=t=>(s,a)=>{const i=d=>{a.setStartData(oL(s,d))};return Wo([Xe(nm(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},zZ=t=>Wo([Xe(li(),t.forceDrop),Xe(Ll(),t.drop),Xe(Sv(),(s,a)=>{t.move(a.event)}),Xe(dp(),t.delayDrop)]);var VZ=Object.freeze({__proto__:null,getData:t=>O.from(vs(t.x,t.y)),getDelta:(t,s)=>vs(s.left-t.left,s.top-t.top)});const rL=(t,s,a)=>[Xe(li(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const v=()=>sL(i,O.some(T),t,s),S=iP(v,200),x={drop:v,delayDrop:S.schedule,forceDrop:v,move:$=>{S.cancel(),eD(i,t,s,VZ,$)}},T=Ih(i,t.blockerClass,zZ(x));(()=>{a(i),eL(i,T)})()})],UZ=[...QR,ls("dragger",{handlers:tD(rL)})],aL=t=>Wo([Xe(hu(),t.forceDrop),Xe(Qf(),t.drop),Xe(rS(),t.drop),Xe(wg(),(s,a)=>{t.move(a.event)})]),lL=t=>{const s=t[0];return O.some(vs(s.clientX,s.clientY))};var iL=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?lL(a):O.none()},getDelta:(t,s)=>vs(s.left-t.left,s.top-t.top)});const cL=(t,s,a)=>{const i=is(),d=h=>{sL(h,i.get(),t,s),i.clear()};return[Xe(hu(),(h,v)=>{v.stop();const S=()=>d(h),x={drop:S,delayDrop:P,forceDrop:S,move:$=>{eD(h,t,s,iL,$)}},T=Ih(h,t.blockerClass,aL(x));i.set(T),(()=>{a(h),eL(h,T)})()}),Xe(wg(),(h,v)=>{v.stop(),eD(h,t,s,iL,v.event)}),Xe(Qf(),(h,v)=>{v.stop(),d(h)}),Xe(rS(),d)]},nD=[...QR,ls("dragger",{handlers:tD(cL)})],WZ=(t,s,a)=>[...rL(t,s,a),...cL(t,s,a)],ZZ=[...QR,ls("dragger",{handlers:tD(WZ)})];var jZ=Object.freeze({__proto__:null,mouse:UZ,touch:nD,mouseOrTouch:ZZ}),GZ=Object.freeze({__proto__:null,init:()=>{let t=O.none(),s=O.none();const a=()=>{t=O.none(),s=O.none()},i=(x,T)=>{const D=t.map($=>x.getDelta($,T));return t=O.some(T),D},d=(x,T)=>x.getData(T).bind(D=>i(x,D)),h=x=>{s=O.some(x)},v=()=>s,S=K({});return Hl({readState:S,reset:a,update:d,getStartData:v,setStartData:h})}});const I1=jy({branchKey:"mode",branches:jZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:O.from(t.extra)})},state:GZ,apis:JF}),oD=40,bT=oD/2,uL=(t,s,a,i,d,h)=>t.fold(()=>I1.snap({sensor:Nh(a-bT,i-bT),range:vs(d,h),output:Nh(O.some(a),O.some(i)),extra:{td:s}}),v=>{const S=a-bT,x=i-bT,T=oD,D=oD,$=v.element.dom.getBoundingClientRect();return I1.snap({sensor:Nh(S,x),range:vs(T,D),output:Nh(O.some(a-$.width/2),O.some(i-$.height/2)),extra:{td:s}})}),dL=(t,s,a)=>{const i=(d,h)=>d.exists(v=>Lo(v,h));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,h)=>{const v=h.td;i(s.get(),v)||(s.set(v),a(v))},mustSnap:!0}},fL=t=>ko(wa.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:gt([I1.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),M2.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),KZ=(t,s)=>{const a=cn([]),i=cn([]),d=cn(!1),h=is(),v=is(),S=wt=>{const Mt=ki(wt);return uL(Z.getOpt(s),wt,Mt.x,Mt.y,Mt.width,Mt.height)},x=()=>Pe(a.get(),wt=>S(wt)),T=wt=>{const Mt=ki(wt);return uL(J.getOpt(s),wt,Mt.right,Mt.bottom,Mt.width,Mt.height)},D=()=>Pe(i.get(),wt=>T(wt)),$=dL(x,h,wt=>{v.get().each(Mt=>{t.dispatch("TableSelectorChange",{start:wt,finish:Mt})})}),I=dL(D,v,wt=>{h.get().each(Mt=>{t.dispatch("TableSelectorChange",{start:Mt,finish:wt})})}),Z=fL($),J=fL(I),ue=na(Z.asSpec()),_e=na(J.asSpec()),Se=(wt,Mt,Gn,Yt)=>{const Tn=Mt.dom.getBoundingClientRect();so(wt.element,"display");const Sn=Zu(Te.fromDom(t.getBody())).dom.innerHeight,ro=Gn(Tn),an=Yt(Tn,Sn);(ro||an)&&Rt(wt.element,"display","none")},be=(wt,Mt,Gn,Yt)=>{const Tn=Gn(Mt);I1.snapTo(wt,Tn),Se(wt,Mt,an=>an[Yt]<0,(an,eo)=>an[Yt]>eo)},qe=wt=>be(ue,wt,S,"top"),Le=()=>h.get().each(qe),ht=wt=>be(_e,wt,T,"bottom"),lt=()=>v.get().each(ht);Oa().deviceType.isTouch()&&(t.on("TableSelectionChange",wt=>{d.get()||(_u(s,ue),_u(s,_e),d.set(!0)),h.set(wt.start),v.set(wt.finish),wt.otherCells.each(Mt=>{a.set(Mt.upOrLeftCells),i.set(Mt.downOrRightCells),qe(wt.start),ht(wt.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Le(),lt()}),t.on("TableSelectionClear",()=>{d.get()&&(uc(ue),uc(_e),d.set(!1)),h.clear(),v.clear()}))};var qZ=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const YZ=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",yT=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"\u203A",h=(T,D,$)=>wa.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":$,"aria-level":$+1}},components:[Hs(T)],action:I=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:gt([Au.button(a.isDisabled),_r()])}),v=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Hs(` ${d} `)]}),S=T=>po(T,(D,$,I)=>{const Z=h($.name,$.element,I);return I===0?D.concat([Z]):D.concat([v(),Z])},[]),x=T=>{const D=[];let $=T.length;for(;$-- >0;){const I=T[$];if(I.nodeType===1&&!YZ(I)){const Z=C1(t,I);if(Z.isDefaultPrevented()||D.push({name:Z.name,element:I}),Z.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:gt([nn.config({mode:"flow",selector:"div[role=button]"}),un.config({disabled:a.isDisabled}),_r(),Ns.config({}),wn.config({}),Bn("elementPathEvents",[as((T,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>nn.focusIn(T)),t.on("NodeChange",$=>{const I=x($.parents),Z=I.length>0?S(I):[];wn.set(T,Z)})})])]),components:[]}};var Fh;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Fh||(Fh={}));const XZ=(t,s,a,i,d)=>{const h={height:rT(i+s.top,f4(t),m4(t))};return a===Fh.Both&&(h.width=rT(d+s.left,iE(t),cE(t))),h},mL=(t,s,a)=>{const i=Te.fromDom(t.getContainer()),d=XZ(t,s,a,js(i),Za(i));Dn(d,(h,v)=>{pe(h)&&Rt(i,v,sT(h))}),Vi(t)},JZ=t=>{const s=gB(t);return s===!1?Fh.None:s==="both"?Fh.Both:Fh.Vertical},CT=(t,s,a,i)=>{const h=vs(a*20,i*20);return mL(t,h,s),O.some(!0)},QZ=(t,s)=>{const a=JZ(t);if(a===Fh.None)return O.none();const i=a===Fh.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return O.some(hc("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize"),"aria-label":s.translate(i)},behaviours:[I1.config({mode:"mouse",repositionTarget:!1,onDrag:(d,h,v)=>mL(t,v,a),blockerClass:"tox-blocker"}),nn.config({mode:"special",onLeft:()=>CT(t,a,-1,0),onRight:()=>CT(t,a,1,0),onUp:()=>CT(t,a,0,-1),onDown:()=>CT(t,a,0,1)}),Ns.config({}),fn.config({})]},s.icons))},gL=(t,s)=>{const a=(i,d,h)=>wn.set(i,[Hs(s.translate(["{0} "+h,d[h]]))]);return wa.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:gt([Au.button(s.isDisabled),_r(),Ns.config({}),wn.config({}),At.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Bn("wordcount-events",[Hc(i=>{const d=At.getValue(i),h=d.mode==="words"?"characters":"words";At.setValue(i,{mode:h,count:d.count}),a(i,d.count,h)}),as(i=>{t.on("wordCountUpdate",d=>{const{mode:h}=At.getValue(i);At.setValue(i,{mode:h,count:d.wordCount}),a(i,d.wordCount,h)})})])]),eventOrder:{[ii()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},ej=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":rl.translate(["Powered by {0}","Tiny"])},innerHtml:qZ.trim()},behaviours:gt([fn.config({})])}]}),i=()=>{const h=[];return w4(t)&&h.push(yT(t,{},s)),t.hasPlugin("wordcount")&&h.push(gL(t,s)),mE(t)&&h.push(a()),h.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:h}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const h=i(),v=QZ(t,s);return h.concat(v.toArray())})()}},hL=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),tj=(t,s)=>{const a=t.inline,i=a?$W:AW,d=l2(t)?S0:ZI,h=PW(),v=is(),S=is(),x=is(),I=Oa().deviceType.isTouch()?["tox-platform-touch"]:[],Z=r2(t),J=Gb(t),ue=ko({dom:{tag:"div",classes:["tox-anchorbar"]}}),_e=ko({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Se=()=>h.mainUi.get().map(ln=>ln.outerContainer).bind(jo.getHeader),be=()=>Mn.fromOption(h.dialogUi.get().map(ln=>ln.sink),"UI has not been rendered"),qe=()=>Mn.fromOption(h.popupUi.get().map(ln=>ln.sink),"(popup) UI has not been rendered"),Le=h.lazyGetInOuterOrDie("anchor bar",ue.getOpt),ht=h.lazyGetInOuterOrDie("bottom anchor bar",_e.getOpt),lt=h.lazyGetInOuterOrDie("toolbar",jo.getToolbar),wt=h.lazyGetInOuterOrDie("throbber",jo.getThrobber),Mt=VI({popup:qe,dialog:be},t,Le,ht),Gn=()=>{const ln={attributes:{[ub]:Z?Pi.BottomToTop:Pi.TopToBottom}},xn=jo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Mt.popup,onEscape:()=>{t.focus()}}),Fo=jo.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Mt.popup.shared.getSink,providers:Mt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Ym=>{DE(t,Ym)},type:J,lazyToolbar:lt,lazyHeader:()=>Se().getOrDie("Could not find header element"),...ln}),wo=jo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Mt.popup.shared.providers,onEscape:()=>{t.focus()},type:J}),ll=s2(t),hs=o2(t),Ci=gE(t),Pu=pB(t),Hh=Yt(),zh=ll||hs||Ci,U1=()=>ll?[wo]:hs?[Fo]:[],Vh=Pu?[Hh,xn]:[xn];return jo.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(zh?[]:["tox-editor-header--empty"]),...ln},components:pn([Ci?Vh:[],U1(),qb(t)?[]:[ue.asSpec()]]),sticky:l2(t),editor:t,sharedBackstage:Mt.popup.shared})},Yt=()=>jo.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Tn=()=>{const ln=jo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),xn=jo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[ln,xn]}},Sn=()=>{const ln=E4(t),xn=Lo(Vr(),ln)&&et(ln,"display")==="grid",Fo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:{...rl.isRtl()?{dir:"rtl"}:{}}},behaviours:gt([Er.config({useFixed:()=>d.isDocked(Se)})])},wo={dom:{styles:{width:document.body.clientWidth+"px"}},events:Wo([Xe(nd(),Ci=>{Rt(Ci.element,"width",document.body.clientWidth+"px")})])},ll=na(Xo(Fo,xn?wo:{})),hs=TA(ll);return S.set(hs),{sink:ll,mothership:hs}},ro=()=>{const ln={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:{...rl.isRtl()?{dir:"rtl"}:{}}},behaviours:gt([Er.config({useFixed:()=>d.isDocked(Se),getBounds:()=>s.getPopupSinkBounds()})])},xn=na(ln),Fo=TA(xn);return x.set(Fo),{sink:xn,mothership:Fo}},an=()=>{const ln=Gn(),xn=Tn(),Fo=jo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Mt.popup}),wo=jo.parts.viewWrapper({backstage:Mt.popup}),ll=mB(t)&&!a?O.some(ej(t,Mt.popup.shared.providers)):O.none(),hs=pn([Z?[]:[ln],a?[]:[xn],Z?[ln]:[]]),Ci=jo.parts.editorContainer({components:pn([hs,a?[]:[_e.asSpec(),...ll.toArray()]])}),Pu=a2(t),Hh={role:"application",...rl.isRtl()?{dir:"rtl"}:{},...Pu?{"aria-hidden":"true"}:{}},zh=na(jo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(Z?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:{visibility:"hidden",...Pu?{opacity:"0",border:"0"}:{}},attributes:Hh},components:[Ci,...a?[]:[wo],Fo],behaviours:gt([_r(),un.config({disableClass:"tox-tinymce--disabled"}),nn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),U1=TA(zh);return v.set(U1),{mothership:U1,outerContainer:zh}},eo=ln=>{const xn=sT(hF(t)),Fo=sT(RW(t));return t.inline||(Q1("div","width",Fo)&&Rt(ln.element,"width",Fo),Q1("div","height",xn)?Rt(ln.element,"height",xn):Rt(ln.element,"height","400px")),xn},kt=ln=>{t.addShortcut("alt+F9","focus menubar",()=>{jo.focusMenubar(ln)}),t.addShortcut("alt+F10","focus toolbar",()=>{jo.focusToolbar(ln)}),t.addCommand("ToggleToolbarDrawer",(xn,Fo)=>{Fo!=null&&Fo.skipFocus?jo.toggleToolbarDrawerWithoutFocusing(ln):jo.toggleToolbarDrawer(ln)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>jo.isToolbarDrawerToggled(ln))},jt=ln=>{const{mainUi:xn,popupUi:Fo,uiMotherships:wo}=ln;Re(p4(t),(SD,N0)=>{t.ui.registry.addGroupToolbarButton(N0,SD)});const{buttons:ll,menuItems:hs,contextToolbars:Ci,sidebars:Pu,views:Hh}=t.ui.registry.getAll(),zh=x4(t),U1={menuItems:hs,menus:yB(t),menubar:lB(t),toolbar:zh.getOrThunk(()=>Kb(t)),allowToolbarGroups:J===Xc.floating,buttons:ll,sidebar:Pu,views:Hh};kt(xn.outerContainer),b9(t,xn.mothership,wo),d.setup(t,Mt.popup.shared,Se),cZ(t,Mt.popup),kZ(t,Mt.popup.shared.getSink,Mt.popup),eR(t),aU(t,wt,Mt.popup.shared),XW(t,Ci,Fo.sink,{backstage:Mt.popup}),KZ(t,Fo.sink);const Vh=t.getElement(),Ym=eo(xn.outerContainer),wD={targetNode:Vh,height:Ym};return i.render(t,ln,U1,Mt.popup,wD)},yn=ln=>(x.set(ln.mothership),ln),qn=()=>{const ln=an(),xn=Sn(),Fo=Im(t)?ro():yn(xn);h.dialogUi.set(xn),h.popupUi.set(Fo),h.mainUi.set(ln);const wo={popupUi:Fo,dialogUi:xn,mainUi:ln,uiMotherships:h.getUiMotherships()};return jt(wo)};return{popups:{backstage:Mt.popup,getMothership:()=>hL("popups",x)},dialogs:{backstage:Mt.dialog,getMothership:()=>hL("dialogs",S)},renderUI:qn}},nj=(t,s)=>{const a=Zs(t,"id").fold(()=>{const i=$t("dialog-label");return In(s,"id",i),i},Ie);In(t,"aria-labelledby",a)},oj=K([We("lazySink"),xo("dragBlockClass"),Ls("getBounds",Ga),Ae("useTabstopAt",ot),Ae("firstTabstop",0),Ae("eventOrder",{}),dr("modalBehaviours",[nn]),Vl("onExecute"),Vg("onEscape")]),yw={sketch:Ie},pL=K([Fi({name:"draghandle",overrides:(t,s)=>({behaviours:gt([I1.config({mode:"mouse",getTarget:a=>ud(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Nr({schema:[We("dom")],name:"title"}),Nr({factory:yw,schema:[We("dom")],name:"close"}),Nr({factory:yw,schema:[We("dom")],name:"body"}),Fi({factory:yw,schema:[We("dom")],name:"footer"}),dc({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Ae("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ae("components",[])],name:"blocker"})]),sj=(t,s,a,i)=>{const d=is(),h=Z=>{d.set(Z);const J=t.lazySink(Z).getOrDie(),ue=i.blocker(),_e=J.getSystem().build({...ue,components:ue.components.concat([$i(Z)]),behaviours:gt([fn.config({}),Bn("dialog-blocker-events",[Rg(Ic(),()=>{Id.isBlocked(Z)?P():nn.focusIn(Z)})])])});_u(J,_e),nn.focusIn(Z)},v=Z=>{d.clear(),xi(Z.element).each(J=>{Z.getSystem().getByDom(J).each(ue=>{uc(ue)})})},S=Z=>Ef(Z,t,"body"),x=Z=>No(Z,t,"footer"),T=(Z,J)=>{Id.block(Z,J)},D=Z=>{Id.unblock(Z)},$=$t("modal-events"),I={...t.eventOrder,[Sl()]:[$].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:h,hide:v,getBody:S,getFooter:x,setIdle:D,setBusy:T},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:zs(t.modalBehaviours,[wn.config({}),nn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Id.config({getRoot:d.get}),Bn($,[as(Z=>{nj(Z.element,Ef(Z,t,"title").element)})])])}},Ir=fr({name:"ModalDialog",configFields:oj(),partFields:pL(),factory:sj,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),rj=rn([Ks,m2].concat(b1)),aj=hg,sD=[F4("button"),pc,Il("align","end",["start","end"]),EE,Jc,pv("buttonType",["primary","secondary"])],vL=[...sD,Of],rD=[sc("type",["submit","cancel","custom"]),...vL],lj=[sc("type",["menu"]),Lm,e0,pc,ri("items",rj),...sD],ij=[...sD,sc("type",["togglebutton"]),yr("tooltip"),pc,Lm,ta("active",!1)],cj=er("type",{submit:rD,cancel:rD,custom:rD,menu:lj,togglebutton:ij}),uj=[Ks,Of,sc("level",["info","warn","error","success"]),SE,Ae("url","")],dj=rn(uj),fj=t=>[Ks,t],mj=[Ks,Of,Jc,F4("button"),pc,NB,pv("buttonType",["primary","secondary","toolbar"]),EE],gj=rn(mj),T0=[Ks,m2],Fd=T0.concat([B4]),hj=T0.concat([Xb,Jc]),pj=rn(hj),vj=hg,bj=Fd.concat([IB("auto")]),bL=rn(bj),yL=uy([g2,Of,SE]),F1=Fd.concat([ai("storageKey","default")]),yj=rn(F1),aD=Os,Cj=rn(Fd),wj=Os,Sj=T0.concat([ai("tag","textarea"),yr("scriptId"),yr("scriptUrl"),bv("settings",void 0)]),xj=T0.concat([ai("tag","textarea"),Ri("init")]),Ej=ef(t=>Do("customeditor.old",ea(xj),t).orThunk(()=>Do("customeditor.new",ea(Sj),t))),L1=Os,Tj=rn(Fd),_j=pg(),Oj=t=>[Ks,tS("columns"),t],Aj=[Ks,yr("html"),Il("presets","presentation",["presentation","document"])],Rj=rn(Aj),Dj=Fd.concat([ta("border",!1),ta("sandboxed",!0),ta("streamContent",!1),ta("transparent",!0)]),Mj=rn(Dj),Bj=Os,iD=rn(T0.concat([ga("height")])),Cw=rn([yr("url"),cp("zoom"),cp("cachedWidth"),cp("cachedHeight")]),cD=Fd.concat([ga("inputMode"),ga("placeholder"),ta("maximized",!1),Jc]),wT=rn(cD),H1=Os,ST=t=>[Ks,Xb,t,Il("align","start",["start","center","end"])],$j=[Of,g2],CL=[Of,ri("items",Jf("items",()=>uD))],uD=Xf([rn($j),rn(CL)]),wL=Fd.concat([ri("items",uD),Jc]),Pj=rn(wL),Nj=Os,Ij=Fd.concat([nS("items",[Of,g2]),vv("size",1),Jc]),SL=rn(Ij),xL=Os,dD=Fd.concat([ta("constrain",!0),Jc]),Fj=rn(dD),EL=rn([yr("width"),yr("height")]),Lj=T0.concat([Xb,vv("min",0),vv("max",0)]),kL=rn(Lj),Hj=gv,zj=[Ks,ri("header",Os),ri("cells",Bt(Os))],Vj=rn(zj),fD=Fd.concat([ga("placeholder"),ta("maximized",!1),Jc]),mD=rn(fD),Uj=Os,gD=[sc("type",["directory","leaf"]),kd,yr("id"),fu("menu",i5)],TL=rn(gD),_L=gD.concat([ri("children",Jf("children",()=>si("type",{directory:OL,leaf:TL})))]),OL=rn(_L),Wj=si("type",{directory:OL,leaf:TL}),z1=[Ks,ri("items",Wj),nf("onLeafAction"),nf("onToggleExpand"),bg("defaultExpandedIds",[],Os),ga("defaultSelectedId")],AL=rn(z1),Zj=Fd.concat([Il("filetype","file",["image","media","file"]),Jc]),xT=rn(Zj),_0=rn([g2,N4]),O0=t=>Wr("items","items",Ro(),Bt(ef(s=>Do(`Checking item of ${t}`,ET,s).fold(a=>Mn.error(vg(a)),a=>Mn.value(a))))),ET=mv(()=>si("type",{alertbanner:dj,bar:rn(fj(O0("bar"))),button:gj,checkbox:pj,colorinput:yj,colorpicker:Cj,dropzone:Tj,grid:rn(Oj(O0("grid"))),iframe:Mj,input:wT,listbox:Pj,selectbox:SL,sizeinput:Fj,slider:kL,textarea:mD,urlinput:xT,customeditor:Ej,htmlpanel:Rj,imagepreview:iD,collection:bL,label:rn(ST(O0("label"))),table:Vj,tree:AL,panel:ql})),kT=[Ks,Ae("classes",[]),ri("items",ET)],ql=rn(kT),TT=[F4("tab"),kd,ri("items",ET)],RL=[Ks,nS("tabs",TT)],DL=rn(RL),jj=vL,Gj=cj,Lh=rn([yr("title"),wl("body",si("type",{panel:ql,tabpanel:DL})),ai("size","normal"),bg("buttons",[],Gj),Ae("initialData",{}),Ls("onAction",P),Ls("onChange",P),Ls("onSubmit",P),Ls("onClose",P),Ls("onCancel",P),Ls("onTabChange",P)]),YK=t=>Do("dialog",Lh,t),Kj=rn([sc("type",["cancel","custom"]),...jj]),ML=rn([yr("title"),yr("url"),cp("height"),cp("width"),Ju("buttons",Kj),Ls("onAction",P),Ls("onCancel",P),Ls("onClose",P),Ls("onMessage",P)]),A0=t=>Do("dialog",ML,t),R0=t=>j(t)?[t].concat(Ge(Lr(t),R0)):le(t)?Ge(t,R0):[],BL=t=>U(t.type)&&U(t.name),qj={checkbox:vj,colorinput:aD,colorpicker:wj,dropzone:_j,input:H1,iframe:Bj,imagepreview:Cw,selectbox:xL,sizeinput:EL,slider:Hj,listbox:Nj,size:EL,textarea:Uj,urlinput:_0,customeditor:L1,collection:yL,togglemenuitem:aj},Yj=t=>O.from(qj[t.type]),Xj=t=>Wn(R0(t),BL),Jj=t=>{const s=Xj(t),a=Ge(s,i=>Yj(i).fold(()=>[],d=>[wl(i.name,d)]));return rn(a)},V1=t=>{var s;const a=Eo(YK(t)),i=Jj(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},D0={open:(t,s)=>{const a=V1(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Eo(A0(s));return t(a)},redial:t=>V1(t)};var Qj=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(h=>{const v=h(i,d);s.set(v)}),t.renderComponents.each(h=>{const v=h(d,s.get());(t.reuseDom?TM:kM)(i,v)})};return Wo([Xe(Lc(),(i,d)=>{const h=d;if(!h.universal){const v=t.channel;_n(h.channels,v)&&a(i,h.data)}}),as((i,d)=>{t.initialData.each(h=>{a(i,h)})})])}}),eG=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),tG=[We("channel"),xo("renderComponents"),xo("updateState"),xo("initialData"),ta("reuseDom",!0)],nG=Object.freeze({__proto__:null,init:()=>{const t=cn(O.none()),s=()=>t.set(O.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const xc=jr({fields:tG,name:"reflecting",active:Qj,apis:eG,state:nG}),hD=t=>{const s=[],a={};return Dn(t,(i,d)=>{i.fold(()=>{s.push(d)},h=>{a[d]=h})}),s.length>0?Mn.error(s):Mn.value(a)},oG=(t,s,a)=>{const i=ko(g0.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Pe(t.items,h=>E3(d,h,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:gt([nn.config({mode:"acyclic",useTabstopAt:Oe(p0)}),Mu.memento(i),h0(i,{postprocess:d=>hD(d).fold(h=>(console.error(h),{}),Ie)}),Bn("dialog-body-panel",[Xe(Ic(),(d,h)=>{d.getSystem().broadcastOn([ck],{newFocus:O.some(h.event.target)})})])])}},JK=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:QC(t.action),behaviours:zs(t.tabButtonBehaviours,[fn.config({}),nn.config({mode:"execution",useSpace:!0,useEnter:!0}),At.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),e=nr({name:"TabButton",configFields:[Ae("uid",void 0),We("value"),Wr("dom","dom",ty(()=>({attributes:{role:"tab",id:$t("aria"),"aria-selected":"false"}})),Oi()),xo("action"),Ae("domModification",{}),dr("tabButtonBehaviours",[fn,nn,At]),We("view")],factory:JK}),n=K([We("tabs"),We("dom"),Ae("clickToDismiss",!1),dr("tabbarBehaviours",[go,nn]),dm(["tabClass","selectedClass"])]),o=Mb({factory:e,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{go.dehighlight(i,d),tn(i,cf(),{tabbar:i,button:d})},a=(i,d)=>{go.highlight(i,d),tn(i,Tg(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),h=go.isHighlighted(d,i);(()=>h&&t.clickToDismiss?s:h?P:a)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),r=K([o]),l=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:zs(t.tabbarBehaviours,[go.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,h)=>{In(h.element,"aria-selected","true")},onDehighlight:(d,h)=>{In(h.element,"aria-selected","false")}}),nn.config({mode:"flow",getInitial:d=>go.getHighlighted(d).map(h=>h.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),u=fr({name:"Tabbar",configFields:n(),partFields:r(),factory:l}),m=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:zs(t.tabviewBehaviours,[wn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),b=nr({name:"Tabview",configFields:[dr("tabviewBehaviours",[wn])],factory:m}),w=K([Ae("selectFirst",!0),Vn("onChangeTab"),Vn("onDismissTab"),Ae("tabs",[]),dr("tabSectionBehaviours",[])]),k=Nr({factory:u,schema:[We("dom"),tf("markers",[We("tabClass"),We("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),B=Nr({factory:b,name:"tabview"}),M=K([k,B]),H=(t,s,a,i)=>{const d=v=>{const S=At.getValue(v);No(v,t,"tabview").each(x=>{dn(t.tabs,D=>D.value===S).each(D=>{const $=D.view();Zs(v.element,"id").each(I=>{In(x.element,"aria-labelledby",I)}),wn.set(x,$),t.onChangeTab(x,v,$)})})},h=(v,S)=>{No(v,t,"tabbar").each(x=>{S(x).each(om)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:oh(t.tabSectionBehaviours),events:Wo(pn([t.selectFirst?[as((v,S)=>{h(v,go.getFirst)})]:[],[Xe(Tg(),(v,S)=>{const x=S.event.button;d(x)}),Xe(cf(),(v,S)=>{const x=S.event.button;t.onDismissTab(v,x)})]])),apis:{getViewItems:v=>No(v,t,"tabview").map(S=>wn.contents(S)).getOr([]),showTab:(v,S)=>{h(v,T=>{const D=go.getCandidates(T);return dn(D,I=>At.getValue(I)===S).filter(I=>!go.isHighlighted(T,I))})}}}},Q=fr({name:"TabSection",configFields:w(),partFields:M(),factory:H,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),se=(t,s,a)=>Pe(t,(i,d)=>{wn.set(a,t[d].view());const h=s.dom.getBoundingClientRect();return wn.set(a,[]),h.height}),X=t=>Js(Xi(t,(s,a)=>s>a?-1:s<a?1:0)),oe=(t,s,a)=>{const i=Vf(t).dom,d=ud(t,".tox-dialog-wrap").getOr(t),h=et(d,"position")==="fixed";let v;h?v=Math.max(i.clientHeight,window.innerHeight):v=Math.max(i.offsetHeight,i.scrollHeight);const S=js(s),T=s.dom.offsetLeft>=a.dom.offsetLeft+Za(a)?Math.max(js(a),S):S,D=parseInt(et(t,"margin-top"),10)||0,$=parseInt(et(t,"margin-bottom"),10)||0,Z=js(t)+D+$-T;return v-Z},ye=(t,s)=>{Js(t).each(a=>Q.showTab(s,a.value))},xe=(t,s)=>{Rt(t,"height",s+"px"),Rt(t,"flex-basis",s+"px")},Ee=(t,s,a)=>{ud(t,'[role="dialog"]').each(i=>{As(i,'[role="tablist"]').each(d=>{a.get().map(h=>(Rt(s,"height","0"),Rt(s,"flex-basis","0"),Math.min(h,oe(i,s,d)))).each(h=>{xe(s,h)})})})},De=t=>As(t,'[role="tabpanel"]'),tt=t=>{const s=is();return{extraEvents:[as(d=>{const h=d.element;De(h).each(v=>{Rt(v,"visibility","hidden"),d.getSystem().getByDom(v).toOptional().each(S=>{const x=se(t,v,S);X(x).fold(s.clear,s.set)}),Ee(h,v,s),so(v,"visibility"),ye(t,d),requestAnimationFrame(()=>{Ee(h,v,s)})})}),Xe(nd(),d=>{const h=d.element;De(h).each(v=>{Ee(h,v,s)})}),Xe(yP,(d,h)=>{const v=d.element;De(v).each(S=>{const x=xu(Xr(S));Rt(S,"visibility","hidden");const T=Yo(S,"height").map(I=>parseInt(I,10));so(S,"height"),so(S,"flex-basis");const D=S.dom.getBoundingClientRect().height;T.forall(I=>D>I)?(s.set(D),Ee(v,S,s)):T.each(I=>{xe(S,I)}),so(S,"visibility"),x.each(Ps)})})],selectFirst:!1}},Gt="send-data-to-section",at="send-data-to-view",ze=(t,s,a)=>{const i=cn({}),d=T=>{const D=At.getValue(T),$=hD(D).getOr({}),I=i.get(),Z=Xo(I,$);i.set(Z)},h=T=>{const D=i.get();At.setValue(T,D)},v=cn(null),S=Pe(t.tabs,T=>({value:T.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Hs(a.shared.providers.translate(T.title))],view:()=>[g0.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Pe(T.items,$=>E3(D,$,s,a)),formBehaviours:gt([nn.config({mode:"acyclic",useTabstopAt:Oe(p0)}),Bn("TabView.form.events",[as(h),Aa(d)]),Ja.config({channels:Di([{key:Gt,value:{onReceive:d}},{key:at,value:{onReceive:h}}])})])}))]})),x=tt(S);return Q.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(T,D,$)=>{const I=At.getValue(D);tn(T,bP,{name:I,oldName:v.get()}),v.set(I)},tabs:S,components:[Q.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[u.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:gt([Ns.config({})])}),Q.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:gt([Bn("tabpanel",x.extraEvents),nn.config({mode:"acyclic"}),Qn.config({find:T=>Js(Q.getViewItems(T))}),Oh(O.none(),T=>(T.getSystem().broadcastOn([Gt],{}),i.get()),(T,D)=>{i.set(D),T.getSystem().broadcastOn([at],{})})])})},Ze=(t,s,a,i,d)=>{const h=x=>{const T=x.body;switch(T.type){case"tabpanel":return[ze(T,x.initialData,i)];default:return[oG(T,x.initialData,i)]}},v=(x,T)=>O.some({isTabPanel:()=>T.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(x=>({id:x})).getOr({}),...d?S:{}}},components:[],behaviours:gt([Mu.childAt(0),xc.config({channel:`${hN}-${s}`,updateState:v,renderComponents:h,initialData:t})])}},Et=(t,s,a,i,d)=>Ze(t,s,O.some(a),i,d),_t=(t,s,a)=>{const i=Ze(t,s,O.none(),a,!1);return Ir.parts.body(i)},Ht=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[n3(O.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:gt([Ns.config({}),fn.config({})])})]}],behaviours:gt([nn.config({mode:"acyclic",useTabstopAt:Oe(p0)})])};return Ir.parts.body(s)};function mn(t){return mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},mn(t)}function gn(t,s){return gn=Object.setPrototypeOf||function(i,d){return i.__proto__=d,i},gn(t,s)}function uo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yo(t,s,a){return uo()?yo=Reflect.construct:yo=function(d,h,v){var S=[null];S.push.apply(S,h);var x=Function.bind.apply(d,S),T=new x;return v&&gn(T,v.prototype),T},yo.apply(null,arguments)}function Io(t){return Ia(t)||Fr(t)||vt(t)||ho()}function Ia(t){if(Array.isArray(t))return Wt(t)}function Fr(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vt(t,s){if(!!t){if(typeof t=="string")return Wt(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wt(t,s)}}function Wt(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=t[a];return i}function ho(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ao=Object.hasOwnProperty,Kt=Object.setPrototypeOf,Jt=Object.isFrozen,mt=Object.getPrototypeOf,bn=Object.getOwnPropertyDescriptor,On=Object.freeze,fo=Object.seal,ds=Object.create,En=typeof Reflect<"u"&&Reflect,lo=En.apply,Us=En.construct;lo||(lo=function(s,a,i){return s.apply(a,i)}),On||(On=function(s){return s}),fo||(fo=function(s){return s}),Us||(Us=function(s,a){return yo(s,Io(a))});var Go=Yl(Array.prototype.forEach),Is=Yl(Array.prototype.pop),ws=Yl(Array.prototype.push),ts=Yl(String.prototype.toLowerCase),mr=Yl(String.prototype.match),Fa=Yl(String.prototype.replace),La=Yl(String.prototype.indexOf),Ld=Yl(String.prototype.trim),Ys=Yl(RegExp.prototype.test),Km=Hd(TypeError);function Yl(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return lo(t,s,i)}}function Hd(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return Us(t,a)}}function mo(t,s){Kt&&Kt(t,null);for(var a=s.length;a--;){var i=s[a];if(typeof i=="string"){var d=ts(i);d!==i&&(Jt(s)||(s[a]=d),i=d)}t[i]=!0}return t}function Ds(t){var s=ds(null),a;for(a in t)lo(ao,t,[a])&&(s[a]=t[a]);return s}function bi(t,s){for(;t!==null;){var a=bn(t,s);if(a){if(a.get)return Yl(a.get);if(typeof a.value=="function")return Yl(a.value)}t=mt(t)}function i(d){return console.warn("fallback value for",d),null}return i}var $u=On(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ji=On(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Gi=On(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),If=On(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xa=On(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),qm=On(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zd=On(["#text"]),tu=On(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ff=On(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ww=On(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M0=On(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),OT=fo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pD=fo(/<%[\w\W]*|[\w\W]*%>/gm),vD=fo(/^data-[\-\w.\u00B7-\uFFFF]/),$L=fo(/^aria-[\-\w]+$/),Vd=fo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),B0=fo(/^(?:\w+script|data):/i),Be=fo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$e=fo(/^html$/i),Ct=function(){return typeof window>"u"?null:window},dt=function(s,a){if(mn(s)!=="object"||typeof s.createPolicy!="function")return null;var i=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(i=a.currentScript.getAttribute(d));var h="dompurify"+(i?"#"+i:"");try{return s.createPolicy(h,{createHTML:function(S){return S}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}};function on(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ct(),s=function(Ue){return on(Ue)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,i=t.document,d=t.DocumentFragment,h=t.HTMLTemplateElement,v=t.Node,S=t.Element,x=t.NodeFilter,T=t.NamedNodeMap,D=T===void 0?t.NamedNodeMap||t.MozNamedAttrMap:T,$=t.HTMLFormElement,I=t.DOMParser,Z=t.trustedTypes,J=S.prototype,ue=bi(J,"cloneNode"),_e=bi(J,"nextSibling"),Se=bi(J,"childNodes"),be=bi(J,"parentNode");if(typeof h=="function"){var qe=i.createElement("template");qe.content&&qe.content.ownerDocument&&(i=qe.content.ownerDocument)}var Le=dt(Z,a),ht=Le?Le.createHTML(""):"",lt=i,wt=lt.implementation,Mt=lt.createNodeIterator,Gn=lt.createDocumentFragment,Yt=lt.getElementsByTagName,Tn=a.importNode,Sn={};try{Sn=Ds(i).documentMode?i.documentMode:{}}catch{}var ro={};s.isSupported=typeof be=="function"&&wt&&typeof wt.createHTMLDocument<"u"&&Sn!==9;var an=OT,eo=pD,kt=vD,jt=$L,yn=B0,qn=Be,ln=Vd,xn=null,Fo=mo({},[].concat(Io($u),Io(ji),Io(Gi),Io(xa),Io(zd))),wo=null,ll=mo({},[].concat(Io(tu),Io(Ff),Io(ww),Io(M0))),hs=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ci=null,Pu=null,Hh=!0,zh=!0,U1=!1,Vh=!1,Ym=!1,wD=!1,SD=!1,N0=!1,IL=!1,FL=!1,iq=!0,aG=!0,xD=!1,AT={},RT=null,cq=mo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),uq=null,dq=mo({},["audio","video","img","source","image","track"]),lG=null,fq=mo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),iG="http://www.w3.org/1998/Math/MathML",cG="http://www.w3.org/2000/svg",I0="http://www.w3.org/1999/xhtml",LL=I0,uG=!1,DT,JX=["application/xhtml+xml","text/html"],QX="text/html",xw,MT=null,eJ=i.createElement("form"),mq=function(Ue){return Ue instanceof RegExp||Ue instanceof Function},dG=function(Ue){MT&&MT===Ue||((!Ue||mn(Ue)!=="object")&&(Ue={}),Ue=Ds(Ue),xn="ALLOWED_TAGS"in Ue?mo({},Ue.ALLOWED_TAGS):Fo,wo="ALLOWED_ATTR"in Ue?mo({},Ue.ALLOWED_ATTR):ll,lG="ADD_URI_SAFE_ATTR"in Ue?mo(Ds(fq),Ue.ADD_URI_SAFE_ATTR):fq,uq="ADD_DATA_URI_TAGS"in Ue?mo(Ds(dq),Ue.ADD_DATA_URI_TAGS):dq,RT="FORBID_CONTENTS"in Ue?mo({},Ue.FORBID_CONTENTS):cq,Ci="FORBID_TAGS"in Ue?mo({},Ue.FORBID_TAGS):{},Pu="FORBID_ATTR"in Ue?mo({},Ue.FORBID_ATTR):{},AT="USE_PROFILES"in Ue?Ue.USE_PROFILES:!1,Hh=Ue.ALLOW_ARIA_ATTR!==!1,zh=Ue.ALLOW_DATA_ATTR!==!1,U1=Ue.ALLOW_UNKNOWN_PROTOCOLS||!1,Vh=Ue.SAFE_FOR_TEMPLATES||!1,Ym=Ue.WHOLE_DOCUMENT||!1,N0=Ue.RETURN_DOM||!1,IL=Ue.RETURN_DOM_FRAGMENT||!1,FL=Ue.RETURN_TRUSTED_TYPE||!1,SD=Ue.FORCE_BODY||!1,iq=Ue.SANITIZE_DOM!==!1,aG=Ue.KEEP_CONTENT!==!1,xD=Ue.IN_PLACE||!1,ln=Ue.ALLOWED_URI_REGEXP||ln,LL=Ue.NAMESPACE||I0,Ue.CUSTOM_ELEMENT_HANDLING&&mq(Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(hs.tagNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&mq(Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(hs.attributeNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&typeof Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(hs.allowCustomizedBuiltInElements=Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),DT=JX.indexOf(Ue.PARSER_MEDIA_TYPE)===-1?DT=QX:DT=Ue.PARSER_MEDIA_TYPE,xw=DT==="application/xhtml+xml"?function(Xt){return Xt}:ts,Vh&&(zh=!1),IL&&(N0=!0),AT&&(xn=mo({},Io(zd)),wo=[],AT.html===!0&&(mo(xn,$u),mo(wo,tu)),AT.svg===!0&&(mo(xn,ji),mo(wo,Ff),mo(wo,M0)),AT.svgFilters===!0&&(mo(xn,Gi),mo(wo,Ff),mo(wo,M0)),AT.mathMl===!0&&(mo(xn,xa),mo(wo,ww),mo(wo,M0))),Ue.ADD_TAGS&&(xn===Fo&&(xn=Ds(xn)),mo(xn,Ue.ADD_TAGS)),Ue.ADD_ATTR&&(wo===ll&&(wo=Ds(wo)),mo(wo,Ue.ADD_ATTR)),Ue.ADD_URI_SAFE_ATTR&&mo(lG,Ue.ADD_URI_SAFE_ATTR),Ue.FORBID_CONTENTS&&(RT===cq&&(RT=Ds(RT)),mo(RT,Ue.FORBID_CONTENTS)),aG&&(xn["#text"]=!0),Ym&&mo(xn,["html","head","body"]),xn.table&&(mo(xn,["tbody"]),delete Ci.tbody),On&&On(Ue),MT=Ue)},gq=mo({},["mi","mo","mn","ms","mtext"]),hq=mo({},["foreignobject","desc","title","annotation-xml"]),tJ=mo({},["title","style","font","a","script"]),HL=mo({},ji);mo(HL,Gi),mo(HL,If);var fG=mo({},xa);mo(fG,qm);var nJ=function(Ue){var Xt=be(Ue);(!Xt||!Xt.tagName)&&(Xt={namespaceURI:I0,tagName:"template"});var $n=ts(Ue.tagName),gr=ts(Xt.tagName);return Ue.namespaceURI===cG?Xt.namespaceURI===I0?$n==="svg":Xt.namespaceURI===iG?$n==="svg"&&(gr==="annotation-xml"||gq[gr]):Boolean(HL[$n]):Ue.namespaceURI===iG?Xt.namespaceURI===I0?$n==="math":Xt.namespaceURI===cG?$n==="math"&&hq[gr]:Boolean(fG[$n]):Ue.namespaceURI===I0?Xt.namespaceURI===cG&&!hq[gr]||Xt.namespaceURI===iG&&!gq[gr]?!1:!fG[$n]&&(tJ[$n]||!HL[$n]):!1},W1=function(Ue){ws(s.removed,{element:Ue});try{Ue.parentNode.removeChild(Ue)}catch{try{Ue.outerHTML=ht}catch{Ue.remove()}}},zL=function(Ue,Xt){try{ws(s.removed,{attribute:Xt.getAttributeNode(Ue),from:Xt})}catch{ws(s.removed,{attribute:null,from:Xt})}if(Xt.removeAttribute(Ue),Ue==="is"&&!wo[Ue])if(N0||IL)try{W1(Xt)}catch{}else try{Xt.setAttribute(Ue,"")}catch{}},pq=function(Ue){var Xt,$n;if(SD)Ue="<remove></remove>"+Ue;else{var gr=mr(Ue,/^[\r\n\t ]+/);$n=gr&&gr[0]}DT==="application/xhtml+xml"&&(Ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ue+"</body></html>");var Nu=Le?Le.createHTML(Ue):Ue;if(LL===I0)try{Xt=new I().parseFromString(Nu,DT)}catch{}if(!Xt||!Xt.documentElement){Xt=wt.createDocument(LL,"template",null);try{Xt.documentElement.innerHTML=uG?"":Nu}catch{}}var kc=Xt.body||Xt.documentElement;return Ue&&$n&&kc.insertBefore(i.createTextNode($n),kc.childNodes[0]||null),LL===I0?Yt.call(Xt,Ym?"html":"body")[0]:Ym?Xt.documentElement:kc},vq=function(Ue){return Mt.call(Ue.ownerDocument||Ue,Ue,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},oJ=function(Ue){return Ue instanceof $&&(typeof Ue.nodeName!="string"||typeof Ue.textContent!="string"||typeof Ue.removeChild!="function"||!(Ue.attributes instanceof D)||typeof Ue.removeAttribute!="function"||typeof Ue.setAttribute!="function"||typeof Ue.namespaceURI!="string"||typeof Ue.insertBefore!="function")},ED=function(Ue){return mn(v)==="object"?Ue instanceof v:Ue&&mn(Ue)==="object"&&typeof Ue.nodeType=="number"&&typeof Ue.nodeName=="string"},Z1=function(Ue,Xt,$n){!ro[Ue]||Go(ro[Ue],function(gr){gr.call(s,Xt,$n,MT)})},bq=function(Ue){var Xt;if(Z1("beforeSanitizeElements",Ue,null),oJ(Ue)||Ys(/[\u0080-\uFFFF]/,Ue.nodeName))return W1(Ue),!0;var $n=xw(Ue.nodeName);if(Z1("uponSanitizeElement",Ue,{tagName:$n,allowedTags:xn}),Ue.hasChildNodes()&&!ED(Ue.firstElementChild)&&(!ED(Ue.content)||!ED(Ue.content.firstElementChild))&&Ys(/<[/\w]/g,Ue.innerHTML)&&Ys(/<[/\w]/g,Ue.textContent)||$n==="select"&&Ys(/<template/i,Ue.innerHTML))return W1(Ue),!0;if(!xn[$n]||Ci[$n]){if(!Ci[$n]&&Cq($n)&&(hs.tagNameCheck instanceof RegExp&&Ys(hs.tagNameCheck,$n)||hs.tagNameCheck instanceof Function&&hs.tagNameCheck($n)))return!1;if(aG&&!RT[$n]){var gr=be(Ue)||Ue.parentNode,Nu=Se(Ue)||Ue.childNodes;if(Nu&&gr)for(var kc=Nu.length,Ki=kc-1;Ki>=0;--Ki)gr.insertBefore(ue(Nu[Ki],!0),_e(Ue))}return W1(Ue),!0}return Ue instanceof S&&!nJ(Ue)||($n==="noscript"||$n==="noembed")&&Ys(/<\/no(script|embed)/i,Ue.innerHTML)?(W1(Ue),!0):(Vh&&Ue.nodeType===3&&(Xt=Ue.textContent,Xt=Fa(Xt,an," "),Xt=Fa(Xt,eo," "),Ue.textContent!==Xt&&(ws(s.removed,{element:Ue.cloneNode()}),Ue.textContent=Xt)),Z1("afterSanitizeElements",Ue,null),!1)},yq=function(Ue,Xt,$n){if(iq&&(Xt==="id"||Xt==="name")&&($n in i||$n in eJ))return!1;if(!(zh&&!Pu[Xt]&&Ys(kt,Xt))){if(!(Hh&&Ys(jt,Xt))){if(!wo[Xt]||Pu[Xt]){if(!(Cq(Ue)&&(hs.tagNameCheck instanceof RegExp&&Ys(hs.tagNameCheck,Ue)||hs.tagNameCheck instanceof Function&&hs.tagNameCheck(Ue))&&(hs.attributeNameCheck instanceof RegExp&&Ys(hs.attributeNameCheck,Xt)||hs.attributeNameCheck instanceof Function&&hs.attributeNameCheck(Xt))||Xt==="is"&&hs.allowCustomizedBuiltInElements&&(hs.tagNameCheck instanceof RegExp&&Ys(hs.tagNameCheck,$n)||hs.tagNameCheck instanceof Function&&hs.tagNameCheck($n))))return!1}else if(!lG[Xt]){if(!Ys(ln,Fa($n,qn,""))){if(!((Xt==="src"||Xt==="xlink:href"||Xt==="href")&&Ue!=="script"&&La($n,"data:")===0&&uq[Ue])){if(!(U1&&!Ys(yn,Fa($n,qn,"")))){if($n)return!1}}}}}}return!0},Cq=function(Ue){return Ue.indexOf("-")>0},wq=function(Ue){var Xt,$n,gr,Nu;Z1("beforeSanitizeAttributes",Ue,null);var kc=Ue.attributes;if(!!kc){var Ki={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:wo};for(Nu=kc.length;Nu--;){Xt=kc[Nu];var VL=Xt,qi=VL.name,Sq=VL.namespaceURI;$n=qi==="value"?Xt.value:Ld(Xt.value),gr=xw(qi);var rJ=$n;if(Ki.attrName=gr,Ki.attrValue=$n,Ki.keepAttr=!0,Ki.forceKeepAttr=void 0,Z1("uponSanitizeAttribute",Ue,Ki),$n=Ki.attrValue,!Ki.forceKeepAttr){if(!Ki.keepAttr){zL(qi,Ue);continue}if(Ys(/\/>/i,$n)){zL(qi,Ue);continue}Vh&&($n=Fa($n,an," "),$n=Fa($n,eo," "));var aJ=xw(Ue.nodeName);if(!yq(aJ,gr,$n)){zL(qi,Ue);continue}if($n!==rJ)try{Sq?Ue.setAttributeNS(Sq,qi,$n):Ue.setAttribute(qi,$n)}catch{zL(qi,Ue)}}}Z1("afterSanitizeAttributes",Ue,null)}},sJ=function Xn(Ue){var Xt,$n=vq(Ue);for(Z1("beforeSanitizeShadowDOM",Ue,null);Xt=$n.nextNode();)Z1("uponSanitizeShadowNode",Xt,null),!bq(Xt)&&(Xt.content instanceof d&&Xn(Xt.content),wq(Xt));Z1("afterSanitizeShadowDOM",Ue,null)};return s.sanitize=function(Xn,Ue){var Xt,$n,gr,Nu,kc;if(uG=!Xn,uG&&(Xn="<!-->"),typeof Xn!="string"&&!ED(Xn)){if(typeof Xn.toString!="function")throw Km("toString is not a function");if(Xn=Xn.toString(),typeof Xn!="string")throw Km("dirty is not a string, aborting")}if(!s.isSupported){if(mn(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Xn=="string")return t.toStaticHTML(Xn);if(ED(Xn))return t.toStaticHTML(Xn.outerHTML)}return Xn}if(wD||dG(Ue),s.removed=[],typeof Xn=="string"&&(xD=!1),xD){if(Xn.nodeName){var Ki=xw(Xn.nodeName);if(!xn[Ki]||Ci[Ki])throw Km("root node is forbidden and cannot be sanitized in-place")}}else if(Xn instanceof v)Xt=pq("<!---->"),$n=Xt.ownerDocument.importNode(Xn,!0),$n.nodeType===1&&$n.nodeName==="BODY"||$n.nodeName==="HTML"?Xt=$n:Xt.appendChild($n);else{if(!N0&&!Vh&&!Ym&&Xn.indexOf("<")===-1)return Le&&FL?Le.createHTML(Xn):Xn;if(Xt=pq(Xn),!Xt)return N0?null:FL?ht:""}Xt&&SD&&W1(Xt.firstChild);for(var VL=vq(xD?Xn:Xt);gr=VL.nextNode();)gr.nodeType===3&&gr===Nu||bq(gr)||(gr.content instanceof d&&sJ(gr.content),wq(gr),Nu=gr);if(Nu=null,xD)return Xn;if(N0){if(IL)for(kc=Gn.call(Xt.ownerDocument);Xt.firstChild;)kc.appendChild(Xt.firstChild);else kc=Xt;return wo.shadowroot&&(kc=Tn.call(a,kc,!0)),kc}var qi=Ym?Xt.outerHTML:Xt.innerHTML;return Ym&&xn["!doctype"]&&Xt.ownerDocument&&Xt.ownerDocument.doctype&&Xt.ownerDocument.doctype.name&&Ys($e,Xt.ownerDocument.doctype.name)&&(qi="<!DOCTYPE "+Xt.ownerDocument.doctype.name+`>
`+qi),Vh&&(qi=Fa(qi,an," "),qi=Fa(qi,eo," ")),Le&&FL?Le.createHTML(qi):qi},s.setConfig=function(Xn){dG(Xn),wD=!0},s.clearConfig=function(){MT=null,wD=!1},s.isValidAttribute=function(Xn,Ue,Xt){MT||dG({});var $n=xw(Xn),gr=xw(Ue);return yq($n,gr,Xt)},s.addHook=function(Xn,Ue){typeof Ue=="function"&&(ro[Xn]=ro[Xn]||[],ws(ro[Xn],Ue))},s.removeHook=function(Xn){if(ro[Xn])return Is(ro[Xn])},s.removeHooks=function(Xn){ro[Xn]&&(ro[Xn]=[])},s.removeAllHooks=function(){ro={}},s}var io=on();const fs=t=>io().sanitize(t),aa=u1.deviceType.isTouch(),la=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),$0=(t,s)=>Ir.parts.close(wa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:gt([Ns.config({})])})),P0=()=>Ir.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),bD=(t,s)=>Ir.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Dh(`<p>${fs(s.translate(t))}</p>`)}]}]}),PL=t=>Ir.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Un=(t,s)=>[Ad.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Ad.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Ve=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return Ir.sketch({lazySink:t.lazySink,onEscape:h=>(t.onEscape(h),O.some(!0)),useTabstopAt:h=>!p0(h),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Dh(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:aa?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:gt([fn.config({}),Bn("dialog-events",t.dialogEvents.concat([Rg(Ic(),(h,v)=>{Id.isBlocked(h)?P():nn.focusIn(h)}),Xe(xv(),(h,v)=>{h.getSystem().broadcastOn([ck],{newFocus:v.event.newFocus})})])),Bn("scroll-lock",[as(()=>{tr(Vr(),d)}),Aa(()=>{bo(Vr(),d)})]),...t.extraBehaviours]),eventOrder:{[ii()]:["dialog-events"],[Sl()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[od()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Zt=t=>wa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:gt([Ns.config({})]),components:[hc("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Co(s,Um)}}),kn=(t,s,a,i)=>{const d=h=>[Hs(i.translate(h.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(h=>({id:h})).getOr({})}},components:[],behaviours:gt([xc.config({channel:`${ik}-${s}`,initialData:t,renderComponents:d})])}},Ws=()=>({dom:Dh('<div class="tox-dialog__draghandle"></div>')}),Ec=(t,s,a,i)=>Ad.sketch({dom:Dh('<div class="tox-dialog__header"></div>'),components:[kn(t,s,O.some(a),i),Ws(),Zt(i)],containerBehaviours:gt([I1.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ba(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),yi=(t,s,a)=>{const i=Ir.parts.title(kn(t,s,O.none(),a)),d=Ir.parts.draghandle(Ws()),h=Ir.parts.close(Zt(a)),v=[i].concat(t.draggable?[d]:[]).concat([h]);return Ad.sketch({dom:Dh('<div class="tox-dialog__header"></div>'),components:v})},kl=(t,s,a)=>yi({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Sw=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Dh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Tl=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=As(t().element,".tox-dialog__header").map(h=>js(h));Ir.setBusy(t(),(h,v)=>Sw(i.message,v,s,d))},onUnblock:()=>{Ir.setIdle(t())}}),yD=(t,s,a,i)=>{const d=(h,v)=>O.some(v);return na(Ve({...t,firstTabstop:1,lazySink:i.shared.getSink,extraBehaviours:[xc.config({channel:`${v0}-${t.id}`,updateState:d,initialData:s}),rk({}),...t.extraBehaviours],onEscape:h=>{Co(h,Um)},dialogEvents:a,eventOrder:{[Lc()]:[xc.name(),Ja.name()],[Sl()]:["scroll-lock",xc.name(),"messages","dialog-events","alloy.base.behaviour"],[od()]:["alloy.base.behaviour","dialog-events","messages",xc.name(),"scroll-lock"]}}))},CD=(t,s={})=>{const a=i=>{const d=Pe(i.items,h=>{const v=xt(s,h.name).getOr(cn(!1));return{...h,storage:v}});return{...i,items:d}};return Pe(t,i=>i.type==="menu"?a(i):i)},NL=t=>po(t,(s,a)=>a.type==="menu"?po(a.items,(d,h)=>(d[h.name]=h.storage,d),s):s,{}),sG=(t,s)=>[Ag(Ic(),o3),t(D2,(a,i,d,h)=>{xu(Xr(h.element)).fold(P,vf),s.onClose(),i.onClose()}),t(Um,(a,i,d,h)=>{i.onCancel(a),Co(h,D2)}),Xe(OA,(a,i)=>s.onUnblock()),Xe(_A,(a,i)=>s.onBlock(i.event))],MX=(t,s)=>{const a=(d,h)=>Xe(d,(v,S)=>{i(v,(x,T)=>{h(t(),x,S.event,v)})}),i=(d,h)=>{xc.getState(d).get().each(v=>{h(v,d)})};return[...sG(a,s),a(Rf,(d,h,v)=>{h.onAction(d,{name:v.name})})]},QK=(t,s,a)=>{const i=(h,v)=>Xe(h,(S,x)=>{d(S,(T,D)=>{v(t(),T,x.event,S)})}),d=(h,v)=>{xc.getState(h).get().each(S=>{v(S.internalDialog,h)})};return[...sG(i,s),i(f0,(h,v)=>v.onSubmit(h)),i(pi,(h,v,S)=>{v.onChange(h,{name:S.name})}),i(Rf,(h,v,S,x)=>{const T=()=>x.getSystem().isConnected()?nn.focusIn(x):void 0,D=Z=>F(Z,"disabled")||Zs(Z,"aria-disabled").exists(J=>J==="true"),$=Xr(x.element),I=xu($);v.onAction(h,{name:S.name,value:S.value}),xu($).fold(T,Z=>{D(Z)||I.exists(J=>Dl(Z,J)&&D(J))?T():a().toOptional().filter(J=>!Dl(J.element,Z)).each(T)})}),i(bP,(h,v,S)=>{v.onTabChange(h,{newTabName:S.name,oldTabName:S.oldName})}),Aa(h=>{const v=t();At.setValue(h,v.getData())})]},BX=(t,s)=>G2(t,t.type,s),$X=(t,s,a)=>dn(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),PX=(t,s)=>{const a=s.map(S=>S.footerButtons).getOr([]),i=Rr(a,S=>S.align==="start"),d=(S,x)=>Ad.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${S}`]},components:Pe(x,T=>T.memento.asSpec())}),h=d("start",i.pass),v=d("end",i.fail);return[h,v]},eq=(t,s,a)=>{const i=(d,h)=>{const v=Pe(h.buttons,x=>{const T=ko(BX(x,a));return{name:x.name,align:x.align,memento:T}}),S=x=>$X(d,v,x);return O.some({lookupByName:S,footerButtons:v})};return{dom:Dh('<div class="tox-dialog__footer"></div>'),components:[],behaviours:gt([xc.config({channel:`${pN}-${s}`,initialData:t,updateState:i,renderComponents:PX})])}},NX=(t,s,a)=>eq(t,s,a),tq=(t,s,a)=>Ir.parts.footer(eq(t,s,a)),nq=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Qn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return g0.getField(i,s).orThunk(()=>t.getFooter().bind(v=>xc.getState(v).get()).bind(v=>v.lookupByName(s)))}else return O.none()},IX=(t,s)=>{const a=t.getRoot();return xc.getState(a).get().map(i=>Eo(Do("data",i.dataValidator,s))).getOr(s)},oq=(t,s,a)=>{const i=J=>{const ue=t.getRoot();ue.getSystem().isConnected()&&J(ue)},Z={getData:()=>{const J=t.getRoot(),ue=J.getSystem().isConnected()?t.getFormWrapper():J,_e=At.getValue(ue),Se=Re(a,be=>be.get());return{..._e,...Se}},setData:J=>{i(ue=>{const _e=Z.getData(),Se=Xo(_e,J),be=IX(t,Se),qe=t.getFormWrapper();At.setValue(qe,be),Dn(a,(Le,ht)=>{Hn(Se,ht)&&Le.set(Se[ht])})})},setEnabled:(J,ue)=>{nq(t,J).each(ue?un.enable:un.disable)},focus:J=>{nq(t,J).each(fn.focus)},block:J=>{if(!U(J))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(ue=>{tn(ue,_A,{message:J})})},unblock:()=>{i(J=>{Co(J,OA)})},showTab:J=>{i(ue=>{const _e=t.getBody();xc.getState(_e).get().exists(be=>be.isTabPanel())&&Qn.getCurrent(_e).each(be=>{Q.showTab(be,J)})})},redial:J=>{i(ue=>{const _e=t.getId(),Se=s(J),be=CD(Se.internalDialog.buttons,a);ue.getSystem().broadcastOn([`${v0}-${_e}`],Se),ue.getSystem().broadcastOn([`${ik}-${_e}`],Se.internalDialog),ue.getSystem().broadcastOn([`${hN}-${_e}`],Se.internalDialog),ue.getSystem().broadcastOn([`${pN}-${_e}`],{...Se.internalDialog,buttons:be}),Z.setData(Se.initialData)})},close:()=>{i(J=>{Co(J,D2)})},toggleFullscreen:t.toggleFullscreen};return Z},FX=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},LX=(t,s,a)=>{const i=$t("dialog"),d=t.internalDialog,h=kl(d.title,i,a),v=_t({body:d.body,initialData:d.initialData},i,a),S=CD(d.buttons),x=NL(S),T=Cn(S.length!==0,tq({buttons:S},i,a)),D=QK(()=>ue,Tl(()=>Z,a.shared.providers,s),a.shared.getSink),$=FX(d.size),Z=yD({id:i,header:h,body:v,footer:T,extraClasses:$,extraBehaviours:[],extraStyles:{}},t,D,a),J=(()=>{const _e=()=>{const be=Ir.getBody(Z);return Qn.getCurrent(be).getOr(be)},Se=()=>{const be="tox-dialog--fullscreen",qe=Te.fromDom(Z.element.dom);qa(qe,be)?(bo(qe,be),Cu(qe,$)):(Zr(qe,$),tr(qe,be))};return{getId:K(i),getRoot:K(Z),getBody:()=>Ir.getBody(Z),getFooter:()=>Ir.getFooter(Z),getFormWrapper:_e,toggleFullscreen:Se}})(),ue=oq(J,s.redial,x);return{dialog:Z,instanceApi:ue}},HX=t=>{switch(t){case"medium":return O.some("tox-dialog--width-md");default:return O.none()}},sq=(t,s,a,i=!1)=>{const d=$t("dialog"),h=$t("dialog-label"),v=$t("dialog-content"),S=t.internalDialog,x=HX(S.size),T=(Le,ht)=>O.some(ht),D=ko(Ec({title:S.title,draggable:!0},d,h,a.shared.providers)),$=ko(Et({body:S.body,initialData:S.initialData},d,v,a,i)),I=CD(S.buttons),Z=NL(I),J=Cn(I.length!==0,ko(NX({buttons:I},d,a))),ue=QK(()=>qe,{onBlock:Le=>{Id.block(Se,(ht,lt)=>{const wt=D.getOpt(Se).map(Mt=>js(Mt.element));return Sw(Le.message,lt,a.shared.providers,wt)})},onUnblock:()=>{Id.unblock(Se)},onClose:()=>s.closeWindow()},a.shared.getSink),_e="tox-dialog-inline",Se=na({dom:{tag:"div",classes:["tox-dialog",_e,...x.toArray()],attributes:{role:"dialog",["aria-labelledby"]:h}},eventOrder:{[Lc()]:[xc.name(),Ja.name()],[ii()]:["execute-on-form"],[Sl()]:["reflecting","execute-on-form"]},behaviours:gt([nn.config({mode:"cyclic",onEscape:Le=>(Co(Le,D2),O.some(!0)),useTabstopAt:Le=>!p0(Le)&&(Ol(Le)!=="button"||Jr(Le,"disabled")!=="disabled"),firstTabstop:1}),xc.config({channel:`${v0}-${d}`,updateState:T,initialData:t}),fn.config({}),Bn("execute-on-form",ue.concat([Rg(Ic(),(Le,ht)=>{nn.focusIn(Le)}),Xe(xv(),(Le,ht)=>{Le.getSystem().broadcastOn([ck],{newFocus:ht.event.newFocus})})])),Id.config({getRoot:()=>O.some(Se)}),wn.config({}),rk({})]),components:[D.asSpec(),$.asSpec(),...J.map(Le=>Le.asSpec()).toArray()]}),be=()=>{const Le="tox-dialog--fullscreen",ht=Te.fromDom(Se.element.dom);ld(ht,[Le])?(Zr(ht,[Le]),Cu(ht,[_e])):(Zr(ht,[_e]),Cu(ht,[Le]))},qe=oq({getId:K(d),getRoot:K(Se),getFooter:()=>J.map(Le=>Le.get(Se)),getBody:()=>$.get(Se),getFormWrapper:()=>{const Le=$.get(Se);return Qn.getCurrent(Le).getOr(Le)},toggleFullscreen:be},s.redial,Z);return{dialog:Se,instanceApi:qe}};var rG=tinymce.util.Tools.resolve("tinymce.util.URI");const zX=t=>{const s=v=>{t.getSystem().isConnected()&&v(t)};return{block:v=>{if(!U(v))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(S=>{tn(S,_A,{message:v})})},unblock:()=>{s(v=>{Co(v,OA)})},close:()=>{s(v=>{Co(v,D2)})},sendMessage:v=>{s(S=>{S.getSystem().broadcastOn([vN],v)})}}},VX=["insertContent","setContent","execCommand","close","block","unblock"],rq=t=>j(t)&&VX.indexOf(t.mceAction)!==-1,UX=t=>!rq(t)&&j(t)&&Hn(t,"mceAction"),WX=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=ne(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},ZX=(t,s,a,i)=>{const d=$t("dialog"),h=kl(t.title,d,i),v=Ht(t),S=t.buttons.bind(be=>be.length===0?O.none():O.some(tq({buttons:be},d,i))),x=MX(()=>Se,Tl(()=>_e,i.shared.providers,s)),T={...t.height.fold(()=>({}),be=>({height:be+"px","max-height":be+"px"})),...t.width.fold(()=>({}),be=>({width:be+"px","max-width":be+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],$=new rG(t.url,{base_uri:new rG(window.location.href)}),I=`${$.protocol}://${$.host}${$.port?":"+$.port:""}`,Z=Qa(),J=[Bn("messages",[as(()=>{const be=el(Te.fromDom(window),"message",qe=>{if($.isSameOrigin(new rG(qe.raw.origin))){const Le=qe.raw.data;rq(Le)?WX(a,Se,Le):UX(Le)&&t.onMessage(Se,Le)}});Z.set(be)}),Aa(Z.clear)]),Ja.config({channels:{[vN]:{onReceive:(be,qe)=>{As(be.element,"iframe").each(Le=>{const ht=Le.dom.contentWindow;ve(ht)&&ht.postMessage(qe,I)})}}}})],_e=yD({id:d,header:h,body:v,footer:S,extraClasses:D,extraBehaviours:J,extraStyles:T},t,x,i),Se=zX(_e);return{dialog:_e,instanceApi:Se}},jX=t=>{const s=t.shared;return{open:(i,d)=>{const h=()=>{Ir.hide(T),d()},v=ko(G2({name:"close-alert",text:"OK",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"cancel",t)),S=P0(),x=$0(h,s.providers),T=na(Ve({lazySink:()=>s.getSink(),header:la(S,x),body:bD(i,s.providers),footer:O.some(PL(Un([],[v.asSpec()]))),onEscape:h,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Xe(Um,h)],eventOrder:{}}));Ir.show(T);const D=v.get(T);fn.focus(D)}}},GX=t=>{const s=t.shared;return{open:(i,d)=>{const h=I=>{Ir.hide(D),d(I)},v=ko(G2({name:"yes",text:"Yes",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"submit",t)),S=G2({name:"no",text:"No",primary:!1,buttonType:O.some("secondary"),align:"end",enabled:!0,icon:O.none()},"cancel",t),x=P0(),T=$0(()=>h(!1),s.providers),D=na(Ve({lazySink:()=>s.getSink(),header:la(x,T),body:bD(i,s.providers),footer:O.some(PL(Un([],[S,v.asSpec()]))),onEscape:()=>h(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Xe(Um,()=>h(!1)),Xe(f0,()=>h(!0))],eventOrder:{}}));Ir.show(D);const $=v.get(D);fn.focus($)}}},aq=(t,s)=>Eo(Do("data",s,t)),lq=t=>O2(t,".tox-alert-dialog")||O2(t,".tox-confirm-dialog"),KX=(t,s,a)=>s&&a?[]:[qs.config({contextual:{lazyContext:()=>O.some(us(Te.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>w1(t,i.element).map(h=>({bounds:Ui(h),optScrollEnv:O.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:ml(h.element).top})})).getOrThunk(()=>({bounds:Ga(),optScrollEnv:O.none()}))})],qX=t=>{const s=t.editor,a=l2(s),i=jX(t.backstages.dialog),d=GX(t.backstages.dialog),h=(J,ue,_e)=>{if(!fe(ue)){if(ue.inline==="toolbar")return T(J,t.backstages.popup.shared.anchors.inlineDialog(),_e,ue);if(ue.inline==="bottom")return D(J,t.backstages.popup.shared.anchors.inlineBottomDialog(),_e,ue);if(ue.inline==="cursor")return T(J,t.backstages.popup.shared.anchors.cursor(),_e,ue)}return x(J,_e)},v=(J,ue)=>S(J,ue),S=(J,ue)=>{const _e=Se=>{const be=ZX(Se,{closeWindow:()=>{Ir.hide(be.dialog),ue(be.instanceApi)}},s,t.backstages.dialog);return Ir.show(be.dialog),be.instanceApi};return D0.openUrl(_e,J)},x=(J,ue)=>{const _e=(Se,be,qe)=>{const Le=be,lt=LX({dataValidator:qe,initialData:Le,internalDialog:Se},{redial:D0.redial,closeWindow:()=>{Ir.hide(lt.dialog),ue(lt.instanceApi)}},t.backstages.dialog);return Ir.show(lt.dialog),lt.instanceApi.setData(Le),lt.instanceApi};return D0.open(_e,J)},T=(J,ue,_e,Se)=>{const be=(qe,Le,ht)=>{const lt=aq(Le,ht),wt=is(),Mt=t.backstages.popup.shared.header.isPositionedAtTop(),Gn={dataValidator:ht,initialData:lt,internalDialog:qe},Yt=()=>wt.on(an=>{Rs.reposition(an),qs.refresh(an)}),Tn=sq(Gn,{redial:D0.redial,closeWindow:()=>{wt.on(Rs.hide),s.off("ResizeEditor",Yt),wt.clear(),_e(Tn.instanceApi)}},t.backstages.popup,Se.ariaAttrs),Sn=na(Rs.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Se.persistent?{event:"doNotDismissYet"}:{},...Mt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gt([Bn("window-manager-inline-events",[Xe(vu(),(an,eo)=>{Co(Tn.dialog,Um)})]),...KX(s,a,Mt)]),isExtraPart:(an,eo)=>lq(eo)}));wt.set(Sn);const ro=()=>{const an=s.inline?Vr():Te.fromDom(s.getContainer()),eo=us(an);return O.some(eo)};return Rs.showWithinBounds(Sn,$i(Tn.dialog),{anchor:ue},ro),(!a||!Mt)&&(qs.refresh(Sn),s.on("ResizeEditor",Yt)),Tn.instanceApi.setData(lt),nn.focusIn(Tn.dialog),Tn.instanceApi};return D0.open(be,J)},D=(J,ue,_e,Se)=>{const be=(qe,Le,ht)=>{const lt=aq(Le,ht),wt=is(),Mt=t.backstages.popup.shared.header.isPositionedAtTop(),Gn={dataValidator:ht,initialData:lt,internalDialog:qe},Yt=()=>wt.on(an=>{Rs.reposition(an),qs.refresh(an)}),Tn=sq(Gn,{redial:D0.redial,closeWindow:()=>{wt.on(Rs.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Yt),wt.clear(),_e(Tn.instanceApi)}},t.backstages.popup,Se.ariaAttrs),Sn=na(Rs.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Se.persistent?{event:"doNotDismissYet"}:{},...Mt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gt([Bn("window-manager-inline-events",[Xe(vu(),(an,eo)=>{Co(Tn.dialog,Um)})]),qs.config({contextual:{lazyContext:()=>O.some(us(Te.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:an=>w1(s,an.element).map(kt=>({bounds:Ui(kt),optScrollEnv:O.some({currentScrollTop:kt.element.dom.scrollTop,scrollElmTop:ml(kt.element).top})})).getOrThunk(()=>({bounds:Ga(),optScrollEnv:O.none()}))})]),isExtraPart:(an,eo)=>lq(eo)}));wt.set(Sn);const ro=()=>t.backstages.popup.shared.getSink().toOptional().bind(an=>{const eo=w1(s,an.element),kt=15,jt=eo.map(ln=>Ui(ln)).getOr(Ga()),yn=us(Te.fromDom(s.getContentAreaContainer())),qn=Y0(yn,jt);return O.some(br(qn.x,qn.y,qn.width,qn.height-kt))});return Rs.showWithinBounds(Sn,$i(Tn.dialog),{anchor:ue},ro),qs.refresh(Sn),s.on("ResizeEditor ScrollWindow ElementScroll",Yt),Tn.instanceApi.setData(lt),nn.focusIn(Tn.dialog),Tn.instanceApi};return D0.open(be,J)};return{open:h,openUrl:v,alert:(J,ue)=>{i.open(J,ue)},close:J=>{J.close()},confirm:(J,ue)=>{d.open(J,ue)}}},YX=t=>{sB(t),kH(t),dZ(t)};var XX=()=>{rp.add("silver",t=>{YX(t);let s=()=>Ga();const{dialogs:a,popups:i,renderUI:d}=tj(t,{getPopupSinkBounds:()=>s()}),h=async()=>{const x=await d();return w1(t,i.getMothership().element).each(D=>{s=()=>Ui(D)}),x};l7.register(t,i.backstage.shared);const v=qX({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),S=()=>d4(t,{backstage:i.backstage},i.getMothership());return{renderUI:h,getWindowManagerImpl:K(v),getNotificationManagerImpl:S}})};XX()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var g=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=Object.getPrototypeOf,_=(F,q,me)=>{var Ne;return me(F,q.prototype)?!0:((Ne=F.constructor)===null||Ne===void 0?void 0:Ne.name)===q.name},R=F=>{const q=typeof F;return F===null?"null":q==="object"&&Array.isArray(F)?"array":q==="object"&&_(F,String,(me,Ne)=>Ne.isPrototypeOf(me))?"string":q},V=F=>q=>R(q)===F,L=F=>q=>typeof q===F,W=F=>q=>F===q,U=(F,q)=>Y(F)&&_(F,q,(me,Ne)=>C(me)===Ne),j=V("string"),Y=V("object"),le=F=>U(F,Object),ce=V("array"),ne=W(null),fe=L("boolean"),te=F=>F==null,ve=F=>!te(F),ie=L("function"),pe=L("number"),Ce=(F,q)=>{if(ce(F)){for(let me=0,Ne=F.length;me<Ne;++me)if(!q(F[me]))return!1;return!0}return!1},P=()=>{};class he{constructor(q,me){this.tag=q,this.value=me}static some(q){return new he(!0,q)}static none(){return he.singletonNone}fold(q,me){return this.tag?me(this.value):q()}isSome(){return this.tag}isNone(){return!this.tag}map(q){return this.tag?he.some(q(this.value)):he.none()}bind(q){return this.tag?q(this.value):he.none()}exists(q){return this.tag&&q(this.value)}forall(q){return!this.tag||q(this.value)}filter(q){return!this.tag||q(this.value)?this:he.none()}getOr(q){return this.tag?this.value:q}or(q){return this.tag?this:q}getOrThunk(q){return this.tag?this.value:q()}orThunk(q){return this.tag?this:q()}getOrDie(q){if(this.tag)return this.value;throw new Error(q!=null?q:"Called getOrDie on None")}static from(q){return ve(q)?he.some(q):he.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(q){this.tag&&q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}he.singletonNone=new he(!1);const Ye=Object.keys,Me=Object.hasOwnProperty,K=(F,q)=>{const me=Ye(F);for(let Ne=0,Lt=me.length;Ne<Lt;Ne++){const Rt=me[Ne],qo=F[Rt];q(qo,Rt)}},Ie=F=>(q,me)=>{F[me]=q},pt=(F,q,me,Ne)=>{K(F,(Lt,Rt)=>{(q(Lt,Rt)?me:Ne)(Lt,Rt)})},ft=(F,q)=>{const me={};return pt(F,q,Ie(me),P),me},Oe=(F,q)=>Me.call(F,q),re=(F,q)=>Oe(F,q)&&F[q]!==void 0&&F[q]!==null,Nt=Array.prototype.push,Je=F=>{const q=[];for(let me=0,Ne=F.length;me<Ne;++me){if(!ce(F[me]))throw new Error("Arr.flatten item "+me+" was not an array, input: "+F);Nt.apply(q,F[me])}return q},ot=(F,q)=>q>=0&&q<F.length?he.some(F[q]):he.none(),O=F=>ot(F,0),Ut=(F,q)=>{for(let me=0;me<F.length;me++){const Ne=q(F[me],me);if(Ne.isSome())return Ne}return he.none()};typeof window<"u"||Function("return this;")();const we=(F,q,me)=>{if(j(me)||fe(me)||pe(me))F.setAttribute(q,me+"");else throw console.error("Invalid call to Attribute.set. Key ",q,":: Value ",me,":: Element ",F),new Error("Attribute value was not simple")},Qe=(F,q,me)=>{we(F.dom,q,me)},it=(F,q)=>{F.dom.removeAttribute(q)},Fe=(F,q)=>{const Ne=(q||document).createElement("div");if(Ne.innerHTML=F,!Ne.hasChildNodes()||Ne.childNodes.length>1){const Lt="HTML does not have a single root node";throw console.error(Lt,F),new Error(Lt)}return Pn(Ne.childNodes[0])},_n=(F,q)=>{const Ne=(q||document).createElement(F);return Pn(Ne)},Kn=(F,q)=>{const Ne=(q||document).createTextNode(F);return Pn(Ne)},Pn=F=>{if(F==null)throw new Error("Node cannot be null or undefined");return{dom:F}},Pe={fromHtml:Fe,fromTag:_n,fromText:Kn,fromDom:Pn,fromPoint:(F,q,me)=>he.from(F.dom.elementFromPoint(q,me)).map(Pn)};var St=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),z=tinymce.util.Tools.resolve("tinymce.util.URI");const Rr=F=>F.length>0,Wn=F=>q=>q.options.get(F),ms=F=>{const q=F.options.register;q("image_dimensions",{processor:"boolean",default:!0}),q("image_advtab",{processor:"boolean",default:!1}),q("image_uploadtab",{processor:"boolean",default:!0}),q("image_prepend_url",{processor:"string",default:""}),q("image_class_list",{processor:"object[]"}),q("image_description",{processor:"boolean",default:!0}),q("image_title",{processor:"boolean",default:!1}),q("image_caption",{processor:"boolean",default:!1}),q("image_list",{processor:me=>{const Ne=me===!1||j(me)||Ce(me,Y)||ie(me);return Ne?{value:me,valid:Ne}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},po=Wn("image_dimensions"),Vu=Wn("image_advtab"),dn=Wn("image_uploadtab"),$o=Wn("image_prepend_url"),pn=Wn("image_class_list"),Ge=Wn("image_description"),cl=Wn("image_title"),ps=Wn("image_caption"),Qt=Wn("image_list"),_l=Wn("a11y_advanced_options"),Vo=Wn("automatic_uploads"),Xi=F=>Rr(F.options.get("images_upload_url")),ns=F=>ve(F.options.get("images_upload_handler")),Js=(F,q)=>Math.max(parseInt(F,10),parseInt(q,10)),Si=F=>new Promise(q=>{const me=document.createElement("img"),Ne=Rt=>{me.onload=me.onerror=null,me.parentNode&&me.parentNode.removeChild(me),q(Rt)};me.onload=()=>{const Rt=Js(me.width,me.clientWidth),qo=Js(me.height,me.clientHeight),Ms={width:Rt,height:qo};Ne(Promise.resolve(Ms))},me.onerror=()=>{Ne(Promise.reject(`Failed to get image dimensions for: ${F}`))};const Lt=me.style;Lt.visibility="hidden",Lt.position="fixed",Lt.bottom=Lt.left="0px",Lt.width=Lt.height="auto",document.body.appendChild(me),me.src=F}),Dr=F=>(F&&(F=F.replace(/px$/,"")),F),ks=F=>(F.length>0&&/^[0-9]+$/.test(F)&&(F+="px"),F),It=F=>{if(F.margin){const q=String(F.margin).split(" ");switch(q.length){case 1:F["margin-top"]=F["margin-top"]||q[0],F["margin-right"]=F["margin-right"]||q[0],F["margin-bottom"]=F["margin-bottom"]||q[0],F["margin-left"]=F["margin-left"]||q[0];break;case 2:F["margin-top"]=F["margin-top"]||q[0],F["margin-right"]=F["margin-right"]||q[1],F["margin-bottom"]=F["margin-bottom"]||q[0],F["margin-left"]=F["margin-left"]||q[1];break;case 3:F["margin-top"]=F["margin-top"]||q[0],F["margin-right"]=F["margin-right"]||q[1],F["margin-bottom"]=F["margin-bottom"]||q[2],F["margin-left"]=F["margin-left"]||q[1];break;case 4:F["margin-top"]=F["margin-top"]||q[0],F["margin-right"]=F["margin-right"]||q[1],F["margin-bottom"]=F["margin-bottom"]||q[2],F["margin-left"]=F["margin-left"]||q[3]}delete F.margin}return F},Zn=(F,q)=>{const me=Qt(F);j(me)?fetch(me).then(Ne=>{Ne.ok&&Ne.json().then(q)}):ie(me)?me(q):q(me)},Dn=(F,q,me)=>{const Ne=()=>{me.onload=me.onerror=null,F.selection&&(F.selection.select(me),F.nodeChanged())};me.onload=()=>{!q.width&&!q.height&&po(F)&&F.dom.setAttribs(me,{width:String(me.clientWidth),height:String(me.clientHeight)}),Ne()},me.onerror=Ne},Re=F=>new Promise((q,me)=>{const Ne=new FileReader;Ne.onload=()=>{q(Ne.result)},Ne.onerror=()=>{var Lt;me((Lt=Ne.error)===null||Lt===void 0?void 0:Lt.message)},Ne.readAsDataURL(F)}),yt=F=>F.nodeName==="IMG"&&(F.hasAttribute("data-mce-object")||F.hasAttribute("data-mce-placeholder")),en=(F,q)=>{const me=F.options.get;return z.isDomSafe(q,"img",{allow_html_data_urls:me("allow_html_data_urls"),allow_script_urls:me("allow_script_urls"),allow_svg_data_urls:me("allow_svg_data_urls")})},hn=St.DOM,vo=F=>F.style.marginLeft&&F.style.marginRight&&F.style.marginLeft===F.style.marginRight?Dr(F.style.marginLeft):"",Ts=F=>F.style.marginTop&&F.style.marginBottom&&F.style.marginTop===F.style.marginBottom?Dr(F.style.marginTop):"",ka=F=>F.style.borderWidth?Dr(F.style.borderWidth):"",Uo=(F,q)=>{var me;return F.hasAttribute(q)&&(me=F.getAttribute(q))!==null&&me!==void 0?me:""},Lr=F=>F.parentNode!==null&&F.parentNode.nodeName==="FIGURE",xt=(F,q,me)=>{me===""||me===null?F.removeAttribute(q):F.setAttribute(q,me)},Hn=F=>{const q=hn.create("figure",{class:"image"});hn.insertAfter(q,F),q.appendChild(F),q.appendChild(hn.create("figcaption",{contentEditable:"true"},"Caption")),q.contentEditable="false"},pr=F=>{const q=F.parentNode;ve(q)&&(hn.insertAfter(F,q),hn.remove(q))},ul=F=>{Lr(F)?pr(F):Hn(F)},Lf=(F,q)=>{const me=F.getAttribute("style"),Ne=q(me!==null?me:"");Ne.length>0?(F.setAttribute("style",Ne),F.setAttribute("data-mce-style",Ne)):F.removeAttribute("style")},su=(F,q)=>(me,Ne,Lt)=>{const Rt=me.style;Rt[Ne]?(Rt[Ne]=ks(Lt),Lf(me,q)):xt(me,Ne,Lt)},os=(F,q)=>F.style[q]?Dr(F.style[q]):Uo(F,q),ru=(F,q)=>{const me=ks(q);F.style.marginLeft=me,F.style.marginRight=me},Uu=(F,q)=>{const me=ks(q);F.style.marginTop=me,F.style.marginBottom=me},Ko=(F,q)=>{const me=ks(q);F.style.borderWidth=me},Cn=(F,q)=>{F.style.borderStyle=q},Ta=F=>{var q;return(q=F.style.borderStyle)!==null&&q!==void 0?q:""},Oc=F=>ve(F)&&F.nodeName==="FIGURE",Qm=F=>F.nodeName==="IMG",eg=F=>hn.getAttrib(F,"alt").length===0&&hn.getAttrib(F,"role")==="presentation",Va=F=>eg(F)?"":Uo(F,"alt"),Hr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Qs=(F,q)=>{var me;const Ne=document.createElement("img");return xt(Ne,"style",q.style),(vo(Ne)||q.hspace!=="")&&ru(Ne,q.hspace),(Ts(Ne)||q.vspace!=="")&&Uu(Ne,q.vspace),(ka(Ne)||q.border!=="")&&Ko(Ne,q.border),(Ta(Ne)||q.borderStyle!=="")&&Cn(Ne,q.borderStyle),F((me=Ne.getAttribute("style"))!==null&&me!==void 0?me:"")},Ji=(F,q)=>{const me=document.createElement("img");if(au(F,{...q,caption:!1},me),dl(me,q.alt,q.isDecorative),q.caption){const Ne=hn.create("figure",{class:"image"});return Ne.appendChild(me),Ne.appendChild(hn.create("figcaption",{contentEditable:"true"},"Caption")),Ne.contentEditable="false",Ne}else return me},Ud=(F,q)=>({src:Uo(q,"src"),alt:Va(q),title:Uo(q,"title"),width:os(q,"width"),height:os(q,"height"),class:Uo(q,"class"),style:F(Uo(q,"style")),caption:Lr(q),hspace:vo(q),vspace:Ts(q),border:ka(q),borderStyle:Ta(q),isDecorative:eg(q)}),Yr=(F,q,me,Ne,Lt)=>{me[Ne]!==q[Ne]&&Lt(F,Ne,String(me[Ne]))},dl=(F,q,me)=>{if(me){hn.setAttrib(F,"role","presentation");const Ne=Pe.fromDom(F);Qe(Ne,"alt","")}else{if(ne(q)){const Ne=Pe.fromDom(F);it(Ne,"alt")}else{const Ne=Pe.fromDom(F);Qe(Ne,"alt",q)}hn.getAttrib(F,"role")==="presentation"&&hn.setAttrib(F,"role","")}},Fs=(F,q,me)=>{(me.alt!==q.alt||me.isDecorative!==q.isDecorative)&&dl(F,me.alt,me.isDecorative)},_a=(F,q)=>(me,Ne,Lt)=>{F(me,Lt),Lf(me,q)},au=(F,q,me)=>{const Ne=Ud(F,me);Yr(me,Ne,q,"caption",(Lt,Rt,qo)=>ul(Lt)),Yr(me,Ne,q,"src",xt),Yr(me,Ne,q,"title",xt),Yr(me,Ne,q,"width",su("width",F)),Yr(me,Ne,q,"height",su("height",F)),Yr(me,Ne,q,"class",xt),Yr(me,Ne,q,"style",_a((Lt,Rt)=>xt(Lt,"style",Rt),F)),Yr(me,Ne,q,"hspace",_a(ru,F)),Yr(me,Ne,q,"vspace",_a(Uu,F)),Yr(me,Ne,q,"border",_a(Ko,F)),Yr(me,Ne,q,"borderStyle",_a(Cn,F)),Fs(me,Ne,q)},Hf=(F,q)=>{const me=F.dom.styles.parse(q),Ne=It(me),Lt=F.dom.styles.parse(F.dom.styles.serialize(Ne));return F.dom.styles.serialize(Lt)},tg=F=>{const q=F.selection.getNode(),me=F.dom.getParent(q,"figure.image");return me?F.dom.select("img",me)[0]:q&&(q.nodeName!=="IMG"||yt(q))?null:q},Qi=(F,q)=>{var me;const Ne=F.dom,Lt=ft(F.schema.getTextBlockElements(),(qo,Ms)=>!F.schema.isValidChild(Ms,"figure")),Rt=Ne.getParent(q.parentNode,qo=>re(Lt,qo.nodeName),F.getBody());return Rt&&(me=Ne.split(Rt,q))!==null&&me!==void 0?me:q},UT=F=>{const q=tg(F);return q?Ud(me=>Hf(F,me),q):Hr()},Te=(F,q)=>{const me=Ji(Lt=>Hf(F,Lt),q);F.dom.setAttrib(me,"data-mce-id","__mcenew"),F.focus(),F.selection.setContent(me.outerHTML);const Ne=F.dom.select('*[data-mce-id="__mcenew"]')[0];if(F.dom.setAttrib(Ne,"data-mce-id",null),Oc(Ne)){const Lt=Qi(F,Ne);F.selection.select(Lt)}else F.selection.select(Ne)},Ua=(F,q)=>{F.dom.setAttrib(q,"src",q.getAttribute("src"))},Wd=(F,q)=>{if(q){const me=F.dom.is(q.parentNode,"figure.image")?q.parentNode:q;F.dom.remove(me),F.focus(),F.nodeChanged(),F.dom.isEmpty(F.getBody())&&(F.setContent(""),F.selection.setCursorLocation())}},K1=(F,q)=>{const me=tg(F);if(me)if(au(Ne=>Hf(F,Ne),q,me),Ua(F,me),Oc(me.parentNode)){const Ne=me.parentNode;Qi(F,Ne),F.selection.select(me.parentNode)}else F.selection.select(me),Dn(F,q,me)},Kh=(F,q)=>{const me=q.src;return{...q,src:en(F,me)?me:""}},ss=(F,q)=>{const me=tg(F);if(me){const Lt={...Ud(qo=>Hf(F,qo),me),...q},Rt=Kh(F,Lt);Lt.src?K1(F,Rt):Wd(F,me)}else q.src&&Te(F,{...Hr(),...q})},Wu=(F=>(...q)=>{if(q.length===0)throw new Error("Can't merge zero objects");const me={};for(let Ne=0;Ne<q.length;Ne++){const Lt=q[Ne];for(const Rt in Lt)Oe(Lt,Rt)&&(me[Rt]=F(me[Rt],Lt[Rt]))}return me})((F,q)=>le(F)&&le(q)?Wu(F,q):q);var Zd=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Mr=tinymce.util.Tools.resolve("tinymce.util.Tools");const or=F=>j(F.value)?F.value:"",Ac=F=>j(F.text)?F.text:j(F.title)?F.title:"",Ol=(F,q)=>{const me=[];return Mr.each(F,Ne=>{const Lt=Ac(Ne);if(Ne.menu!==void 0){const Rt=Ol(Ne.menu,q);me.push({text:Lt,items:Rt})}else{const Rt=q(Ne);me.push({text:Lt,value:Rt})}}),me},lu=(F=or)=>q=>q?he.from(q).map(me=>Ol(me,F)):he.none(),zf=F=>lu(or)(F),jd=F=>Oe(F,"items"),Oo=(F,q)=>Ut(F,me=>jd(me)?Oo(me.items,q):me.value===q?he.some(me):he.none()),Gd={sanitizer:lu,sanitize:zf,findEntry:(F,q)=>F.bind(me=>Oo(me,q))},iu={makeTab:F=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Rl=F=>{const q=Gd.sanitizer(cs=>F.convertURL(cs.value||cs.url||"","src")),me=new Promise(cs=>{Zn(F,js=>{cs(q(js).map(Dc=>Je([[{text:"None",value:""}],Dc])))})}),Ne=Gd.sanitize(pn(F)),Lt=Vu(F),Rt=dn(F),qo=Xi(F),Ms=ns(F),et=UT(F),ua=Ge(F),Yo=cl(F),vr=po(F),Q1=ps(F),so=_l(F),Gu=Vo(F),qd=he.some($o(F)).filter(cs=>j(cs)&&cs.length>0);return me.then(cs=>({image:et,imageList:cs,classList:Ne,hasAdvTab:Lt,hasUploadTab:Rt,hasUploadUrl:qo,hasUploadHandler:Ms,hasDescription:ua,hasImageTitle:Yo,hasDimensions:vr,hasImageCaption:Q1,prependURL:qd,hasAccessibilityOptions:so,automaticUploads:Gu}))},_s=F=>{const q={name:"src",type:"urlinput",filetype:"image",label:"Source"},me=F.imageList.map(Yo=>({name:"images",type:"listbox",label:"Image list",items:Yo})),Ne={name:"alt",type:"input",label:"Alternative description",enabled:!(F.hasAccessibilityOptions&&F.image.isDecorative)},Lt={name:"title",type:"input",label:"Image title"},Rt={name:"dimensions",type:"sizeinput"},qo={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Ms=F.classList.map(Yo=>({name:"classes",type:"listbox",label:"Class",items:Yo})),et={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},ua=Yo=>Yo?{type:"grid",columns:2}:{type:"panel"};return Je([[q],me.toArray(),F.hasAccessibilityOptions&&F.hasDescription?[qo]:[],F.hasDescription?[Ne]:[],F.hasImageTitle?[Lt]:[],F.hasDimensions?[Rt]:[],[{...ua(F.classList.isSome()&&F.hasImageCaption),items:Je([Ms.toArray(),F.hasImageCaption?[et]:[]])}]])},qh={makeTab:F=>({title:"General",name:"general",items:_s(F)}),makeItems:_s},Dl={makeTab:F=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},fl=F=>({prevImage:Gd.findEntry(F.imageList,F.image.src),prevAlt:F.image.alt,open:!0}),Br=F=>({src:{value:F.src,meta:{}},images:F.src,alt:F.alt,title:F.title,dimensions:{width:F.width,height:F.height},classes:F.class,caption:F.caption,style:F.style,vspace:F.vspace,border:F.border,hspace:F.hspace,borderstyle:F.borderStyle,fileinput:[],isDecorative:F.isDecorative}),Vf=(F,q)=>({src:F.src.value,alt:(F.alt===null||F.alt.length===0)&&q?null:F.alt,title:F.title,width:F.dimensions.width,height:F.dimensions.height,class:F.classes,style:F.style,caption:F.caption,hspace:F.hspace,vspace:F.vspace,border:F.border,borderStyle:F.borderstyle,isDecorative:F.isDecorative}),Zu=(F,q)=>/^(?:[a-zA-Z]+:)?\/\//.test(q)?he.none():F.prependURL.bind(me=>q.substring(0,me.length)!==me?he.some(me+q):he.none()),xi=(F,q)=>{const me=q.getData();Zu(F,me.src.value).each(Ne=>{q.setData({src:{value:Ne,meta:me.src.meta}})})},Wa=(F,q,me)=>{F.hasDescription&&j(me.alt)&&(q.alt=me.alt),F.hasAccessibilityOptions&&(q.isDecorative=me.isDecorative||q.isDecorative||!1),F.hasImageTitle&&j(me.title)&&(q.title=me.title),F.hasDimensions&&(j(me.width)&&(q.dimensions.width=me.width),j(me.height)&&(q.dimensions.height=me.height)),j(me.class)&&Gd.findEntry(F.classList,me.class).each(Ne=>{q.classes=Ne.value}),F.hasImageCaption&&fe(me.caption)&&(q.caption=me.caption),F.hasAdvTab&&(j(me.style)&&(q.style=me.style),j(me.vspace)&&(q.vspace=me.vspace),j(me.border)&&(q.border=me.border),j(me.hspace)&&(q.hspace=me.hspace),j(me.borderstyle)&&(q.borderstyle=me.borderstyle))},Yh=(F,q)=>{const me=q.getData(),Ne=me.src.meta;if(Ne!==void 0){const Lt=Wu({},me);Wa(F,Lt,Ne),q.setData(Lt)}},Xh=(F,q,me,Ne)=>{const Lt=Ne.getData(),Rt=Lt.src.value,qo=Lt.src.meta||{};!qo.width&&!qo.height&&q.hasDimensions&&(Rr(Rt)?F.imageSize(Rt).then(Ms=>{me.open&&Ne.setData({dimensions:Ms})}).catch(Ms=>console.error(Ms)):Ne.setData({dimensions:{width:"",height:""}}))},Y1=(F,q,me)=>{const Ne=me.getData(),Lt=Gd.findEntry(F.imageList,Ne.src.value);q.prevImage=Lt,me.setData({images:Lt.map(Rt=>Rt.value).getOr("")})},Ml=(F,q,me,Ne)=>{xi(q,Ne),Yh(q,Ne),Xh(F,q,me,Ne),Y1(q,me,Ne)},cu=(F,q,me,Ne)=>{const Lt=Ne.getData(),Rt=Gd.findEntry(q.imageList,Lt.images);Rt.each(qo=>{Lt.alt===""||me.prevImage.map(et=>et.text===Lt.alt).getOr(!1)?qo.value===""?Ne.setData({src:qo,alt:me.prevAlt}):Ne.setData({src:qo,alt:qo.text}):Ne.setData({src:qo})}),me.prevImage=Rt,Ml(F,q,me,Ne)},Jh=(F,q,me,Ne)=>{const Lt=Ne.getData();Ne.block("Uploading image"),O(Lt.fileinput).fold(()=>{Ne.unblock()},Rt=>{const qo=URL.createObjectURL(Rt),Ms=()=>{Ne.unblock(),URL.revokeObjectURL(qo)},et=ua=>{Ne.setData({src:{value:ua,meta:{}}}),Ne.showTab("general"),Ml(F,q,me,Ne)};Re(Rt).then(ua=>{const Yo=F.createBlobCache(Rt,qo,ua);q.automaticUploads?F.uploadImage(Yo).then(vr=>{et(vr.url),Ms()}).catch(vr=>{Ms(),F.alertErr(vr)}):(F.addToBlobCache(Yo),et(Yo.blobUri()),Ne.unblock())})})},Qh=(F,q,me)=>(Ne,Lt)=>{Lt.name==="src"?Ml(F,q,me,Ne):Lt.name==="images"?cu(F,q,me,Ne):Lt.name==="alt"?me.prevAlt=Ne.getData().alt:Lt.name==="fileinput"?Jh(F,q,me,Ne):Lt.name==="isDecorative"&&Ne.setEnabled("alt",!Ne.getData().isDecorative)},ng=F=>()=>{F.open=!1},og=F=>F.hasAdvTab||F.hasUploadUrl||F.hasUploadHandler?{type:"tabpanel",tabs:Je([[qh.makeTab(F)],F.hasAdvTab?[iu.makeTab(F)]:[],F.hasUploadTab&&(F.hasUploadUrl||F.hasUploadHandler)?[Dl.makeTab(F)]:[]])}:{type:"panel",items:qh.makeItems(F)},X1=(F,q,me)=>Ne=>{const Lt=Wu(Br(q.image),Ne.getData()),Rt={...Lt,style:Qs(me.normalizeCss,Vf(Lt,!1))};F.execCommand("mceUpdateImage",!1,Vf(Rt,q.hasAccessibilityOptions)),F.editorUpload.uploadImagesAuto(),Ne.close()},sg=F=>q=>en(F,q)?Si(F.documentBaseURI.toAbsolute(q)).then(me=>({width:String(me.width),height:String(me.height)})):Promise.resolve({width:"",height:""}),Xr=F=>(q,me,Ne)=>{var Lt;return F.editorUpload.blobCache.create({blob:q,blobUri:me,name:(Lt=q.name)===null||Lt===void 0?void 0:Lt.replace(/\.[^\.]+$/,""),filename:q.name,base64:Ne.split(",")[1]})},zr=F=>q=>{F.editorUpload.blobCache.add(q)},ju=F=>q=>{F.windowManager.alert(q)},ep=F=>q=>Hf(F,q),J1=F=>q=>F.dom.parseStyle(q),ec=F=>(q,me)=>F.dom.serializeStyle(q,me),U0=F=>q=>Zd(F).upload([q],!1).then(me=>{var Ne;return me.length===0?Promise.reject("Failed to upload image"):me[0].status===!1?Promise.reject((Ne=me[0].error)===null||Ne===void 0?void 0:Ne.message):me[0]}),ca=F=>{const q={imageSize:sg(F),addToBlobCache:zr(F),createBlobCache:Xr(F),alertErr:ju(F),normalizeCss:ep(F),parseStyle:J1(F),serializeStyle:ec(F),uploadImage:U0(F)};return{open:()=>{Rl(F).then(Ne=>{const Lt=fl(Ne);return{title:"Insert/Edit Image",size:"normal",body:og(Ne),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Br(Ne.image),onSubmit:X1(F,Ne,q),onChange:Qh(q,Ne,Lt),onClose:ng(Lt)}}).then(F.windowManager.open)}}},Vr=F=>{F.addCommand("mceImage",ca(F).open),F.addCommand("mceUpdateImage",(q,me)=>{F.undoManager.transact(()=>ss(F,me))})},tc=F=>{const q=F.attr("class");return ve(q)&&/\bimage\b/.test(q)},Rc=F=>q=>{let me=q.length;const Ne=Lt=>{Lt.attr("contenteditable",F?"true":null)};for(;me--;){const Lt=q[me];tc(Lt)&&(Lt.attr("contenteditable",F?"false":null),Mr.each(Lt.getAll("figcaption"),Ne))}},In=F=>{F.on("PreInit",()=>{F.parser.addNodeFilter("figure",Rc(!0)),F.serializer.addNodeFilter("figure",Rc(!1))})},co=F=>q=>{const me=()=>{q.setEnabled(F.selection.isEditable())};return F.on("NodeChange",me),me(),()=>{F.off("NodeChange",me)}},Jr=F=>{F.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ca(F).open,onSetup:q=>{q.setActive(ve(tg(F)));const me=F.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",q.setActive).unbind,Ne=co(F)(q);return()=>{me(),Ne()}}}),F.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ca(F).open,onSetup:co(F)}),F.ui.registry.addContextMenu("image",{update:q=>F.selection.isEditable()&&(Oc(q)||Qm(q)&&!yt(q))?["image"]:[]})};var Zs=()=>{g.add("image",F=>{ms(F),In(F),Jr(F),Vr(F)})};Zs()})();const Kre={__name:"GoodsEdit",props:{id:{type:Number}},emits:["success"],setup(g,{expose:C,emit:_}){const R=g,V=_,L=Pw({id:R.id,name:"",category_id:"",price:"",picture:"",album:[],stock:"",spec:"",description:""}),W=nt(),U=nt([]),j=nt([]),Y=nt(),le=JJ(),{token:ce}=qJ(),ne={jwt:ce};_c(()=>{te()}),C({resetForm:Nt=>{L.id=Nt,Ce()}});const te=async()=>{if(L.id){const Je=await YJ({id:L.id});if(Je.picture!==""){const ot=Je.picture.substring(Je.picture.lastIndexOf("/")+1);ot&&(j.value=[{name:ot,url:Je.picture}])}Ie.value=Je.album.map(ot=>({name:ot.picture.substring(ot.picture.lastIndexOf("/")+1),url:ot.picture})),Je.album=Je.album.map(ot=>ot.picture.replace(/^https?:\/\/.*?\//,"")),Object.assign(L,Je)}const Nt=await getCategoryList();U.value=ve(Nt)},ve=Nt=>{const Je=[],ot={};for(const O of Nt)ot[O.id]={...O,children:[]};for(const O of Nt){const Ut=ot[O.id];O.pid===0?Je.push(Ut):ot[O.pid].children.push(Ut)}return Je},ie=async()=>{const Nt={name:L.name,category_id:L.category_id,price:L.price,picture:L.picture,album:L.album,stock:L.stock,spec:L.spec,description:L.description};await QJ(Nt)&&V("success")},pe=async()=>{await eQ(L)&&V("success")},Ce=()=>{W.value.resetFields(),L.picture="",Y.value.clearFiles(),L.album=[],Ye.value.clearFiles(),te()},P=Nt=>{Y.value.clearFiles(),Y.value.handleStart(Nt[0]),Y.value.submit()},he=Nt=>{const{errno:Je,errmsg:ot,data:O}=Nt;Je!==0?notification({message:ot,type:"error"}):(ot!==""&&notification({message:ot,type:"success"}),L.picture=O.savepath)},Ye=nt(),Me=nt(""),K=nt(!1),Ie=nt([]),pt=Nt=>{const{errno:Je,errmsg:ot,data:O}=Nt;Je!==0?notification({message:ot,type:"error"}):(ot!==""&&notification({message:ot,type:"success"}),L.album.push(O.savepath))},ft=(Nt,Je)=>{L.album=[],Je.forEach(ot=>{L.album.push(ot.url.replace(/^https?:\/\/.*?\//,""))})},Oe=Nt=>{Me.value=Nt.url,K.value=!0};let re={width:"100%",skin_url:"/tinymce/skins/ui/oxide",content_css:"/tinymce/skins/content/default/content.css",language_url:"/tinymce/langs/zh-Hans.js",language:"zh-Hans",menubar:!1,statusbar:!1,toolbar:"bold underline italic strikethrough image undo redo",plugins:"image"};return(Nt,Je)=>{const ot=f6,O=iQ,Ut=gX,we=qne,Qe=mX,it=FG,Fe=bre,_n=ia,Kn=uX,Pn=cX,Jn=cQ;return rt(),zn(Jn,{ref_key:"formRef",ref:W,model:L,"label-width":"120px"},{default:zt(()=>[qt(O,{label:"\u5546\u54C1\u540D\u79F0",prop:"name",style:{width:"92%"}},{default:zt(()=>[qt(ot,{modelValue:L.name,"onUpdate:modelValue":Je[0]||(Je[0]=Pe=>L.name=Pe),placeholder:"\u8BF7\u586B\u5199\u5546\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1}),qt(O,{label:"\u5206\u7C7B\u540D\u79F0",prop:"category_id"},{default:zt(()=>[qt(Qe,{modelValue:L.category_id,"onUpdate:modelValue":Je[1]||(Je[1]=Pe=>L.category_id=Pe),placeholder:"\u8BF7\u9009\u62E9\u4E8C\u7EA7\u5206\u7C7B\u540D\u79F0"},{default:zt(()=>[(rt(!0),sn(Tc,null,Zh(U.value,Pe=>(rt(),zn(we,{key:Pe.id,label:Pe.name},{default:zt(()=>[(rt(!0),sn(Tc,null,Zh(Pe.children,St=>(rt(),zn(Ut,{key:St.id,label:St.name,value:St.id},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),qt(O,{label:"\u5546\u54C1\u4EF7\u683C",prop:"price",style:{width:"92%"}},{default:zt(()=>[qt(ot,{modelValue:L.price,"onUpdate:modelValue":Je[2]||(Je[2]=Pe=>L.price=Pe),placeholder:"\u8BF7\u586B\u5199\u5546\u54C1\u4EF7\u683C"},null,8,["modelValue"])]),_:1}),qt(O,{label:"\u5546\u54C1\u56FE\u7247"},{default:zt(()=>[qt(Fe,{ref_key:"uploadRef",ref:Y,"file-list":j.value,"onUpdate:fileList":Je[3]||(Je[3]=Pe=>j.value=Pe),class:"upload-demo",action:ae(le),headers:ne,data:{type:"goods_picture"},limit:1,"on-exceed":P,"on-success":he},{trigger:zt(()=>[qt(it,{type:"primary",style:{"text-align":"left"}},{default:zt(()=>Je[11]||(Je[11]=[Hu("\u9009\u62E9\u56FE\u7247")])),_:1})]),tip:zt(()=>Je[12]||(Je[12]=[Rn("div",{class:"el-upload__tip"}," \u56FE\u7247\u6587\u4EF6\u5927\u5C0F\u4E0D\u8D85\u8FC7 500KB ",-1)])),_:1},8,["file-list","action"])]),_:1}),qt(O,{label:"\u56FE\u7247\u76F8\u518C",prop:"album"},{default:zt(()=>[qt(Fe,{ref_key:"albumUploadRef",ref:Ye,class:"upload-demo","list-type":"picture-card","file-list":Ie.value,"onUpdate:fileList":Je[4]||(Je[4]=Pe=>Ie.value=Pe),action:ae(le),data:{type:"goods_album"},headers:ne,"on-preview":Oe,"on-remove":ft,"on-success":pt,multiple:!0},{default:zt(()=>[qt(_n,null,{default:zt(()=>[qt(ae(XJ))]),_:1})]),_:1},8,["file-list","action"]),qt(Pn,{modelValue:K.value,"onUpdate:modelValue":Je[5]||(Je[5]=Pe=>K.value=Pe),"align-center":"",width:"30%"},{default:zt(()=>[qt(Kn,{src:Me.value},null,8,["src"])]),_:1},8,["modelValue"])]),_:1}),qt(O,{label:"\u5546\u54C1\u5E93\u5B58",prop:"stock",style:{width:"92%"}},{default:zt(()=>[qt(ot,{modelValue:L.stock,"onUpdate:modelValue":Je[6]||(Je[6]=Pe=>L.stock=Pe),placeholder:"\u8BF7\u586B\u5199\u5E93\u5B58\u6570\u91CF"},null,8,["modelValue"])]),_:1}),qt(O,{label:"\u5546\u54C1\u89C4\u683C",prop:"spec",style:{width:"92%"}},{default:zt(()=>[qt(ot,{modelValue:L.spec,"onUpdate:modelValue":Je[7]||(Je[7]=Pe=>L.spec=Pe),placeholder:"\u8BF7\u586B\u5199\u5546\u54C1\u89C4\u683C"},null,8,["modelValue"])]),_:1}),qt(O,{label:"\u5546\u54C1\u7B80\u4ECB",prop:"description",style:{width:"92%"},class:"desc"},{default:zt(()=>[qt(ae(jre),{init:ae(re),modelValue:L.description,"onUpdate:modelValue":Je[8]||(Je[8]=Pe=>L.description=Pe)},null,8,["init","modelValue"])]),_:1}),qt(O,null,{default:zt(()=>[L.id?(rt(),zn(it,{key:0,type:"primary",onClick:Je[9]||(Je[9]=Pe=>pe())},{default:zt(()=>Je[13]||(Je[13]=[Hu("\u4FEE\u6539 ")])),_:1})):(rt(),zn(it,{key:1,type:"primary",onClick:Je[10]||(Je[10]=Pe=>ie())},{default:zt(()=>Je[14]||(Je[14]=[Hu("\u65B0\u589E")])),_:1})),qt(it,{onClick:Ce},{default:zt(()=>Je[15]||(Je[15]=[Hu("\u91CD\u7F6E")])),_:1})]),_:1})]),_:1},8,["model"])}}},qre=KJ(Kre,[["__scopeId","data-v-91848524"]]),eae={__name:"Goods",setup(g){const C=nt([]),_=nt(1),R=nt(10),V=nt(0),L=nt(),W=nt(!1),U=nt();_c(()=>{j()});const j=async()=>{const ie={page:_.value,pagesize:R.value},pe=await tQ(ie);C.value=pe.list.map(Ce=>(Ce.description=Y(Ce.description),Ce)),V.value=pe.total},Y=ie=>ie.replace(/<[^>]+>/g,""),le=()=>{U.value&&U.value.resetForm(0),L.value=0,W.value=!0},ce=ie=>{U.value&&U.value.resetForm(ie.id),L.value=ie.id,W.value=!0},ne=ie=>{lY.confirm("\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5546\u54C1\u5417\uFF1F",{closeOnClickModal:!1,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(async()=>{await nQ({id:ie.id})&&j()}).catch(()=>{})},fe=ie=>{_.value=ie,j()},te=()=>{j(),W.value=!1},ve=()=>{lY.confirm("\u786E\u5B9A\u5173\u95ED\u5BF9\u8BDD\u6846\u5417\uFF1F",{showClose:!1,closeOnClickModal:!1,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{W.value=!1,setTimeout(()=>{U.value.resetForm()},500)}).catch(()=>{})};return(ie,pe)=>{const Ce=FG,P=cX,he=Hse,Ye=uX,Me=Lse,K=xoe;return rt(),sn("div",null,[qt(Ce,{type:"primary",style:{"margin-bottom":"10px"},onClick:le},{default:zt(()=>pe[2]||(pe[2]=[Hu("\u65B0\u589E\u5546\u54C1")])),_:1}),qt(P,{modelValue:W.value,"onUpdate:modelValue":pe[0]||(pe[0]=Ie=>W.value=Ie),title:L.value?"\u4FEE\u6539\u5546\u54C1":"\u65B0\u589E\u5546\u54C1","before-close":ve},{default:zt(()=>[qt(qre,{ref_key:"goodsForm",ref:U,id:L.value,onSuccess:te},null,8,["id"])]),_:1},8,["modelValue","title"]),qt(Me,{data:C.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:"","default-expand-all":""},{default:zt(()=>[qt(he,{prop:"id",label:"\u5546\u54C1\u7F16\u53F7",width:"100"}),qt(he,{prop:"name",label:"\u5546\u54C1\u540D\u79F0",width:"260"}),qt(he,{prop:"price",label:"\u5546\u54C1\u4EF7\u683C",width:"100"}),qt(he,{prop:"stock",label:"\u5546\u54C1\u5E93\u5B58",width:"100"}),qt(he,{prop:"description",label:"\u5546\u54C1\u7B80\u4ECB"}),qt(he,{prop:"picture",label:"\u5546\u54C1\u56FE\u7247",width:"120"},{default:zt(({row:Ie})=>[Ie.picture!=""?(rt(),zn(Ye,{key:0,src:Ie.picture,fit:"contain",style:{display:"flex","align-items":"center",height:"60px"}},null,8,["src"])):An("",!0)]),_:1}),qt(he,{fixed:"right",label:"\u64CD\u4F5C",width:"200"},{default:zt(({row:Ie})=>[qt(Ce,{type:"warning",onClick:pt=>ce(Ie)},{default:zt(()=>pe[3]||(pe[3]=[Hu("\u7F16\u8F91")])),_:2},1032,["onClick"]),qt(Ce,{type:"danger",onClick:pt=>ne(Ie)},{default:zt(()=>pe[4]||(pe[4]=[Hu("\u5220\u9664")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),qt(K,{"current-page":_.value,"onUpdate:currentPage":pe[1]||(pe[1]=Ie=>_.value=Ie),background:"",layout:"prev, pager, next",total:V.value,"page-size":R.value,onCurrentChange:fe,style:{"margin-bottom":"50px"}},null,8,["current-page","total","page-size"])])}}};export{eae as default};
